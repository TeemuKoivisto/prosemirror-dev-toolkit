import t from"os";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function r(){}function i(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function s(){return Object.create(null)}function a(t){t.forEach(o)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,...e){if(null==t)return r;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function f(t){let e;return u(t,(t=>e=t))(),e}function h(t,e,n){t.$$.on_destroy.push(u(e,n))}function p(t,e,n,r){if(t){const i=d(t,e,n,r);return t[0](i)}}function d(t,e,n,r){return t[1]&&r?i(n.ctx.slice(),t[1](r(e))):n.ctx}function g(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function v(t,e,n,r,i,o){if(i){const s=d(e,n,r,o);t.p(s,i)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function y(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function b(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function x(t){return null==t?"":t}function w(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode.removeChild(t)}function _(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function j(){return M(" ")}function S(){return M("")}function E(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:T(t,r,e[r])}function N(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function R(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n){t.classList[n?"add":"remove"](e)}let D;function P(t){D=t}function z(){if(!D)throw new Error("Function called outside component initialization");return D}function B(t){z().$$.on_mount.push(t)}function F(t,e){z().$$.context.set(t,e)}function q(t){return z().$$.context.get(t)}function L(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const U=[],G=[],J=[],V=[],K=Promise.resolve();let H=!1;function W(t){J.push(t)}let Y=!1;const X=new Set;function Q(){if(!Y){Y=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];P(e),Z(e.$$)}for(P(null),U.length=0;G.length;)G.pop()();for(let t=0;t<J.length;t+=1){const e=J[t];X.has(e)||(X.add(e),e())}J.length=0}while(U.length);for(;V.length;)V.pop()();H=!1,Y=!1,X.clear()}}function Z(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function rt(){et.r||a(et.c),et=et.p}function it(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function st(t){t&&t.c()}function at(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:c,after_update:u}=t.$$;i&&i.m(e,n),r||W((()=>{const e=s.map(o).filter(l);c?c.push(...e):a(e),t.$$.on_mount=[]})),u.forEach(W)}function lt(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){-1===t.$$.dirty[0]&&(U.push(t),H||(H=!0,K.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(t,e,n,i,o,l,c,u=[-1]){const f=D;P(t);const h=t.$$={fragment:null,ctx:null,props:l,update:r,not_equal:o,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:e.context||[]),callbacks:s(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};c&&c(h.root);let p=!1;if(h.ctx=n?n(t,e.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&o(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),p&&ct(t,e)),n})):[],h.update(),p=!0,a(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(k)}else h.fragment&&h.fragment.c();e.intro&&it(t.$$.fragment),at(t,e.target,e.anchor,e.customElement),Q()}P(f)}class ft{$destroy(){lt(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}function pt(t){let e,n,i,o,s,a,l,c,u,f,h,p,d,g,v,m,y,b,_,j,S,A,R,I;return{c(){e=C("button"),n=O("svg"),i=O("title"),o=M("prosemirror"),s=O("desc"),a=M("Created using Figma"),l=O("use"),c=O("use"),u=O("use"),f=O("use"),h=O("use"),p=O("use"),d=O("use"),g=O("defs"),v=O("path"),m=O("path"),y=O("path"),b=O("path"),_=O("path"),j=O("path"),S=O("path"),N(l,"xlink:href","#a"),T(l,"transform","matrix(2 0 0 2 118 116)"),T(l,"fill","#FFF"),N(c,"xlink:href","#b"),T(c,"transform","rotate(16 59.054 420.192) scale(2)"),T(c,"fill","#FFF"),N(u,"xlink:href","#c"),T(u,"transform","matrix(2 0 0 2 154.024 141.58)"),T(u,"fill","#363755"),N(f,"xlink:href","#d"),T(f,"transform","matrix(2 0 0 2 220 334.8)"),T(f,"fill","#FFF"),N(h,"xlink:href","#e"),T(h,"transform","matrix(2 0 0 2 218.826 262.052)"),T(h,"fill","#363755"),N(p,"xlink:href","#f"),T(p,"transform","matrix(2 0 0 2 197.108 184.998)"),T(p,"fill","#FFF"),N(d,"xlink:href","#g"),T(d,"transform","matrix(2 0 0 2 221.8 216)"),T(d,"fill","#363755"),T(v,"id","a"),T(v,"d","M73.5 0C32.859 0 0 32.859 0 73.5S32.859 147 73.5 147 147 114.141 147 73.5 114.069 0 73.5\n        0z"),T(m,"id","b"),T(m,"d","M193.601 107.116c0-13.376 8.238-23.91\n        20.619-31.153-2.244-7.447-5.19-14.6-8.824-21.32-13.886\n        3.633-25.12-1.799-34.568-11.26-9.449-9.437-12.344-20.672-8.709-34.571A111.362 111.362 0 0 0\n        140.799 0c-7.243 12.37-20.339 20.594-33.689 20.594-13.363\n        0-26.446-8.225-33.701-20.594A110.888 110.888 0 0 0 52.1 8.812c3.634 13.9.753 25.134-8.721\n        34.57-9.436 9.462-20.67 14.894-34.569 11.26A112.178 112.178 0 0 0 0 75.963c12.369 7.243\n        20.593 17.777 20.593 31.153 0 13.352-8.224 26.448-20.593 33.704a113.338 113.338 0 0 0 8.811\n        21.321c13.899-3.634 25.133-.752 34.569 8.697 9.448 9.462 12.355 20.696 8.721 34.57a112.653\n        112.653 0 0 0 21.32 8.837c7.243-12.407 20.338-20.619 33.702-20.619 13.35 0 26.446 8.225\n        33.701 20.619a114.22 114.22 0 0 0 21.32-8.837c-3.634-13.874-.752-25.108 8.709-34.57\n        9.449-9.437 20.683-14.869 34.569-11.26a112.343 112.343 0 0 0\n        8.823-21.321c-12.406-7.256-20.644-17.789-20.644-31.141zm-86.491 46.57c-25.732\n        0-46.58-20.849-46.58-46.57 0-25.733 20.86-46.595 46.58-46.595 25.732 0 46.567 20.875 46.567\n        46.595 0 25.734-20.835 46.57-46.567 46.57z"),T(y,"id","c"),T(y,"d","M98.088 49.91c-6.9 83.9 10.8 103.401 10.8 103.401s-55.1\n        5.499-82.7-13.401c-30.5-20.9-26-67.5-25.9-94.6.1-28.4 25.6-45.8 49.9-45.3 29.1.5 50.2 21.6\n        47.9 49.9z"),T(b,"id","d"),T(b,"d","M.1.1c12.2 33.3 22.5 42.7 40 55.2 25.3 18 36.6 17.5 76.3 41C78.1 60.3 30.8 45.7 0 0l.1.1z"),T(_,"id","e"),T(_,"d","M.687 36.474c3 13.3 17.9 29.9 30.4 41.6 24.8 23.2 42 22.4 86\n        54.7-18.2-51.8-18.8-62-43.5-106.1-24.7-44-67.6-20.3-67.6-20.3s-8.4 16.6-5.3 29.9v.2z"),T(j,"id","f"),T(j,"d","M38.346 11.5s-4-11.6-18-11.5c-30 .2-28.8 52.1 16.9 52 39.6-.1 39.2-49.4\n        16.1-49.6-10.2-.2-15 9.1-15 9.1z"),T(S,"id","g"),T(S,"d","M26.5 15c10.8 0 2 14.9-.6 20.9-1.8-8.4-10.2-20.9.6-20.9zM10.2.1C4.6.1 0 4.6 0 10.3c0 5.6\n        4.5 10.2 10.2 10.2 5.6 0 10.2-4.5 10.2-10.2C20.4 4.7 15.9.1 10.2.1zM40.7 0c-4.8 0-8.8\n        4.5-8.8 10.2 0 5.6 3.9 10.2 8.8 10.2 4.8 0 8.8-4.5 8.8-10.2C49.5 4.6 45.6 0 40.7 0z"),T(n,"width","530"),T(n,"height","530"),T(n,"viewBox","0 0 530 530"),T(n,"xmlns","http://www.w3.org/2000/svg"),T(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),T(n,"class","svelte-sifc3t"),T(e,"class",A=x(`floating-btn ${t[0]}`)+" svelte-sifc3t")},m(r,x){$(r,e,x),w(e,n),w(n,i),w(i,o),w(n,s),w(s,a),w(n,l),w(n,c),w(n,u),w(n,f),w(n,h),w(n,p),w(n,d),w(n,g),w(g,v),w(g,m),w(g,y),w(g,b),w(g,_),w(g,j),w(g,S),R||(I=E(e,"click",t[1]),R=!0)},p(t,[n]){1&n&&A!==(A=x(`floating-btn ${t[0]}`)+" svelte-sifc3t")&&T(e,"class",A)},i:r,o:r,d(t){t&&k(e),R=!1,I()}}}function dt(t,e,n){let{buttonPosition:r}=e;return t.$$set=t=>{"buttonPosition"in t&&n(0,r=t.buttonPosition)},[r,function(e){L.call(this,t,e)}]}ht(".floating-btn.svelte-sifc3t.svelte-sifc3t{background:var(--color-blue-bg);border:0;border-radius:50%;box-shadow:0 0 30px rgba(34, 34, 34, 0.3);cursor:pointer;position:fixed;padding:4px 6px;transition:opacity 0.3s;-webkit-transition:opacity 0.3s;z-index:99999}.floating-btn.bottom-right.svelte-sifc3t.svelte-sifc3t{bottom:16px;right:16px}.floating-btn.bottom-left.svelte-sifc3t.svelte-sifc3t{bottom:16px;left:16px}.floating-btn.top-right.svelte-sifc3t.svelte-sifc3t{top:16px;right:16px}.floating-btn.top-left.svelte-sifc3t.svelte-sifc3t{top:16px;left:16px}.floating-btn.svelte-sifc3t.svelte-sifc3t:hover{opacity:0.7}.floating-btn.svelte-sifc3t>svg.svelte-sifc3t{width:34px;height:34px;position:relative;bottom:-2px}");class gt extends ft{constructor(t){super(),ut(this,t,dt,pt,c,{buttonPosition:0})}}function vt(t){let e,n,i,o,s,l,c,u,f,h,p,d,g,v,m,y,b,x,_,O;return{c(){e=C("ul"),n=C("li"),i=C("button"),i.textContent="STATE",o=j(),s=C("li"),l=C("button"),l.textContent="HISTORY",c=j(),u=C("li"),f=C("button"),f.textContent="PLUGINS",h=j(),p=C("li"),d=C("button"),d.textContent="SCHEMA",g=j(),v=C("li"),m=C("button"),m.textContent="STRUCTURE",y=j(),b=C("li"),x=C("button"),x.textContent="SNAPSHOTS",T(i,"class","svelte-l5aruy"),I(i,"active","state"===t[0]),T(l,"class","svelte-l5aruy"),I(l,"active","history"===t[0]),T(f,"class","svelte-l5aruy"),I(f,"active","plugins"===t[0]),T(d,"class","svelte-l5aruy"),I(d,"active","schema"===t[0]),T(m,"class","svelte-l5aruy"),I(m,"active","structure"===t[0]),T(x,"class","svelte-l5aruy"),I(x,"active","snapshots"===t[0]),T(e,"class","tabs-menu svelte-l5aruy")},m(r,a){$(r,e,a),w(e,n),w(n,i),w(e,o),w(e,s),w(s,l),w(e,c),w(e,u),w(u,f),w(e,h),w(e,p),w(p,d),w(e,g),w(e,v),w(v,m),w(e,y),w(e,b),w(b,x),_||(O=[E(i,"click",t[2]),E(l,"click",t[3]),E(f,"click",t[4]),E(d,"click",t[5]),E(m,"click",t[6]),E(x,"click",t[7])],_=!0)},p(t,[e]){1&e&&I(i,"active","state"===t[0]),1&e&&I(l,"active","history"===t[0]),1&e&&I(f,"active","plugins"===t[0]),1&e&&I(d,"active","schema"===t[0]),1&e&&I(m,"active","structure"===t[0]),1&e&&I(x,"active","snapshots"===t[0])},i:r,o:r,d(t){t&&k(e),_=!1,a(O)}}}function mt(t,e,n){let{active:r,onClickTab:i}=e;return t.$$set=t=>{"active"in t&&n(0,r=t.active),"onClickTab"in t&&n(1,i=t.onClickTab)},[r,i,()=>i("state"),()=>i("history"),()=>i("plugins"),()=>i("schema"),()=>i("structure"),()=>i("snapshots")]}ht("ul.svelte-l5aruy{display:flex;list-style:none;margin:0;overflow-x:scroll;padding:0}button.svelte-l5aruy{background:transparent;border:0;border-bottom:2px solid transparent;color:var(--color-white);cursor:pointer;height:100%;padding:1em}button.svelte-l5aruy:hover{background:rgba(255, 255, 255, 0.05)}button.active.svelte-l5aruy{border-bottom:2px solid var(--color-red-light)}");class yt extends ft{constructor(t){super(),ut(this,t,mt,vt,c,{active:0,onClickTab:1})}}const bt=[];function xt(t,e=r){let n;const i=new Set;function o(e){if(c(t,e)&&(t=e,n)){const e=!bt.length;for(const e of i)e[1](),bt.push(e,t);if(e){for(let t=0;t<bt.length;t+=2)bt[t][0](bt[t+1]);bt.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,a=r){const l=[s,a];return i.add(l),1===i.size&&(n=e(o)||r),s(t),()=>{i.delete(l),0===i.size&&(n(),n=null)}}}}var wt=xt(new Map),$t=xt([]),kt=xt(void 0);var _t=["jsonID","empty","anchor","from","head","to"],Ct=["$anchor","$head","$cursor","$to","$from"],Ot=["nodeAfter","nodeBefore","textOffset"];function Mt(t){return _t.reduce((function(e,n){return e[n]=t[n],e}),{})}ht("section.svelte-1w8fqnu{border-top:1px solid rgba(255, 162, 177, 0.2);color:var(--color-white);display:flex;height:calc(100% - var(--height-tabs-menu));width:100%}.split-view h2{color:var(--color-red-gray);font-family:var(--font-sans);font-size:var(--font-medium);font-weight:400;letter-spacing:1px;margin:0;text-transform:uppercase}.split-view > .left-panel{display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}.split-view > .right-panel{border-left:1px solid rgba(255, 162, 177, 0.2);display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}.split-view .hidden{visibility:hidden}");const jt=t=>({}),St=t=>({class:"right-panel"}),Et=t=>({}),Tt=t=>({class:"left-panel"});function At(t){let e,n,r;const i=t[1].left,o=p(i,t,t[0],Tt),s=t[1].right,a=p(s,t,t[0],St);return{c(){e=C("section"),o&&o.c(),n=j(),a&&a.c(),T(e,"class","split-view svelte-1w8fqnu")},m(t,i){$(t,e,i),o&&o.m(e,null),w(e,n),a&&a.m(e,null),r=!0},p(t,[e]){o&&o.p&&(!r||1&e)&&v(o,i,t,t[0],r?g(i,t[0],e,Et):m(t[0]),Tt),a&&a.p&&(!r||1&e)&&v(a,s,t,t[0],r?g(s,t[0],e,jt):m(t[0]),St)},i(t){r||(it(o,t),it(a,t),r=!0)},o(t){ot(o,t),ot(a,t),r=!1},d(t){t&&k(e),o&&o.d(t),a&&a.d(t)}}}function Nt(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,r]}class Rt extends ft{constructor(t){super(),ut(this,t,Nt,At,c,{})}}function It(t,e,r,i,o){var s=o?n(n([],o.path,!0),[t],!1):[];return{id:"["+s.join(",")+"]",index:t,key:e,value:r,depth:i+1,collapsed:!0,type:Dt(r),path:s,parentId:o?o.id:null,circularOfId:null,children:[]}}function Dt(t){return Array.isArray(t)?"array":t instanceof Map?"map":t instanceof Set?"set":t instanceof Date?"date":null===t?"null":typeof t}function Pt(t,e,n,r,i,o,s,a,l,c){var u;if((null===(u=c.omitKeys)||void 0===u?void 0:u.includes(e))||c.maxDepth&&r>=c.maxDepth)return null;var f=It(t,e,n,r,i),h=s.get(f.id);if(h&&!l?f.collapsed=h.collapsed:c.shouldExpandNode&&(f.collapsed=!c.shouldExpandNode(f)),o.set(f.id,f),function(t,e,n){if(!n.stopCircularRecursion)return!0;if(n.isCircularNode)return n.isCircularNode(t,e);if("object"===t.type||"array"===t.type){var r=e.get(t.value);if(r)return t.circularOfId=r.id,!1;e.set(t.value,t)}return!0}(f,a,c)){var p=c.mapChildren&&c.mapChildren(n,Dt(n),f),d=null!=p?p:function(t){switch(Dt(t)){case"array":return t.map((function(t,e){return[e.toString(),t]}));case"map":return Array.from(t.entries()).map((function(t,e){return["[map entry "+e+"]",{"[key]":t[0],"[value]":t[1]}]}));case"set":return Array.from(t.values()).map((function(t,e){return["[set entry "+e+"]",t]}));case"object":return Object.entries(t);default:return[]}}(n);f.children=d.map((function(t,e){return Pt(e,t[0],t[1],r+1,f,o,s,a,l,c)})).filter((function(t){return null!==t}))}return f}function zt(t,e,n){const r=t.slice();return r[17]=e[n],r}function Bt(t){let e,n,r,i,o;return{c(){e=C("button"),n=M("▶"),T(e,"class",r=x("arrow-btn "+(t[0].collapsed?"collapsed":""))+" svelte-1qotaee")},m(r,s){$(r,e,s),w(e,n),i||(o=E(e,"click",t[9]),i=!0)},p(t,n){1&n&&r!==(r=x("arrow-btn "+(t[0].collapsed?"collapsed":""))+" svelte-1qotaee")&&T(e,"class",r)},d(t){t&&k(e),i=!1,o()}}}function Ft(t){let e,n=t[6](t[0].value,t[0])+"";return{c(){e=M(n)},m(t,n){$(t,e,n)},p(t,r){1&r&&n!==(n=t[6](t[0].value,t[0])+"")&&R(e,n)},i:r,o:r,d(t){t&&k(e)}}}function qt(t){let e,n,r;var i=t[3];function o(t){return{props:{value:t[0].value,node:t[0],defaultFormatter:t[11]}}}return i&&(e=new i(o(t))),{c(){e&&st(e.$$.fragment),n=S()},m(t,i){e&&at(e,t,i),$(t,n,i),r=!0},p(t,r){const s={};if(1&r&&(s.value=t[0].value),1&r&&(s.node=t[0]),1&r&&(s.defaultFormatter=t[11]),i!==(i=t[3])){if(e){nt();const t=e;ot(t.$$.fragment,1,0,(()=>{lt(t,1)})),rt()}i?(e=new i(o(t)),st(e.$$.fragment),it(e.$$.fragment,1),at(e,n.parentNode,n)):e=null}else i&&e.$set(s)},i(t){r||(e&&it(e.$$.fragment,t),r=!0)},o(t){e&&ot(e.$$.fragment,t),r=!1},d(t){t&&k(n),e&&lt(e,t)}}}function Lt(t){let e,n,i;return{c(){e=C("button"),e.textContent="log",T(e,"class","log-copy-button svelte-1qotaee")},m(r,o){$(r,e,o),n||(i=E(e,"click",t[7]),n=!0)},p:r,d(t){t&&k(e),n=!1,i()}}}function Ut(t){let e,n,i;return{c(){e=C("button"),e.textContent="copy",T(e,"class","log-copy-button svelte-1qotaee")},m(r,o){$(r,e,o),n||(i=E(e,"click",t[8]),n=!0)},p:r,d(t){t&&k(e),n=!1,i()}}}function Gt(t){let e,n,r,i,o=t[0].children,s=[];for(let e=0;e<o.length;e+=1)s[e]=Jt(zt(t,o,e));const a=t=>ot(s[t],1,1,(()=>{s[t]=null}));return{c(){e=C("li"),n=C("ul");for(let t=0;t<s.length;t+=1)s[t].c();T(n,"style",r="padding-left: 0.875em"),T(n,"class","svelte-1qotaee"),T(e,"class","row svelte-1qotaee")},m(t,r){$(t,e,r),w(e,n);for(let t=0;t<s.length;t+=1)s[t].m(n,null);i=!0},p(t,e){if(1&e){let r;for(o=t[0].children,r=0;r<o.length;r+=1){const i=zt(t,o,r);s[r]?(s[r].p(i,e),it(s[r],1)):(s[r]=Jt(i),s[r].c(),it(s[r],1),s[r].m(n,null))}for(nt(),r=o.length;r<s.length;r+=1)a(r);rt()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)it(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)ot(s[t]);i=!1},d(t){t&&k(e),_(s,t)}}}function Jt(t){let e,n;return e=new Ht({props:{id:t[17].id}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[17].id),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Vt(t){let e,n,r,i,o,s,l,c,u,f,h,p,d,g,v,m,y,b,x,_=t[0].key+"",O=t[2]&&Bt(t);const A=[qt,Ft],N=[];function D(t,e){return t[3]?0:1}c=D(t),u=N[c]=A[c](t);let P=t[1].showLogButton&&Lt(t),z=t[1].showCopyButton&&Ut(t),B=!t[0].collapsed&&t[2]&&Gt(t);return{c(){e=C("li"),O&&O.c(),n=j(),r=C("div"),i=M(_),o=M(":"),s=j(),l=C("div"),u.c(),h=j(),p=C("div"),P&&P.c(),d=j(),z&&z.c(),v=j(),B&&B.c(),m=S(),T(r,"class","node-key svelte-1qotaee"),I(r,"has-children",t[2]),I(r,"p-left",!t[2]),T(l,"class","node-value svelte-1qotaee"),T(l,"data-type",f=t[0].type),I(l,"expanded",!t[0].collapsed&&t[2]),I(l,"has-children",t[2]),T(p,"class","buttons svelte-1qotaee"),T(e,"class","row svelte-1qotaee"),T(e,"data-tree-id",g=t[0].id),I(e,"collapsed",t[0].collapsed&&t[2])},m(a,u){$(a,e,u),O&&O.m(e,null),w(e,n),w(e,r),w(r,i),w(r,o),w(e,s),w(e,l),N[c].m(l,null),w(e,h),w(e,p),P&&P.m(p,null),w(p,d),z&&z.m(p,null),$(a,v,u),B&&B.m(a,u),$(a,m,u),y=!0,b||(x=[E(r,"click",t[9]),E(l,"click",t[9])],b=!0)},p(t,[o]){t[2]?O?O.p(t,o):(O=Bt(t),O.c(),O.m(e,n)):O&&(O.d(1),O=null),(!y||1&o)&&_!==(_=t[0].key+"")&&R(i,_),4&o&&I(r,"has-children",t[2]),4&o&&I(r,"p-left",!t[2]);let s=c;c=D(t),c===s?N[c].p(t,o):(nt(),ot(N[s],1,1,(()=>{N[s]=null})),rt(),u=N[c],u?u.p(t,o):(u=N[c]=A[c](t),u.c()),it(u,1),u.m(l,null)),(!y||1&o&&f!==(f=t[0].type))&&T(l,"data-type",f),5&o&&I(l,"expanded",!t[0].collapsed&&t[2]),4&o&&I(l,"has-children",t[2]),t[1].showLogButton?P?P.p(t,o):(P=Lt(t),P.c(),P.m(p,d)):P&&(P.d(1),P=null),t[1].showCopyButton?z?z.p(t,o):(z=Ut(t),z.c(),z.m(p,null)):z&&(z.d(1),z=null),(!y||1&o&&g!==(g=t[0].id))&&T(e,"data-tree-id",g),5&o&&I(e,"collapsed",t[0].collapsed&&t[2]),!t[0].collapsed&&t[2]?B?(B.p(t,o),5&o&&it(B,1)):(B=Gt(t),B.c(),it(B,1),B.m(m.parentNode,m)):B&&(nt(),ot(B,1,1,(()=>{B=null})),rt())},i(t){y||(it(u),it(B),y=!0)},o(t){ot(u),ot(B),y=!1},d(t){t&&k(e),O&&O.d(),N[c].d(),P&&P.d(),z&&z.d(),t&&k(v),B&&B.d(t),t&&k(m),b=!1,a(x)}}}function Kt(t,e,n){let r,i,o,s,a,{id:l}=e;const{treeMapStore:c,propsStore:u,rootElementStore:f,getNode:p,toggleCollapse:d,expandAllNodesToNode:g,formatValue:v}=q("app");h(t,u,(t=>n(1,a=t))),h(t,f,(t=>n(12,s=t))),c.subscribe((t=>{const e=t.get(l);r!==e&&n(0,r=e)}));return t.$$set=t=>{"id"in t&&n(10,l=t.id)},t.$$.update=()=>{1024&t.$$.dirty&&n(0,r=p(l)),1&t.$$.dirty&&n(2,i=r.children.length>0),2&t.$$.dirty&&n(3,o=a.valueComponent)},[r,a,i,o,u,f,v,function(){console.info("%c [prosemirror-dev-toolkit]: Property added to window._node","color: #b8e248"),console.log(r.value),window._node=r.value},function(){navigator.clipboard.writeText(JSON.stringify(r.value))},function(){var t;i?d(r.id):r.circularOfId&&(g(r.circularOfId),null===(t=s.querySelector(`li[data-tree-id="${r.circularOfId}"]`))||void 0===t||t.scrollIntoView())},l,t=>v(t,r)]}ht("ul.svelte-1qotaee.svelte-1qotaee{display:flex;flex-direction:column;height:max-content;list-style:none;padding:0;margin:0;width:100%}li.svelte-1qotaee.svelte-1qotaee{align-items:baseline;display:flex;height:max-content;line-height:var(--li-line-height);list-style:none;width:100%}li.svelte-1qotaee+li.svelte-1qotaee{margin-top:0.25em}.empty-block.svelte-1qotaee.svelte-1qotaee{visibility:hidden}.node-key.svelte-1qotaee.svelte-1qotaee{color:#85d9ef;margin-right:0.5em}.node-key.has-children.svelte-1qotaee.svelte-1qotaee{cursor:pointer}.node-key.p-left.svelte-1qotaee.svelte-1qotaee{padding-left:1.1em}.node-value.svelte-1qotaee.svelte-1qotaee{color:#b8e248;margin-right:0.5em;word-break:break-all}.node-value[data-type='number'].svelte-1qotaee.svelte-1qotaee{color:#fd993c}.node-value[data-type='null'].svelte-1qotaee.svelte-1qotaee,.node-value[data-type='undefined'].svelte-1qotaee.svelte-1qotaee{color:#fa3e7e}.node-value.expanded.svelte-1qotaee.svelte-1qotaee{color:#d1929b}.node-value.has-children.svelte-1qotaee.svelte-1qotaee{cursor:pointer}.arrow-btn.svelte-1qotaee.svelte-1qotaee{background:transparent;border:0;color:#85d9ef;cursor:pointer;margin-right:0.5em;padding:0;transition:all 150ms ease 0s;transform:rotateZ(0deg);transform-origin:45% 50%;position:relative;line-height:1.1em;font-size:0.75em}.arrow-btn.collapsed.svelte-1qotaee.svelte-1qotaee{transform:rotateZ(90deg)}.buttons.svelte-1qotaee.svelte-1qotaee{display:flex;flex-wrap:wrap}.log-copy-button.svelte-1qotaee.svelte-1qotaee{background:transparent;border:0;color:#85d9ef;cursor:pointer;margin:0;padding:0 0.5em}.log-copy-button.svelte-1qotaee.svelte-1qotaee:hover{background:rgba(255, 162, 177, 0.4);border-radius:2px;color:white}");class Ht extends ft{constructor(t){super(),ut(this,t,Kt,Vt,c,{id:10})}}function Wt(t,e,n){const r=t.slice();return r[16]=e[n],r}function Yt(t){let e,n;return e=new Ht({props:{id:t[16].id}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.id=t[16].id),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Xt(t){let e,n,r,i=t[1].children,o=[];for(let e=0;e<i.length;e+=1)o[e]=Yt(Wt(t,i,e));const s=t=>ot(o[t],1,1,(()=>{o[t]=null}));return{c(){e=C("section");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"class",n=x(t[3].class)+" svelte-jdx61j")},m(n,i){$(n,e,i);for(let t=0;t<o.length;t+=1)o[t].m(e,null);t[12](e),r=!0},p(t,[a]){if(2&a){let n;for(i=t[1].children,n=0;n<i.length;n+=1){const r=Wt(t,i,n);o[n]?(o[n].p(r,a),it(o[n],1)):(o[n]=Yt(r),o[n].c(),it(o[n],1),o[n].m(e,null))}for(nt(),n=i.length;n<o.length;n+=1)s(n);rt()}(!r||8&a&&n!==(n=x(t[3].class)+" svelte-jdx61j"))&&T(e,"class",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)it(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)ot(o[t]);r=!1},d(n){n&&k(e),_(o,n),t[12](null)}}}function Qt(t,n,r){let o,{data:s,leftIndent:a=4,showLogButton:l=!1,showCopyButton:c=!1,valueComponent:u,recursionOpts:p={},valueFormatter:d}=n,g=null;const v={maxDepth:10,omitKeys:[],stopRecursion:!1,shouldExpandNode:()=>!1};let m={leftIndent:a,showLogButton:l,showCopyButton:c,valueComponent:u,recursionOpts:Object.assign(Object.assign({},v),p),valueFormatter:d};!function(t){var n=xt(new Map),r=xt(It(0,"root",[],0,null)),i=xt(t),o=xt(null);function s(t){return f(n).get(t)}F("app",{treeMapStore:n,treeStore:r,propsStore:i,rootElementStore:o,getNode:s,toggleCollapse:function(t){var r=s(t);r?n.update((function(t){return new Map(t.set(r.id,e(e({},r),{collapsed:!r.collapsed})))})):console.warn("Attempted to collapse non-existent node: "+t)},expandAllNodesToNode:function(t){var r=new Map(f(n));!function t(n,r){r&&(n.set(r.id,e(e({},r),{collapsed:!1})),r.parentId&&t(n,n.get(r.parentId)))}(r,r.get(t)),n.set(r)},formatValue:function(t,e){var n=f(i).valueFormatter,r=n?n(t,e):void 0;if(r)return r;switch(e.type){case"array":return(e.circularOfId?"circular":"")+" [] "+t.length+" items";case"object":return(e.circularOfId?"circular":"")+" {} "+Object.keys(t).length+" keys";case"map":case"set":return(e.circularOfId?"circular":"")+" () "+t.size+" entries";case"date":return""+t.toISOString();case"string":return'"'+t+'"';case"boolean":return t?"true":"false";default:return t}}})}(m);const{treeMapStore:b,treeStore:x,rootElementStore:w}=q("app");return h(t,x,(t=>r(1,o=t))),B((()=>{w.set(g)})),t.$$set=t=>{r(3,n=i(i({},n),y(t))),"data"in t&&r(4,s=t.data),"leftIndent"in t&&r(5,a=t.leftIndent),"showLogButton"in t&&r(6,l=t.showLogButton),"showCopyButton"in t&&r(7,c=t.showCopyButton),"valueComponent"in t&&r(8,u=t.valueComponent),"recursionOpts"in t&&r(9,p=t.recursionOpts),"valueFormatter"in t&&r(10,d=t.valueFormatter)},t.$$.update=()=>{if(3552&t.$$.dirty&&r(11,m={leftIndent:a,showLogButton:l,showCopyButton:c,valueComponent:u,valueFormatter:d,recursionOpts:m.recursionOpts}),2576&t.$$.dirty){const t=Object.assign(Object.assign({},v),p),e=m.recursionOpts.shouldExpandNode!==t.shouldExpandNode,n=new Map,i=f(b),o=new Map,a=Pt(-1,"root",s,-1,null,n,i,o,e,t);b.set(n),x.set(a),r(11,m.recursionOpts=t,m)}},n=y(n),[g,o,x,n,s,a,l,c,u,p,d,m,function(t){G[t?"unshift":"push"]((()=>{g=t,r(0,g)}))}]}ht(".svelte-jdx61j{box-sizing:border-box}section.svelte-jdx61j{font-family:Helvetica Neue, Calibri Light, Roboto, sans-serif;font-size:13px;height:max-content;width:max-content}");class Zt extends ft{constructor(t){super(),ut(this,t,Qt,Xt,c,{data:4,leftIndent:5,showLogButton:6,showCopyButton:7,valueComponent:8,recursionOpts:9,valueFormatter:10})}}function te(t){let e,n,r,o;const s=t[3].default,l=p(s,t,t[2],null);let c=[t[1]],u={};for(let t=0;t<c.length;t+=1)u=i(u,c[t]);return{c(){e=C("button"),l&&l.c(),A(e,u),I(e,"selected",t[0]),I(e,"svelte-gbjxau",!0)},m(i,s){$(i,e,s),l&&l.m(e,null),e.autofocus&&e.focus(),n=!0,r||(o=[E(e,"click",t[4]),E(e,"mouseover",t[5]),E(e,"mouseenter",t[6]),E(e,"mouseleave",t[7])],r=!0)},p(t,[r]){l&&l.p&&(!n||4&r)&&v(l,s,t,t[2],n?g(s,t[2],r,null):m(t[2]),null),A(e,u=function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[o]=a}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(c,[t[1]])),I(e,"selected",t[0]),I(e,"svelte-gbjxau",!0)},i(t){n||(it(l,t),n=!0)},o(t){ot(l,t),n=!1},d(t){t&&k(e),l&&l.d(t),r=!1,a(o)}}}function ee(t,e,n){const r=["selected"];let o=b(e,r),{$$slots:s={},$$scope:a}=e,{selected:l=!1}=e,c={class:[o.class]};return t.$$set=t=>{e=i(i({},e),y(t)),n(8,o=b(e,r)),"selected"in t&&n(0,l=t.selected),"$$scope"in t&&n(2,a=t.$$scope)},[l,c,a,s,function(e){L.call(this,t,e)},function(e){L.call(this,t,e)},function(e){L.call(this,t,e)},function(e){L.call(this,t,e)}]}ht("button.svelte-gbjxau{background:transparent;border:0;border-radius:2px;color:var(--color-gray-light);cursor:pointer;font-size:var(--font-small);padding:6px 10px;text-transform:uppercase}button.svelte-gbjxau:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-gbjxau{background:rgba(255, 162, 177, 0.4)}");class ne extends ft{constructor(t){super(),ut(this,t,ee,te,c,{selected:0})}}function re(t,e,n){const r=t.slice();return r[10]=e[n],r}function ie(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function oe(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{$$slots:{default:[ie]},$$scope:{ctx:t}}}),o.$on("click",t[6]),a=new Zt({props:{class:"tree-view",data:t[0],showLogButton:!0,showCopyButton:!0,valueFormatter:pe}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Current doc",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","top-row svelte-3eo07f"),T(e,"slot","left"),T(e,"class","left-panel svelte-3eo07f")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};8192&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1&e&&(r.data=t[0]),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function se(t){let e;return{c(){e=C("span"),T(e,"class","caret-icon svelte-3eo07f"),I(e,"expanded",t[5])},m(t,n){$(t,e,n)},p(t,n){32&n&&I(e,"expanded",t[5])},d(t){t&&k(e)}}}function ae(t){let e,n;return e=new Zt({props:{class:"tree-view",data:t[1],recursionOpts:{maxDepth:10}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function le(t){let e;return{c(){e=C("div")},m(t,n){$(t,e,n)},p:r,d(t){t&&k(e)}}}function ce(t){let e,n;return e=new Zt({props:{class:"tree-view",data:t[2]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.data=t[2]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function ue(t){let e;return{c(){e=C("div"),e.textContent="No active marks",T(e,"class","no-marks svelte-3eo07f")},m(t,n){$(t,e,n)},p:r,i:r,o:r,d(t){t&&k(e)}}}function fe(t){let e,n,r,i,o,s,a,l,c,u,f,h,p,d,g,v,m,y;o=new ne({props:{class:"selection-btn",$$slots:{default:[se]},$$scope:{ctx:t}}}),o.$on("click",t[7]);let b=[],x=[];for(let e=0;e<b.length;e+=1)x[e]=le(re(t,b,e));let O=null;b.length||(O=ae(t));const M=[ue,ce],S=[];function E(t,e){return 0===t[2].length?0:1}return f=E(t),h=S[f]=M[f](t),m=new Zt({props:{class:"tree-view",data:{nodeSize:t[3],childCount:t[4]}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Selection",i=j(),st(o.$$.fragment),s=j();for(let t=0;t<x.length;t+=1)x[t].c();O&&O.c(),a=j(),l=C("div"),c=C("h2"),c.textContent="Active marks",u=j(),h.c(),p=j(),d=C("div"),g=C("h2"),g.textContent="Document stats",v=j(),st(m.$$.fragment),T(n,"class","top-row svelte-3eo07f"),T(e,"slot","right"),T(e,"class","right-panel svelte-3eo07f")},m(t,h){$(t,e,h),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s);for(let t=0;t<x.length;t+=1)x[t].m(e,null);O&&O.m(e,null),w(e,a),w(e,l),w(l,c),w(l,u),S[f].m(l,null),w(e,p),w(e,d),w(d,g),w(d,v),at(m,d,null),y=!0},p(t,n){const r={};if(8224&n&&(r.$$scope={dirty:n,ctx:t}),o.$set(r),2&n){let r;for(b=[],r=0;r<b.length;r+=1){const i=re(t,b,r);x[r]?x[r].p(i,n):(x[r]=le(),x[r].c(),x[r].m(e,a))}for(;r<x.length;r+=1)x[r].d(1);x.length=b.length,!b.length&&O?O.p(t,n):b.length?O&&(nt(),ot(O,1,1,(()=>{O=null})),rt()):(O=ae(t),O.c(),it(O,1),O.m(e,a))}let i=f;f=E(t),f===i?S[f].p(t,n):(nt(),ot(S[i],1,1,(()=>{S[i]=null})),rt(),h=S[f],h?h.p(t,n):(h=S[f]=M[f](t),h.c()),it(h,1),h.m(l,null));const s={};24&n&&(s.data={nodeSize:t[3],childCount:t[4]}),m.$set(s)},i(t){y||(it(o.$$.fragment,t),it(h),it(m.$$.fragment,t),y=!0)},o(t){ot(o.$$.fragment,t),ot(h),ot(m.$$.fragment,t),y=!1},d(t){t&&k(e),lt(o),_(x,t),O&&O.d(),S[f].d(),lt(m)}}}function he(t){let e,n;return e=new Rt({props:{$$slots:{right:[fe],left:[oe]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};8255&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function pe(t,e){if("object"===e.type&&t.type)return`{} ${t.type}`}function de(t,n,r){const{view:i}=q("APP_CONTEXT");let o=i.state.doc.toJSON(),s=Mt(i.state.selection),a=i.state,l=[],c=i.state.doc.nodeSize,u=i.state.doc.childCount,f=!1;return kt.subscribe((t=>{if(!t)return;const{state:e}=t;a=e,r(0,o=e.doc.toJSON()),r(1,s=Mt(e.selection)),r(2,l=function(t){if(t.selection.empty){var e=t.selection.$from,n=t.storedMarks;return n?n.map((function(t){return t.type.name})):e.marks().map((function(t){return t.type.name}))}var r=t.selection.$head,i=t.selection.$anchor,o=new Set;return r.marks().forEach((function(t){return o.add(t.type.name)})),i.marks().forEach((function(t){return o.add(t.type.name)})),Array.from(o)}(e)),r(3,c=e.doc.nodeSize),r(4,u=e.doc.childCount)})),[o,s,l,c,u,f,function(){console.log(o),window._doc=o},function(){r(5,f=!f),r(1,s=f?function(t){return _t.concat(Ct).reduce((function(n,r){var i=t[r];if(i&&Ct.includes(r)){var o={};Ot.forEach((function(t){o[t]=i[t]})),i=e(e({},i),o)}return n[r]=i,n}),{})}(a.selection):Mt(a.selection))}]}ht("@charset \"UTF-8\";.top-row.svelte-3eo07f{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-3eo07f{overflow:scroll}.right-panel.svelte-3eo07f{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:200px;width:200px}.split-view .selection-btn{height:24px;width:35px}.caret-icon.svelte-3eo07f::before{content:'▶'}.caret-icon.expanded.svelte-3eo07f::before{content:'▼'}.no-marks.svelte-3eo07f{color:var(--color-blue-light);margin:0.5em 0 1em 1em}.split-view .tree-view{margin:0.5em 0 1em 0}");class ge extends ft{constructor(t){super(),ut(this,t,de,he,c,{})}}function ve(t,e,n){if("array"===e)return[]}function me(t,e){if("array"===e&&0===t[1]&&0===t[2])return[];if("array"===e&&"string"==typeof t[0]&&0===t[1]&&2===t[2])return[];if("array"===e&&1===t.length&&"object"==typeof t[0])return[];if("object"===e&&"a"===t._t){var n=[];for(var r in t)"_t"!==r&&("_"===r.charAt(0)?n.push([r.substr(1),t[r]]):n.push([r,t[r]]));return n}}function ye(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function be(t,e,n){const r=t.slice();return r[8]=e[n],r}function xe(t){let e,n,r,i=t[5].entries.length+"";return{c(){e=M("["),n=M(i),r=M("]")},m(t,i){$(t,e,i),$(t,n,i),$(t,r,i)},p(t,e){1&e&&i!==(i=t[5].entries.length+"")&&R(n,i)},d(t){t&&k(e),t&&k(n),t&&k(r)}}}function we(t){let e;return{c(){e=C("span"),T(e,"class","caret-icon svelte-1migjw3"),I(e,"expanded",t[5].expanded)},m(t,n){$(t,e,n)},p(t,n){1&n&&I(e,"expanded",t[5].expanded)},d(t){t&&k(e)}}}function $e(t){let e,n=t[5].entries,r=[];for(let e=0;e<n.length;e+=1)r[e]=ke(be(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=S()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);$(t,e,n)},p(t,i){if(7&i){let o;for(n=t[5].entries,o=0;o<n.length;o+=1){const s=be(t,n,o);r[o]?r[o].p(s,i):(r[o]=ke(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){_(r,t),t&&k(e)}}}function ke(t){let e,n,r,i,o,s,a=t[8].timeStr+"";function l(){return t[4](t[8],t[7])}return{c(){e=C("li"),n=C("button"),r=M(a),i=j(),T(n,"class","p-left svelte-1migjw3"),T(e,"class","svelte-1migjw3"),I(e,"selected",t[1]===t[8].id)},m(t,a){$(t,e,a),w(e,n),w(n,r),w(e,i),o||(s=E(n,"click",l),o=!0)},p(n,i){t=n,1&i&&a!==(a=t[8].timeStr+"")&&R(r,a),3&i&&I(e,"selected",t[1]===t[8].id)},d(t){t&&k(e),o=!1,s()}}}function _e(t){let e,n,r,i,o,s,a,l,c,u,f=t[5].topEntry.timeStr+"",h=t[5].isGroup&&xe(t),p=t[5].isGroup&&t[5].entries.length>1&&we(t);function d(){return t[3](t[5],t[7])}let g=t[5].isGroup&&t[5].expanded&&$e(t);return{c(){e=C("li"),n=C("button"),r=C("span"),i=M(f),o=j(),h&&h.c(),s=j(),p&&p.c(),a=j(),g&&g.c(),l=S(),T(n,"class","svelte-1migjw3"),I(n,"is-group",t[5].isGroup),T(e,"class","svelte-1migjw3"),I(e,"selected",!t[5].expanded&&t[1]===t[5].topEntry.id)},m(t,f){$(t,e,f),w(e,n),w(n,r),w(r,i),w(r,o),h&&h.m(r,null),w(n,s),p&&p.m(n,null),$(t,a,f),g&&g.m(t,f),$(t,l,f),c||(u=E(n,"click",d),c=!0)},p(o,s){t=o,1&s&&f!==(f=t[5].topEntry.timeStr+"")&&R(i,f),t[5].isGroup?h?h.p(t,s):(h=xe(t),h.c(),h.m(r,null)):h&&(h.d(1),h=null),t[5].isGroup&&t[5].entries.length>1?p?p.p(t,s):(p=we(t),p.c(),p.m(n,null)):p&&(p.d(1),p=null),1&s&&I(n,"is-group",t[5].isGroup),3&s&&I(e,"selected",!t[5].expanded&&t[1]===t[5].topEntry.id),t[5].isGroup&&t[5].expanded?g?g.p(t,s):(g=$e(t),g.c(),g.m(l.parentNode,l)):g&&(g.d(1),g=null)},d(t){t&&k(e),h&&h.d(),p&&p.d(),t&&k(a),g&&g.d(t),t&&k(l),c=!1,u()}}}function Ce(t){let e,n=t[0],i=[];for(let e=0;e<n.length;e+=1)i[e]=_e(ye(t,n,e));return{c(){e=C("ul");for(let t=0;t<i.length;t+=1)i[t].c();T(e,"class","svelte-1migjw3")},m(t,n){$(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,[r]){if(7&r){let o;for(n=t[0],o=0;o<n.length;o+=1){const s=ye(t,n,o);i[o]?i[o].p(s,r):(i[o]=_e(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:r,o:r,d(t){t&&k(e),_(i,t)}}}function Oe(t,e,n){let{listItems:r=[],selectedId:i,onSelect:o}=e;return t.$$set=t=>{"listItems"in t&&n(0,r=t.listItems),"selectedId"in t&&n(1,i=t.selectedId),"onSelect"in t&&n(2,o=t.onSelect)},[r,i,o,(t,e)=>o(t.topEntry.id,e,!0),(t,e)=>o(t.id,e,!1)]}ht("@charset \"UTF-8\";ul.svelte-1migjw3.svelte-1migjw3{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-1migjw3.svelte-1migjw3{transition:background 0.1s}li.svelte-1migjw3.svelte-1migjw3:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}li.selected.svelte-1migjw3.svelte-1migjw3{background:rgba(255, 162, 177, 0.4)}li.svelte-1migjw3+li.svelte-1migjw3{border-top:1px solid var(--color-purple)}button.svelte-1migjw3.svelte-1migjw3{background:transparent;border:0;color:var(--color-gray-light);cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;justify-content:space-between;padding:6px 18px;text-transform:uppercase;width:100%}button.p-left.svelte-1migjw3.svelte-1migjw3{margin-left:1em}.caret-icon.svelte-1migjw3.svelte-1migjw3::before{content:'▶'}.caret-icon.expanded.svelte-1migjw3.svelte-1migjw3::before{content:'▼'}");class Me extends ft{constructor(t){super(),ut(this,t,Oe,Ce,c,{listItems:0,selectedId:1,onSelect:2})}}function je(t,e,n){const r=t.slice();return r[3]=e[n],r}function Se(t){let e,n=t[1](t[0])+"";return{c(){e=M(n)},m(t,n){$(t,e,n)},p(t,r){3&r&&n!==(n=t[1](t[0])+"")&&R(e,n)},d(t){t&&k(e)}}}function Ee(t){let e;function n(t,e){return 1===t[0].length?Re:2===t[0].length?Ne:3===t[0].length&&0===t[0][1]&&0===t[0][2]?Ae:3===t[0].length&&2===t[0][2]?Te:void 0}let r=n(t),i=r&&r(t);return{c(){i&&i.c(),e=S()},m(t,n){i&&i.m(t,n),$(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i&&i.d(1),i=r&&r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i&&i.d(t),t&&k(e)}}}function Te(t){let e,n=Fe(t[0][0]),r=[];for(let e=0;e<n.length;e+=1)r[e]=ze(je(t,n,e));return{c(){e=C("span");for(let t=0;t<r.length;t+=1)r[t].c();T(e,"class","updated svelte-ld8g2r")},m(t,n){$(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(1&i){let o;for(n=Fe(t[0][0]),o=0;o<n.length;o+=1){const s=je(t,n,o);r[o]?r[o].p(s,i):(r[o]=ze(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&k(e),_(r,t)}}}function Ae(t){let e,n,r=qe(t[0][0])+"";return{c(){e=C("span"),n=M(r),T(e,"class","deleted svelte-ld8g2r")},m(t,r){$(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=qe(t[0][0])+"")&&R(n,r)},d(t){t&&k(e)}}}function Ne(t){let e,n,r,i,o,s,a,l,c=qe(t[0][0])+"",u=qe(t[0][1])+"";return{c(){e=C("span"),n=C("span"),r=M(c),i=j(),o=C("span"),o.textContent="=>",s=j(),a=C("span"),l=M(u),T(n,"class","deleted svelte-ld8g2r"),T(o,"class","arrow svelte-ld8g2r"),T(a,"class","added svelte-ld8g2r"),T(e,"class","updated svelte-ld8g2r")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(e,i),w(e,o),w(e,s),w(e,a),w(a,l)},p(t,e){1&e&&c!==(c=qe(t[0][0])+"")&&R(r,c),1&e&&u!==(u=qe(t[0][1])+"")&&R(l,u)},d(t){t&&k(e)}}}function Re(t){let e,n,r=qe(t[0][0])+"";return{c(){e=C("span"),n=M(r),T(e,"class","added svelte-ld8g2r")},m(t,r){$(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=qe(t[0][0])+"")&&R(n,r)},d(t){t&&k(e)}}}function Ie(t){let e,n,r=t[3].raw+"";return{c(){e=C("span"),n=M(r)},m(t,r){$(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=t[3].raw+"")&&R(n,r)},d(t){t&&k(e)}}}function De(t){let e,n,r=t[3].add+"";return{c(){e=C("span"),n=M(r),T(e,"class","added svelte-ld8g2r")},m(t,r){$(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=t[3].add+"")&&R(n,r)},d(t){t&&k(e)}}}function Pe(t){let e,n,r=t[3].delete+"";return{c(){e=C("span"),n=M(r),T(e,"class","deleted svelte-ld8g2r")},m(t,r){$(t,e,r),w(e,n)},p(t,e){1&e&&r!==(r=t[3].delete+"")&&R(n,r)},d(t){t&&k(e)}}}function ze(t){let e;function n(t,e){return t[3].delete?Pe:t[3].add?De:Ie}let r=n(t),i=r(t);return{c(){i.c(),e=S()},m(t,n){i.m(t,n),$(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&k(e)}}}function Be(t){let e,n;function i(t,n){return(null==e||1&n)&&(e=!!Array.isArray(t[0])),e?Ee:Se}let o=i(t,-1),s=o(t);return{c(){s.c(),n=S()},m(t,e){s.m(t,e),$(t,n,e)},p(t,[e]){o===(o=i(t,e))&&s?s.p(t,e):(s.d(1),s=o(t),s&&(s.c(),s.m(n.parentNode,n)))},i:r,o:r,d(t){s.d(t),t&&k(n)}}}function Fe(t){return t.split(/\n/gm).slice(1).map((t=>{return{[t.startsWith("-")?"delete":t.startsWith("+")?"add":"raw"]:(e=t.substr(1),e.replace(/\s/gm," "))};var e}))}function qe(t){return"string"==typeof t?t:function(t){if(null===t)return"null";const e=JSON.stringify(t);return void 0===e?"undefined":e.length>22?`${e.substr(0,15)}…${e.substr(-5)}`:e}(t)}function Le(t,e,n){let{value:r,node:i,defaultFormatter:o}=e;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"node"in t&&n(2,i=t.node),"defaultFormatter"in t&&n(1,o=t.defaultFormatter)},[r,o,i]}ht(".added.svelte-ld8g2r.svelte-ld8g2r{display:inline-block;background:var(--color-green-light);border-radius:1px;color:var(--color-green);padding:1px 2px;text-indent:0;min-height:1ex}.deleted.svelte-ld8g2r.svelte-ld8g2r{display:inline-block;background:var(--color-red);border-radius:1px;color:var(--color-gray-light);padding:1px 2px;text-decoration:line-through;text-indent:0;min-height:1ex}.updated.svelte-ld8g2r.svelte-ld8g2r{word-break:break-all}.updated.svelte-ld8g2r .added.svelte-ld8g2r{background:var(--color-yellow)}.arrow.svelte-ld8g2r.svelte-ld8g2r{color:var(--color-green-light)}");class Ue extends ft{constructor(t){super(),ut(this,t,Le,Be,c,{value:0,node:2,defaultFormatter:1})}}function Ge(t){let e,n,r;return n=new Me({props:{listItems:t[4],selectedId:t[0]&&t[0].id,onSelect:t[7]}}),{c(){e=C("div"),st(n.$$.fragment),T(e,"slot","left"),T(e,"class","left-panel svelte-9jnsvd")},m(t,i){$(t,e,i),at(n,e,null),r=!0},p(t,e){const r={};16&e&&(r.listItems=t[4]),1&e&&(r.selectedId=t[0]&&t[0].id),n.$set(r)},i(t){r||(it(n.$$.fragment,t),r=!0)},o(t){ot(n.$$.fragment,t),r=!1},d(t){t&&k(e),lt(n)}}}function Je(t){let e;return{c(){e=C("div"),e.textContent="Docs are equal.",T(e,"class","equal-diff svelte-9jnsvd")},m(t,n){$(t,e,n)},p:r,i:r,o:r,d(t){t&&k(e)}}}function Ve(t){let e,n,r,i,o,s,a,l,c,u,f,h,p,d=t[0].contentDiff&&Ke(t),g=t[0].selectionDiff&&We(t),v=t[0].selectionHtml.length>0&&Xe(t),m=t[1]&&Ze(t);f=new ne({props:{$$slots:{default:[nn]},$$scope:{ctx:t}}}),f.$on("click",t[5]);let y=t[1]&&rn(t);return{c(){e=C("div"),d&&d.c(),n=j(),g&&g.c(),r=j(),v&&v.c(),i=j(),o=C("div"),s=C("div"),a=C("h2"),a.textContent="Transaction",l=j(),c=C("div"),m&&m.c(),u=j(),st(f.$$.fragment),h=j(),y&&y.c(),T(s,"class","title-container svelte-9jnsvd"),T(o,"class","entry-row svelte-9jnsvd")},m(t,b){$(t,e,b),d&&d.m(e,null),w(e,n),g&&g.m(e,null),w(e,r),v&&v.m(e,null),w(e,i),w(e,o),w(o,s),w(s,a),w(s,l),w(s,c),m&&m.m(c,null),w(c,u),at(f,c,null),w(o,h),y&&y.m(o,null),p=!0},p(t,s){t[0].contentDiff?d?(d.p(t,s),1&s&&it(d,1)):(d=Ke(t),d.c(),it(d,1),d.m(e,n)):d&&(nt(),ot(d,1,1,(()=>{d=null})),rt()),t[0].selectionDiff?g?(g.p(t,s),1&s&&it(g,1)):(g=We(t),g.c(),it(g,1),g.m(e,r)):g&&(nt(),ot(g,1,1,(()=>{g=null})),rt()),t[0].selectionHtml.length>0?v?(v.p(t,s),1&s&&it(v,1)):(v=Xe(t),v.c(),it(v,1),v.m(e,i)):v&&(nt(),ot(v,1,1,(()=>{v=null})),rt()),t[1]?m?(m.p(t,s),2&s&&it(m,1)):(m=Ze(t),m.c(),it(m,1),m.m(c,u)):m&&(nt(),ot(m,1,1,(()=>{m=null})),rt());const a={};4098&s&&(a.$$scope={dirty:s,ctx:t}),f.$set(a),t[1]?y?(y.p(t,s),2&s&&it(y,1)):(y=rn(t),y.c(),it(y,1),y.m(o,null)):y&&(nt(),ot(y,1,1,(()=>{y=null})),rt())},i(t){p||(it(d),it(g),it(v),it(m),it(f.$$.fragment,t),it(y),p=!0)},o(t){ot(d),ot(g),ot(v),ot(m),ot(f.$$.fragment,t),ot(y),p=!1},d(t){t&&k(e),d&&d.d(),g&&g.d(),v&&v.d(),m&&m.d(),lt(f),y&&y.d()}}}function Ke(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{class:"hidden",$$slots:{default:[He]},$$scope:{ctx:t}}}),a=new Zt({props:{class:"tree-view",data:t[0].contentDiff,showLogButton:!0,showCopyButton:!0,valueComponent:Ue,recursionOpts:{maxDepth:12,mapChildren:me,shouldExpandNode:an}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Doc diff",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","title-container svelte-9jnsvd"),T(e,"class","entry-row svelte-9jnsvd")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};4096&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1&e&&(r.data=t[0].contentDiff),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function He(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function We(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{class:"hidden",$$slots:{default:[Ye]},$$scope:{ctx:t}}}),a=new Zt({props:{class:"tree-view",data:t[0].selectionDiff,valueComponent:Ue,recursionOpts:{mapChildren:ve,shouldExpandNode:ln}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Selection diff",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","title-container svelte-9jnsvd"),T(e,"class","entry-row svelte-9jnsvd")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};4096&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1&e&&(r.data=t[0].selectionDiff),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function Ye(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Xe(t){let e,n,r,i,o,s,a,l,c,u=t[0].selectionHtml+"";return o=new ne({props:{class:"hidden",$$slots:{default:[Qe]},$$scope:{ctx:t}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Selection content",i=j(),st(o.$$.fragment),s=j(),a=C("pre"),l=C("code"),T(n,"class","title-container svelte-9jnsvd"),T(a,"class","selection-html svelte-9jnsvd"),T(e,"class","entry-row svelte-9jnsvd")},m(t,f){$(t,e,f),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),w(e,a),w(a,l),l.innerHTML=u,c=!0},p(t,e){const n={};4096&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n),(!c||1&e)&&u!==(u=t[0].selectionHtml+"")&&(l.innerHTML=u)},i(t){c||(it(o.$$.fragment,t),c=!0)},o(t){ot(o.$$.fragment,t),c=!1},d(t){t&&k(e),lt(o)}}}function Qe(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ze(t){let e,n,r,i;return e=new ne({props:{$$slots:{default:[tn]},$$scope:{ctx:t}}}),e.$on("click",t[8]),r=new ne({props:{$$slots:{default:[en]},$$scope:{ctx:t}}}),r.$on("click",t[6]),{c(){st(e.$$.fragment),n=j(),st(r.$$.fragment)},m(t,o){at(e,t,o),$(t,n,o),at(r,t,o),i=!0},p(t,n){const i={};4100&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const o={};4096&n&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(t){i||(it(e.$$.fragment,t),it(r.$$.fragment,t),i=!0)},o(t){ot(e.$$.fragment,t),ot(r.$$.fragment,t),i=!1},d(t){lt(e,t),t&&k(n),lt(r,t)}}}function tn(t){let e,n=t[2]?"collapse":"expand";return{c(){e=M(n)},m(t,n){$(t,e,n)},p(t,r){4&r&&n!==(n=t[2]?"collapse":"expand")&&R(e,n)},d(t){t&&k(e)}}}function en(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function nn(t){let e,n=t[1]?"hide":"show";return{c(){e=M(n)},m(t,n){$(t,e,n)},p(t,r){2&r&&n!==(n=t[1]?"hide":"show")&&R(e,n)},d(t){t&&k(e)}}}function rn(t){let e,n;return e=new Zt({props:{class:"tree-view",data:t[0].tr,showLogButton:!0,showCopyButton:!0,recursionOpts:t[3]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.data=t[0].tr),8&n&&(r.recursionOpts=t[3]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function on(t){let e,n,r,i;const o=[Ve,Je],s=[];function a(t,e){return t[0]?0:1}return n=a(t),r=s[n]=o[n](t),{c(){e=C("div"),r.c(),T(e,"slot","right"),T(e,"class","right-panel")},m(t,r){$(t,e,r),s[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?s[n].p(t,i):(nt(),ot(s[l],1,1,(()=>{s[l]=null})),rt(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),it(r,1),r.m(e,null))},i(t){i||(it(r),i=!0)},o(t){ot(r),i=!1},d(t){t&&k(e),s[n].d()}}}function sn(t){let e,n;return e=new Rt({props:{$$slots:{right:[on],left:[Ge]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};4127&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}ht(".left-panel.svelte-9jnsvd.svelte-9jnsvd{flex-grow:0;padding:0;min-width:190px;width:190px}.title-container.svelte-9jnsvd.svelte-9jnsvd{align-items:center;display:flex;justify-content:space-between}.entry-row.svelte-9jnsvd+.entry-row.svelte-9jnsvd{margin-top:1em}.selection-html.svelte-9jnsvd.svelte-9jnsvd{margin:0.5em 0 0 0;padding:0}.equal-diff.svelte-9jnsvd.svelte-9jnsvd{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");const an=()=>!0,ln=()=>!0;function cn(t,e,n){let r,i,o;h(t,wt,(t=>n(9,i=t))),h(t,$t,(t=>n(10,o=t))),q("APP_CONTEXT");let s,a=!1,l=!1,c={maxDepth:10,stopCircularRecursion:!0,omitKeys:["schema"],shouldExpandNode:()=>l};return kt.subscribe((t=>{t&&n(0,s=t)})),t.$$.update=()=>{1536&t.$$.dirty&&n(4,r=o.map((t=>({isGroup:t.isGroup,topEntry:i.get(t.topEntryId),entries:t.entryIds.map((t=>i.get(t))),expanded:t.expanded}))))},[s,a,l,c,r,function(){n(1,a=!a)},function(){console.info("%c [prosemirror-dev-toolkit]: Property added to window._tr","color: #b8e248"),console.log(s.tr),window._tr=s.tr},function(t,e,o){n(0,s=i.get(t));const a=r[e];a.isGroup&&a.entries.length>1&&o&&$t.update((t=>t.map(((t,n)=>n!==e?t:Object.assign(Object.assign({},t),{expanded:!t.expanded})))))},function(){n(2,l=!l),n(3,c=Object.assign(Object.assign({},c),{shouldExpandNode:()=>l}))},i,o]}class un extends ft{constructor(t){super(),ut(this,t,cn,sn,c,{})}}function fn(t,e,n){const r=t.slice();return r[4]=e[n],r}function hn(t){let e,n,r,i,o,s,a=t[4].value+"";function l(){return t[3](t[4])}return{c(){e=C("li"),n=C("button"),r=M(a),i=j(),T(n,"class","svelte-lsgsky"),I(n,"selected",t[1]===t[4].key),I(n,"empty",t[4].empty),T(e,"class","svelte-lsgsky")},m(t,a){$(t,e,a),w(e,n),w(n,r),w(e,i),o||(s=E(n,"click",l),o=!0)},p(e,i){t=e,1&i&&a!==(a=t[4].value+"")&&R(r,a),3&i&&I(n,"selected",t[1]===t[4].key),1&i&&I(n,"empty",t[4].empty)},d(t){t&&k(e),o=!1,s()}}}function pn(t){let e,n=t[0],i=[];for(let e=0;e<n.length;e+=1)i[e]=hn(fn(t,n,e));return{c(){e=C("ul");for(let t=0;t<i.length;t+=1)i[t].c();T(e,"class","svelte-lsgsky")},m(t,n){$(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,[r]){if(7&r){let o;for(n=t[0],o=0;o<n.length;o+=1){const s=fn(t,n,o);i[o]?i[o].p(s,r):(i[o]=hn(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:r,o:r,d(t){t&&k(e),_(i,t)}}}function dn(t,e,n){let{listItems:r=[],selectedKey:i,onSelect:o}=e;return t.$$set=t=>{"listItems"in t&&n(0,r=t.listItems),"selectedKey"in t&&n(1,i=t.selectedKey),"onSelect"in t&&n(2,o=t.onSelect)},[r,i,o,t=>o(t)]}ht("ul.svelte-lsgsky.svelte-lsgsky{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-lsgsky+li.svelte-lsgsky{border-top:1px solid var(--color-purple)}button.svelte-lsgsky.svelte-lsgsky{background:transparent;border:0;color:var(--color-gray-light);cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;padding:6px 18px;text-transform:uppercase;width:100%}button.svelte-lsgsky.svelte-lsgsky:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-lsgsky.svelte-lsgsky{background:rgba(255, 162, 177, 0.4)}button.selected.empty.svelte-lsgsky.svelte-lsgsky{background:var(--color-purple-dark)}button.empty.svelte-lsgsky.svelte-lsgsky{background:transparent;color:var(--color-purple-light)}button.empty.svelte-lsgsky.svelte-lsgsky:hover{background:var(--color-purple-dark)}");class gn extends ft{constructor(t){super(),ut(this,t,dn,pn,c,{listItems:0,selectedKey:1,onSelect:2})}}function vn(t){let e,n,r;return n=new gn({props:{listItems:t[4],selectedKey:t[0].key,onSelect:t[5]}}),{c(){e=C("div"),st(n.$$.fragment),T(e,"slot","left"),T(e,"class","left-panel svelte-yzp7j8")},m(t,i){$(t,e,i),at(n,e,null),r=!0},p(t,e){const r={};16&e&&(r.listItems=t[4]),1&e&&(r.selectedKey=t[0].key),n.$set(r)},i(t){r||(it(n.$$.fragment,t),r=!0)},o(t){ot(n.$$.fragment,t),r=!1},d(t){t&&k(e),lt(n)}}}function mn(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{$$slots:{default:[yn]},$$scope:{ctx:t}}}),o.$on("click",t[6]),a=new ne({props:{$$slots:{default:[bn]},$$scope:{ctx:t}}}),a.$on("click",t[7]),{c(){e=C("div"),n=C("h2"),n.textContent="Plugin state",r=j(),i=C("div"),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(e,"class","top-row svelte-yzp7j8")},m(t,c){$(t,e,c),w(e,n),w(e,r),w(e,i),at(o,i,null),w(i,s),at(a,i,null),l=!0},p(t,e){const n={};2050&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};2048&e&&(r.$$scope={dirty:e,ctx:t}),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function yn(t){let e,n=t[1]?"collapse":"expand";return{c(){e=M(n)},m(t,n){$(t,e,n)},p(t,r){2&r&&n!==(n=t[1]?"collapse":"expand")&&R(e,n)},d(t){t&&k(e)}}}function bn(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function xn(t){let e;return{c(){e=C("div"),e.textContent="Plugin has no state",T(e,"class","empty-state svelte-yzp7j8")},m(t,n){$(t,e,n)},p:r,i:r,o:r,d(t){t&&k(e)}}}function wn(t){let e,n;return e=new Zt({props:{data:t[3],showLogButton:!0,showCopyButton:!0,recursionOpts:t[2]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.data=t[3]),4&n&&(r.recursionOpts=t[2]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function $n(t){let e,n,r,i,o,s=t[3]&&mn(t);const a=[wn,xn],l=[];function c(t,e){return t[3]?0:1}return r=c(t),i=l[r]=a[r](t),{c(){e=C("div"),s&&s.c(),n=j(),i.c(),T(e,"slot","right"),T(e,"class","right-panel svelte-yzp7j8")},m(t,i){$(t,e,i),s&&s.m(e,null),w(e,n),l[r].m(e,null),o=!0},p(t,o){t[3]?s?(s.p(t,o),8&o&&it(s,1)):(s=mn(t),s.c(),it(s,1),s.m(e,n)):s&&(nt(),ot(s,1,1,(()=>{s=null})),rt());let u=r;r=c(t),r===u?l[r].p(t,o):(nt(),ot(l[u],1,1,(()=>{l[u]=null})),rt(),i=l[r],i?i.p(t,o):(i=l[r]=a[r](t),i.c()),it(i,1),i.m(e,null))},i(t){o||(it(s),it(i),o=!0)},o(t){ot(s),ot(i),o=!1},d(t){t&&k(e),s&&s.d(),l[r].d()}}}function kn(t){let e,n;return e=new Rt({props:{$$slots:{right:[$n],left:[vn]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};2079&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function _n(t,e,n){let r,i;const{view:o}=q("APP_CONTEXT");let s=!1,a={maxDepth:10,stopCircularRecursion:!0,shouldExpandNode:()=>s},l=o.state,c=l.plugins,u=c[0];return kt.subscribe((t=>{t&&(n(8,l=t.state),n(9,c=l.plugins),n(0,u=c.find((t=>t.key===u.key))))})),t.$$.update=()=>{257&t.$$.dirty&&n(3,r=null==u?void 0:u.getState(l)),768&t.$$.dirty&&n(4,i=c.map((t=>({key:t.key,value:t.key.toUpperCase(),empty:!t.getState(l)}))))},[u,s,a,r,i,function(t){n(0,u=c.find((e=>e.key===t.key)))},function(){n(1,s=!s),n(2,a=Object.assign(Object.assign({},a),{shouldExpandNode:()=>s}))},function(){window._plugin=[u,r],console.info("%c [prosemirror-dev-toolkit]: Property added to window._plugin","color: #b8e248"),console.log(u),console.log(r)},l,c]}ht(".top-row.svelte-yzp7j8{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5em}.left-panel.svelte-yzp7j8{flex-grow:0;overflow:scroll;padding:0;min-width:190px;width:190px}.right-panel.svelte-yzp7j8{border-left:1px solid rgba(255, 162, 177, 0.2)}.empty-state.svelte-yzp7j8{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");class Cn extends ft{constructor(t){super(),ut(this,t,_n,kn,c,{})}}function On(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Mn(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{class:"hidden",$$slots:{default:[On]},$$scope:{ctx:t}}}),a=new Zt({props:{class:"tree-view",data:t[0],showLogButton:!0,showCopyButton:!0,recursionOpts:{maxDepth:6,omitKeys:["nodes","marks","topNodeType"]}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Nodes",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","top-row svelte-io05e6"),T(e,"slot","left"),T(e,"class","left-panel svelte-io05e6")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};8&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function jn(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Sn(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{class:"hidden",$$slots:{default:[jn]},$$scope:{ctx:t}}}),a=new Zt({props:{class:"tree-view",data:t[1],showLogButton:!0,showCopyButton:!0,recursionOpts:{maxDepth:6,omitKeys:["nodes","marks","topNodeType"]}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Marks",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","top-row svelte-io05e6"),T(e,"slot","right"),T(e,"class","right-panel svelte-io05e6")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};8&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function En(t){let e,n;return e=new Rt({props:{$$slots:{right:[Sn],left:[Mn]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Tn(t){const{view:e}=q("APP_CONTEXT");return[e.state.schema.nodes,e.state.schema.marks]}ht(".top-row.svelte-io05e6{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-io05e6{overflow:scroll;padding:1em}.right-panel.svelte-io05e6{border-left:1px solid rgba(255, 162, 177, 0.2);overflow:scroll;padding:1em}");class An extends ft{constructor(t){super(),ut(this,t,Tn,En,c,{})}}function Nn(t,e,n){const r=t.slice();return r[13]=e[n],r[15]=n,r}function Rn(t){let e,n,r=t[0].content.content,i=[];for(let e=0;e<r.length;e+=1)i[e]=In(Nn(t,r,e));const o=t=>ot(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=S()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);$(t,e,r),n=!0},p(t,n){if(33&n){let s;for(r=t[0].content.content,s=0;s<r.length;s+=1){const o=Nn(t,r,s);i[s]?(i[s].p(o,n),it(i[s],1)):(i[s]=In(o),i[s].c(),it(i[s],1),i[s].m(e.parentNode,e))}for(nt(),s=r.length;s<i.length;s+=1)o(s);rt()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)it(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)ot(i[t]);n=!1},d(t){_(i,t),t&&k(e)}}}function In(t){let e,n;return e=new zn({props:{node:t[13],startPos:t[5][t[15]]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.node=t[13]),32&n&&(r.startPos=t[5][t[15]]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Dn(t){let e,n,r,i,o,s,a,l,c,u,f,h,p,d,g,v,m,y=0!==t[0].content.size&&Rn(t);return{c(){e=C("div"),n=C("div"),r=C("div"),i=M(t[1]),o=j(),s=C("button"),a=M(t[6]),l=j(),c=C("div"),u=M(t[4]),h=j(),p=C("div"),y&&y.c(),T(r,"class","number-box svelte-134odb1"),T(s,"class","svelte-134odb1"),I(s,"selected",!1),T(c,"class","number-box svelte-134odb1"),T(n,"class","container svelte-134odb1"),T(n,"style",f=`background: ${t[7]}`),T(p,"class","svelte-134odb1"),I(p,"inline-children",t[3]),T(e,"class",d=x(`${t[9].class||""} wrapper`)+" svelte-134odb1"),I(e,"root",t[2])},m(f,d){$(f,e,d),w(e,n),w(n,r),w(r,i),w(n,o),w(n,s),w(s,a),w(n,l),w(n,c),w(c,u),w(e,h),w(e,p),y&&y.m(p,null),g=!0,v||(m=E(s,"click",t[10]),v=!0)},p(t,[r]){(!g||2&r)&&R(i,t[1]),(!g||64&r)&&R(a,t[6]),(!g||16&r)&&R(u,t[4]),(!g||128&r&&f!==(f=`background: ${t[7]}`))&&T(n,"style",f),0!==t[0].content.size?y?(y.p(t,r),1&r&&it(y,1)):(y=Rn(t),y.c(),it(y,1),y.m(p,null)):y&&(nt(),ot(y,1,1,(()=>{y=null})),rt()),8&r&&I(p,"inline-children",t[3]),(!g||512&r&&d!==(d=x(`${t[9].class||""} wrapper`)+" svelte-134odb1"))&&T(e,"class",d),516&r&&I(e,"root",t[2])},i(t){g||(it(y),g=!0)},o(t){ot(y),g=!1},d(t){t&&k(e),y&&y.d(),v=!1,m()}}}function Pn(t,e,n){let r,o,s,a,l;const{selected:c,colors:u,handleNodeClick:f}=q("doc-view");let{node:h,startPos:p,isRoot:d=!1}=e;return t.$$set=t=>{n(9,e=i(i({},e),y(t))),"node"in t&&n(0,h=t.node),"startPos"in t&&n(1,p=t.startPos),"isRoot"in t&&n(2,d=t.isRoot)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=u[h.type.name]),1&t.$$.dirty&&n(6,o=h.isText&&h.marks.length>0?`${h.type.name} - [${h.marks.map((t=>t.type.name)).join(", ")}]`:h.type.name),7&t.$$.dirty&&n(5,s=Array(h.childCount).fill(void 0).reduce(((t,e,n)=>{if(0===n)return[d?0:p+1];let r=t[n-1],i=h.child(n-1);return[...t,r+i.nodeSize]}),[])),3&t.$$.dirty&&n(4,a=p+h.nodeSize),1&t.$$.dirty&&n(3,l=h.content.content.every((t=>t.isInline)))},e=y(e),[h,p,d,l,a,s,o,r,f,e,()=>f(h)]}ht(".wrapper.svelte-134odb1{border-left:1px solid var(--color-blue-bg);border-right:1px solid var(--color-blue-bg);display:flex;flex-direction:column;padding:0 12px}.wrapper.root.svelte-134odb1{border:0;padding:0}.container.svelte-134odb1{background:var(--color-blue-bg);color:var(--color-black);display:flex;font-size:13px;margin-top:3px}.number-box.svelte-134odb1{padding:3px 6px;background:rgba(255, 255, 255, 0.3)}button.svelte-134odb1{background:transparent;border:0;color:var(--color-black);cursor:pointer;display:flex;height:100%;padding:3px 9px;white-space:pre;width:100%}button.svelte-134odb1:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-134odb1{background:rgba(255, 162, 177, 0.4)}.inline-children.svelte-134odb1{border-left:1px solid var(--color-purple);border-right:1px solid var(--color-purple);display:flex;flex-wrap:wrap;padding:0 12px}.inline-children.svelte-134odb1>div{flex-grow:1;padding:0}");class zn extends ft{constructor(t){super(),ut(this,t,Pn,Dn,c,{node:0,startPos:1,isRoot:2})}}var Bn=["#EA7C7F","#67B0C6","#94BB7F","#CA9EDB","#DCDC5D","#B9CC7C","#DD97D8","#FFB761","#4D8FD1","#F36E98","#E45F44","#A6A4AE","#FCC047","#FFC129","#D3929C","#4CBCD4","#8D7BC0"];function Fn(t){return Object.keys(t.nodes).reduce((function(t,e,n){var r=n>=Bn.length?function(t,e){var n=t/e;return Math.round(e*(n-Math.floor(n)))}(n,Bn.length):n;return t[e]=Bn[r],t}),{})}function qn(t){let e,n;return e=new zn({props:{class:t[1].class,node:t[0],startPos:0,depth:0,isRoot:!0}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.class=t[1].class),1&n&&(r.node=t[0]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Ln(t,e,n){let{doc:r,schema:o,selected:s={type:"",start:0,end:0},handleNodeSelect:a}=e;return F("doc-view",{selected:s,colors:Fn(o),handleNodeClick(t){a(t)}}),t.$$set=t=>{n(1,e=i(i({},e),y(t))),"doc"in t&&n(0,r=t.doc),"schema"in t&&n(2,o=t.schema),"selected"in t&&n(3,s=t.selected),"handleNodeSelect"in t&&n(4,a=t.handleNodeSelect)},e=y(e),[r,e,o,s,a]}class Un extends ft{constructor(t){super(),ut(this,t,Ln,qn,c,{doc:0,schema:2,selected:3,handleNodeSelect:4})}}function Gn(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Jn(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{class:"hidden",$$slots:{default:[Gn]},$$scope:{ctx:t}}}),a=new Un({props:{class:"m-top",doc:t[0],schema:t[2],handleNodeSelect:t[3]}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Current doc",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","top-row svelte-7g39a"),T(e,"slot","left"),T(e,"class","left-panel")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1&e&&(r.doc=t[0]),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function Vn(t){let e;return{c(){e=M("log")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Kn(t){let e,n,r,i,o,s,a,l;return o=new ne({props:{$$slots:{default:[Vn]},$$scope:{ctx:t}}}),o.$on("click",t[4]),a=new Zt({props:{class:"m-top",data:t[1],recursionOpts:{shouldExpandNode:Wn}}}),{c(){e=C("div"),n=C("div"),r=C("h2"),r.textContent="Node info",i=j(),st(o.$$.fragment),s=j(),st(a.$$.fragment),T(n,"class","top-row svelte-7g39a"),T(e,"slot","right"),T(e,"class","right-panel svelte-7g39a")},m(t,c){$(t,e,c),w(e,n),w(n,r),w(n,i),at(o,n,null),w(e,s),at(a,e,null),l=!0},p(t,e){const n={};128&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};2&e&&(r.data=t[1]),a.$set(r)},i(t){l||(it(o.$$.fragment,t),it(a.$$.fragment,t),l=!0)},o(t){ot(o.$$.fragment,t),ot(a.$$.fragment,t),l=!1},d(t){t&&k(e),lt(o),lt(a)}}}function Hn(t){let e,n;return e=new Rt({props:{$$slots:{right:[Kn],left:[Jn]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};131&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}ht(".top-row.svelte-7g39a{align-items:center;display:flex;justify-content:space-between}.right-panel.svelte-7g39a{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:220px;width:220px}.split-view .m-top{margin-top:0.5em}");const Wn=()=>!0;function Yn(t,e,n){let r;const{view:i}=q("APP_CONTEXT");let o=i.state.doc,s=i.state.doc,a=i.state.schema;return kt.subscribe((t=>{t&&n(0,o=t.state.doc)})),t.$$.update=()=>{32&t.$$.dirty&&n(1,r=s.toJSON())},[o,r,a,function(t){n(5,s=t)},function(){console.log(s),window._node=s,console.info("%c [prosemirror-dev-toolkit]: Property added to window._node","color: #b8e248")},s]}class Xn extends ft{constructor(t){super(),ut(this,t,Yn,Hn,c,{})}}function Qn(t,e,n){const r=t.slice();return r[13]=e[n],r}function Zn(t){let e,n,r,i,o=t[13].name+"";function s(){return t[8](t[13])}return{c(){e=C("div"),n=M(o),T(e,"class","svelte-y8glpi")},m(t,o){$(t,e,o),w(e,n),r||(i=E(e,"dblclick",s),r=!0)},p(e,r){t=e,1&r&&o!==(o=t[13].name+"")&&R(n,o)},d(t){t&&k(e),r=!1,i()}}}function tr(t){let e,n,r,i;return{c(){e=C("input"),e.value=n=t[3].name,T(e,"class","svelte-y8glpi")},m(n,o){$(n,e,o),r||(i=[E(e,"input",t[5]),E(e,"keypress",t[6])],r=!0)},p(t,r){8&r&&n!==(n=t[3].name)&&e.value!==n&&(e.value=n)},d(t){t&&k(e),r=!1,a(i)}}}function er(t){let e,n,r,i,o,s,l,c;function u(t,e){return t[3]&&t[3].timestamp===t[13].timestamp?tr:Zn}let f=u(t),h=f(t);function p(){return t[9](t[13])}function d(){return t[10](t[13])}return{c(){e=C("li"),h.c(),n=j(),r=C("button"),r.textContent="Delete",i=j(),o=C("button"),o.textContent="Restore",s=j(),T(r,"class","svelte-y8glpi"),T(o,"class","svelte-y8glpi"),T(e,"class","svelte-y8glpi")},m(t,a){$(t,e,a),h.m(e,null),w(e,n),w(e,r),w(e,i),w(e,o),w(e,s),l||(c=[E(r,"click",p),E(o,"click",d)],l=!0)},p(r,i){f===(f=u(t=r))&&h?h.p(t,i):(h.d(1),h=f(t),h&&(h.c(),h.m(e,n)))},d(t){t&&k(e),h.d(),l=!1,a(c)}}}function nr(t){let e,n=t[0],i=[];for(let e=0;e<n.length;e+=1)i[e]=er(Qn(t,n,e));return{c(){e=C("ul");for(let t=0;t<i.length;t+=1)i[t].c();T(e,"class","svelte-y8glpi")},m(t,n){$(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,[r]){if(127&r){let o;for(n=t[0],o=0;o<n.length;o+=1){const s=Qn(t,n,o);i[o]?i[o].p(s,r):(i[o]=er(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:r,o:r,d(t){t&&k(e),_(i,t)}}}function rr(t,e,n){let r,i,{snapshots:o=[],onUpdate:s,onRestore:a,onDelete:l}=e;function c(t){n(3,r=t)}return t.$$set=t=>{"snapshots"in t&&n(0,o=t.snapshots),"onUpdate"in t&&n(7,s=t.onUpdate),"onRestore"in t&&n(1,a=t.onRestore),"onDelete"in t&&n(2,l=t.onDelete)},[o,a,l,r,c,function(t){n(3,r.name=t.target.value,r),clearTimeout(i),i=setTimeout((()=>{s(r)}),150)},function(t){"Enter"===t.key&&(s(r),clearTimeout(i),n(3,r=void 0))},s,t=>c(t),t=>l(t),t=>a(t)]}ht("ul.svelte-y8glpi.svelte-y8glpi{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-y8glpi+li.svelte-y8glpi{border-top:1px solid var(--color-purple)}li.svelte-y8glpi.svelte-y8glpi{align-items:center;display:flex;font-family:monospace;padding:6px 18px}li.svelte-y8glpi>div.svelte-y8glpi{align-items:center;display:flex;flex-grow:1}input.svelte-y8glpi.svelte-y8glpi{background:transparent;border:0;color:var(--color-white);height:100%;margin:0;padding:2px;width:100%}button.svelte-y8glpi.svelte-y8glpi{background:transparent;border:0;border-radius:3px;color:var(--color-gray-light);cursor:pointer;display:flex;font-size:11px;padding:6px 18px;text-transform:uppercase}button.svelte-y8glpi.svelte-y8glpi:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}");class ir extends ft{constructor(t){super(),ut(this,t,rr,nr,c,{snapshots:0,onUpdate:7,onRestore:1,onDelete:2})}}var or=xt([]),sr="undefined"!=typeof window?localStorage.getItem("__prosemirror-dev-toolkit__snapshots"):null;if(sr&&sr.length>0)try{var ar=JSON.parse(sr);or.set(ar)}catch(t){console.error("Corrupted snapshots values in localStorage",t)}function lr(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=lr(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function cr(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var c=0,u=Math.min(s.text.length,a.text.length);c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var f=cr(s.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}else n-=l,r-=l}}or.subscribe((function(t){"undefined"!=typeof window&&localStorage.setItem("__prosemirror-dev-toolkit__snapshots",JSON.stringify(t))}));var ur=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},fr={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};ur.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,i,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=l}},ur.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},ur.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},ur.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new ur(r,this.size+t.size)},ur.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new ur(n,r)},ur.prototype.cutByIndex=function(t,e){return t==e?ur.empty:0==t&&e==this.content.length?this:new ur(this.content.slice(t,e))},ur.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new ur(r,i)},ur.prototype.addToStart=function(t){return new ur([t].concat(this.content),this.size+t.nodeSize)},ur.prototype.addToEnd=function(t){return new ur(this.content.concat(t),this.size+t.nodeSize)},ur.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},fr.firstChild.get=function(){return this.content.length?this.content[0]:null},fr.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},fr.childCount.get=function(){return this.content.length},ur.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},ur.prototype.maybeChild=function(t){return this.content[t]},ur.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},ur.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),lr(this,t,e)},ur.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),cr(this,t,e,n)},ur.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return pr(0,t);if(t==this.size)return pr(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?pr(n+1,i):pr(n,r);r=i}},ur.prototype.toString=function(){return"<"+this.toStringInner()+">"},ur.prototype.toStringInner=function(){return this.content.join(", ")},ur.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},ur.fromJSON=function(t,e){if(!e)return ur.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new ur(e.map(t.nodeFromJSON))},ur.fromArray=function(t){if(!t.length)return ur.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new ur(e||t,n)},ur.from=function(t){if(!t)return ur.empty;if(t instanceof ur)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ur([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(ur.prototype,fr);var hr={index:0,offset:0};function pr(t,e){return hr.index=t,hr.offset=e,hr}function dr(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!dr(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!dr(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}ur.empty=new ur([],0);var gr=function(t,e){this.type=t,this.attrs=e};function vr(t){var e=Error.call(this,t);return e.__proto__=vr.prototype,e}gr.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},gr.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},gr.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},gr.prototype.eq=function(t){return this==t||this.type==t.type&&dr(this.attrs,t.attrs)},gr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},gr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},gr.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},gr.setFrom=function(t){if(!t||0==t.length)return gr.none;if(t instanceof gr)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},gr.none=[],vr.prototype=Object.create(Error.prototype),vr.prototype.constructor=vr,vr.prototype.name="ReplaceError";var mr=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},yr={size:{configurable:!0}};function br(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),l=a.index,c=a.offset;if(o==e||s.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(br(s.content,e-o-1,n-o-1)))}function xr(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var l=xr(a.content,e-s-1,n);return l&&t.replaceChild(o,a.copy(l))}function wr(t,e,n){if(n.openStart>t.depth)throw new vr("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new vr("Inconsistent open depths");return $r(t,e,n,0)}function $r(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=$r(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),i=n-1;i>=0;i--)r=e.node(i).copy(ur.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return Mr(o,jr(t,a.start,a.end,e,r))}var l=t.parent,c=l.content;return Mr(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}return Mr(o,Sr(t,e,r))}function kr(t,e){if(!e.type.compatibleContent(t.type))throw new vr("Cannot join "+e.type.name+" onto "+t.type.name)}function _r(t,e,n){var r=t.node(n);return kr(r,e.node(n)),r}function Cr(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Or(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Cr(t.nodeAfter,r),o++));for(var a=o;a<s;a++)Cr(i.child(a),r);e&&e.depth==n&&e.textOffset&&Cr(e.nodeBefore,r)}function Mr(t,e){if(!t.type.validContent(e))throw new vr("Invalid content for node "+t.type.name);return t.copy(e)}function jr(t,e,n,r,i){var o=t.depth>i&&_r(t,e,i+1),s=r.depth>i&&_r(n,r,i+1),a=[];return Or(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(kr(o,s),Cr(Mr(o,jr(t,e,n,r,i+1)),a)):(o&&Cr(Mr(o,Sr(t,e,i+1)),a),Or(e,n,i,a),s&&Cr(Mr(s,Sr(n,r,i+1)),a)),Or(r,null,i,a),new ur(a)}function Sr(t,e,n){var r=[];(Or(null,t,n,r),t.depth>n)&&Cr(Mr(_r(t,e,n+1),Sr(t,e,n+1)),r);return Or(e,null,n,r),new ur(r)}yr.size.get=function(){return this.content.size-this.openStart-this.openEnd},mr.prototype.insertAt=function(t,e){var n=xr(this.content,t+this.openStart,e,null);return n&&new mr(n,this.openStart,this.openEnd)},mr.prototype.removeBetween=function(t,e){return new mr(br(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},mr.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},mr.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},mr.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},mr.fromJSON=function(t,e){if(!e)return mr.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new mr(ur.fromJSON(t,e.content),n,r)},mr.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new mr(t,n,r)},Object.defineProperties(mr.prototype,yr),mr.empty=new mr(ur.empty,0,0);var Er=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Tr={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Er.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Tr.parent.get=function(){return this.node(this.depth)},Tr.doc.get=function(){return this.node(0)},Er.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},Er.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},Er.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},Er.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},Er.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},Er.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},Er.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Tr.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Tr.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Tr.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},Er.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},Er.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return gr.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},Er.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},Er.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},Er.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Ir(this,t,n)},Er.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},Er.prototype.max=function(t){return t.pos>this.pos?t:this},Er.prototype.min=function(t){return t.pos<this.pos?t:this},Er.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},Er.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,l=s.offset,c=i-l;if(n.push(o,a,r+l),!c)break;if((o=o.child(a)).isText)break;i=c-1,r+=l+1}return new Er(e,n,i)},Er.resolveCached=function(t,e){for(var n=0;n<Ar.length;n++){var r=Ar[n];if(r.pos==e&&r.doc==t)return r}var i=Ar[Nr]=Er.resolve(t,e);return Nr=(Nr+1)%Rr,i},Object.defineProperties(Er.prototype,Tr);var Ar=[],Nr=0,Rr=12,Ir=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Dr={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Dr.start.get=function(){return this.$from.before(this.depth+1)},Dr.end.get=function(){return this.$to.after(this.depth+1)},Dr.parent.get=function(){return this.$from.node(this.depth)},Dr.startIndex.get=function(){return this.$from.index(this.depth)},Dr.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Ir.prototype,Dr);var Pr=Object.create(null),zr=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||ur.empty,this.marks=r||gr.none},Br={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Br.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Br.childCount.get=function(){return this.content.childCount},zr.prototype.child=function(t){return this.content.child(t)},zr.prototype.maybeChild=function(t){return this.content.maybeChild(t)},zr.prototype.forEach=function(t){this.content.forEach(t)},zr.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},zr.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Br.textContent.get=function(){return this.textBetween(0,this.content.size,"")},zr.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Br.firstChild.get=function(){return this.content.firstChild},Br.lastChild.get=function(){return this.content.lastChild},zr.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},zr.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},zr.prototype.hasMarkup=function(t,e,n){return this.type==t&&dr(this.attrs,e||t.defaultAttrs||Pr)&&gr.sameSet(this.marks,n||gr.none)},zr.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},zr.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},zr.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},zr.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return mr.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new mr(a,r.depth-o,i.depth-o)},zr.prototype.replace=function(t,e,n){return wr(this.resolve(t),this.resolve(e),n)},zr.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(!(e=e.maybeChild(r)))return null;if(i==t||e.isText)return e;t-=i+1}},zr.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},zr.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},zr.prototype.resolve=function(t){return Er.resolveCached(this,t)},zr.prototype.resolveNoCache=function(t){return Er.resolve(this,t)},zr.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Br.isBlock.get=function(){return this.type.isBlock},Br.isTextblock.get=function(){return this.type.isTextblock},Br.inlineContent.get=function(){return this.type.inlineContent},Br.isInline.get=function(){return this.type.isInline},Br.isText.get=function(){return this.type.isText},Br.isLeaf.get=function(){return this.type.isLeaf},Br.isAtom.get=function(){return this.type.isAtom},zr.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),function(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}(this.marks,t)},zr.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},zr.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=ur.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},zr.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},zr.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},zr.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=gr.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!gr.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},zr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},zr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=ur.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(zr.prototype,Br);var Fr=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},qr={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Fr.parse=function(t,e){var n=new Lr(t,e);if(null==n.next)return Fr.empty;var r=Gr(n);n.next&&n.err("Unexpected trailing text");var i=function(t){var e=Object.create(null);return n(Yr(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];Yr(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new Fr(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Wr);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}(function(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var l=n();return r(e,l),i(o(t.expr,l),l),[r(l)]}if("plus"==t.type){var c=n();return i(o(t.expr,e),c),i(o(t.expr,c),c),[r(c)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,f=0;f<t.min;f++){var h=n();i(o(t.expr,u),h),u=h}if(-1==t.max)i(o(t.expr,u),u);else for(var p=t.min;p<t.max;p++){var d=n();r(u,d),i(o(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var l=i.next[a],c=i.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==r.indexOf(c)&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i},Fr.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Fr.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},qr.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},qr.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Fr.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Fr.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return ur.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var c=o.next[l],u=o.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var f=i(u,s.concat(c));if(f)return f}}}(this,[])},Fr.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Fr.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var l=i.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),e[l.name]=!0)}}},qr.edgeCount.get=function(){return this.next.length>>1},Fr.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Fr.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties(Fr.prototype,qr),Fr.empty=new Fr(!0);var Lr=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Ur={next:{configurable:!0}};function Gr(t){var e=[];do{e.push(Jr(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Jr(t){var e=[];do{e.push(Vr(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Vr(t){for(var e=function(t){if(t.eat("(")){var e=Gr(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}0==i.length&&t.err("No node type or group '"+e+"' found");return i}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Hr(t,e)}return e}function Kr(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Hr(t,e){var n=Kr(t),r=n;return t.eat(",")&&(r="}"!=t.next?Kr(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Wr(t,e){return e-t}function Yr(t,e){var n=[];return function e(r){var i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,l=s.to;a||-1!=n.indexOf(l)||e(l)}}(e),n.sort(Wr)}Ur.next.get=function(){return this.tokens[this.pos]},Lr.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Lr.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Lr.prototype,Ur);var Xr=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=function(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Zr(t[n]);return e}(n.attrs),this.defaultAttrs=function(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},Qr={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Qr.isInline.get=function(){return!this.isBlock},Qr.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Qr.isLeaf.get=function(){return this.contentMatch==Fr.empty},Qr.isAtom.get=function(){return this.isLeaf||this.spec.atom},Xr.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Xr.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Xr.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:function(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}(this.attrs,t)},Xr.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new zr(this,this.computeAttrs(t),ur.from(e),gr.setFrom(n))},Xr.prototype.createChecked=function(t,e,n){if(e=ur.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new zr(this,this.computeAttrs(t),e,gr.setFrom(n))},Xr.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=ur.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(ur.empty,!0);return i?new zr(this,t,e.append(i),gr.setFrom(n)):null},Xr.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Xr.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Xr.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Xr.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:gr.empty:t},Xr.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Xr(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Xr.prototype,Qr);var Zr=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ti={isRequired:{configurable:!0}};ti.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Zr.prototype,ti);var ei={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ni={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ri={ol:!0,ul:!0};function ii(t){return(t?1:0)|("full"===t?2:0)}var oi=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=gr.none,this.pendingMarks=r,this.stashMarks=[]};oi.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(ur.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},oi.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=ur.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(ur.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},oi.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},oi.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):li(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},oi.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ei.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var si=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=ii(e.preserveWhitespace)|(n?4:0);r=i?new oi(i.type,i.attrs,gr.none,gr.none,!0,e.topMatch||i.type.contentMatch,o):new oi(n?null:t.schema.topNodeType,null,gr.none,gr.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},ai={top:{configurable:!0},currentPos:{configurable:!0}};function li(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}ai.top.get=function(){return this.nodes[this.open]},si.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},si.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},si.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();ri.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ri.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:ni.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(ei.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},si.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},si.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},si.prototype.readStyles=function(t){var e=gr.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e},si.prototype.addElementByRule=function(t,e,n){var r,i,o,s=this;e.node?(i=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,r)}r&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},si.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&ei.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},si.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},si.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},si.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},si.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=null==r?-5&i.options:ii(r);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new oi(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},si.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},si.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},si.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},ai.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},si.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},si.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},si.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},si.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},si.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var l=n[t];if(""==l){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var c=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},si.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},si.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},si.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var i=r.popFromStashMark(t);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(si.prototype,ai);var ci=function(t,e){this.nodes=t||{},this.marks=e||{}};function ui(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function fi(t){return t.document||window.document}ci.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=fi(e).createDocumentFragment());var i=n,o=null;return t.forEach((function(t){if(o||t.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<t.marks.length;){var l=t.marks[s++],c=r.serializeMark(l,t.isInline,e);c&&(o.push(l,i),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(r.serializeNodeInner(t,e))})),n},ci.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var n=ci.renderSpec(fi(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},ci.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},ci.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&ci.renderSpec(fi(n),r(t,e))},ci.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var r=e[0],i=r.indexOf(" ");i>0&&(n=r.slice(0,i),r=r.slice(i+1));var o=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var u=c.indexOf(" ");u>0?s.setAttributeNS(c.slice(0,u),c.slice(u+1),a[c]):s.setAttribute(c,a[c])}for(var f=l;f<e.length;f++){var h=e[f];if(0===h){if(f<e.length-1||f>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=ci.renderSpec(t,h,n),d=p.dom,g=p.contentDOM;if(s.appendChild(d),g){if(o)throw new RangeError("Multiple content holes");o=g}}return{dom:s,contentDOM:o}},ci.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ci(this.nodesFromSchema(t),this.marksFromSchema(t)))},ci.nodesFromSchema=function(t){var e=ui(t.nodes);return e.text||(e.text=function(t){return t.text}),e},ci.marksFromSchema=function(t){return ui(t.marks)};var hi={prettyPrint:function(t,e){var n,r,i,o,s,a;for(r=(e=e||{}).indent_size||4,i=e.indent_char||" ",s=e.brace_style||"collapse",o=0==e.max_char?1/0:e.max_char||70,a=e.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],(n=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}},this.get_content=function(){for(var t="",e=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return e.length?e.join(""):["","TK_EOF"];if(t=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(t,this.Utils.whitespace))e.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){e.push("\n");for(var r=0;r<this.indent_level;r++)e.push(this.indent_string);this.line_char_count=0}else e.push(" "),this.line_char_count++;n=!1}e.push(t)}}return e.length?e.join(""):""},this.get_contents_to=function(t){if(this.pos==this.input.length)return["","TK_EOF"];var e="",n=new RegExp("</"+t+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),i=r?r.index:this.input.length;return this.pos<i&&(e=this.input.substring(this.pos,i),this.pos=i),e},this.record_tag=function(t){this.tags[t+"count"]?(this.tags[t+"count"]++,this.tags[t+this.tags[t+"count"]]=this.indent_level):(this.tags[t+"count"]=1,this.tags[t+this.tags[t+"count"]]=this.indent_level),this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent,this.tags.parent=t+this.tags[t+"count"]},this.retrieve_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]],this.tags.parent=this.tags[e+"parent"]),delete this.tags[t+this.tags[t+"count"]+"parent"],delete this.tags[t+this.tags[t+"count"]],1==this.tags[t+"count"]?delete this.tags[t+"count"]:this.tags[t+"count"]--}},this.get_tag=function(){var t,e,n="",r=[],i=!1;do{if(this.pos>=this.input.length)return r.length?r.join(""):["","TK_EOF"];n=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(n,this.Utils.whitespace)?(i=!0,this.line_char_count--):("'"!==n&&'"'!==n||r[1]&&"!"===r[1]||(n+=this.get_unformatted(n),i=!0),"="===n&&(i=!1),r.length&&"="!==r[r.length-1]&&">"!==n&&i&&(this.line_char_count>=this.max_char?(this.print_newline(!1,r),this.line_char_count=0):(r.push(" "),this.line_char_count++),i=!1),"<"===n&&(t=this.pos-1),r.push(n))}while(">"!==n);var o,s=r.join("");o=-1!=s.indexOf(" ")?s.indexOf(" "):s.indexOf(">");var l=s.substring(1,o).toLowerCase();if("/"===s.charAt(s.length-2)||this.Utils.in_array(l,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===l)this.record_tag(l),this.tag_type="SCRIPT";else if("style"===l)this.record_tag(l),this.tag_type="STYLE";else if(this.Utils.in_array(l,a)){var c=this.get_unformatted("</"+l+">",s);r.push(c),t>0&&this.Utils.in_array(this.input.charAt(t-1),this.Utils.whitespace)&&r.splice(0,0,this.input.charAt(t-1)),e=this.pos-1,this.Utils.in_array(this.input.charAt(e+1),this.Utils.whitespace)&&r.push(this.input.charAt(e+1)),this.tag_type="SINGLE"}else if("!"===l.charAt(0))if(-1!=l.indexOf("[if")){if(-1!=s.indexOf("!IE")){c=this.get_unformatted("--\x3e",s);r.push(c)}this.tag_type="START"}else if(-1!=l.indexOf("[endif"))this.tag_type="END",this.unindent();else if(-1!=l.indexOf("[cdata[")){c=this.get_unformatted("]]>",s);r.push(c),this.tag_type="SINGLE"}else{c=this.get_unformatted("--\x3e",s);r.push(c),this.tag_type="SINGLE"}else"/"===l.charAt(0)?(this.retrieve_tag(l.substring(1)),this.tag_type="END"):(this.record_tag(l),this.tag_type="START"),this.Utils.in_array(l,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return r.join("")},this.get_unformatted=function(t,e){if(e&&-1!=e.toLowerCase().indexOf(t))return"";var n="",r="",i=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if("\n"===n||"\r"===n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,i=!0}while(-1==r.toLowerCase().indexOf(t));return r},this.get_token=function(){var t;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var e=this.last_token.substr(7);return"string"!=typeof(t=this.get_contents_to(e))?t:[t,"TK_"+e]}return"CONTENT"===this.current_mode?"string"!=typeof(t=this.get_content())?t:[t,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(t=this.get_tag())?t:[t,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(t){return(t=this.indent_level+t||0)<1?"":Array(t+1).join(this.indent_string)},this.printer=function(t,e,n,r,i){this.input=t||"",this.output=[],this.indent_character=e,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var o=0;o<this.indent_size;o++)this.indent_string+=this.indent_character;this.print_newline=function(t,e){if(this.line_char_count=0,e&&e.length){if(!t)for(;this.Utils.in_array(e[e.length-1],this.Utils.whitespace);)e.pop();e.push("\n");for(var n=0;n<this.indent_level;n++)e.push(this.indent_string)}},this.print_token=function(t){this.output.push(t)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}).printer(t,i,r,o,s);;){var l=n.get_token();if(n.token_text=l[0],n.token_type=l[1],"TK_EOF"===n.token_type)break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent(),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===n.last_token&&""===n.last_text){var c=n.token_text.match(/\w+/)[0],u=n.output[n.output.length-1].match(/<\s*(\w+)/);null!==u&&u[1]===c||n.print_newline(!0,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var f=n.token_text.match(/^\s*<([a-z]+)/i);f&&n.Utils.in_array(f[1],a)||n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_CONTENT":""!==n.token_text&&n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==n.token_text){n.output.push("\n");var h=n.token_text;if("TK_SCRIPT"==n.token_type)var p="function"==typeof js_beautify&&js_beautify;else if("TK_STYLE"==n.token_type)p="function"==typeof css_beautify&&css_beautify;if("keep"==e.indent_scripts)var d=0;else if("separate"==e.indent_scripts)d=-n.indent_level;else d=1;var g=n.get_full_indent(d);if(p)h=p(h.replace(/^\s*/,g),e);else{var v=h.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,m=n.get_full_indent(d-v);h=h.replace(/^\s*/,g).replace(/\r\n|\r|\n/g,"\n"+m).replace(/\s*$/,"")}h&&(n.print_token(h),n.print_newline(!0,n.output))}n.current_mode="TAG"}n.last_token=n.token_type,n.last_text=n.token_text}return n.output.join("")}},pi={exports:{}};!function(t){var e=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;e.Diff=function(t,e){return[t,e]},e.prototype.diff_main=function(t,n,r,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==t||null==n)throw new Error("Null input. (diff_main)");if(t==n)return t?[new e.Diff(0,t)]:[];void 0===r&&(r=!0);var s=r,a=this.diff_commonPrefix(t,n),l=t.substring(0,a);t=t.substring(a),n=n.substring(a),a=this.diff_commonSuffix(t,n);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),n=n.substring(0,n.length-a);var u=this.diff_compute_(t,n,s,o);return l&&u.unshift(new e.Diff(0,l)),c&&u.push(new e.Diff(0,c)),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(t,r,i,o){var s;if(!t)return[new e.Diff(1,r)];if(!r)return[new e.Diff(n,t)];var a=t.length>r.length?t:r,l=t.length>r.length?r:t,c=a.indexOf(l);if(-1!=c)return s=[new e.Diff(1,a.substring(0,c)),new e.Diff(0,l),new e.Diff(1,a.substring(c+l.length))],t.length>r.length&&(s[0][0]=s[2][0]=n),s;if(1==l.length)return[new e.Diff(n,t),new e.Diff(1,r)];var u=this.diff_halfMatch_(t,r);if(u){var f=u[0],h=u[1],p=u[2],d=u[3],g=u[4],v=this.diff_main(f,p,i,o),m=this.diff_main(h,d,i,o);return v.concat([new e.Diff(0,g)],m)}return i&&t.length>100&&r.length>100?this.diff_lineMode_(t,r,o):this.diff_bisect_(t,r,o)},e.prototype.diff_lineMode_=function(t,r,i){var o=this.diff_linesToChars_(t,r);t=o.chars1,r=o.chars2;var s=o.lineArray,a=this.diff_main(t,r,!1,i);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push(new e.Diff(0,""));for(var l=0,c=0,u=0,f="",h="";l<a.length;){switch(a[l][0]){case 1:u++,h+=a[l][1];break;case n:c++,f+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p=this.diff_main(f,h,!1,i),d=p.length-1;d>=0;d--)a.splice(l,0,p[d]);l+=p.length}u=0,c=0,f="",h=""}l++}return a.pop(),a},e.prototype.diff_bisect_=function(t,r,i){for(var o=t.length,s=r.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),f=new Array(c),h=0;h<c;h++)u[h]=-1,f[h]=-1;u[l+1]=0,f[l+1]=0;for(var p=o-s,d=p%2!=0,g=0,v=0,m=0,y=0,b=0;b<a&&!((new Date).getTime()>i);b++){for(var x=-b+g;x<=b-v;x+=2){for(var w=l+x,$=(M=x==-b||x!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-x;M<o&&$<s&&t.charAt(M)==r.charAt($);)M++,$++;if(u[w]=M,M>o)v+=2;else if($>s)g+=2;else if(d){if((C=l+p-x)>=0&&C<c&&-1!=f[C])if(M>=(_=o-f[C]))return this.diff_bisectSplit_(t,r,M,$,i)}}for(var k=-b+m;k<=b-y;k+=2){for(var _,C=l+k,O=(_=k==-b||k!=b&&f[C-1]<f[C+1]?f[C+1]:f[C-1]+1)-k;_<o&&O<s&&t.charAt(o-_-1)==r.charAt(s-O-1);)_++,O++;if(f[C]=_,_>o)y+=2;else if(O>s)m+=2;else if(!d){if((w=l+p-k)>=0&&w<c&&-1!=u[w]){var M;$=l+(M=u[w])-w;if(M>=(_=o-_))return this.diff_bisectSplit_(t,r,M,$,i)}}}}return[new e.Diff(n,t),new e.Diff(1,r)]},e.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),l=e.substring(r),c=this.diff_main(o,s,!1,i),u=this.diff_main(a,l,!1,i);return c.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,s=-1,a=n.length;s<t.length-1;){-1==(s=t.indexOf("\n",i))&&(s=t.length-1);var l=t.substring(i,s+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?e+=String.fromCharCode(r[l]):(a==o&&(l=t.substring(i),s=t.length),e+=String.fromCharCode(a),r[l]=a,n[a++]=l),i=s+1}return e}n[0]="";var o=4e4,s=i(t);return o=65535,{chars1:s,chars2:i(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,s=1;;){var a=t.substring(i-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(t,e,n){for(var r,o,s,a,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var f=i.diff_commonPrefix(t.substring(n),e.substring(c)),h=i.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<h+f&&(u=e.substring(c-h,c)+e.substring(c,c+f),r=t.substring(0,n-h),o=t.substring(n+f),s=e.substring(0,c-h),a=e.substring(c+f))}return 2*u.length>=t.length?[r,o,s,a,u]:null}var s,a,l,c,u,f=o(n,r,Math.ceil(n.length/4)),h=o(n,r,Math.ceil(n.length/2));return f||h?(s=h?f&&f[4].length>h[4].length?f:h:f,t.length>e.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var r=!1,i=[],o=0,s=null,a=0,l=0,c=0,u=0,f=0;a<t.length;)0==t[a][0]?(i[o++]=a,l=u,c=f,u=0,f=0,s=t[a][1]):(1==t[a][0]?u+=t[a][1].length:f+=t[a][1].length,s&&s.length<=Math.max(l,c)&&s.length<=Math.max(u,f)&&(t.splice(i[o-1],0,new e.Diff(n,s)),t[i[o-1]+1][0]=1,o--,a=--o>0?i[o-1]:-1,l=0,c=0,u=0,f=0,s=null,r=!0)),a++;for(r&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==n&&1==t[a][0]){var h=t[a-1][1],p=t[a][1],d=this.diff_commonOverlap_(h,p),g=this.diff_commonOverlap_(p,h);d>=g?(d>=h.length/2||d>=p.length/2)&&(t.splice(a,0,new e.Diff(0,p.substring(0,d))),t[a-1][1]=h.substring(0,h.length-d),t[a+1][1]=p.substring(d),a++):(g>=h.length/2||g>=p.length/2)&&(t.splice(a,0,new e.Diff(0,h.substring(0,g))),t[a-1][0]=1,t[a-1][1]=p.substring(0,p.length-g),t[a+1][0]=n,t[a+1][1]=h.substring(g),a++),a++}a++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),i=n.charAt(0),o=r.match(e.nonAlphaNumericRegex_),s=i.match(e.nonAlphaNumericRegex_),a=o&&r.match(e.whitespaceRegex_),l=s&&i.match(e.whitespaceRegex_),c=a&&r.match(e.linebreakRegex_),u=l&&i.match(e.linebreakRegex_),f=c&&t.match(e.blanklineEndRegex_),h=u&&n.match(e.blanklineStartRegex_);return f||h?5:c||u?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var i=t[r-1][1],o=t[r][1],s=t[r+1][1],a=this.diff_commonSuffix(i,o);if(a){var l=o.substring(o.length-a);i=i.substring(0,i.length-a),o=l+o.substring(0,o.length-a),s=l+s}for(var c=i,u=o,f=s,h=n(i,o)+n(o,s);o.charAt(0)===s.charAt(0);){i+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var p=n(i,o)+n(o,s);p>=h&&(h=p,c=i,u=o,f=s)}t[r-1][1]!=c&&(c?t[r-1][1]=c:(t.splice(r-1,1),r--),t[r][1]=u,f?t[r+1][1]=f:(t.splice(r+1,1),r--))}r++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var r=!1,i=[],o=0,s=null,a=0,l=!1,c=!1,u=!1,f=!1;a<t.length;)0==t[a][0]?(t[a][1].length<this.Diff_EditCost&&(u||f)?(i[o++]=a,l=u,c=f,s=t[a][1]):(o=0,s=null),u=f=!1):(t[a][0]==n?f=!0:u=!0,s&&(l&&c&&u&&f||s.length<this.Diff_EditCost/2&&l+c+u+f==3)&&(t.splice(i[o-1],0,new e.Diff(n,s)),t[i[o-1]+1][0]=1,o--,s=null,l&&c?(u=f=!0,o=0):(a=--o>0?i[o-1]:-1,u=f=!1),r=!0)),a++;r&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push(new e.Diff(0,""));for(var r,i=0,o=0,s=0,a="",l="";i<t.length;)switch(t[i][0]){case 1:s++,l+=t[i][1],i++;break;case n:o++,a+=t[i][1],i++;break;case 0:o+s>1?(0!==o&&0!==s&&(0!==(r=this.diff_commonPrefix(l,a))&&(i-o-s>0&&0==t[i-o-s-1][0]?t[i-o-s-1][1]+=l.substring(0,r):(t.splice(0,0,new e.Diff(0,l.substring(0,r))),i++),l=l.substring(r),a=a.substring(r)),0!==(r=this.diff_commonSuffix(l,a))&&(t[i][1]=l.substring(l.length-r)+t[i][1],l=l.substring(0,l.length-r),a=a.substring(0,a.length-r))),i-=o+s,t.splice(i,o+s),a.length&&(t.splice(i,0,new e.Diff(n,a)),i++),l.length&&(t.splice(i,0,new e.Diff(1,l)),i++),i++):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,s=0,o=0,a="",l=""}""===t[t.length-1][1]&&t.pop();var c=!1;for(i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),c=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var r,i=0,o=0,s=0,a=0;for(r=0;r<t.length&&(1!==t[r][0]&&(i+=t[r][1].length),t[r][0]!==n&&(o+=t[r][1].length),!(i>e));r++)s=i,a=o;return t.length!=r&&t[r][0]===n?a:a+(e-s)},e.prototype.diff_prettyHtml=function(t){for(var e=[],r=/&/g,i=/</g,o=/>/g,s=/\n/g,a=0;a<t.length;a++){var l=t[a][0],c=t[a][1].replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(s,"&para;<br>");switch(l){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==n&&(e[r]=t[r][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,r=0,i=0,o=0;o<t.length;o++){var s=t[o][0],a=t[o][1];switch(s){case 1:r+=a.length;break;case n:i+=a.length;break;case 0:e+=Math.max(r,i),r=0,i=0}}return e+=Math.max(r,i)},e.prototype.diff_toDelta=function(t){for(var e=[],r=0;r<t.length;r++)switch(t[r][0]){case 1:e[r]="+"+encodeURI(t[r][1]);break;case n:e[r]="-"+t[r][1].length;break;case 0:e[r]="="+t[r][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,r){for(var i=[],o=0,s=0,a=r.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{i[o++]=new e.Diff(1,decodeURI(c))}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var f=t.substring(s,s+=u);"="==a[l].charAt(0)?i[o++]=new e.Diff(0,f):i[o++]=new e.Diff(n,f);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return i},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),i=this;function o(t,r){var o=t/e.length,s=Math.abs(n-r);return i.Match_Distance?o+s/i.Match_Distance:s?1:o}var s=this.Match_Threshold,a=t.indexOf(e,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=t.lastIndexOf(e,n+e.length))&&(s=Math.min(o(0,a),s)));var l,c,u=1<<e.length-1;a=-1;for(var f,h=e.length+t.length,p=0;p<e.length;p++){for(l=0,c=h;l<c;)o(p,n+c)<=s?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var d=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<p)-1;for(var m=g;m>=d;m--){var y=r[t.charAt(m-1)];if(v[m]=0===p?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&u){var b=o(p,m-1);if(b<=s){if(s=b,!((a=m-1)>n))break;d=Math.max(1,2*n-a)}}}if(o(p+1,n)>s)break;f=v}return a},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},e.prototype.patch_addContext_=function(t,n){if(0!=n.length){if(null===t.start2)throw Error("patch not initialized");for(var r=n.substring(t.start2,t.start2+t.length1),i=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=n.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var o=n.substring(t.start2-i,t.start2);o&&t.diffs.unshift(new e.Diff(0,o));var s=n.substring(t.start2+t.length1,t.start2+t.length1+i);s&&t.diffs.push(new e.Diff(0,s)),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+s.length,t.length2+=o.length+s.length}},e.prototype.patch_make=function(t,r,i){var o,s;if("string"==typeof t&&"string"==typeof r&&void 0===i)o=t,(s=this.diff_main(o,r,!0)).length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&"object"==typeof t&&void 0===r&&void 0===i)s=t,o=this.diff_text1(s);else if("string"==typeof t&&r&&"object"==typeof r&&void 0===i)o=t,s=r;else{if("string"!=typeof t||"string"!=typeof r||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=t,s=i}if(0===s.length)return[];for(var a=[],l=new e.patch_obj,c=0,u=0,f=0,h=o,p=o,d=0;d<s.length;d++){var g=s[d][0],v=s[d][1];switch(c||0===g||(l.start1=u,l.start2=f),g){case 1:l.diffs[c++]=s[d],l.length2+=v.length,p=p.substring(0,f)+v+p.substring(f);break;case n:l.length1+=v.length,l.diffs[c++]=s[d],p=p.substring(0,f)+p.substring(f+v.length);break;case 0:v.length<=2*this.Patch_Margin&&c&&s.length!=d+1?(l.diffs[c++]=s[d],l.length1+=v.length,l.length2+=v.length):v.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,h),a.push(l),l=new e.patch_obj,c=0,h=p,u=f)}1!==g&&(u+=v.length),g!==n&&(f+=v.length)}return c&&(this.patch_addContext_(l,h),a.push(l)),a},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=new e.patch_obj;o.diffs=[];for(var s=0;s<i.diffs.length;s++)o.diffs[s]=new e.Diff(i.diffs[s][0],i.diffs[s][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var r=this.patch_addPadding(t);e=r+e+r,this.patch_splitMax(t);for(var i=0,o=[],s=0;s<t.length;s++){var a,l,c=t[s].start2+i,u=this.diff_text1(t[s].diffs),f=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(e,u.substring(0,this.Match_MaxBits),c))&&(-1==(f=this.match_main(e,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=f)&&(a=-1):a=this.match_main(e,u,c),-1==a)o[s]=!1,i-=t[s].length2-t[s].length1;else if(o[s]=!0,i=a-c,u==(l=-1==f?e.substring(a,a+u.length):e.substring(a,f+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[s].diffs)+e.substring(a+u.length);else{var h=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(h)/u.length>this.Patch_DeleteThreshold)o[s]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p,d=0,g=0;g<t[s].diffs.length;g++){var v=t[s].diffs[g];0!==v[0]&&(p=this.diff_xIndex(h,d)),1===v[0]?e=e.substring(0,a+p)+v[1]+e.substring(a+p):v[0]===n&&(e=e.substring(0,a+p)+e.substring(a+this.diff_xIndex(h,d+v[1].length))),v[0]!==n&&(d+=v[1].length)}}}}return[e=e.substring(r.length,e.length-r.length),o]},e.prototype.patch_addPadding=function(t){for(var n=this.Patch_Margin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=n,t[i].start2+=n;var o=t[0],s=o.diffs;if(0==s.length||0!=s[0][0])s.unshift(new e.Diff(0,r)),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>s[0][1].length){var a=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}if(0==(s=(o=t[t.length-1]).diffs).length||0!=s[s.length-1][0])s.push(new e.Diff(0,r)),o.length1+=n,o.length2+=n;else if(n>s[s.length-1][1].length){a=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,a),o.length1+=a,o.length2+=a}return r},e.prototype.patch_splitMax=function(t){for(var r=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=r)){var o=t[i];t.splice(i--,1);for(var s=o.start1,a=o.start2,l="";0!==o.diffs.length;){var c=new e.patch_obj,u=!0;for(c.start1=s-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new e.Diff(0,l)));0!==o.diffs.length&&c.length1<r-this.Patch_Margin;){var f=o.diffs[0][0],h=o.diffs[0][1];1===f?(c.length2+=h.length,a+=h.length,c.diffs.push(o.diffs.shift()),u=!1):f===n&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*r?(c.length1+=h.length,s+=h.length,u=!1,c.diffs.push(new e.Diff(f,h)),o.diffs.shift()):(h=h.substring(0,r-c.length1-this.Patch_Margin),c.length1+=h.length,s+=h.length,0===f?(c.length2+=h.length,a+=h.length):u=!1,c.diffs.push(new e.Diff(f,h)),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new e.Diff(0,p))),u||t.splice(++i,0,c)}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},e.prototype.patch_fromText=function(t){var r=[];if(!t)return r;for(var i=t.split("\n"),o=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var a=i[o].match(s);if(!a)throw new Error("Invalid patch string: "+i[o]);var l=new e.patch_obj;for(r.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),o++;o<i.length;){var c=i[o].charAt(0);try{var u=decodeURI(i[o].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new e.Diff(n,u));else if("+"==c)l.diffs.push(new e.Diff(1,u));else if(" "==c)l.diffs.push(new e.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return r},(e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:t="+";break;case n:t="-";break;case 0:t=" "}e[r+1]=t+encodeURI(this.diffs[r][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=n,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0}(pi);var di=pi.exports,gi={exports:{}},vi=/[|\\{}()[\]^$+*?.]/g,mi=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(vi,"\\$&")},yi={exports:{}},bi={exports:{}},xi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},wi={};for(var $i in xi)xi.hasOwnProperty($i)&&(wi[xi[$i]]=$i);var ki=bi.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var _i in ki)if(ki.hasOwnProperty(_i)){if(!("channels"in ki[_i]))throw new Error("missing channels property: "+_i);if(!("labels"in ki[_i]))throw new Error("missing channel labels property: "+_i);if(ki[_i].labels.length!==ki[_i].channels)throw new Error("channel and label counts mismatch: "+_i);var Ci=ki[_i].channels,Oi=ki[_i].labels;delete ki[_i].channels,delete ki[_i].labels,Object.defineProperty(ki[_i],"channels",{value:Ci}),Object.defineProperty(ki[_i],"labels",{value:Oi})}ki.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),l=a-s;return a===s?e=0:r===a?e=(i-o)/l:i===a?e=2+(o-r)/l:o===a&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+a)/2,[e,100*(a===s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]},ki.rgb.hsv=function(t){var e,n,r,i,o,s=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),f=function(t){return(c-t)/6/u+.5};return 0===u?i=o=0:(o=u/c,e=f(s),n=f(a),r=f(l),s===c?i=r-n:a===c?i=1/3+e-r:l===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},ki.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[ki.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},ki.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},ki.rgb.keyword=function(t){var e=wi[t];if(e)return e;var n,r,i,o=1/0;for(var s in xi)if(xi.hasOwnProperty(s)){var a=xi[s],l=(r=t,i=a,Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)+Math.pow(r[2]-i[2],2));l<o&&(o=l,n=s)}return n},ki.keyword.rgb=function(t){return xi[t]},ki.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},ki.rgb.lab=function(t){var e=ki.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},ki.hsl.rgb=function(t){var e,n,r,i,o,s=t[0]/360,a=t[1]/100,l=t[2]/100;if(0===a)return[o=255*l,o,o];e=2*l-(n=l<.5?l*(1+a):l+a-l*a),i=[0,0,0];for(var c=0;c<3;c++)(r=s+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[c]=255*o;return i},ki.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},ki.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),a=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},ki.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,s=t[2]/100,a=Math.max(s,.01);return r=(2-o)*s,n=o*a,[i,100*(n=(n/=(e=(2-o)*a)<=1?e:2-e)||0),100*(r/=2)]},ki.hwb.rgb=function(t){var e,n,r,i,o,s,a,l=t[0]/360,c=t[1]/100,u=t[2]/100,f=c+u;switch(f>1&&(c/=f,u/=f),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),i=c+r*((n=1-u)-c),e){default:case 6:case 0:o=n,s=i,a=c;break;case 1:o=i,s=n,a=c;break;case 2:o=c,s=n,a=i;break;case 3:o=c,s=i,a=n;break;case 4:o=i,s=c,a=n;break;case 5:o=n,s=c,a=i}return[255*o,255*s,255*a]},ki.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},ki.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,s=t[2]/100;return n=-.9689*i+1.8758*o+.0415*s,r=.0557*i+-.204*o+1.057*s,e=(e=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},ki.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},ki.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),s=Math.pow(e,3),a=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=s>.008856?s:(e-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},ki.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},ki.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},ki.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:ki.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},ki.hsv.ansi16=function(t){return ki.rgb.ansi16(ki.hsv.rgb(t),t[2])},ki.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},ki.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},ki.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},ki.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},ki.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},ki.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),s=Math.min(Math.min(n,r),i),a=o-s;return e=a<=0?0:o===n?(r-i)/a%6:o===r?2+(i-n)/a:4+(n-r)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?s/(1-a):0)]},ki.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},ki.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},ki.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],s=e%1*6,a=s%1,l=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},ki.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},ki.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},ki.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},ki.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},ki.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},ki.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},ki.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},ki.gray.hsl=ki.gray.hsv=function(t){return[0,0,t[0]]},ki.gray.hwb=function(t){return[0,100,t[0]]},ki.gray.cmyk=function(t){return[0,0,0,t[0]]},ki.gray.lab=function(t){return[t[0],0,0]},ki.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},ki.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};var Mi=bi.exports;function ji(t){var e=function(){for(var t={},e=Object.keys(Mi),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(Mi[r]),o=i.length,s=0;s<o;s++){var a=i[s],l=e[a];-1===l.distance&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(a))}return e}function Si(t,e){return function(n){return e(t(n))}}function Ei(t,e){for(var n=[e[t].parent,t],r=Mi[e[t].parent][t],i=e[t].parent;e[i].parent;)n.unshift(e[i].parent),r=Si(Mi[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}var Ti,Ai,Ni,Ri,Ii,Di=bi.exports,Pi=function(t){for(var e=ji(t),n={},r=Object.keys(e),i=r.length,o=0;o<i;o++){var s=r[o];null!==e[s].parent&&(n[s]=Ei(s,e))}return n},zi={};Object.keys(Di).forEach((function(t){zi[t]={},Object.defineProperty(zi[t],"channels",{value:Di[t].channels}),Object.defineProperty(zi[t],"labels",{value:Di[t].labels});var e=Pi(t);Object.keys(e).forEach((function(n){var r=e[n];zi[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),zi[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),Ti=yi,Ai=zi,Ni=function(t,e){return function(){var n=t.apply(Ai,arguments);return"["+(n+e)+"m"}},Ri=function(t,e){return function(){var n=t.apply(Ai,arguments);return"["+(38+e)+";5;"+n+"m"}},Ii=function(t,e){return function(){var n=t.apply(Ai,arguments);return"["+(38+e)+";2;"+n[0]+";"+n[1]+";"+n[2]+"m"}},Object.defineProperty(Ti,"exports",{enumerable:!0,get:function(){var t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.grey=e.color.gray;for(var n=0,r=Object.keys(e);n<r.length;n++){for(var i=r[n],o=e[i],s=0,a=Object.keys(o);s<a.length;s++){var l=a[s],c=o[l];e[l]={open:"["+c[0]+"m",close:"["+c[1]+"m"},o[l]=e[l],t.set(c[0],c[1])}Object.defineProperty(e,i,{value:o,enumerable:!1}),Object.defineProperty(e,"codes",{value:t,enumerable:!1})}var u=function(t){return t},f=function(t,e,n){return[t,e,n]};e.color.close="[39m",e.bgColor.close="[49m",e.color.ansi={ansi:Ni(u,0)},e.color.ansi256={ansi256:Ri(u,0)},e.color.ansi16m={rgb:Ii(f,0)},e.bgColor.ansi={ansi:Ni(u,10)},e.bgColor.ansi256={ansi256:Ri(u,10)},e.bgColor.ansi16m={rgb:Ii(f,10)};for(var h=0,p=Object.keys(Ai);h<p.length;h++){var d=p[h];if("object"==typeof Ai[d]){var g=Ai[d];"ansi16"===d&&(d="ansi"),"ansi16"in g&&(e.color.ansi[d]=Ni(g.ansi16,0),e.bgColor.ansi[d]=Ni(g.ansi16,10)),"ansi256"in g&&(e.color.ansi256[d]=Ri(g.ansi256,0),e.bgColor.ansi256[d]=Ri(g.ansi256,10)),"rgb"in g&&(e.color.ansi16m[d]=Ii(g.rgb,0),e.bgColor.ansi16m[d]=Ii(g.rgb,10))}}return e}});var Bi,Fi=t,qi=function(t,e){e=e||process.argv;var n=t.startsWith("-")?"":1===t.length?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return-1!==r&&(-1===i||r<i)},Li=process.env;function Ui(t){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function(t){if(!1===Bi)return 0;if(qi("color=16m")||qi("color=full")||qi("color=truecolor"))return 3;if(qi("color=256"))return 2;if(t&&!t.isTTY&&!0!==Bi)return 0;var e=Bi?1:0;if("win32"===process.platform){var n=Fi.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Li)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(t){return t in Li}))||"codeship"===Li.CI_NAME?1:e;if("TEAMCITY_VERSION"in Li)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Li.TEAMCITY_VERSION)?1:0;if("truecolor"===Li.COLORTERM)return 3;if("TERM_PROGRAM"in Li){var r=parseInt((Li.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Li.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Li.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Li.TERM)||"COLORTERM"in Li?1:(Li.TERM,e)}(t))}qi("no-color")||qi("no-colors")||qi("color=false")?Bi=!1:(qi("color")||qi("colors")||qi("color=true")||qi("color=always"))&&(Bi=!0),"FORCE_COLOR"in Li&&(Bi=0===Li.FORCE_COLOR.length||0!==parseInt(Li.FORCE_COLOR,10));var Gi={supportsColor:Ui,stdout:Ui(process.stdout),stderr:Ui(process.stderr)},Ji=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Vi=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Ki=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,Hi=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,Wi=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function Yi(t){return"u"===t[0]&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):Wi.get(t)||t}function Xi(t,e){for(var n,r=[],i=0,o=e.trim().split(/\s*,\s*/g);i<o.length;i++){var s=o[i];if(isNaN(s)){if(!(n=s.match(Ki)))throw new Error("Invalid Chalk template style argument: "+s+" (in style '"+t+"')");r.push(n[2].replace(Hi,(function(t,e,n){return e?Yi(e):n})))}else r.push(Number(s))}return r}function Qi(t){Vi.lastIndex=0;for(var e,n=[];null!==(e=Vi.exec(t));){var r=e[1];if(e[2]){var i=Xi(r,e[2]);n.push([r].concat(i))}else n.push([r])}return n}function Zi(t,e){for(var n={},r=0,i=e;r<i.length;r++)for(var o=i[r],s=0,a=o.styles;s<a.length;s++){var l=a[s];n[l[0]]=o.inverse?null:l.slice(1)}for(var c=t,u=0,f=Object.keys(n);u<f.length;u++){var h=f[u];if(Array.isArray(n[h])){if(!(h in c))throw new Error("Unknown Chalk style: "+h);c=n[h].length>0?c[h].apply(c,n[h]):c[h]}}return c}var to=function(t,e){var n=[],r=[],i=[];if(e.replace(Ji,(function(e,o,s,a,l,c){if(o)i.push(Yi(o));else if(a){var u=i.join("");i=[],r.push(0===n.length?u:Zi(t,n)(u)),n.push({inverse:s,styles:Qi(a)})}else if(l){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");r.push(Zi(t,n)(i.join(""))),i=[],n.pop()}else i.push(c)})),r.push(i.join("")),n.length>0){var o="Chalk template literal is missing "+n.length+" closing bracket"+(1===n.length?"":"s")+" (`}`)";throw new Error(o)}return r.join("")};!function(t){var e=mi,n=yi.exports,r=Gi.stdout,i=to,o="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),s=["ansi","ansi","ansi256","ansi16m"],a=new Set(["gray"]),l=Object.create(null);function c(t,e){e=e||{};var n=r?r.level:0;t.level=void 0===e.level?n:e.level,t.enabled="enabled"in e?e.enabled:t.level>0}function u(t){if(!this||!(this instanceof u)||this.template){var e={};return c(e,t),e.template=function(){var t=[].slice.call(arguments);return k.apply(null,[e.template].concat(t))},Object.setPrototypeOf(e,u.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=u,e.template}c(this,t)}o&&(n.blue.open="[94m");for(var f=function(t){n[t].closeRe=new RegExp(e(n[t].close),"g"),l[t]={get:function(){var e=n[t];return w.call(this,this._styles?this._styles.concat(e):[e],this._empty,t)}}},h=0,p=Object.keys(n);h<p.length;h++){f(p[h])}l.visible={get:function(){return w.call(this,this._styles||[],!0,"visible")}},n.color.closeRe=new RegExp(e(n.color.close),"g");for(var d=function(t){if(a.has(t))return"continue";l[t]={get:function(){var e=this.level;return function(){var r=n.color[s[e]][t].apply(null,arguments),i={open:r,close:n.color.close,closeRe:n.color.closeRe};return w.call(this,this._styles?this._styles.concat(i):[i],this._empty,t)}}}},g=0,v=Object.keys(n.color.ansi);g<v.length;g++){d(v[g])}n.bgColor.closeRe=new RegExp(e(n.bgColor.close),"g");for(var m=function(t){if(a.has(t))return"continue";var e="bg"+t[0].toUpperCase()+t.slice(1);l[e]={get:function(){var e=this.level;return function(){var r=n.bgColor[s[e]][t].apply(null,arguments),i={open:r,close:n.bgColor.close,closeRe:n.bgColor.closeRe};return w.call(this,this._styles?this._styles.concat(i):[i],this._empty,t)}}}},y=0,b=Object.keys(n.bgColor.ansi);y<b.length;y++){m(b[y])}var x=Object.defineProperties((function(){}),l);function w(t,e,n){var r=function(){return $.apply(r,arguments)};r._styles=t,r._empty=e;var i=this;return Object.defineProperty(r,"level",{enumerable:!0,get:function(){return i.level},set:function(t){i.level=t}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:function(){return i.enabled},set:function(t){i.enabled=t}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=x,r}function $(){var t=arguments,e=t.length,r=String(arguments[0]);if(0===e)return"";if(e>1)for(var i=1;i<e;i++)r+=" "+t[i];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;var s=n.dim.open;o&&this.hasGrey&&(n.dim.open="");for(var a=0,l=this._styles.slice().reverse();a<l.length;a++){var c=l[a];r=(r=c.open+r.replace(c.closeRe,c.open)+c.close).replace(/\r?\n/g,c.close+"$&"+c.open)}return n.dim.open=s,r}function k(t,e){if(!Array.isArray(e))return[].slice.call(arguments,1).join(" ");for(var n=[].slice.call(arguments,2),r=[e.raw[0]],o=1;o<e.length;o++)r.push(String(n[o-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(e.raw[o]));return i(t,r.join(""))}Object.defineProperties(u.prototype,l),t.exports=u(),t.exports.supportsColor=r,t.exports.default=t.exports}(gi);var eo=gi.exports,no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ro=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},io=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),oo=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},so=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ao=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},lo=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},co=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},uo=function(){function t(e){ro(this,t),this.selfOptions=e||{},this.pipes={}}return io(t,[{key:"options",value:function(t){return t&&(this.selfOptions=t),this.selfOptions}},{key:"pipe",value:function(t,e){var n=e;if("string"==typeof t){if(void 0===n)return this.pipes[t];this.pipes[t]=n}if(t&&t.name){if(n=t,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(t,e){var n=t;n.options=this.options();for(var r=e||t.pipe||"default",i=void 0,o=void 0;r;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof r&&(r=this.pipe(r)),r.process(n),o=n,i=r,r=null,n&&n.next&&(n=n.next,r=o.nextPipe||n.pipe||i);return n.hasResult?n.result:void 0}}]),t}(),fo=function(){function t(e){ro(this,t),this.name=e,this.filters=[]}return io(t,[{key:"process",value:function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,n=this.filters.length,r=t,i=0;i<n;i++){var o=this.filters[i];if(e&&this.log("filter: "+o.filterName),o(r),"object"===(void 0===r?"undefined":no(r))&&r.exiting){r.exiting=!1;break}}!r.next&&this.resultCheck&&this.resultCheck(r)}},{key:"log",value:function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)}},{key:"append",value:function(){var t;return(t=this.filters).push.apply(t,arguments),this}},{key:"prepend",value:function(){var t;return(t=this.filters).unshift.apply(t,arguments),this}},{key:"indexOf",value:function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++){if(this.filters[e].filterName===t)return e}throw new Error("filter not found: "+t)}},{key:"list",value:function(){return this.filters.map((function(t){return t.filterName}))}},{key:"after",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return this.filters.splice(e,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(t){if(!1!==t){if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var n=new Error(e.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),t}(),ho=function(){function t(){ro(this,t)}return io(t,[{key:"setResult",value:function(t){return this.result=t,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(t,e){return"string"==typeof t||t instanceof fo?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this}},{key:"push",value:function(t,e){return t.parent=this,void 0!==e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this}}]),t}(),po="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array};function go(t){if("object"!==(void 0===t?"undefined":no(t)))return t;if(null===t)return null;if(po(t))return t.map(go);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e=/^\/(.*)\/([gimyu]*)$/.exec(t.toString()),new RegExp(e[1],e[2]);var e,n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=go(t[r]));return n}var vo=function(t){function e(t,n){ro(this,e);var r=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.left=t,r.right=n,r.pipe="diff",r}return so(e,ho),io(e,[{key:"setResult",value:function(t){if(this.options.cloneDiffValues&&"object"===(void 0===t?"undefined":no(t))){var e="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:go;"object"===no(t[0])&&(t[0]=e(t[0])),"object"===no(t[1])&&(t[1]=e(t[1]))}return ho.prototype.setResult.apply(this,arguments)}}]),e}(),mo=function(t){function e(t,n){ro(this,e);var r=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.left=t,r.delta=n,r.pipe="patch",r}return so(e,ho),e}(),yo=function(t){function e(t){ro(this,e);var n=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.delta=t,n.pipe="reverse",n}return so(e,ho),e}(),bo="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},xo=function(t){if(t.left!==t.right)if(void 0!==t.left)if(void 0!==t.right){if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");t.leftType=null===t.left?"null":no(t.left),t.rightType=null===t.right?"null":no(t.right),t.leftType===t.rightType&&"boolean"!==t.leftType&&"number"!==t.leftType?("object"===t.leftType&&(t.leftIsArray=bo(t.left)),"object"===t.rightType&&(t.rightIsArray=bo(t.right)),t.leftIsArray===t.rightIsArray?t.left instanceof RegExp&&(t.right instanceof RegExp?t.setResult([t.left.toString(),t.right.toString()]).exit():t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()}else t.setResult([t.left,0,0]).exit();else{if("function"==typeof t.right)throw new Error("functions are not supported");t.setResult([t.right]).exit()}else t.setResult(void 0).exit()};xo.filterName="trivial";var wo=function(t){if(void 0!==t.delta){if(t.nested=!bo(t.delta),!t.nested)if(1!==t.delta.length)if(2!==t.delta.length)3===t.delta.length&&0===t.delta[2]&&t.setResult(void 0).exit();else{if(t.left instanceof RegExp){var e=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(e)return void t.setResult(new RegExp(e[1],e[2])).exit()}t.setResult(t.delta[1]).exit()}else t.setResult(t.delta[0]).exit()}else t.setResult(t.left).exit()};wo.filterName="trivial";var $o=function(t){void 0!==t.delta?(t.nested=!bo(t.delta),t.nested||(1!==t.delta.length?2!==t.delta.length?3===t.delta.length&&0===t.delta[2]&&t.setResult([t.delta[0]]).exit():t.setResult([t.delta[1],t.delta[0]]).exit():t.setResult([t.delta[0],0,0]).exit())):t.setResult(t.delta).exit()};function ko(t){if(t&&t.children){for(var e=t.children.length,n=void 0,r=t.result,i=0;i<e;i++)void 0!==(n=t.children[i]).result&&((r=r||{})[n.childName]=n.result);r&&t.leftIsArray&&(r._t="a"),t.setResult(r).exit()}}function _o(t){if(!t.leftIsArray&&"object"===t.leftType){var e=void 0,n=void 0,r=t.options.propertyFilter;for(e in t.left)Object.prototype.hasOwnProperty.call(t.left,e)&&(r&&!r(e,t)||(n=new vo(t.left[e],t.right[e]),t.push(n,e)));for(e in t.right)Object.prototype.hasOwnProperty.call(t.right,e)&&(r&&!r(e,t)||void 0===t.left[e]&&(n=new vo(void 0,t.right[e]),t.push(n,e)));t.children&&0!==t.children.length?t.exit():t.setResult(void 0).exit()}}$o.filterName="trivial",ko.filterName="collectChildren",_o.filterName="objects";var Co=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new mo(t.left[e],t.delta[e]),t.push(n,e);t.exit()}};Co.filterName="objects";var Oo=function(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,r=0;r<e;r++)n=t.children[r],Object.prototype.hasOwnProperty.call(t.left,n.childName)&&void 0===n.result?delete t.left[n.childName]:t.left[n.childName]!==n.result&&(t.left[n.childName]=n.result);t.setResult(t.left).exit()}};Oo.filterName="collectChildren";var Mo=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new yo(t.delta[e]),t.push(n,e);t.exit()}};function jo(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,r={},i=0;i<e;i++)r[(n=t.children[i]).childName]!==n.result&&(r[n.childName]=n.result);t.setResult(r).exit()}}Mo.filterName="objects",jo.filterName="collectChildren";var So=function(t,e,n,r){return t[n]===e[r]},Eo=function(t,e,n,r){var i=r||{},o=function(t,e,n,r){for(var i=e.length,o=n.length,s={sequence:[],indices1:[],indices2:[]};0!==i&&0!==o;)t.match(e,n,i-1,o-1,r)?(s.sequence.unshift(e[i-1]),s.indices1.unshift(i-1),s.indices2.unshift(o-1),--i,--o):t[i][o-1]>t[i-1][o]?--o:--i;return s}(function(t,e,n,r){var i=t.length,o=e.length,s=void 0,a=void 0,l=[i+1];for(s=0;s<i+1;s++)for(l[s]=[o+1],a=0;a<o+1;a++)l[s][a]=0;for(l.match=n,s=1;s<i+1;s++)for(a=1;a<o+1;a++)n(t,e,s-1,a-1,r)?l[s][a]=l[s-1][a-1]+1:l[s][a]=Math.max(l[s-1][a],l[s][a-1]);return l}(t,e,n||So,i),t,e,i);return"string"==typeof t&&"string"==typeof e&&(o.sequence=o.sequence.join("")),o},To="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},Ao="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]===e)return r;return-1};function No(t,e,n,r,i){var o=t[n],s=e[r];if(o===s)return!0;if("object"!==(void 0===o?"undefined":no(o))||"object"!==(void 0===s?"undefined":no(s)))return!1;var a=i.objectHash;if(!a)return i.matchByPosition&&n===r;var l=void 0,c=void 0;return"number"==typeof n?(i.hashCache1=i.hashCache1||[],void 0===(l=i.hashCache1[n])&&(i.hashCache1[n]=l=a(o,n))):l=a(o),void 0!==l&&("number"==typeof r?(i.hashCache2=i.hashCache2||[],void 0===(c=i.hashCache2[r])&&(i.hashCache2[r]=c=a(s,r))):c=a(s),void 0!==c&&l===c)}var Ro=function(t){if(t.leftIsArray){var e={objectHash:t.options&&t.options.objectHash,matchByPosition:t.options&&t.options.matchByPosition},n=0,r=0,i=void 0,o=void 0,s=void 0,a=t.left,l=t.right,c=a.length,u=l.length,f=void 0;for(c>0&&u>0&&!e.objectHash&&"boolean"!=typeof e.matchByPosition&&(e.matchByPosition=!function(t,e,n,r){for(var i=0;i<n;i++)for(var o=t[i],s=0;s<r;s++){var a=e[s];if(i!==s&&o===a)return!0}}(a,l,c,u));n<c&&n<u&&No(a,l,n,n,e);)i=n,f=new vo(t.left[i],t.right[i]),t.push(f,i),n++;for(;r+n<c&&r+n<u&&No(a,l,c-1-r,u-1-r,e);)o=c-1-r,s=u-1-r,f=new vo(t.left[o],t.right[s]),t.push(f,s),r++;var h=void 0;if(n+r!==c)if(n+r!==u){delete e.hashCache1,delete e.hashCache2;var p=a.slice(n,c-r),d=l.slice(n,u-r),g=Eo(p,d,No,e),v=[];for(h=h||{_t:"a"},i=n;i<c-r;i++)Ao(g.indices1,i-n)<0&&(h["_"+i]=[a[i],0,0],v.push(i));var m=!0;t.options&&t.options.arrays&&!1===t.options.arrays.detectMove&&(m=!1);var y=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(y=!0);var b=v.length;for(i=n;i<u-r;i++){var x=Ao(g.indices2,i-n);if(x<0){var w=!1;if(m&&b>0)for(var $=0;$<b;$++)if(No(p,d,(o=v[$])-n,i-n,e)){h["_"+o].splice(1,2,i,3),y||(h["_"+o][0]=""),s=i,f=new vo(t.left[o],t.right[s]),t.push(f,s),v.splice($,1),w=!0;break}w||(h[i]=[l[i]])}else o=g.indices1[x]+n,s=g.indices2[x]+n,f=new vo(t.left[o],t.right[s]),t.push(f,s)}t.setResult(h).exit()}else{for(h=h||{_t:"a"},i=n;i<c-r;i++)h["_"+i]=[a[i],0,0];t.setResult(h).exit()}else{if(c===u)return void t.setResult(void 0).exit();for(h=h||{_t:"a"},i=n;i<u-r;i++)h[i]=[l[i]];t.setResult(h).exit()}}};Ro.filterName="arrays";var Io=function(t,e){return t-e},Do=function(t){return function(e,n){return e[t]-n[t]}},Po=function(t){if(t.nested&&"a"===t.delta._t){var e=void 0,n=void 0,r=t.delta,i=t.left,o=[],s=[],a=[];for(e in r)if("_t"!==e)if("_"===e[0]){if(0!==r[e][2]&&3!==r[e][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+r[e][2]);o.push(parseInt(e.slice(1),10))}else 1===r[e].length?s.push({index:parseInt(e,10),value:r[e][0]}):a.push({index:parseInt(e,10),delta:r[e]});for(e=(o=o.sort(Io)).length-1;e>=0;e--){var l=r["_"+(n=o[e])],c=i.splice(n,1)[0];3===l[2]&&s.push({index:l[1],value:c})}var u=(s=s.sort(Do("index"))).length;for(e=0;e<u;e++){var f=s[e];i.splice(f.index,0,f.value)}var h=a.length,p=void 0;if(h>0)for(e=0;e<h;e++){var d=a[e];p=new mo(t.left[d.index],d.delta),t.push(p,d.index)}t.children?t.exit():t.setResult(t.left).exit()}};Po.filterName="arrays";var zo=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,r=0;r<e;r++)n=t.children[r],t.left[n.childName]=n.result;t.setResult(t.left).exit()}};zo.filterName="arraysCollectChildren";var Bo=function(t){if(t.nested){if("a"===t.delta._t){var e=void 0,n=void 0;for(e in t.delta)"_t"!==e&&(n=new yo(t.delta[e]),t.push(n,e));t.exit()}}else 3===t.delta[2]&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),3]).exit())};Bo.filterName="arrays";var Fo=function(t,e,n){if("string"==typeof e&&"_"===e[0])return parseInt(e.substr(1),10);if(To(n)&&0===n[2])return"_"+e;var r=+e;for(var i in t){var o=t[i];if(To(o))if(3===o[2]){var s=parseInt(i.substr(1),10),a=o[1];if(a===+e)return s;s<=r&&a>r?r++:s>=r&&a<r&&r--}else if(0===o[2]){parseInt(i.substr(1),10)<=r&&r++}else 1===o.length&&i<=r&&r--}return r};function qo(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,r={_t:"a"},i=0;i<e;i++){var o=(n=t.children[i]).newName;void 0===o&&(o=Fo(t.delta,n.childName,n.result)),r[o]!==n.result&&(r[o]=n.result)}t.setResult(r).exit()}}qo.filterName="arraysCollectChildren";var Lo=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};Lo.filterName="dates";var Uo=null,Go=function(t){if(!Uo){var e=void 0;if("undefined"!=typeof diff_match_patch)e="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(di)try{e=di&&new di}catch(t){e=null}if(!e){if(!t)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}Uo={diff:function(t,n){return e.patch_toText(e.patch_make(t,n))},patch:function(t,n){for(var r=e.patch_apply(e.patch_fromText(n),t),i=0;i<r[1].length;i++){if(!r[1][i])new Error("text patch failed").textPatchFailed=!0}return r[0]}}}return Uo},Jo=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||60;if(t.left.length<e||t.right.length<e)t.setResult([t.left,t.right]).exit();else{var n=Go();if(n){var r=n.diff;t.setResult([r(t.left,t.right),0,2]).exit()}else t.setResult([t.left,t.right]).exit()}}};Jo.filterName="texts";var Vo=function(t){if(!t.nested&&2===t.delta[2]){var e=Go(!0).patch;t.setResult(e(t.left,t.delta[0])).exit()}};Vo.filterName="texts";var Ko=function(t){var e,n=void 0,r=void 0,i=void 0,o=void 0,s=null,a=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(n=0,e=(r=t.split("\n")).length;n<e;n++){var l=(i=r[n]).slice(0,1);"@"===l?(s=a.exec(i),r[n]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):"+"===l?(r[n]="-"+r[n].slice(1),"+"===r[n-1].slice(0,1)&&(o=r[n],r[n]=r[n-1],r[n-1]=o)):"-"===l&&(r[n]="+"+r[n].slice(1))}return r.join("\n")},Ho=function(t){t.nested||2===t.delta[2]&&t.setResult([Ko(t.delta[0]),0,2]).exit()};Ho.filterName="texts";var Wo=function(){function t(e){ro(this,t),this.processor=new uo(e),this.processor.pipe(new fo("diff").append(ko,xo,Lo,Jo,_o,Ro).shouldHaveResult()),this.processor.pipe(new fo("patch").append(Oo,zo,wo,Vo,Co,Po).shouldHaveResult()),this.processor.pipe(new fo("reverse").append(jo,qo,$o,Ho,Mo,Bo).shouldHaveResult())}return io(t,[{key:"options",value:function(){var t;return(t=this.processor).options.apply(t,arguments)}},{key:"diff",value:function(t,e){return this.processor.process(new vo(t,e))}},{key:"patch",value:function(t,e){return this.processor.process(new mo(t,e))}},{key:"reverse",value:function(t){return this.processor.process(new yo(t))}},{key:"unpatch",value:function(t,e){return this.patch(t,this.reverse(e))}},{key:"clone",value:function(t){return go(t)}}]),t}(),Yo="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},Xo="function"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},Qo=function(t){return"_t"===t?-1:"_"===t.substr(0,1)?parseInt(t.slice(1),10):parseInt(t,10)+.1},Zo=function(t,e){return Qo(t)-Qo(e)},ts=function(){function t(){ro(this,t)}return io(t,[{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),this.finalize(n)}},{key:"prepareContext",value:function(t){t.buffer=[],t.out=function(){var t;(t=this.buffer).push.apply(t,arguments)}}},{key:"typeFormattterNotFound",value:function(t,e){throw new Error("cannot format delta type: "+e)}},{key:"typeFormattterErrorFormatter",value:function(t,e){return e.toString()}},{key:"finalize",value:function(t){var e=t.buffer;if(Yo(e))return e.join("")}},{key:"recurse",value:function(t,e,n,r,i,o,s){var a=e&&o?o.value:n;if(void 0!==e||void 0!==r){var l=this.getDeltaType(e,o),c="node"===l?"a"===e._t?"array":"object":"";void 0!==r?this.nodeBegin(t,r,i,l,c,s):this.rootBegin(t,l,c);try{(this["format_"+l]||this.typeFormattterNotFound(t,l)).call(this,t,e,a,r,i,o)}catch(n){this.typeFormattterErrorFormatter(t,n,e,a,r,i,o),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==r?this.nodeEnd(t,r,i,l,c,s):this.rootEnd(t,l,c)}}},{key:"formatDeltaChildren",value:function(t,e,n){var r=this;this.forEachDeltaKey(e,n,(function(i,o,s,a){r.recurse(t,e[i],n?n[o]:void 0,i,o,s,a)}))}},{key:"forEachDeltaKey",value:function(t,e,n){var r,i=Xo(t),o="a"===t._t,s={},a=void 0;if(void 0!==e)for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(void 0!==t[a]||o&&void 0!==t["_"+a]||i.push(a));for(a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var l=t[a];Yo(l)&&3===l[2]&&(s[l[1].toString()]={key:a,value:e&&e[parseInt(a.substr(1))]},!1!==this.includeMoveDestinations&&void 0===e&&void 0===t[l[1]]&&i.push(l[1].toString()))}o?i.sort(Zo):i.sort();for(var c=0,u=i.length;c<u;c++){var f=i[c];if(!o||"_t"!==f){var h=o?"number"==typeof f?f:parseInt("_"===(r=f).substr(0,1)?r.slice(1):r,10):f,p=c===u-1;n(f,h,s[h],p)}}}},{key:"getDeltaType",value:function(t,e){if(void 0===t)return void 0!==e?"movedestination":"unchanged";if(Yo(t)){if(1===t.length)return"added";if(2===t.length)return"modified";if(3===t.length&&0===t[2])return"deleted";if(3===t.length&&2===t[2])return"textdiff";if(3===t.length&&3===t[2])return"moved"}else if("object"===(void 0===t?"undefined":no(t)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(t){for(var e=[],n=t.split("\n@@ "),r=0,i=n.length;r<i;r++){var o=n[r],s={pieces:[]},a=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(o).slice(1);s.location={line:a[0],chr:a[1]};for(var l=o.split("\n").slice(1),c=0,u=l.length;c<u;c++){var f=l[c];if(f.length){var h={type:"context"};"+"===f.substr(0,1)?h.type="added":"-"===f.substr(0,1)&&(h.type="deleted"),h.text=f.slice(1),s.pieces.push(h)}}e.push(s)}return e}}]),t}(),es=Object.freeze({default:ts}),ns=function(t){function e(){return ro(this,e),ao(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return so(e,ts),io(e,[{key:"typeFormattterErrorFormatter",value:function(t,e){t.out('<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatValue",value:function(t,e){t.out("<pre>"+rs(JSON.stringify(e,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,i=n.length;r<i;r++){var o=n[r];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+rs(decodeURI(c.text))+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){var r="jsondiffpatch-"+e+(n?" jsondiffpatch-child-node-type-"+n:"");t.out('<div class="jsondiffpatch-delta '+r+'">')}},{key:"rootEnd",value:function(t){t.out("</div>"+(t.hasArrows?'<script type="text/javascript">setTimeout('+is.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(t,e,n,r,i){var o="jsondiffpatch-"+r+(i?" jsondiffpatch-child-node-type-"+i:"");t.out('<li class="'+o+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(t){t.out("</li>")}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_node",value:function(t,e,n){var r="a"===e._t?"array":"object";t.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+r+'">'),this.formatDeltaChildren(t,e,n),t.out("</ul>")}},{key:"format_added",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_modified",value:function(t,e){t.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(t,e[1]),t.out("</div>")}},{key:"format_deleted",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_moved",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-moved-destination">'+e[1]+"</div>"),t.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),t.hasArrows=!0}},{key:"format_textdiff",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(t,e[0]),t.out("</div>")}}]),e}();function rs(t){for(var e=t,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],r=0;r<n.length;r++)e=e.replace(n[r][0],n[r][1]);return e}var is=function(t){var e=t||document;!function(t,e,n){for(var r=t.querySelectorAll(e),i=0,o=r.length;i<o;i++)n(r[i])}(e,".jsondiffpatch-arrow",(function(t){var e=t.parentNode,n=t.children,r=t.style,i=e,o=n[0],s=o.children[1];o.style.display="none";var a,l,c,u=(a=i.querySelector(".jsondiffpatch-moved-destination"),l=a.textContent,c=a.innerText,l||c),f=i.parentNode,h=void 0;if(function(t,e){for(var n=t.children,r=0,i=n.length;r<i;r++)e(n[r],r)}(f,(function(t){t.getAttribute("data-key")===u&&(h=t)})),h)try{var p=h.offsetTop-i.offsetTop;o.setAttribute("height",Math.abs(p)+6),r.top=-8+(p>0?0:p)+"px";var d=p>0?"M30,0 Q-10,"+Math.round(p/2)+" 26,"+(p-4):"M30,"+-p+" Q-10,"+Math.round(-p/2)+" 26,4";s.setAttribute("d",d),o.style.display=""}catch(t){}}))},os=function(t,e,n){var r=e||document.body,i="jsondiffpatch-unchanged-",o={showing:i+"showing",hiding:i+"hiding",visible:i+"visible",hidden:i+"hidden"},s=r.classList;if(s){if(!n)return s.remove(o.showing),s.remove(o.hiding),s.remove(o.visible),s.remove(o.hidden),void(!1===t&&s.add(o.hidden));!1===t?(s.remove(o.showing),s.add(o.visible),setTimeout((function(){s.add(o.hiding)}),10)):(s.remove(o.hiding),s.add(o.showing),s.remove(o.hidden));var a=setInterval((function(){is(r)}),100);setTimeout((function(){s.remove(o.showing),s.remove(o.hiding),!1===t?(s.add(o.hidden),s.remove(o.visible)):(s.add(o.visible),s.remove(o.hidden)),setTimeout((function(){s.remove(o.visible),clearInterval(a)}),n+400)}),n)}},ss=void 0;var as=Object.freeze({showUnchanged:os,hideUnchanged:function(t,e){return os(!1,t,e)},default:ns,format:function(t,e){return ss||(ss=new ns),ss.format(t,e)}}),ls=function(t){function e(){ro(this,e);var t=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return so(e,ts),io(e,[{key:"prepareContext",value:function(t){oo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},t.row=function(e,n){t.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),t.out(t.indentPad),t.out('</pre><pre style="display: inline-block">'),t.out(e),t.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),t.out(n),t.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.row("",'<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,i=n.length;r<i;r++){var o=n[r];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+o.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+o.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){t.out('<table class="jsondiffpatch-annotated-delta">'),"node"===e&&(t.row("{"),t.indent()),"array"===n&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(t,e){"node"===e&&(t.indent(-1),t.row("}")),t.out("</table>")}},{key:"nodeBegin",value:function(t,e,n,r,i){t.row("&quot;"+e+"&quot;: {"),"node"===r&&t.indent(),"array"===i&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(t,e,n,r,i,o){"node"===r&&t.indent(-1),t.row("}"+(o?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}}]),e}(),cs=function(t){return'<pre style="display:inline-block">&quot;'+t+"&quot;</pre>"},us={added:function(t,e,n,r){var i=" <pre>([newValue])</pre>";return void 0===r?"new value"+i:"number"==typeof r?"insert at index "+r+i:"add property "+cs(r)+i},modified:function(t,e,n,r){var i=" <pre>([previousValue, newValue])</pre>";return void 0===r?"modify value"+i:"number"==typeof r?"modify at index "+r+i:"modify property "+cs(r)+i},deleted:function(t,e,n,r){var i=" <pre>([previousValue, 0, 0])</pre>";return void 0===r?"delete value"+i:"number"==typeof r?"remove index "+r+i:"delete property "+cs(r)+i},moved:function(t,e,n,r){return'move from <span title="(position to remove at original state)">index '+r+'</span> to <span title="(position to insert at final state)">index '+t[1]+"</span>"},textdiff:function(t,e,n,r){return"text diff"+(void 0===r?"":"number"==typeof r?" at index "+r:" at property "+cs(r))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},fs=function(t,e){var n=this.getDeltaType(e),r=us[n],i=r&&r.apply(r,Array.prototype.slice.call(arguments,1)),o=JSON.stringify(e,null,2);"textdiff"===n&&(o=o.split("\\n").join('\\n"+\n   "')),t.indent(),t.row(o,i),t.indent(-1)};ls.prototype.format_added=fs,ls.prototype.format_modified=fs,ls.prototype.format_deleted=fs,ls.prototype.format_moved=fs,ls.prototype.format_textdiff=fs;var hs=void 0;var ps=Object.freeze({default:ls,format:function(t,e){return hs||(hs=new ls),hs.format(t,e)}}),ds="add",gs="remove",vs="replace",ms="move",ys=function(t){function e(){ro(this,e);var t=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!0,t}return so(e,ts),io(e,[{key:"prepareContext",value:function(t){oo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.result=[],t.path=[],t.pushCurrentOp=function(t){var e=t.op,n=t.value,r={op:e,path:this.currentPath()};void 0!==n&&(r.value=n),this.result.push(r)},t.pushMoveOp=function(t){var e=this.currentPath();this.result.push({op:ms,from:e,path:this.toPath(t)})},t.currentPath=function(){return"/"+this.path.join("/")},t.toPath=function(t){var e=this.path.slice();return e[e.length-1]=t,"/"+e.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.out("[ERROR] "+e)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(t,e,n){t.path.push(n)}},{key:"nodeEnd",value:function(t){t.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){t.pushCurrentOp({op:ds,value:e[0]})}},{key:"format_modified",value:function(t,e){t.pushCurrentOp({op:vs,value:e[1]})}},{key:"format_deleted",value:function(t){t.pushCurrentOp({op:gs})}},{key:"format_moved",value:function(t,e){var n=e[1];t.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),n.result}}]),e}(),bs=function(t){return t[t.length-1]},xs=function(t){return n=function(t,e){var n,r,i,o,s=t.path.split("/"),a=e.path.split("/");return s.length!==a.length?s.length-a.length:(n=bs(s),r=bs(a),i=parseInt(n,10),o=parseInt(r,10),isNaN(i)||isNaN(o)?0:o-i)},(e=t).sort(n),e;var e,n},ws=function(t,e){var n=Array(e.length+1).fill().map((function(){return[]}));return t.map((function(t){var n=e.map((function(e){return e(t)})).indexOf(!0);return n<0&&(n=e.length),{item:t,position:n}})).reduce((function(t,e){return t[e.position].push(e.item),t}),n)},$s=function(t){return"move"===t.op},ks=function(t){return"remove"===t.op},_s=void 0,Cs=function(t,e){return _s||(_s=new ys),function(t){var e=ws(t,[$s,ks]),n=lo(e,3),r=n[0],i=n[1],o=n[2],s=xs(i);return[].concat(co(s),co(r),co(o))}(_s.format(t,e))},Os=Object.freeze({default:ys,partitionOps:ws,format:Cs,log:function(t,e){console.log(Cs(t,e))}});function Ms(t){return eo&&eo[t]||function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}}var js={added:Ms("green"),deleted:Ms("red"),movedestination:Ms("gray"),moved:Ms("yellow"),unchanged:Ms("gray"),error:Ms("white.bgRed"),textDiffLine:Ms("gray")},Ss=function(t){function e(){ro(this,e);var t=ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return so(e,ts),io(e,[{key:"prepareContext",value:function(t){oo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},t.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},t.out=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e.length;r<i;r++){var o=e[r].split("\n"),s=o.join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(s=this.color[0](s)),this.buffer.push(s)}},t.pushColor=function(t){this.color=this.color||[],this.color.unshift(t)},t.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.pushColor(js.error),t.out("[ERROR]"+e),t.popColor()}},{key:"formatValue",value:function(t,e){t.out(JSON.stringify(e,null,2))}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.indent();for(var r=0,i=n.length;r<i;r++){var o=n[r];t.pushColor(js.textDiffLine),t.out(o.location.line+","+o.location.chr+" "),t.popColor();for(var s=o.pieces,a=0,l=s.length;a<l;a++){var c=s[a];t.pushColor(js[c.type]),t.out(c.text),t.popColor()}r<i-1&&t.outLine()}t.indent(-1)}},{key:"rootBegin",value:function(t,e,n){t.pushColor(js[e]),"node"===e&&(t.out("array"===n?"[":"{"),t.indent())}},{key:"rootEnd",value:function(t,e,n){"node"===e&&(t.indent(-1),t.out("array"===n?"]":"}")),t.popColor()}},{key:"nodeBegin",value:function(t,e,n,r,i){t.pushColor(js[r]),t.out(n+": "),"node"===r&&(t.out("array"===i?"[":"{"),t.indent())}},{key:"nodeEnd",value:function(t,e,n,r,i,o){"node"===r&&(t.indent(-1),t.out("array"===i?"]":"}"+(o?"":","))),o||t.outLine(),t.popColor()}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_modified",value:function(t,e){t.pushColor(js.deleted),this.formatValue(t,e[0]),t.popColor(),t.out(" => "),t.pushColor(js.added),this.formatValue(t,e[1]),t.popColor()}},{key:"format_deleted",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_moved",value:function(t,e){t.out("==> "+e[1])}},{key:"format_textdiff",value:function(t,e){this.formatTextDiffString(t,e[0])}}]),e}(),Es=void 0,Ts=function(t,e){return Es||(Es=new Ss),Es.format(t,e)};var As=Object.freeze({default:Ss,format:Ts,log:function(t,e){console.log(Ts(t,e))}});Object.freeze({base:es,html:as,annotated:ps,jsonpatch:Os,console:As});var Ns=new Wo({arrays:{detectMove:!1,includeValueOnMove:!1},textDiff:{minLength:1}});function Rs(t,e){return Ns.diff(t,e)}var Is=["docChanged","isGeneric","scrolledIntoView","selectionSet","storedMarksSet"];function Ds(t){return Object.keys(t).concat(Is).reduce((function(e,n){return e[n]=t[n],e}),{})}function Ps(t){return{type:t.type,empty:t.empty,anchor:t.anchor,head:t.head,from:t.from,to:t.to}}function zs(t){return("00"+t).slice(-2)}var Bs=/(&lt;\/?[\w\d\s="']+&gt;)/gim,Fs=function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(Bs,"<span style='color: cadetblue;'>$&</span>")};function qs(t,e){var r=f(wt),i=f($t)[0],o=function(t,e,n){var r=ci.fromSchema(e.schema),i=e.selection,o=r.serializeFragment(i.content().content),s=[];if(o)for(var a=o.firstChild;a;)s.push(a.outerHTML),a=a.nextSibling;var l,c,u,f=n?Rs(n.state.doc.toJSON(),e.doc.toJSON()):void 0,h=n?Rs(Ps(n.state.selection),Ps(e.selection)):void 0;return{id:Math.random().toString()+Math.random().toString(),state:e,tr:Ds(t),timestamp:t.time,timeStr:(l=t.time,u=new Date(l),[zs(u.getHours()),zs(u.getMinutes()),zs(u.getSeconds()),(c=u.getMilliseconds(),("000"+c).slice(-3))].join(":")),contentDiff:f,selectionDiff:h,selectionHtml:Fs(hi.prettyPrint(s.join("\n"),{max_char:60,indent_size:2}))}}(t,e,r.get((null==i?void 0:i.topEntryId)||""));wt.update((function(t){return new Map(t.set(o.id,o))})),kt.set(o);var s=!o.contentDiff;if((null==i?void 0:i.isGroup)&&s){var a={isGroup:s,entryIds:n([o.id],i.entryIds,!0),topEntryId:o.id,expanded:i.expanded};$t.update((function(t){return n([a],t.slice(1),!0)}))}else{var l={isGroup:s,entryIds:[o.id],topEntryId:o.id,expanded:!1};$t.update((function(t){return n([l],t,!0)}))}}function Ls(t){let e,n;return e=new ir({props:{snapshots:t[0],onDelete:t[1],onRestore:t[2],onUpdate:t[3]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.snapshots=t[0]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Us(t){let e;return{c(){e=C("div"),e.textContent='Save snapshots by clicking "Save snapshot" button.',T(e,"class","no-snapshots svelte-1yawzkx")},m(t,n){$(t,e,n)},p:r,i:r,o:r,d(t){t&&k(e)}}}function Gs(t){let e,n,r,i;const o=[Us,Ls],s=[];function a(t,e){return 0===t[0].length?0:1}return n=a(t),r=s[n]=o[n](t),{c(){e=C("div"),r.c(),T(e,"slot","right"),T(e,"class","right-panel svelte-1yawzkx")},m(t,r){$(t,e,r),s[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?s[n].p(t,i):(nt(),ot(s[l],1,1,(()=>{s[l]=null})),rt(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),it(r,1),r.m(e,null))},i(t){i||(it(r),i=!0)},o(t){ot(r),i=!1},d(t){t&&k(e),s[n].d()}}}function Js(t){let e,n;return e=new Rt({props:{$$slots:{right:[Gs]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Vs(t,e,n){let r;h(t,or,(t=>n(0,r=t)));const{view:i}=q("APP_CONTEXT");return[r,function(t){!function(t){or.update((function(e){return e.filter((function(e){return e.timestamp!==t.timestamp}))}))}(t)},function(t){!function(t,e){var n=Object.getPrototypeOf(t.state).constructor.create({schema:t.state.schema,plugins:t.state.plugins,doc:t.state.schema.nodeFromJSON(e.doc)});t.updateState(n)}(i,t),wt.set(new Map),$t.set([])},function(t){!function(t){or.update((function(e){return e.map((function(e){return e.timestamp===t.timestamp?t:e}))}))}(t)}]}ht(".right-panel.svelte-1yawzkx{padding:0}.no-snapshots.svelte-1yawzkx{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");class Ks extends ft{constructor(t){super(),ut(this,t,Vs,Js,c,{})}}ht("/* $color-green-text: #b8e248; */\n");function Hs(t){let e;return{c(){e=C("p"),e.textContent="nuting here"},m(t,n){$(t,e,n)},i:r,o:r,d(t){t&&k(e)}}}function Ws(t){let e,n;return e=new Ks({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Ys(t){let e,n;return e=new Xn({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Xs(t){let e,n;return e=new An({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Qs(t){let e,n;return e=new Cn({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function Zs(t){let e,n;return e=new un({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function ta(t){let e,n;return e=new ge({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function ea(t){let e,n,r,i,o,s,c,u,f,h,p,d,g,v,m,y,b,x;p=new yt({props:{onClickTab:t[6],active:t[1]}});const _=[ta,Zs,Qs,Xs,Ys,Ws,Hs],O=[];function M(t,e){return"state"===t[1]?0:"history"===t[1]?1:"plugins"===t[1]?2:"schema"===t[1]?3:"structure"===t[1]?4:"snapshots"===t[1]?5:6}return g=M(t),v=O[g]=_[g](t),{c(){e=C("div"),n=C("div"),r=C("div"),i=j(),o=C("div"),s=C("div"),c=C("button"),c.textContent="Save snapshot",u=j(),f=C("button"),f.textContent="X",h=j(),st(p.$$.fragment),d=j(),v.c(),T(r,"class","resizing-div svelte-eou05z"),T(c,"class","snapshot-btn svelte-eou05z"),T(f,"class","close-btn svelte-eou05z"),T(o,"class","container svelte-eou05z"),T(n,"class","floating-dock svelte-eou05z"),T(n,"style",m=`top: ${t[2]}%; height: ${t[3]}%;`),T(e,"class","floating-dock-wrapper svelte-eou05z")},m(a,v){$(a,e,v),w(e,n),w(n,r),w(n,i),w(n,o),w(o,s),w(s,c),w(s,u),w(s,f),w(o,h),at(p,o,null),w(o,d),O[g].m(o,null),y=!0,b||(x=[E(r,"mousedown",t[4]),E(c,"click",t[5]),E(f,"click",(function(){l(t[0])&&t[0].apply(this,arguments)}))],b=!0)},p(e,[r]){t=e;const i={};2&r&&(i.active=t[1]),p.$set(i);let s=g;g=M(t),g!==s&&(nt(),ot(O[s],1,1,(()=>{O[s]=null})),rt(),v=O[g],v||(v=O[g]=_[g](t),v.c()),it(v,1),v.m(o,null)),(!y||12&r&&m!==(m=`top: ${t[2]}%; height: ${t[3]}%;`))&&T(n,"style",m)},i(t){y||(it(p.$$.fragment,t),it(v),y=!0)},o(t){ot(p.$$.fragment,t),ot(v),y=!1},d(t){t&&k(e),lt(p),O[g].d(),b=!1,a(x)}}}function na(t,e,r){let{onClose:i}=e;const{view:o}=q("APP_CONTEXT");let s="state",a=50,l=50;function c(t){t.preventDefault(),r(2,a=100*t.clientY/window.innerHeight),r(3,l=100*(1-t.clientY/window.innerHeight))}function u(t){t.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}return B((()=>()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)})),t.$$set=t=>{"onClose"in t&&r(0,i=t.onClose)},[i,s,a,l,function(t){document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)},function(){const t=prompt("Enter snapshot name",Date.now());t&&function(t,e){var r={name:t,timestamp:Date.now(),doc:e};or.update((function(t){return n([r],t,!0)}))}(t,o.state.doc.toJSON())},function(t){r(1,s=t)}]}ht(".floating-dock-wrapper.svelte-eou05z{position:fixed;width:0px;height:0px;top:0px;left:0px;z-index:99999999}.floating-dock.svelte-eou05z{background-color:var(--color-blue-bg);position:fixed;z-index:1;box-shadow:rgba(34, 34, 34, 0.3) 0px 0px 4px 0px;left:0px;top:50%;width:100%;height:50%}.resizing-div.svelte-eou05z{position:absolute;z-index:2;opacity:0;top:-5px;height:10px;left:0px;width:100%;cursor:row-resize}.container.svelte-eou05z{height:100%}.snapshot-btn.svelte-eou05z{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:var(--color-white);cursor:pointer;font-size:12px;height:24px;line-height:25px;padding:0 6px;position:absolute;right:32px;top:-28px}.snapshot-btn.svelte-eou05z:hover{background:rgba(255, 162, 177, 0.8)}.close-btn.svelte-eou05z{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:var(--color-white);cursor:pointer;height:24px;position:absolute;right:4px;top:-28px;width:24px}.close-btn.svelte-eou05z:hover{background:rgba(255, 162, 177, 0.8)}");class ra extends ft{constructor(t){super(),ut(this,t,na,ea,c,{onClose:0})}}function ia(t){let e,n;return e=new gt({props:{buttonPosition:t[1]}}),e.$on("click",t[2]),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.buttonPosition=t[1]),e.$set(r)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function oa(t){let e,n;return e=new ra({props:{onClose:t[3]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p:r,i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){lt(e,t)}}}function sa(t){let e,n,r,i;const o=[oa,ia],s=[];function a(t,e){return t[0]?0:1}return n=a(t),r=s[n]=o[n](t),{c(){e=C("section"),r.c(),T(e,"class","svelte-j3y8g5")},m(t,r){$(t,e,r),s[n].m(e,null),i=!0},p(t,[i]){let l=n;n=a(t),n===l?s[n].p(t,i):(nt(),ot(s[l],1,1,(()=>{s[l]=null})),rt(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),it(r,1),r.m(e,null))},i(t){i||(it(r),i=!0)},o(t){ot(r),i=!1},d(t){t&&k(e),s[n].d()}}}function aa(t,e,n){let{view:r,devToolsExpanded:i=!1,buttonPosition:o="bottom-right"}=e;return F("APP_CONTEXT",{view:r}),B((()=>{const t=document&&document.querySelector("html");i&&t&&(t.style.marginBottom="341px")})),t.$$set=t=>{"view"in t&&n(4,r=t.view),"devToolsExpanded"in t&&n(0,i=t.devToolsExpanded),"buttonPosition"in t&&n(1,o=t.buttonPosition)},[i,o,function(){n(0,i=!0);const t=document&&document.querySelector("html");t&&(t.style.marginBottom="341px")},function(){n(0,i=!1);const t=document&&document.querySelector("html");t&&(t.style.marginBottom=null)},r]}ht(":root{--font-sans:Helvetica Neue, Calibri Light, Roboto, sans-serif;--font-small:11px;--font-medium:13px;--font-large:16px;--height-tabs-menu:48px;--color-black:#222;--color-blue-bg:#363755;--color-blue-light:#85d9ef;--color-gray-light:#d3d3d9;--color-green:green;--color-green-light:#87cc86;--color-purple-dark:rgb(80, 68, 93);--color-purple:rgb(96, 76, 104);--color-purple-light:rgb(99, 99, 123);--color-red:#d66363;--color-red-gray:rgb(187, 145, 163);--color-red-light:rgb(255, 162, 177);--color-yellow:#eaea37;--color-white:#fff}:root{--tree-view-base00:#1d1f21;--tree-view-base01:#282a2e;--tree-view-base02:#373b41;--tree-view-base03:#969896;--tree-view-base04:#b4b7b4;--tree-view-base05:#c5c8c6;--tree-view-base06:#e0e0e0;--tree-view-base07:#ffffff;--tree-view-base08:#CC342B;--tree-view-base09:#F96A38;--tree-view-base0A:#FBA922;--tree-view-base0B:#198844;--tree-view-base0C:#3971ED;--tree-view-base0D:#3971ED;--tree-view-base0E:#A36AC7;--tree-view-base0F:#3971ED}section.svelte-j3y8g5{font-family:var(--font-sans);font-size:var(--font-medium)}");class la extends ft{constructor(t){super(),ut(this,t,aa,sa,c,{view:4,devToolsExpanded:0,buttonPosition:1})}}var ca=!1;var ua;function fa(t,n){void 0===n&&(n={});var r=function(){var t=document.querySelector(".__prosemirror-dev-toolkit__");return t||((t=document.createElement("div")).className="__prosemirror-dev-toolkit__",document.body.appendChild(t)),t}(),i=new la({target:r,props:e({view:t},n)}),o=t.destroy.bind(t);t.destroy=function(){o(),ua&&ua()},function(t){ca=!0;var e=t.someProp("dispatchTransaction");setTimeout((function(){t.setProps({dispatchTransaction:function(n){e?e(n):t.updateState(t.state.apply(n)),ca&&qs(n,t.state)}})}),1)}(t),ua=function(){ca=!1,i.$destroy()}}function ha(){ua&&ua()}window.applyDevTools=fa;export{fa as applyDevTools,ha as removeDevTools};
//# sourceMappingURL=index.es.js.map
