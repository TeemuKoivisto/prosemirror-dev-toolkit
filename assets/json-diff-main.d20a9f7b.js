import{r as ge}from"./index.9fc99642.js";import{I as or}from"./idle-scheduler.328c9af7.js";var De={exports:{}};(function(o){var e=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},t=-1,r=1,a=0;e.Diff=function(n,i){return[n,i]},e.prototype.diff_main=function(n,i,s,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var u=l;if(n==null||i==null)throw new Error("Null input. (diff_main)");if(n==i)return n?[new e.Diff(a,n)]:[];typeof s>"u"&&(s=!0);var f=s,h=this.diff_commonPrefix(n,i),v=n.substring(0,h);n=n.substring(h),i=i.substring(h),h=this.diff_commonSuffix(n,i);var p=n.substring(n.length-h);n=n.substring(0,n.length-h),i=i.substring(0,i.length-h);var g=this.diff_compute_(n,i,f,u);return v&&g.unshift(new e.Diff(a,v)),p&&g.push(new e.Diff(a,p)),this.diff_cleanupMerge(g),g},e.prototype.diff_compute_=function(n,i,s,l){var u;if(!n)return[new e.Diff(r,i)];if(!i)return[new e.Diff(t,n)];var f=n.length>i.length?n:i,h=n.length>i.length?i:n,v=f.indexOf(h);if(v!=-1)return u=[new e.Diff(r,f.substring(0,v)),new e.Diff(a,h),new e.Diff(r,f.substring(v+h.length))],n.length>i.length&&(u[0][0]=u[2][0]=t),u;if(h.length==1)return[new e.Diff(t,n),new e.Diff(r,i)];var p=this.diff_halfMatch_(n,i);if(p){var g=p[0],c=p[1],d=p[2],m=p[3],_=p[4],y=this.diff_main(g,d,s,l),w=this.diff_main(c,m,s,l);return y.concat([new e.Diff(a,_)],w)}return s&&n.length>100&&i.length>100?this.diff_lineMode_(n,i,l):this.diff_bisect_(n,i,l)},e.prototype.diff_lineMode_=function(n,i,s){var l=this.diff_linesToChars_(n,i);n=l.chars1,i=l.chars2;var u=l.lineArray,f=this.diff_main(n,i,!1,s);this.diff_charsToLines_(f,u),this.diff_cleanupSemantic(f),f.push(new e.Diff(a,""));for(var h=0,v=0,p=0,g="",c="";h<f.length;){switch(f[h][0]){case r:p++,c+=f[h][1];break;case t:v++,g+=f[h][1];break;case a:if(v>=1&&p>=1){f.splice(h-v-p,v+p),h=h-v-p;for(var d=this.diff_main(g,c,!1,s),m=d.length-1;m>=0;m--)f.splice(h,0,d[m]);h=h+d.length}p=0,v=0,g="",c="";break}h++}return f.pop(),f},e.prototype.diff_bisect_=function(n,i,s){for(var l=n.length,u=i.length,f=Math.ceil((l+u)/2),h=f,v=2*f,p=new Array(v),g=new Array(v),c=0;c<v;c++)p[c]=-1,g[c]=-1;p[h+1]=0,g[h+1]=0;for(var d=l-u,m=d%2!=0,_=0,y=0,w=0,O=0,k=0;k<f&&!(new Date().getTime()>s);k++){for(var E=-k+_;E<=k-y;E+=2){var R=h+E,M;E==-k||E!=k&&p[R-1]<p[R+1]?M=p[R+1]:M=p[R-1]+1;for(var D=M-E;M<l&&D<u&&n.charAt(M)==i.charAt(D);)M++,D++;if(p[R]=M,M>l)y+=2;else if(D>u)_+=2;else if(m){var T=h+d-E;if(T>=0&&T<v&&g[T]!=-1){var A=l-g[T];if(M>=A)return this.diff_bisectSplit_(n,i,M,D,s)}}}for(var C=-k+w;C<=k-O;C+=2){var T=h+C,A;C==-k||C!=k&&g[T-1]<g[T+1]?A=g[T+1]:A=g[T-1]+1;for(var B=A-C;A<l&&B<u&&n.charAt(l-A-1)==i.charAt(u-B-1);)A++,B++;if(g[T]=A,A>l)O+=2;else if(B>u)w+=2;else if(!m){var R=h+d-C;if(R>=0&&R<v&&p[R]!=-1){var M=p[R],D=h+M-R;if(A=l-A,M>=A)return this.diff_bisectSplit_(n,i,M,D,s)}}}}return[new e.Diff(t,n),new e.Diff(r,i)]},e.prototype.diff_bisectSplit_=function(n,i,s,l,u){var f=n.substring(0,s),h=i.substring(0,l),v=n.substring(s),p=i.substring(l),g=this.diff_main(f,h,!1,u),c=this.diff_main(v,p,!1,u);return g.concat(c)},e.prototype.diff_linesToChars_=function(n,i){var s=[],l={};s[0]="";function u(p){for(var g="",c=0,d=-1,m=s.length;d<p.length-1;){d=p.indexOf(`
`,c),d==-1&&(d=p.length-1);var _=p.substring(c,d+1);(l.hasOwnProperty?l.hasOwnProperty(_):l[_]!==void 0)?g+=String.fromCharCode(l[_]):(m==f&&(_=p.substring(c),d=p.length),g+=String.fromCharCode(m),l[_]=m,s[m++]=_),c=d+1}return g}var f=4e4,h=u(n);f=65535;var v=u(i);return{chars1:h,chars2:v,lineArray:s}},e.prototype.diff_charsToLines_=function(n,i){for(var s=0;s<n.length;s++){for(var l=n[s][1],u=[],f=0;f<l.length;f++)u[f]=i[l.charCodeAt(f)];n[s][1]=u.join("")}},e.prototype.diff_commonPrefix=function(n,i){if(!n||!i||n.charAt(0)!=i.charAt(0))return 0;for(var s=0,l=Math.min(n.length,i.length),u=l,f=0;s<u;)n.substring(f,u)==i.substring(f,u)?(s=u,f=s):l=u,u=Math.floor((l-s)/2+s);return u},e.prototype.diff_commonSuffix=function(n,i){if(!n||!i||n.charAt(n.length-1)!=i.charAt(i.length-1))return 0;for(var s=0,l=Math.min(n.length,i.length),u=l,f=0;s<u;)n.substring(n.length-u,n.length-f)==i.substring(i.length-u,i.length-f)?(s=u,f=s):l=u,u=Math.floor((l-s)/2+s);return u},e.prototype.diff_commonOverlap_=function(n,i){var s=n.length,l=i.length;if(s==0||l==0)return 0;s>l?n=n.substring(s-l):s<l&&(i=i.substring(0,s));var u=Math.min(s,l);if(n==i)return u;for(var f=0,h=1;;){var v=n.substring(u-h),p=i.indexOf(v);if(p==-1)return f;h+=p,(p==0||n.substring(u-h)==i.substring(0,h))&&(f=h,h++)}},e.prototype.diff_halfMatch_=function(n,i){if(this.Diff_Timeout<=0)return null;var s=n.length>i.length?n:i,l=n.length>i.length?i:n;if(s.length<4||l.length*2<s.length)return null;var u=this;function f(y,w,O){for(var k=y.substring(O,O+Math.floor(y.length/4)),E=-1,R="",M,D,T,A;(E=w.indexOf(k,E+1))!=-1;){var C=u.diff_commonPrefix(y.substring(O),w.substring(E)),B=u.diff_commonSuffix(y.substring(0,O),w.substring(0,E));R.length<B+C&&(R=w.substring(E-B,E)+w.substring(E,E+C),M=y.substring(0,O-B),D=y.substring(O+C),T=w.substring(0,E-B),A=w.substring(E+C))}return R.length*2>=y.length?[M,D,T,A,R]:null}var h=f(s,l,Math.ceil(s.length/4)),v=f(s,l,Math.ceil(s.length/2)),p;if(!h&&!v)return null;v?h?p=h[4].length>v[4].length?h:v:p=v:p=h;var g,c,d,m;n.length>i.length?(g=p[0],c=p[1],d=p[2],m=p[3]):(d=p[0],m=p[1],g=p[2],c=p[3]);var _=p[4];return[g,c,d,m,_]},e.prototype.diff_cleanupSemantic=function(n){for(var i=!1,s=[],l=0,u=null,f=0,h=0,v=0,p=0,g=0;f<n.length;)n[f][0]==a?(s[l++]=f,h=p,v=g,p=0,g=0,u=n[f][1]):(n[f][0]==r?p+=n[f][1].length:g+=n[f][1].length,u&&u.length<=Math.max(h,v)&&u.length<=Math.max(p,g)&&(n.splice(s[l-1],0,new e.Diff(t,u)),n[s[l-1]+1][0]=r,l--,l--,f=l>0?s[l-1]:-1,h=0,v=0,p=0,g=0,u=null,i=!0)),f++;for(i&&this.diff_cleanupMerge(n),this.diff_cleanupSemanticLossless(n),f=1;f<n.length;){if(n[f-1][0]==t&&n[f][0]==r){var c=n[f-1][1],d=n[f][1],m=this.diff_commonOverlap_(c,d),_=this.diff_commonOverlap_(d,c);m>=_?(m>=c.length/2||m>=d.length/2)&&(n.splice(f,0,new e.Diff(a,d.substring(0,m))),n[f-1][1]=c.substring(0,c.length-m),n[f+1][1]=d.substring(m),f++):(_>=c.length/2||_>=d.length/2)&&(n.splice(f,0,new e.Diff(a,c.substring(0,_))),n[f-1][0]=r,n[f-1][1]=d.substring(0,d.length-_),n[f+1][0]=t,n[f+1][1]=c.substring(_),f++),f++}f++}},e.prototype.diff_cleanupSemanticLossless=function(n){function i(_,y){if(!_||!y)return 6;var w=_.charAt(_.length-1),O=y.charAt(0),k=w.match(e.nonAlphaNumericRegex_),E=O.match(e.nonAlphaNumericRegex_),R=k&&w.match(e.whitespaceRegex_),M=E&&O.match(e.whitespaceRegex_),D=R&&w.match(e.linebreakRegex_),T=M&&O.match(e.linebreakRegex_),A=D&&_.match(e.blanklineEndRegex_),C=T&&y.match(e.blanklineStartRegex_);return A||C?5:D||T?4:k&&!R&&M?3:R||M?2:k||E?1:0}for(var s=1;s<n.length-1;){if(n[s-1][0]==a&&n[s+1][0]==a){var l=n[s-1][1],u=n[s][1],f=n[s+1][1],h=this.diff_commonSuffix(l,u);if(h){var v=u.substring(u.length-h);l=l.substring(0,l.length-h),u=v+u.substring(0,u.length-h),f=v+f}for(var p=l,g=u,c=f,d=i(l,u)+i(u,f);u.charAt(0)===f.charAt(0);){l+=u.charAt(0),u=u.substring(1)+f.charAt(0),f=f.substring(1);var m=i(l,u)+i(u,f);m>=d&&(d=m,p=l,g=u,c=f)}n[s-1][1]!=p&&(p?n[s-1][1]=p:(n.splice(s-1,1),s--),n[s][1]=g,c?n[s+1][1]=c:(n.splice(s+1,1),s--))}s++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(n){for(var i=!1,s=[],l=0,u=null,f=0,h=!1,v=!1,p=!1,g=!1;f<n.length;)n[f][0]==a?(n[f][1].length<this.Diff_EditCost&&(p||g)?(s[l++]=f,h=p,v=g,u=n[f][1]):(l=0,u=null),p=g=!1):(n[f][0]==t?g=!0:p=!0,u&&(h&&v&&p&&g||u.length<this.Diff_EditCost/2&&h+v+p+g==3)&&(n.splice(s[l-1],0,new e.Diff(t,u)),n[s[l-1]+1][0]=r,l--,u=null,h&&v?(p=g=!0,l=0):(l--,f=l>0?s[l-1]:-1,p=g=!1),i=!0)),f++;i&&this.diff_cleanupMerge(n)},e.prototype.diff_cleanupMerge=function(n){n.push(new e.Diff(a,""));for(var i=0,s=0,l=0,u="",f="",h;i<n.length;)switch(n[i][0]){case r:l++,f+=n[i][1],i++;break;case t:s++,u+=n[i][1],i++;break;case a:s+l>1?(s!==0&&l!==0&&(h=this.diff_commonPrefix(f,u),h!==0&&(i-s-l>0&&n[i-s-l-1][0]==a?n[i-s-l-1][1]+=f.substring(0,h):(n.splice(0,0,new e.Diff(a,f.substring(0,h))),i++),f=f.substring(h),u=u.substring(h)),h=this.diff_commonSuffix(f,u),h!==0&&(n[i][1]=f.substring(f.length-h)+n[i][1],f=f.substring(0,f.length-h),u=u.substring(0,u.length-h))),i-=s+l,n.splice(i,s+l),u.length&&(n.splice(i,0,new e.Diff(t,u)),i++),f.length&&(n.splice(i,0,new e.Diff(r,f)),i++),i++):i!==0&&n[i-1][0]==a?(n[i-1][1]+=n[i][1],n.splice(i,1)):i++,l=0,s=0,u="",f="";break}n[n.length-1][1]===""&&n.pop();var v=!1;for(i=1;i<n.length-1;)n[i-1][0]==a&&n[i+1][0]==a&&(n[i][1].substring(n[i][1].length-n[i-1][1].length)==n[i-1][1]?(n[i][1]=n[i-1][1]+n[i][1].substring(0,n[i][1].length-n[i-1][1].length),n[i+1][1]=n[i-1][1]+n[i+1][1],n.splice(i-1,1),v=!0):n[i][1].substring(0,n[i+1][1].length)==n[i+1][1]&&(n[i-1][1]+=n[i+1][1],n[i][1]=n[i][1].substring(n[i+1][1].length)+n[i+1][1],n.splice(i+1,1),v=!0)),i++;v&&this.diff_cleanupMerge(n)},e.prototype.diff_xIndex=function(n,i){var s=0,l=0,u=0,f=0,h;for(h=0;h<n.length&&(n[h][0]!==r&&(s+=n[h][1].length),n[h][0]!==t&&(l+=n[h][1].length),!(s>i));h++)u=s,f=l;return n.length!=h&&n[h][0]===t?f:f+(i-u)},e.prototype.diff_prettyHtml=function(n){for(var i=[],s=/&/g,l=/</g,u=/>/g,f=/\n/g,h=0;h<n.length;h++){var v=n[h][0],p=n[h][1],g=p.replace(s,"&amp;").replace(l,"&lt;").replace(u,"&gt;").replace(f,"&para;<br>");switch(v){case r:i[h]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case t:i[h]='<del style="background:#ffe6e6;">'+g+"</del>";break;case a:i[h]="<span>"+g+"</span>";break}}return i.join("")},e.prototype.diff_text1=function(n){for(var i=[],s=0;s<n.length;s++)n[s][0]!==r&&(i[s]=n[s][1]);return i.join("")},e.prototype.diff_text2=function(n){for(var i=[],s=0;s<n.length;s++)n[s][0]!==t&&(i[s]=n[s][1]);return i.join("")},e.prototype.diff_levenshtein=function(n){for(var i=0,s=0,l=0,u=0;u<n.length;u++){var f=n[u][0],h=n[u][1];switch(f){case r:s+=h.length;break;case t:l+=h.length;break;case a:i+=Math.max(s,l),s=0,l=0;break}}return i+=Math.max(s,l),i},e.prototype.diff_toDelta=function(n){for(var i=[],s=0;s<n.length;s++)switch(n[s][0]){case r:i[s]="+"+encodeURI(n[s][1]);break;case t:i[s]="-"+n[s][1].length;break;case a:i[s]="="+n[s][1].length;break}return i.join("	").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(n,i){for(var s=[],l=0,u=0,f=i.split(/\t/g),h=0;h<f.length;h++){var v=f[h].substring(1);switch(f[h].charAt(0)){case"+":try{s[l++]=new e.Diff(r,decodeURI(v))}catch{throw new Error("Illegal escape in diff_fromDelta: "+v)}break;case"-":case"=":var p=parseInt(v,10);if(isNaN(p)||p<0)throw new Error("Invalid number in diff_fromDelta: "+v);var g=n.substring(u,u+=p);f[h].charAt(0)=="="?s[l++]=new e.Diff(a,g):s[l++]=new e.Diff(t,g);break;default:if(f[h])throw new Error("Invalid diff operation in diff_fromDelta: "+f[h])}}if(u!=n.length)throw new Error("Delta length ("+u+") does not equal source text length ("+n.length+").");return s},e.prototype.match_main=function(n,i,s){if(n==null||i==null||s==null)throw new Error("Null input. (match_main)");return s=Math.max(0,Math.min(s,n.length)),n==i?0:n.length?n.substring(s,s+i.length)==i?s:this.match_bitap_(n,i,s):-1},e.prototype.match_bitap_=function(n,i,s){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(i),u=this;function f(M,D){var T=M/i.length,A=Math.abs(s-D);return u.Match_Distance?T+A/u.Match_Distance:A?1:T}var h=this.Match_Threshold,v=n.indexOf(i,s);v!=-1&&(h=Math.min(f(0,v),h),v=n.lastIndexOf(i,s+i.length),v!=-1&&(h=Math.min(f(0,v),h)));var p=1<<i.length-1;v=-1;for(var g,c,d=i.length+n.length,m,_=0;_<i.length;_++){for(g=0,c=d;g<c;)f(_,s+c)<=h?g=c:d=c,c=Math.floor((d-g)/2+g);d=c;var y=Math.max(1,s-c+1),w=Math.min(s+c,n.length)+i.length,O=Array(w+2);O[w+1]=(1<<_)-1;for(var k=w;k>=y;k--){var E=l[n.charAt(k-1)];if(_===0?O[k]=(O[k+1]<<1|1)&E:O[k]=(O[k+1]<<1|1)&E|((m[k+1]|m[k])<<1|1)|m[k+1],O[k]&p){var R=f(_,k-1);if(R<=h)if(h=R,v=k-1,v>s)y=Math.max(1,2*s-v);else break}}if(f(_+1,s)>h)break;m=O}return v},e.prototype.match_alphabet_=function(n){for(var i={},s=0;s<n.length;s++)i[n.charAt(s)]=0;for(var s=0;s<n.length;s++)i[n.charAt(s)]|=1<<n.length-s-1;return i},e.prototype.patch_addContext_=function(n,i){if(i.length!=0){if(n.start2===null)throw Error("patch not initialized");for(var s=i.substring(n.start2,n.start2+n.length1),l=0;i.indexOf(s)!=i.lastIndexOf(s)&&s.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,s=i.substring(n.start2-l,n.start2+n.length1+l);l+=this.Patch_Margin;var u=i.substring(n.start2-l,n.start2);u&&n.diffs.unshift(new e.Diff(a,u));var f=i.substring(n.start2+n.length1,n.start2+n.length1+l);f&&n.diffs.push(new e.Diff(a,f)),n.start1-=u.length,n.start2-=u.length,n.length1+=u.length+f.length,n.length2+=u.length+f.length}},e.prototype.patch_make=function(n,i,s){var l,u;if(typeof n=="string"&&typeof i=="string"&&typeof s>"u")l=n,u=this.diff_main(l,i,!0),u.length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(n&&typeof n=="object"&&typeof i>"u"&&typeof s>"u")u=n,l=this.diff_text1(u);else if(typeof n=="string"&&i&&typeof i=="object"&&typeof s>"u")l=n,u=i;else if(typeof n=="string"&&typeof i=="string"&&s&&typeof s=="object")l=n,u=s;else throw new Error("Unknown call format to patch_make.");if(u.length===0)return[];for(var f=[],h=new e.patch_obj,v=0,p=0,g=0,c=l,d=l,m=0;m<u.length;m++){var _=u[m][0],y=u[m][1];switch(!v&&_!==a&&(h.start1=p,h.start2=g),_){case r:h.diffs[v++]=u[m],h.length2+=y.length,d=d.substring(0,g)+y+d.substring(g);break;case t:h.length1+=y.length,h.diffs[v++]=u[m],d=d.substring(0,g)+d.substring(g+y.length);break;case a:y.length<=2*this.Patch_Margin&&v&&u.length!=m+1?(h.diffs[v++]=u[m],h.length1+=y.length,h.length2+=y.length):y.length>=2*this.Patch_Margin&&v&&(this.patch_addContext_(h,c),f.push(h),h=new e.patch_obj,v=0,c=d,p=g);break}_!==r&&(p+=y.length),_!==t&&(g+=y.length)}return v&&(this.patch_addContext_(h,c),f.push(h)),f},e.prototype.patch_deepCopy=function(n){for(var i=[],s=0;s<n.length;s++){var l=n[s],u=new e.patch_obj;u.diffs=[];for(var f=0;f<l.diffs.length;f++)u.diffs[f]=new e.Diff(l.diffs[f][0],l.diffs[f][1]);u.start1=l.start1,u.start2=l.start2,u.length1=l.length1,u.length2=l.length2,i[s]=u}return i},e.prototype.patch_apply=function(n,i){if(n.length==0)return[i,[]];n=this.patch_deepCopy(n);var s=this.patch_addPadding(n);i=s+i+s,this.patch_splitMax(n);for(var l=0,u=[],f=0;f<n.length;f++){var h=n[f].start2+l,v=this.diff_text1(n[f].diffs),p,g=-1;if(v.length>this.Match_MaxBits?(p=this.match_main(i,v.substring(0,this.Match_MaxBits),h),p!=-1&&(g=this.match_main(i,v.substring(v.length-this.Match_MaxBits),h+v.length-this.Match_MaxBits),(g==-1||p>=g)&&(p=-1))):p=this.match_main(i,v,h),p==-1)u[f]=!1,l-=n[f].length2-n[f].length1;else{u[f]=!0,l=p-h;var c;if(g==-1?c=i.substring(p,p+v.length):c=i.substring(p,g+this.Match_MaxBits),v==c)i=i.substring(0,p)+this.diff_text2(n[f].diffs)+i.substring(p+v.length);else{var d=this.diff_main(v,c,!1);if(v.length>this.Match_MaxBits&&this.diff_levenshtein(d)/v.length>this.Patch_DeleteThreshold)u[f]=!1;else{this.diff_cleanupSemanticLossless(d);for(var m=0,_,y=0;y<n[f].diffs.length;y++){var w=n[f].diffs[y];w[0]!==a&&(_=this.diff_xIndex(d,m)),w[0]===r?i=i.substring(0,p+_)+w[1]+i.substring(p+_):w[0]===t&&(i=i.substring(0,p+_)+i.substring(p+this.diff_xIndex(d,m+w[1].length))),w[0]!==t&&(m+=w[1].length)}}}}}return i=i.substring(s.length,i.length-s.length),[i,u]},e.prototype.patch_addPadding=function(n){for(var i=this.Patch_Margin,s="",l=1;l<=i;l++)s+=String.fromCharCode(l);for(var l=0;l<n.length;l++)n[l].start1+=i,n[l].start2+=i;var u=n[0],f=u.diffs;if(f.length==0||f[0][0]!=a)f.unshift(new e.Diff(a,s)),u.start1-=i,u.start2-=i,u.length1+=i,u.length2+=i;else if(i>f[0][1].length){var h=i-f[0][1].length;f[0][1]=s.substring(f[0][1].length)+f[0][1],u.start1-=h,u.start2-=h,u.length1+=h,u.length2+=h}if(u=n[n.length-1],f=u.diffs,f.length==0||f[f.length-1][0]!=a)f.push(new e.Diff(a,s)),u.length1+=i,u.length2+=i;else if(i>f[f.length-1][1].length){var h=i-f[f.length-1][1].length;f[f.length-1][1]+=s.substring(0,h),u.length1+=h,u.length2+=h}return s},e.prototype.patch_splitMax=function(n){for(var i=this.Match_MaxBits,s=0;s<n.length;s++)if(!(n[s].length1<=i)){var l=n[s];n.splice(s--,1);for(var u=l.start1,f=l.start2,h="";l.diffs.length!==0;){var v=new e.patch_obj,p=!0;for(v.start1=u-h.length,v.start2=f-h.length,h!==""&&(v.length1=v.length2=h.length,v.diffs.push(new e.Diff(a,h)));l.diffs.length!==0&&v.length1<i-this.Patch_Margin;){var g=l.diffs[0][0],c=l.diffs[0][1];g===r?(v.length2+=c.length,f+=c.length,v.diffs.push(l.diffs.shift()),p=!1):g===t&&v.diffs.length==1&&v.diffs[0][0]==a&&c.length>2*i?(v.length1+=c.length,u+=c.length,p=!1,v.diffs.push(new e.Diff(g,c)),l.diffs.shift()):(c=c.substring(0,i-v.length1-this.Patch_Margin),v.length1+=c.length,u+=c.length,g===a?(v.length2+=c.length,f+=c.length):p=!1,v.diffs.push(new e.Diff(g,c)),c==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(c.length))}h=this.diff_text2(v.diffs),h=h.substring(h.length-this.Patch_Margin);var d=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);d!==""&&(v.length1+=d.length,v.length2+=d.length,v.diffs.length!==0&&v.diffs[v.diffs.length-1][0]===a?v.diffs[v.diffs.length-1][1]+=d:v.diffs.push(new e.Diff(a,d))),p||n.splice(++s,0,v)}}},e.prototype.patch_toText=function(n){for(var i=[],s=0;s<n.length;s++)i[s]=n[s];return i.join("")},e.prototype.patch_fromText=function(n){var i=[];if(!n)return i;for(var s=n.split(`
`),l=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<s.length;){var f=s[l].match(u);if(!f)throw new Error("Invalid patch string: "+s[l]);var h=new e.patch_obj;for(i.push(h),h.start1=parseInt(f[1],10),f[2]===""?(h.start1--,h.length1=1):f[2]=="0"?h.length1=0:(h.start1--,h.length1=parseInt(f[2],10)),h.start2=parseInt(f[3],10),f[4]===""?(h.start2--,h.length2=1):f[4]=="0"?h.length2=0:(h.start2--,h.length2=parseInt(f[4],10)),l++;l<s.length;){var v=s[l].charAt(0);try{var p=decodeURI(s[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+p)}if(v=="-")h.diffs.push(new e.Diff(t,p));else if(v=="+")h.diffs.push(new e.Diff(r,p));else if(v==" ")h.diffs.push(new e.Diff(a,p));else{if(v=="@")break;if(v!=="")throw new Error('Invalid patch mode "'+v+'" in: '+p)}l++}}return i},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){var n,i;this.length1===0?n=this.start1+",0":this.length1==1?n=this.start1+1:n=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var s=["@@ -"+n+" +"+i+` @@
`],l,u=0;u<this.diffs.length;u++){switch(this.diffs[u][0]){case r:l="+";break;case t:l="-";break;case a:l=" ";break}s[u+1]=l+encodeURI(this.diffs[u][1])+`
`}return s.join("").replace(/%20/g," ")},o.exports=e,o.exports.diff_match_patch=e,o.exports.DIFF_DELETE=t,o.exports.DIFF_INSERT=r,o.exports.DIFF_EQUAL=a})(De);const te=De.exports;var Ce={exports:{}},lr=/[|\\{}()[\]^$+*?.]/g,fr=function(o){if(typeof o!="string")throw new TypeError("Expected a string");return o.replace(lr,"\\$&")},Ne={exports:{}},ve={exports:{}},ur={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},H=ur,Pe={};for(var ne in H)H.hasOwnProperty(ne)&&(Pe[H[ne]]=ne);var b=ve.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var N in b)if(b.hasOwnProperty(N)){if(!("channels"in b[N]))throw new Error("missing channels property: "+N);if(!("labels"in b[N]))throw new Error("missing channel labels property: "+N);if(b[N].labels.length!==b[N].channels)throw new Error("channel and label counts mismatch: "+N);var hr=b[N].channels,vr=b[N].labels;delete b[N].channels,delete b[N].labels,Object.defineProperty(b[N],"channels",{value:hr}),Object.defineProperty(b[N],"labels",{value:vr})}b.rgb.hsl=function(o){var e=o[0]/255,t=o[1]/255,r=o[2]/255,a=Math.min(e,t,r),n=Math.max(e,t,r),i=n-a,s,l,u;return n===a?s=0:e===n?s=(t-r)/i:t===n?s=2+(r-e)/i:r===n&&(s=4+(e-t)/i),s=Math.min(s*60,360),s<0&&(s+=360),u=(a+n)/2,n===a?l=0:u<=.5?l=i/(n+a):l=i/(2-n-a),[s,l*100,u*100]};b.rgb.hsv=function(o){var e,t,r,a,n,i=o[0]/255,s=o[1]/255,l=o[2]/255,u=Math.max(i,s,l),f=u-Math.min(i,s,l),h=function(v){return(u-v)/6/f+1/2};return f===0?a=n=0:(n=f/u,e=h(i),t=h(s),r=h(l),i===u?a=r-t:s===u?a=1/3+e-r:l===u&&(a=2/3+t-e),a<0?a+=1:a>1&&(a-=1)),[a*360,n*100,u*100]};b.rgb.hwb=function(o){var e=o[0],t=o[1],r=o[2],a=b.rgb.hsl(o)[0],n=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[a,n*100,r*100]};b.rgb.cmyk=function(o){var e=o[0]/255,t=o[1]/255,r=o[2]/255,a,n,i,s;return s=Math.min(1-e,1-t,1-r),a=(1-e-s)/(1-s)||0,n=(1-t-s)/(1-s)||0,i=(1-r-s)/(1-s)||0,[a*100,n*100,i*100,s*100]};function pr(o,e){return Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2)+Math.pow(o[2]-e[2],2)}b.rgb.keyword=function(o){var e=Pe[o];if(e)return e;var t=1/0,r;for(var a in H)if(H.hasOwnProperty(a)){var n=H[a],i=pr(o,n);i<t&&(t=i,r=a)}return r};b.keyword.rgb=function(o){return H[o]};b.rgb.xyz=function(o){var e=o[0]/255,t=o[1]/255,r=o[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var a=e*.4124+t*.3576+r*.1805,n=e*.2126+t*.7152+r*.0722,i=e*.0193+t*.1192+r*.9505;return[a*100,n*100,i*100]};b.rgb.lab=function(o){var e=b.rgb.xyz(o),t=e[0],r=e[1],a=e[2],n,i,s;return t/=95.047,r/=100,a/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,n=116*r-16,i=500*(t-r),s=200*(r-a),[n,i,s]};b.hsl.rgb=function(o){var e=o[0]/360,t=o[1]/100,r=o[2]/100,a,n,i,s,l;if(t===0)return l=r*255,[l,l,l];r<.5?n=r*(1+t):n=r+t-r*t,a=2*r-n,s=[0,0,0];for(var u=0;u<3;u++)i=e+1/3*-(u-1),i<0&&i++,i>1&&i--,6*i<1?l=a+(n-a)*6*i:2*i<1?l=n:3*i<2?l=a+(n-a)*(2/3-i)*6:l=a,s[u]=l*255;return s};b.hsl.hsv=function(o){var e=o[0],t=o[1]/100,r=o[2]/100,a=t,n=Math.max(r,.01),i,s;return r*=2,t*=r<=1?r:2-r,a*=n<=1?n:2-n,s=(r+t)/2,i=r===0?2*a/(n+a):2*t/(r+t),[e,i*100,s*100]};b.hsv.rgb=function(o){var e=o[0]/60,t=o[1]/100,r=o[2]/100,a=Math.floor(e)%6,n=e-Math.floor(e),i=255*r*(1-t),s=255*r*(1-t*n),l=255*r*(1-t*(1-n));switch(r*=255,a){case 0:return[r,l,i];case 1:return[s,r,i];case 2:return[i,r,l];case 3:return[i,s,r];case 4:return[l,i,r];case 5:return[r,i,s]}};b.hsv.hsl=function(o){var e=o[0],t=o[1]/100,r=o[2]/100,a=Math.max(r,.01),n,i,s;return s=(2-t)*r,n=(2-t)*a,i=t*a,i/=n<=1?n:2-n,i=i||0,s/=2,[e,i*100,s*100]};b.hwb.rgb=function(o){var e=o[0]/360,t=o[1]/100,r=o[2]/100,a=t+r,n,i,s,l;a>1&&(t/=a,r/=a),n=Math.floor(6*e),i=1-r,s=6*e-n,(n&1)!==0&&(s=1-s),l=t+s*(i-t);var u,f,h;switch(n){default:case 6:case 0:u=i,f=l,h=t;break;case 1:u=l,f=i,h=t;break;case 2:u=t,f=i,h=l;break;case 3:u=t,f=l,h=i;break;case 4:u=l,f=t,h=i;break;case 5:u=i,f=t,h=l;break}return[u*255,f*255,h*255]};b.cmyk.rgb=function(o){var e=o[0]/100,t=o[1]/100,r=o[2]/100,a=o[3]/100,n,i,s;return n=1-Math.min(1,e*(1-a)+a),i=1-Math.min(1,t*(1-a)+a),s=1-Math.min(1,r*(1-a)+a),[n*255,i*255,s*255]};b.xyz.rgb=function(o){var e=o[0]/100,t=o[1]/100,r=o[2]/100,a,n,i;return a=e*3.2406+t*-1.5372+r*-.4986,n=e*-.9689+t*1.8758+r*.0415,i=e*.0557+t*-.204+r*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,a=Math.min(Math.max(0,a),1),n=Math.min(Math.max(0,n),1),i=Math.min(Math.max(0,i),1),[a*255,n*255,i*255]};b.xyz.lab=function(o){var e=o[0],t=o[1],r=o[2],a,n,i;return e/=95.047,t/=100,r/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=116*t-16,n=500*(e-t),i=200*(t-r),[a,n,i]};b.lab.xyz=function(o){var e=o[0],t=o[1],r=o[2],a,n,i;n=(e+16)/116,a=t/500+n,i=n-r/200;var s=Math.pow(n,3),l=Math.pow(a,3),u=Math.pow(i,3);return n=s>.008856?s:(n-16/116)/7.787,a=l>.008856?l:(a-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,a*=95.047,n*=100,i*=108.883,[a,n,i]};b.lab.lch=function(o){var e=o[0],t=o[1],r=o[2],a,n,i;return a=Math.atan2(r,t),n=a*360/2/Math.PI,n<0&&(n+=360),i=Math.sqrt(t*t+r*r),[e,i,n]};b.lch.lab=function(o){var e=o[0],t=o[1],r=o[2],a,n,i;return i=r/360*2*Math.PI,a=t*Math.cos(i),n=t*Math.sin(i),[e,a,n]};b.rgb.ansi16=function(o){var e=o[0],t=o[1],r=o[2],a=1 in arguments?arguments[1]:b.rgb.hsv(o)[2];if(a=Math.round(a/50),a===0)return 30;var n=30+(Math.round(r/255)<<2|Math.round(t/255)<<1|Math.round(e/255));return a===2&&(n+=60),n};b.hsv.ansi16=function(o){return b.rgb.ansi16(b.hsv.rgb(o),o[2])};b.rgb.ansi256=function(o){var e=o[0],t=o[1],r=o[2];if(e===t&&t===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var a=16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5);return a};b.ansi16.rgb=function(o){var e=o%10;if(e===0||e===7)return o>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var t=(~~(o>50)+1)*.5,r=(e&1)*t*255,a=(e>>1&1)*t*255,n=(e>>2&1)*t*255;return[r,a,n]};b.ansi256.rgb=function(o){if(o>=232){var e=(o-232)*10+8;return[e,e,e]}o-=16;var t,r=Math.floor(o/36)/5*255,a=Math.floor((t=o%36)/6)/5*255,n=t%6/5*255;return[r,a,n]};b.rgb.hex=function(o){var e=((Math.round(o[0])&255)<<16)+((Math.round(o[1])&255)<<8)+(Math.round(o[2])&255),t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t};b.hex.rgb=function(o){var e=o.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var t=e[0];e[0].length===3&&(t=t.split("").map(function(s){return s+s}).join(""));var r=parseInt(t,16),a=r>>16&255,n=r>>8&255,i=r&255;return[a,n,i]};b.rgb.hcg=function(o){var e=o[0]/255,t=o[1]/255,r=o[2]/255,a=Math.max(Math.max(e,t),r),n=Math.min(Math.min(e,t),r),i=a-n,s,l;return i<1?s=n/(1-i):s=0,i<=0?l=0:a===e?l=(t-r)/i%6:a===t?l=2+(r-e)/i:l=4+(e-t)/i+4,l/=6,l%=1,[l*360,i*100,s*100]};b.hsl.hcg=function(o){var e=o[1]/100,t=o[2]/100,r=1,a=0;return t<.5?r=2*e*t:r=2*e*(1-t),r<1&&(a=(t-.5*r)/(1-r)),[o[0],r*100,a*100]};b.hsv.hcg=function(o){var e=o[1]/100,t=o[2]/100,r=e*t,a=0;return r<1&&(a=(t-r)/(1-r)),[o[0],r*100,a*100]};b.hcg.rgb=function(o){var e=o[0]/360,t=o[1]/100,r=o[2]/100;if(t===0)return[r*255,r*255,r*255];var a=[0,0,0],n=e%1*6,i=n%1,s=1-i,l=0;switch(Math.floor(n)){case 0:a[0]=1,a[1]=i,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=i;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=i,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}return l=(1-t)*r,[(t*a[0]+l)*255,(t*a[1]+l)*255,(t*a[2]+l)*255]};b.hcg.hsv=function(o){var e=o[1]/100,t=o[2]/100,r=e+t*(1-e),a=0;return r>0&&(a=e/r),[o[0],a*100,r*100]};b.hcg.hsl=function(o){var e=o[1]/100,t=o[2]/100,r=t*(1-e)+.5*e,a=0;return r>0&&r<.5?a=e/(2*r):r>=.5&&r<1&&(a=e/(2*(1-r))),[o[0],a*100,r*100]};b.hcg.hwb=function(o){var e=o[1]/100,t=o[2]/100,r=e+t*(1-e);return[o[0],(r-e)*100,(1-r)*100]};b.hwb.hcg=function(o){var e=o[1]/100,t=o[2]/100,r=1-t,a=r-e,n=0;return a<1&&(n=(r-a)/(1-a)),[o[0],a*100,n*100]};b.apple.rgb=function(o){return[o[0]/65535*255,o[1]/65535*255,o[2]/65535*255]};b.rgb.apple=function(o){return[o[0]/255*65535,o[1]/255*65535,o[2]/255*65535]};b.gray.rgb=function(o){return[o[0]/100*255,o[0]/100*255,o[0]/100*255]};b.gray.hsl=b.gray.hsv=function(o){return[0,0,o[0]]};b.gray.hwb=function(o){return[0,100,o[0]]};b.gray.cmyk=function(o){return[0,0,0,o[0]]};b.gray.lab=function(o){return[o[0],0,0]};b.gray.hex=function(o){var e=Math.round(o[0]/100*255)&255,t=(e<<16)+(e<<8)+e,r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};b.rgb.gray=function(o){var e=(o[0]+o[1]+o[2])/3;return[e/255*100]};var Q=ve.exports;function cr(){for(var o={},e=Object.keys(Q),t=e.length,r=0;r<t;r++)o[e[r]]={distance:-1,parent:null};return o}function dr(o){var e=cr(),t=[o];for(e[o].distance=0;t.length;)for(var r=t.pop(),a=Object.keys(Q[r]),n=a.length,i=0;i<n;i++){var s=a[i],l=e[s];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,t.unshift(s))}return e}function gr(o,e){return function(t){return e(o(t))}}function mr(o,e){for(var t=[e[o].parent,o],r=Q[e[o].parent][o],a=e[o].parent;e[a].parent;)t.unshift(e[a].parent),r=gr(Q[e[a].parent][a],r),a=e[a].parent;return r.conversion=t,r}var _r=function(o){for(var e=dr(o),t={},r=Object.keys(e),a=r.length,n=0;n<a;n++){var i=r[n],s=e[i];s.parent!==null&&(t[i]=mr(i,e))}return t},he=ve.exports,yr=_r,V={},br=Object.keys(he);function wr(o){var e=function(t){return t==null?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),o(t))};return"conversion"in o&&(e.conversion=o.conversion),e}function kr(o){var e=function(t){if(t==null)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=o(t);if(typeof r=="object")for(var a=r.length,n=0;n<a;n++)r[n]=Math.round(r[n]);return r};return"conversion"in o&&(e.conversion=o.conversion),e}br.forEach(function(o){V[o]={},Object.defineProperty(V[o],"channels",{value:he[o].channels}),Object.defineProperty(V[o],"labels",{value:he[o].labels});var e=yr(o),t=Object.keys(e);t.forEach(function(r){var a=e[r];V[o][r]=kr(a),V[o][r].raw=wr(a)})});var Er=V;(function(o){const e=Er,t=(i,s)=>function(){return`\x1B[${i.apply(e,arguments)+s}m`},r=(i,s)=>function(){const l=i.apply(e,arguments);return`\x1B[${38+s};5;${l}m`},a=(i,s)=>function(){const l=i.apply(e,arguments);return`\x1B[${38+s};2;${l[0]};${l[1]};${l[2]}m`};function n(){const i=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.grey=s.color.gray;for(const f of Object.keys(s)){const h=s[f];for(const v of Object.keys(h)){const p=h[v];s[v]={open:`\x1B[${p[0]}m`,close:`\x1B[${p[1]}m`},h[v]=s[v],i.set(p[0],p[1])}Object.defineProperty(s,f,{value:h,enumerable:!1}),Object.defineProperty(s,"codes",{value:i,enumerable:!1})}const l=f=>f,u=(f,h,v)=>[f,h,v];s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi={ansi:t(l,0)},s.color.ansi256={ansi256:r(l,0)},s.color.ansi16m={rgb:a(u,0)},s.bgColor.ansi={ansi:t(l,10)},s.bgColor.ansi256={ansi256:r(l,10)},s.bgColor.ansi16m={rgb:a(u,10)};for(let f of Object.keys(e)){if(typeof e[f]!="object")continue;const h=e[f];f==="ansi16"&&(f="ansi"),"ansi16"in h&&(s.color.ansi[f]=t(h.ansi16,0),s.bgColor.ansi[f]=t(h.ansi16,10)),"ansi256"in h&&(s.color.ansi256[f]=r(h.ansi256,0),s.bgColor.ansi256[f]=r(h.ansi256,10)),"rgb"in h&&(s.color.ansi16m[f]=a(h.rgb,0),s.bgColor.ansi16m[f]=a(h.rgb,10))}return s}Object.defineProperty(o,"exports",{enumerable:!0,get:n})})(Ne);var Or={stdout:!1,stderr:!1};const Rr=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,me=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Mr=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,Ar=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,Tr=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function Ie(o){return o[0]==="u"&&o.length===5||o[0]==="x"&&o.length===3?String.fromCharCode(parseInt(o.slice(1),16)):Tr.get(o)||o}function Dr(o,e){const t=[],r=e.trim().split(/\s*,\s*/g);let a;for(const n of r)if(!isNaN(n))t.push(Number(n));else if(a=n.match(Mr))t.push(a[2].replace(Ar,(i,s,l)=>s?Ie(s):l));else throw new Error(`Invalid Chalk template style argument: ${n} (in style '${o}')`);return t}function Cr(o){me.lastIndex=0;const e=[];let t;for(;(t=me.exec(o))!==null;){const r=t[1];if(t[2]){const a=Dr(r,t[2]);e.push([r].concat(a))}else e.push([r])}return e}function _e(o,e){const t={};for(const a of e)for(const n of a.styles)t[n[0]]=a.inverse?null:n.slice(1);let r=o;for(const a of Object.keys(t))if(Array.isArray(t[a])){if(!(a in r))throw new Error(`Unknown Chalk style: ${a}`);t[a].length>0?r=r[a].apply(r,t[a]):r=r[a]}return r}var Nr=(o,e)=>{const t=[],r=[];let a=[];if(e.replace(Rr,(n,i,s,l,u,f)=>{if(i)a.push(Ie(i));else if(l){const h=a.join("");a=[],r.push(t.length===0?h:_e(o,t)(h)),t.push({inverse:s,styles:Cr(l)})}else if(u){if(t.length===0)throw new Error("Found extraneous } in Chalk template literal");r.push(_e(o,t)(a.join(""))),a=[],t.pop()}else a.push(f)}),r.push(a.join("")),t.length>0){const n=`Chalk template literal is missing ${t.length} closing bracket${t.length===1?"":"s"} (\`}\`)`;throw new Error(n)}return r.join("")};(function(o){const e=fr,t=Ne.exports,r=Or.stdout,a=Nr,n=process.platform==="win32"&&!({GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_89b4f90b-a2e8-48c1-a191-f65aa7fcb3e1",npm_package_devDependencies__types_node:"^18.0.1",npm_package_devDependencies_vite_tsconfig_paths:"^3.5.1",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",npm_package_devDependencies__types_react_router_dom:"^5.3.3",USER:"runner",npm_config_user_agent:"pnpm/7.13.5 npm/? node/v16.17.1 linux x64",CI:"true",npm_package_devDependencies__vitejs_plugin_react_refresh:"^1.3.6",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_89b4f90b-a2e8-48c1-a191-f65aa7fcb3e1",PIPX_HOME:"/opt/pipx",npm_package_devDependencies_vite:"^3.1.8",npm_node_execpath:"/usr/local/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",HOME:"/home/runner",npm_package_dependencies_prosemirror_state:"^1.4.1",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_dependencies_prosemirror_dev_tools:"^3.1.0",npm_package_dependencies_prosemirror_example_setup:"^1.2.1",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GRAALVM_11_ROOT:"/usr/local/graalvm/graalvm-ce-java11-22.2.0",GITHUB_REPOSITORY_OWNER:"TeemuKoivisto",GRADLE_HOME:"/usr/share/gradle-7.5.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_RETENTION_DAYS:"90",npm_package_dependencies_yjs:"^13.5.39",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu20",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_package_dependencies_react_icons:"^4.4.0",npm_package_dependencies_y_prosemirror:"^1.1.2",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",npm_package_dependencies_react_router_dom:"^6.3.0",NVM_DIR:"/home/runner/.nvm",npm_package_homepage:"https://teemukoivisto.github.io/prosemirror-dev-toolkit/",npm_package_devDependencies__types_react_dom:"18.0.5",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20221002.2",npm_package_scripts_dev:"vite",npm_package_devDependencies__types_lodash_debounce:"^4.0.7",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",SWIFT_PATH:"/usr/share/swift/usr/bin",npm_package_devDependencies__types_react_router:"^5.1.18",RUNNER_USER:"runner",CHROMEWEBDRIVER:"/usr/local/share/chrome_driver",JOURNAL_STREAM:"8:22328",GITHUB_WORKFLOW:"Deploy to Github Pages",_:"/usr/local/bin/pnpm",npm_package_private:"true",npm_config_registry:"https://registry.npmjs.org/",GITHUB_RUN_ID:"3264930162",GOROOT_1_17_X64:"/opt/hostedtoolcache/go/1.17.13/x64",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_BASE_REF:"",ImageOS:"ubuntu20",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GOROOT_1_18_X64:"/opt/hostedtoolcache/go/1.18.6/x64",GITHUB_ACTION_REPOSITORY:"",npm_package_dependencies_prosemirror_transform:"^1.6.0",npm_config_node_gyp:"/usr/local/lib/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit/packages/site/node_modules/.bin:/usr/local/lib/node_modules/pnpm/dist/node-gyp-bin:/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit/node_modules/.bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_6893a4b0-5cf3-4ad0-b38a-c51a46f5e591",INVOCATION_ID:"5b258a241b774d41b114e1ca61e28db2",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",GOROOT_1_19_X64:"/opt/hostedtoolcache/go/1.19.1/x64",npm_package_name:"site",npm_package_dependencies_prosemirror_view:"^1.26.3",npm_config_store_dir:".pnpm-store",NODE:"/usr/local/bin/node",GITHUB_ACTION:"__run",GITHUB_RUN_NUMBER:"15",GITHUB_TRIGGERING_ACTOR:"TeemuKoivisto",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",npm_package_dependencies_y_protocols:"^1.0.5",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",npm_package_devDependencies__types_styled_components:"^5.1.25",npm_package_dependencies_react_dom:"^18.2.0",CONDA:"/usr/share/miniconda",RUNNER_NAME:"Hosted Agent",XDG_CONFIG_HOME:"/home/runner/.config",GITHUB_REF_NAME:"master",GITHUB_REPOSITORY:"TeemuKoivisto/prosemirror-dev-toolkit",npm_package_dependencies_lodash_debounce:"^4.0.8",npm_package_dependencies_prosemirror_dev_toolkit:"workspace:*",npm_lifecycle_script:"vite build",GH_PAGES:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",npm_package_dependencies_react_router:"^6.3.0",GITHUB_ACTIONS:"true",npm_package_version:"0.0.3",npm_package_devDependencies__types_react:"18.0.14",npm_lifecycle_event:"build",NODE_PATH:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit/node_modules/.pnpm/node_modules",GITHUB_REF_PROTECTED:"true",npm_package_scripts_build:"vite build",GITHUB_WORKSPACE:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit",VCPKG_ROOT:"/usr/local/share/vcpkg",ACCEPT_EULA:"Y",GITHUB_JOB:"deployment",RUNNER_PERFLOG:"/home/runner/perflog",npm_package_dependencies_prosemirror_model:"^1.18.1",GITHUB_SHA:"28eba8e968c94c74d51a99a82d1a3f1332b9cd3f",GITHUB_RUN_ATTEMPT:"1",npm_package_dependencies_prosemirror_keymap:"^1.2.0",GITHUB_REF:"refs/heads/master",GITHUB_ACTOR:"TeemuKoivisto",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",LEIN_HOME:"/usr/local/lib/lein",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_89b4f90b-a2e8-48c1-a191-f65aa7fcb3e1",JAVA_HOME:"/usr/lib/jvm/temurin-11-jdk-amd64",PWD:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit/packages/site",RUNNER_WORKSPACE:"/home/runner/work/prosemirror-dev-toolkit",npm_execpath:"/usr/local/lib/node_modules/pnpm/bin/pnpm.cjs",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"workflow_dispatch",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",LEIN_JAR:"/usr/local/lib/lein/self-installs/leiningen-2.9.10-standalone.jar",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_89b4f90b-a2e8-48c1-a191-f65aa7fcb3e1",npm_config_recursive:"true",EDGEWEBDRIVER:"/usr/local/share/edge_driver",npm_package_dependencies_styled_components:"^5.3.5",PNPM_SCRIPT_SRC_DIR:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit/packages/site",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/25.1.8937393",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",npm_package_scripts_preview:"vite preview",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",npm_package_dependencies_typescript:"4.7.4",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_89b4f90b-a2e8-48c1-a191-f65aa7fcb3e1",npm_package_devDependencies__types_react_icons:"^3.0.0",npm_package_dependencies_react:"^18.2.0",INIT_CWD:"/home/runner/work/prosemirror-dev-toolkit/prosemirror-dev-toolkit",NODE_ENV:"production"}.TERM||"").toLowerCase().startsWith("xterm"),i=["ansi","ansi","ansi256","ansi16m"],s=new Set(["gray"]),l=Object.create(null);function u(c,d){d=d||{};const m=0;c.level=d.level===void 0?m:d.level,c.enabled="enabled"in d?d.enabled:c.level>0}function f(c){if(!this||!(this instanceof f)||this.template){const d={};return u(d,c),d.template=function(){const m=[].slice.call(arguments);return g.apply(null,[d.template].concat(m))},Object.setPrototypeOf(d,f.prototype),Object.setPrototypeOf(d.template,d),d.template.constructor=f,d.template}u(this,c)}n&&(t.blue.open="\x1B[94m");for(const c of Object.keys(t))t[c].closeRe=new RegExp(e(t[c].close),"g"),l[c]={get(){const d=t[c];return v.call(this,this._styles?this._styles.concat(d):[d],this._empty,c)}};l.visible={get(){return v.call(this,this._styles||[],!0,"visible")}},t.color.closeRe=new RegExp(e(t.color.close),"g");for(const c of Object.keys(t.color.ansi))s.has(c)||(l[c]={get(){const d=this.level;return function(){const _={open:t.color[i[d]][c].apply(null,arguments),close:t.color.close,closeRe:t.color.closeRe};return v.call(this,this._styles?this._styles.concat(_):[_],this._empty,c)}}});t.bgColor.closeRe=new RegExp(e(t.bgColor.close),"g");for(const c of Object.keys(t.bgColor.ansi)){if(s.has(c))continue;const d="bg"+c[0].toUpperCase()+c.slice(1);l[d]={get(){const m=this.level;return function(){const y={open:t.bgColor[i[m]][c].apply(null,arguments),close:t.bgColor.close,closeRe:t.bgColor.closeRe};return v.call(this,this._styles?this._styles.concat(y):[y],this._empty,c)}}}}const h=Object.defineProperties(()=>{},l);function v(c,d,m){const _=function(){return p.apply(_,arguments)};_._styles=c,_._empty=d;const y=this;return Object.defineProperty(_,"level",{enumerable:!0,get(){return y.level},set(w){y.level=w}}),Object.defineProperty(_,"enabled",{enumerable:!0,get(){return y.enabled},set(w){y.enabled=w}}),_.hasGrey=this.hasGrey||m==="gray"||m==="grey",_.__proto__=h,_}function p(){const c=arguments,d=c.length;let m=String(arguments[0]);if(d===0)return"";if(d>1)for(let y=1;y<d;y++)m+=" "+c[y];if(!this.enabled||this.level<=0||!m)return this._empty?"":m;const _=t.dim.open;n&&this.hasGrey&&(t.dim.open="");for(const y of this._styles.slice().reverse())m=y.open+m.replace(y.closeRe,y.open)+y.close,m=m.replace(/\r?\n/g,`${y.close}$&${y.open}`);return t.dim.open=_,m}function g(c,d){if(!Array.isArray(d))return[].slice.call(arguments,1).join(" ");const m=[].slice.call(arguments,2),_=[d.raw[0]];for(let y=1;y<d.length;y++)_.push(String(m[y-1]).replace(/[{}\\]/g,"\\$&")),_.push(String(d.raw[y]));return a(c,_.join(""))}Object.defineProperties(f.prototype,l),o.exports=f(),o.exports.supportsColor=r,o.exports.default=o.exports})(Ce);const ye=Ce.exports;var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},P=function(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")},j=function(){function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),pe=function o(e,t,r){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(a===void 0){var n=Object.getPrototypeOf(e);return n===null?void 0:o(n,t,r)}else{if("value"in a)return a.value;var i=a.get;return i===void 0?void 0:i.call(r)}},L=function(o,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(o,e):o.__proto__=e)},G=function(o,e){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:o},Pr=function(){function o(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(a=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(u){n=!0,i=u}finally{try{!a&&s.return&&s.return()}finally{if(n)throw i}}return r}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return o(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ae=function(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)},Ir=function(){function o(e){P(this,o),this.selfOptions=e||{},this.pipes={}}return j(o,[{key:"options",value:function(t){return t&&(this.selfOptions=t),this.selfOptions}},{key:"pipe",value:function(t,r){var a=r;if(typeof t=="string"){if(typeof a>"u")return this.pipes[t];this.pipes[t]=a}if(t&&t.name){if(a=t,a.processor===this)return a;this.pipes[a.name]=a}return a.processor=this,a}},{key:"process",value:function(t,r){var a=t;a.options=this.options();for(var n=r||t.pipe||"default",i=void 0,s=void 0;n;)typeof a.nextAfterChildren<"u"&&(a.next=a.nextAfterChildren,a.nextAfterChildren=null),typeof n=="string"&&(n=this.pipe(n)),n.process(a),s=a,i=n,n=null,a&&a.next&&(a=a.next,n=s.nextPipe||a.pipe||i);return a.hasResult?a.result:void 0}}]),o}(),Y=function(){function o(e){P(this,o),this.name=e,this.filters=[]}return j(o,[{key:"process",value:function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var r=this.debug,a=this.filters.length,n=t,i=0;i<a;i++){var s=this.filters[i];if(r&&this.log("filter: "+s.filterName),s(n),(typeof n>"u"?"undefined":I(n))==="object"&&n.exiting){n.exiting=!1;break}}!n.next&&this.resultCheck&&this.resultCheck(n)}},{key:"log",value:function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)}},{key:"append",value:function(){var t;return(t=this.filters).push.apply(t,arguments),this}},{key:"prepend",value:function(){var t;return(t=this.filters).unshift.apply(t,arguments),this}},{key:"indexOf",value:function(t){if(!t)throw new Error("a filter name is required");for(var r=0;r<this.filters.length;r++){var a=this.filters[r];if(a.filterName===t)return r}throw new Error("filter not found: "+t)}},{key:"list",value:function(){return this.filters.map(function(t){return t.filterName})}},{key:"after",value:function(t){var r=this.indexOf(t),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw new Error("a filter is required");return a.unshift(r+1,0),Array.prototype.splice.apply(this.filters,a),this}},{key:"before",value:function(t){var r=this.indexOf(t),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw new Error("a filter is required");return a.unshift(r,0),Array.prototype.splice.apply(this.filters,a),this}},{key:"replace",value:function(t){var r=this.indexOf(t),a=Array.prototype.slice.call(arguments,1);if(!a.length)throw new Error("a filter is required");return a.unshift(r,1),Array.prototype.splice.apply(this.filters,a),this}},{key:"remove",value:function(t){var r=this.indexOf(t);return this.filters.splice(r,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(t){if(t===!1){this.resultCheck=null;return}if(!this.resultCheck){var r=this;return this.resultCheck=function(a){if(!a.hasResult){console.log(a);var n=new Error(r.name+" failed");throw n.noResult=!0,n}},this}}}]),o}(),Z=function(){function o(){P(this,o)}return j(o,[{key:"setResult",value:function(t){return this.result=t,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(t,r){return typeof t=="string"||t instanceof Y?this.nextPipe=t:(this.next=t,r&&(this.nextPipe=r)),this}},{key:"push",value:function(t,r){return t.parent=this,typeof r<"u"&&(t.childName=r),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this}}]),o}(),jr=typeof Array.isArray=="function"?Array.isArray:function(o){return o instanceof Array};function Br(o){var e=/^\/(.*)\/([gimyu]*)$/.exec(o.toString());return new RegExp(e[1],e[2])}function x(o){if((typeof o>"u"?"undefined":I(o))!=="object")return o;if(o===null)return null;if(jr(o))return o.map(x);if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return Br(o);var e={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=x(o[t]));return e}var U=function(o){L(e,o);function e(t,r){P(this,e);var a=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.left=t,a.right=r,a.pipe="diff",a}return j(e,[{key:"setResult",value:function(r){if(this.options.cloneDiffValues&&(typeof r>"u"?"undefined":I(r))==="object"){var a=typeof this.options.cloneDiffValues=="function"?this.options.cloneDiffValues:x;I(r[0])==="object"&&(r[0]=a(r[0])),I(r[1])==="object"&&(r[1]=a(r[1]))}return Z.prototype.setResult.apply(this,arguments)}}]),e}(Z),ce=function(o){L(e,o);function e(t,r){P(this,e);var a=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.left=t,a.delta=r,a.pipe="patch",a}return e}(Z),de=function(o){L(e,o);function e(t){P(this,e);var r=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.delta=t,r.pipe="reverse",r}return e}(Z),ee=typeof Array.isArray=="function"?Array.isArray:function(o){return o instanceof Array},je=function(e){if(e.left===e.right){e.setResult(void 0).exit();return}if(typeof e.left>"u"){if(typeof e.right=="function")throw new Error("functions are not supported");e.setResult([e.right]).exit();return}if(typeof e.right>"u"){e.setResult([e.left,0,0]).exit();return}if(typeof e.left=="function"||typeof e.right=="function")throw new Error("functions are not supported");if(e.leftType=e.left===null?"null":I(e.left),e.rightType=e.right===null?"null":I(e.right),e.leftType!==e.rightType){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="boolean"||e.leftType==="number"){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="object"&&(e.leftIsArray=ee(e.left)),e.rightType==="object"&&(e.rightIsArray=ee(e.right)),e.leftIsArray!==e.rightIsArray){e.setResult([e.left,e.right]).exit();return}e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit())};je.filterName="trivial";var Be=function(e){if(typeof e.delta>"u"){e.setResult(e.left).exit();return}if(e.nested=!ee(e.delta),!e.nested){if(e.delta.length===1){e.setResult(e.delta[0]).exit();return}if(e.delta.length===2){if(e.left instanceof RegExp){var t=/^\/(.*)\/([gimyu]+)$/.exec(e.delta[1]);if(t){e.setResult(new RegExp(t[1],t[2])).exit();return}}e.setResult(e.delta[1]).exit();return}e.delta.length===3&&e.delta[2]===0&&e.setResult(void 0).exit()}};Be.filterName="trivial";var Se=function(e){if(typeof e.delta>"u"){e.setResult(e.delta).exit();return}if(e.nested=!ee(e.delta),!e.nested){if(e.delta.length===1){e.setResult([e.delta[0],0,0]).exit();return}if(e.delta.length===2){e.setResult([e.delta[1],e.delta[0]]).exit();return}e.delta.length===3&&e.delta[2]===0&&e.setResult([e.delta[0]]).exit()}};Se.filterName="trivial";function Fe(o){if(!(!o||!o.children)){for(var e=o.children.length,t=void 0,r=o.result,a=0;a<e;a++)t=o.children[a],!(typeof t.result>"u")&&(r=r||{},r[t.childName]=t.result);r&&o.leftIsArray&&(r._t="a"),o.setResult(r).exit()}}Fe.filterName="collectChildren";function Ue(o){if(!(o.leftIsArray||o.leftType!=="object")){var e=void 0,t=void 0,r=o.options.propertyFilter;for(e in o.left)!Object.prototype.hasOwnProperty.call(o.left,e)||r&&!r(e,o)||(t=new U(o.left[e],o.right[e]),o.push(t,e));for(e in o.right)!Object.prototype.hasOwnProperty.call(o.right,e)||r&&!r(e,o)||typeof o.left[e]>"u"&&(t=new U(void 0,o.right[e]),o.push(t,e));if(!o.children||o.children.length===0){o.setResult(void 0).exit();return}o.exit()}}Ue.filterName="objects";var He=function(e){if(!!e.nested&&!e.delta._t){var t=void 0,r=void 0;for(t in e.delta)r=new ce(e.left[t],e.delta[t]),e.push(r,t);e.exit()}};He.filterName="objects";var Le=function(e){if(!(!e||!e.children)&&!e.delta._t){for(var t=e.children.length,r=void 0,a=0;a<t;a++)r=e.children[a],Object.prototype.hasOwnProperty.call(e.left,r.childName)&&r.result===void 0?delete e.left[r.childName]:e.left[r.childName]!==r.result&&(e.left[r.childName]=r.result);e.setResult(e.left).exit()}};Le.filterName="collectChildren";var Ge=function(e){if(!!e.nested&&!e.delta._t){var t=void 0,r=void 0;for(t in e.delta)r=new de(e.delta[t]),e.push(r,t);e.exit()}};Ge.filterName="objects";function $e(o){if(!(!o||!o.children)&&!o.delta._t){for(var e=o.children.length,t=void 0,r={},a=0;a<e;a++)t=o.children[a],r[t.childName]!==t.result&&(r[t.childName]=t.result);o.setResult(r).exit()}}$e.filterName="collectChildren";var Sr=function(e,t,r,a){return e[r]===t[a]},Fr=function(e,t,r,a){var n=e.length,i=t.length,s=void 0,l=void 0,u=[n+1];for(s=0;s<n+1;s++)for(u[s]=[i+1],l=0;l<i+1;l++)u[s][l]=0;for(u.match=r,s=1;s<n+1;s++)for(l=1;l<i+1;l++)r(e,t,s-1,l-1,a)?u[s][l]=u[s-1][l-1]+1:u[s][l]=Math.max(u[s-1][l],u[s][l-1]);return u},Ur=function(e,t,r,a){for(var n=t.length,i=r.length,s={sequence:[],indices1:[],indices2:[]};n!==0&&i!==0;){var l=e.match(t,r,n-1,i-1,a);if(l)s.sequence.unshift(t[n-1]),s.indices1.unshift(n-1),s.indices2.unshift(i-1),--n,--i;else{var u=e[n][i-1],f=e[n-1][i];u>f?--i:--n}}return s},Hr=function(e,t,r,a){var n=a||{},i=Fr(e,t,r||Sr,n),s=Ur(i,e,t,n);return typeof e=="string"&&typeof t=="string"&&(s.sequence=s.sequence.join("")),s},Lr={get:Hr},z=3,be=typeof Array.isArray=="function"?Array.isArray:function(o){return o instanceof Array},we=typeof Array.prototype.indexOf=="function"?function(o,e){return o.indexOf(e)}:function(o,e){for(var t=o.length,r=0;r<t;r++)if(o[r]===e)return r;return-1};function Gr(o,e,t,r){for(var a=0;a<t;a++)for(var n=o[a],i=0;i<r;i++){var s=e[i];if(a!==i&&n===s)return!0}}function q(o,e,t,r,a){var n=o[t],i=e[r];if(n===i)return!0;if((typeof n>"u"?"undefined":I(n))!=="object"||(typeof i>"u"?"undefined":I(i))!=="object")return!1;var s=a.objectHash;if(!s)return a.matchByPosition&&t===r;var l=void 0,u=void 0;return typeof t=="number"?(a.hashCache1=a.hashCache1||[],l=a.hashCache1[t],typeof l>"u"&&(a.hashCache1[t]=l=s(n,t))):l=s(n),typeof l>"u"||(typeof r=="number"?(a.hashCache2=a.hashCache2||[],u=a.hashCache2[r],typeof u>"u"&&(a.hashCache2[r]=u=s(i,r))):u=s(i),typeof u>"u")?!1:l===u}var Ve=function(e){if(!!e.leftIsArray){var t={objectHash:e.options&&e.options.objectHash,matchByPosition:e.options&&e.options.matchByPosition},r=0,a=0,n=void 0,i=void 0,s=void 0,l=e.left,u=e.right,f=l.length,h=u.length,v=void 0;for(f>0&&h>0&&!t.objectHash&&typeof t.matchByPosition!="boolean"&&(t.matchByPosition=!Gr(l,u,f,h));r<f&&r<h&&q(l,u,r,r,t);)n=r,v=new U(e.left[n],e.right[n]),e.push(v,n),r++;for(;a+r<f&&a+r<h&&q(l,u,f-1-a,h-1-a,t);)i=f-1-a,s=h-1-a,v=new U(e.left[i],e.right[s]),e.push(v,s),a++;var p=void 0;if(r+a===f){if(f===h){e.setResult(void 0).exit();return}for(p=p||{_t:"a"},n=r;n<h-a;n++)p[n]=[u[n]];e.setResult(p).exit();return}if(r+a===h){for(p=p||{_t:"a"},n=r;n<f-a;n++)p["_"+n]=[l[n],0,0];e.setResult(p).exit();return}delete t.hashCache1,delete t.hashCache2;var g=l.slice(r,f-a),c=u.slice(r,h-a),d=Lr.get(g,c,q,t),m=[];for(p=p||{_t:"a"},n=r;n<f-a;n++)we(d.indices1,n-r)<0&&(p["_"+n]=[l[n],0,0],m.push(n));var _=!0;e.options&&e.options.arrays&&e.options.arrays.detectMove===!1&&(_=!1);var y=!1;e.options&&e.options.arrays&&e.options.arrays.includeValueOnMove&&(y=!0);var w=m.length;for(n=r;n<h-a;n++){var O=we(d.indices2,n-r);if(O<0){var k=!1;if(_&&w>0){for(var E=0;E<w;E++)if(i=m[E],q(g,c,i-r,n-r,t)){p["_"+i].splice(1,2,n,z),y||(p["_"+i][0]=""),s=n,v=new U(e.left[i],e.right[s]),e.push(v,s),m.splice(E,1),k=!0;break}}k||(p[n]=[u[n]])}else i=d.indices1[O]+r,s=d.indices2[O]+r,v=new U(e.left[i],e.right[s]),e.push(v,s)}e.setResult(p).exit()}};Ve.filterName="arrays";var ke={numerically:function(e,t){return e-t},numericallyBy:function(e){return function(t,r){return t[e]-r[e]}}},ze=function(e){if(!!e.nested&&e.delta._t==="a"){var t=void 0,r=void 0,a=e.delta,n=e.left,i=[],s=[],l=[];for(t in a)if(t!=="_t")if(t[0]==="_")if(a[t][2]===0||a[t][2]===z)i.push(parseInt(t.slice(1),10));else throw new Error("only removal or move can be applied at original array indices,"+(" invalid diff type: "+a[t][2]));else a[t].length===1?s.push({index:parseInt(t,10),value:a[t][0]}):l.push({index:parseInt(t,10),delta:a[t]});for(i=i.sort(ke.numerically),t=i.length-1;t>=0;t--){r=i[t];var u=a["_"+r],f=n.splice(r,1)[0];u[2]===z&&s.push({index:u[1],value:f})}s=s.sort(ke.numericallyBy("index"));var h=s.length;for(t=0;t<h;t++){var v=s[t];n.splice(v.index,0,v.value)}var p=l.length,g=void 0;if(p>0)for(t=0;t<p;t++){var c=l[t];g=new ce(e.left[c.index],c.delta),e.push(g,c.index)}if(!e.children){e.setResult(e.left).exit();return}e.exit()}};ze.filterName="arrays";var Xe=function(e){if(!(!e||!e.children)&&e.delta._t==="a"){for(var t=e.children.length,r=void 0,a=0;a<t;a++)r=e.children[a],e.left[r.childName]=r.result;e.setResult(e.left).exit()}};Xe.filterName="arraysCollectChildren";var We=function(e){if(!e.nested){e.delta[2]===z&&(e.newName="_"+e.delta[1],e.setResult([e.delta[0],parseInt(e.childName.substr(1),10),z]).exit());return}if(e.delta._t==="a"){var t=void 0,r=void 0;for(t in e.delta)t!=="_t"&&(r=new de(e.delta[t]),e.push(r,t));e.exit()}};We.filterName="arrays";var $r=function(e,t,r){if(typeof t=="string"&&t[0]==="_")return parseInt(t.substr(1),10);if(be(r)&&r[2]===0)return"_"+t;var a=+t;for(var n in e){var i=e[n];if(be(i))if(i[2]===z){var s=parseInt(n.substr(1),10),l=i[1];if(l===+t)return s;s<=a&&l>a?a++:s>=a&&l<a&&a--}else if(i[2]===0){var u=parseInt(n.substr(1),10);u<=a&&a++}else i.length===1&&n<=a&&a--}return a};function qe(o){if(!(!o||!o.children)&&o.delta._t==="a"){for(var e=o.children.length,t=void 0,r={_t:"a"},a=0;a<e;a++){t=o.children[a];var n=t.newName;typeof n>"u"&&(n=$r(o.delta,t.childName,t.result)),r[n]!==t.result&&(r[n]=t.result)}o.setResult(r).exit()}}qe.filterName="arraysCollectChildren";var Ke=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};Ke.filterName="dates";var re=2,Vr=60,ie=null,Je=function(e){if(!ie){var t=void 0;if(typeof diff_match_patch<"u")t=typeof diff_match_patch=="function"?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(te)try{t=te&&new te}catch{t=null}if(!t){if(!e)return null;var r=new Error("text diff_match_patch library not found");throw r.diff_match_patch_not_found=!0,r}ie={diff:function(n,i){return t.patch_toText(t.patch_make(n,i))},patch:function(n,i){for(var s=t.patch_apply(t.patch_fromText(i),n),l=0;l<s[1].length;l++)if(!s[1][l]){var u=new Error("text patch failed");u.textPatchFailed=!0}return s[0]}}}return ie},Ye=function(e){if(e.leftType==="string"){var t=e.options&&e.options.textDiff&&e.options.textDiff.minLength||Vr;if(e.left.length<t||e.right.length<t){e.setResult([e.left,e.right]).exit();return}var r=Je();if(!r){e.setResult([e.left,e.right]).exit();return}var a=r.diff;e.setResult([a(e.left,e.right),0,re]).exit()}};Ye.filterName="texts";var Qe=function(e){if(!e.nested&&e.delta[2]===re){var t=Je(!0).patch;e.setResult(t(e.left,e.delta[0])).exit()}};Qe.filterName="texts";var zr=function(e){var t=void 0,r=void 0,a=void 0,n=void 0,i=void 0,s=null,l=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,u=void 0;for(a=e.split(`
`),t=0,r=a.length;t<r;t++){n=a[t];var f=n.slice(0,1);f==="@"?(s=l.exec(n),u=t,a[u]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):f==="+"?(a[t]="-"+a[t].slice(1),a[t-1].slice(0,1)==="+"&&(i=a[t],a[t]=a[t-1],a[t-1]=i)):f==="-"&&(a[t]="+"+a[t].slice(1))}return a.join(`
`)},Ze=function(e){e.nested||e.delta[2]===re&&e.setResult([zr(e.delta[0]),0,re]).exit()};Ze.filterName="texts";var Xr=function(){function o(e){P(this,o),this.processor=new Ir(e),this.processor.pipe(new Y("diff").append(Fe,je,Ke,Ye,Ue,Ve).shouldHaveResult()),this.processor.pipe(new Y("patch").append(Le,Xe,Be,Qe,He,ze).shouldHaveResult()),this.processor.pipe(new Y("reverse").append($e,qe,Se,Ze,Ge,We).shouldHaveResult())}return j(o,[{key:"options",value:function(){var t;return(t=this.processor).options.apply(t,arguments)}},{key:"diff",value:function(t,r){return this.processor.process(new U(t,r))}},{key:"patch",value:function(t,r){return this.processor.process(new ce(t,r))}},{key:"reverse",value:function(t){return this.processor.process(new de(t))}},{key:"unpatch",value:function(t,r){return this.patch(t,this.reverse(r))}},{key:"clone",value:function(t){return x(t)}}]),o}(),se=typeof Array.isArray=="function"?Array.isArray:function(o){return o instanceof Array},Wr=typeof Object.keys=="function"?function(o){return Object.keys(o)}:function(o){var e=[];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.push(t);return e},qr=function(e){return e.substr(0,1)==="_"?e.slice(1):e},Ee=function(e){return e==="_t"?-1:e.substr(0,1)==="_"?parseInt(e.slice(1),10):parseInt(e,10)+.1},Kr=function(e,t){return Ee(e)-Ee(t)},X=function(){function o(){P(this,o)}return j(o,[{key:"format",value:function(t,r){var a={};return this.prepareContext(a),this.recurse(a,t,r),this.finalize(a)}},{key:"prepareContext",value:function(t){t.buffer=[],t.out=function(){var r;(r=this.buffer).push.apply(r,arguments)}}},{key:"typeFormattterNotFound",value:function(t,r){throw new Error("cannot format delta type: "+r)}},{key:"typeFormattterErrorFormatter",value:function(t,r){return r.toString()}},{key:"finalize",value:function(t){var r=t.buffer;if(se(r))return r.join("")}},{key:"recurse",value:function(t,r,a,n,i,s,l){var u=r&&s,f=u?s.value:a;if(!(typeof r>"u"&&typeof n>"u")){var h=this.getDeltaType(r,s),v=h==="node"?r._t==="a"?"array":"object":"";typeof n<"u"?this.nodeBegin(t,n,i,h,v,l):this.rootBegin(t,h,v);var p=void 0;try{p=this["format_"+h]||this.typeFormattterNotFound(t,h),p.call(this,t,r,f,n,i,s)}catch(g){this.typeFormattterErrorFormatter(t,g,r,f,n,i,s),typeof console<"u"&&console.error&&console.error(g.stack)}typeof n<"u"?this.nodeEnd(t,n,i,h,v,l):this.rootEnd(t,h,v)}}},{key:"formatDeltaChildren",value:function(t,r,a){var n=this;this.forEachDeltaKey(r,a,function(i,s,l,u){n.recurse(t,r[i],a?a[s]:void 0,i,s,l,u)})}},{key:"forEachDeltaKey",value:function(t,r,a){var n=Wr(t),i=t._t==="a",s={},l=void 0;if(typeof r<"u")for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&typeof t[l]>"u"&&(!i||typeof t["_"+l]>"u")&&n.push(l);for(l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=t[l];se(u)&&u[2]===3&&(s[u[1].toString()]={key:l,value:r&&r[parseInt(l.substr(1))]},this.includeMoveDestinations!==!1&&typeof r>"u"&&typeof t[u[1]]>"u"&&n.push(u[1].toString()))}i?n.sort(Kr):n.sort();for(var f=0,h=n.length;f<h;f++){var v=n[f];if(!(i&&v==="_t")){var p=i?typeof v=="number"?v:parseInt(qr(v),10):v,g=f===h-1;a(v,p,s[p],g)}}}},{key:"getDeltaType",value:function(t,r){if(typeof t>"u")return typeof r<"u"?"movedestination":"unchanged";if(se(t)){if(t.length===1)return"added";if(t.length===2)return"modified";if(t.length===3&&t[2]===0)return"deleted";if(t.length===3&&t[2]===2)return"textdiff";if(t.length===3&&t[2]===3)return"moved"}else if((typeof t>"u"?"undefined":I(t))==="object")return"node";return"unknown"}},{key:"parseTextDiff",value:function(t){for(var r=[],a=t.split(`
@@ `),n=0,i=a.length;n<i;n++){var s=a[n],l={pieces:[]},u=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(s).slice(1);l.location={line:u[0],chr:u[1]};for(var f=s.split(`
`).slice(1),h=0,v=f.length;h<v;h++){var p=f[h];if(!!p.length){var g={type:"context"};p.substr(0,1)==="+"?g.type="added":p.substr(0,1)==="-"&&(g.type="deleted"),g.text=p.slice(1),l.pieces.push(g)}}r.push(l)}return r}}]),o}(),Jr=Object.freeze({default:X}),xe=function(o){L(e,o);function e(){return P(this,e),G(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return j(e,[{key:"typeFormattterErrorFormatter",value:function(r,a){r.out('<pre class="jsondiffpatch-error">'+a+"</pre>")}},{key:"formatValue",value:function(r,a){r.out("<pre>"+Oe(JSON.stringify(a,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(r,a){var n=this.parseTextDiff(a);r.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,s=n.length;i<s;i++){var l=n[i];r.out('<li><div class="jsondiffpatch-textdiff-location">'+('<span class="jsondiffpatch-textdiff-line-number">'+l.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+l.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">'));for(var u=l.pieces,f=0,h=u.length;f<h;f++){var v=u[f];r.out('<span class="jsondiffpatch-textdiff-'+v.type+'">'+Oe(decodeURI(v.text))+"</span>")}r.out("</div></li>")}r.out("</ul>")}},{key:"rootBegin",value:function(r,a,n){var i="jsondiffpatch-"+a+(n?" jsondiffpatch-child-node-type-"+n:"");r.out('<div class="jsondiffpatch-delta '+i+'">')}},{key:"rootEnd",value:function(r){r.out("</div>"+(r.hasArrows?'<script type="text/javascript">setTimeout('+(er.toString()+",10);<\/script>"):""))}},{key:"nodeBegin",value:function(r,a,n,i,s){var l="jsondiffpatch-"+i+(s?" jsondiffpatch-child-node-type-"+s:"");r.out('<li class="'+l+'" data-key="'+n+'">'+('<div class="jsondiffpatch-property-name">'+n+"</div>"))}},{key:"nodeEnd",value:function(r){r.out("</li>")}},{key:"format_unchanged",value:function(r,a,n){typeof n>"u"||(r.out('<div class="jsondiffpatch-value">'),this.formatValue(r,n),r.out("</div>"))}},{key:"format_movedestination",value:function(r,a,n){typeof n>"u"||(r.out('<div class="jsondiffpatch-value">'),this.formatValue(r,n),r.out("</div>"))}},{key:"format_node",value:function(r,a,n){var i=a._t==="a"?"array":"object";r.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+i+'">'),this.formatDeltaChildren(r,a,n),r.out("</ul>")}},{key:"format_added",value:function(r,a){r.out('<div class="jsondiffpatch-value">'),this.formatValue(r,a[0]),r.out("</div>")}},{key:"format_modified",value:function(r,a){r.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(r,a[0]),r.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(r,a[1]),r.out("</div>")}},{key:"format_deleted",value:function(r,a){r.out('<div class="jsondiffpatch-value">'),this.formatValue(r,a[0]),r.out("</div>")}},{key:"format_moved",value:function(r,a){r.out('<div class="jsondiffpatch-value">'),this.formatValue(r,a[0]),r.out('</div><div class="jsondiffpatch-moved-destination">'+a[1]+"</div>"),r.out(`<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">
          <svg width="30" height="60" style="position: absolute; display: none;">
          <defs>
              <marker id="markerArrow" markerWidth="8" markerHeight="8"
                 refx="2" refy="4"
                     orient="auto" markerUnits="userSpaceOnUse">
                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />
              </marker>
          </defs>
          <path d="M30,0 Q-10,25 26,50"
            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"
          ></path>
          </svg>
      </div>`),r.hasArrows=!0}},{key:"format_textdiff",value:function(r,a){r.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(r,a[0]),r.out("</div>")}}]),e}(X);function Oe(o){for(var e=o,t=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],r=0;r<t.length;r++)e=e.replace(t[r][0],t[r][1]);return e}var er=function(e){var t=e||document,r=function(s){var l=s.textContent,u=s.innerText;return l||u},a=function(s,l,u){for(var f=s.querySelectorAll(l),h=0,v=f.length;h<v;h++)u(f[h])},n=function(s,l){for(var u=s.children,f=0,h=u.length;f<h;f++)l(u[f],f)};a(t,".jsondiffpatch-arrow",function(i){var s=i.parentNode,l=i.children,u=i.style,f=s,h=l[0],v=h.children[1];h.style.display="none";var p=r(f.querySelector(".jsondiffpatch-moved-destination")),g=f.parentNode,c=void 0;if(n(g,function(_){_.getAttribute("data-key")===p&&(c=_)}),!!c)try{var d=c.offsetTop-f.offsetTop;h.setAttribute("height",Math.abs(d)+6),u.top=-8+(d>0?0:d)+"px";var m=d>0?"M30,0 Q-10,"+Math.round(d/2)+" 26,"+(d-4):"M30,"+-d+" Q-10,"+Math.round(-d/2)+" 26,4";v.setAttribute("d",m),h.style.display=""}catch{}})},rr=function(e,t,r){var a=t||document.body,n="jsondiffpatch-unchanged-",i={showing:n+"showing",hiding:n+"hiding",visible:n+"visible",hidden:n+"hidden"},s=a.classList;if(!!s){if(!r){s.remove(i.showing),s.remove(i.hiding),s.remove(i.visible),s.remove(i.hidden),e===!1&&s.add(i.hidden);return}e===!1?(s.remove(i.showing),s.add(i.visible),setTimeout(function(){s.add(i.hiding)},10)):(s.remove(i.hiding),s.add(i.showing),s.remove(i.hidden));var l=setInterval(function(){er(a)},100);setTimeout(function(){s.remove(i.showing),s.remove(i.hiding),e===!1?(s.add(i.hidden),s.remove(i.visible)):(s.add(i.visible),s.remove(i.hidden)),setTimeout(function(){s.remove(i.visible),clearInterval(l)},r+400)},r)}},Yr=function(e,t){return rr(!1,e,t)},oe=void 0;function Qr(o,e){return oe||(oe=new xe),oe.format(o,e)}var Zr=Object.freeze({showUnchanged:rr,hideUnchanged:Yr,default:xe,format:Qr}),$=function(o){L(e,o);function e(){P(this,e);var t=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return j(e,[{key:"prepareContext",value:function(r){pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,r),r.indent=function(a){this.indentLevel=(this.indentLevel||0)+(typeof a>"u"?1:a),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},r.row=function(a,n){r.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),r.out(r.indentPad),r.out('</pre><pre style="display: inline-block">'),r.out(a),r.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),r.out(n),r.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(r,a){r.row("",'<pre class="jsondiffpatch-error">'+a+"</pre>")}},{key:"formatTextDiffString",value:function(r,a){var n=this.parseTextDiff(a);r.out('<ul class="jsondiffpatch-textdiff">');for(var i=0,s=n.length;i<s;i++){var l=n[i];r.out('<li><div class="jsondiffpatch-textdiff-location">'+('<span class="jsondiffpatch-textdiff-line-number">'+l.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+l.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">'));for(var u=l.pieces,f=0,h=u.length;f<h;f++){var v=u[f];r.out('<span class="jsondiffpatch-textdiff-'+v.type+'">'+v.text+"</span>")}r.out("</div></li>")}r.out("</ul>")}},{key:"rootBegin",value:function(r,a,n){r.out('<table class="jsondiffpatch-annotated-delta">'),a==="node"&&(r.row("{"),r.indent()),n==="array"&&r.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(r,a){a==="node"&&(r.indent(-1),r.row("}")),r.out("</table>")}},{key:"nodeBegin",value:function(r,a,n,i,s){r.row("&quot;"+a+"&quot;: {"),i==="node"&&r.indent(),s==="array"&&r.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(r,a,n,i,s,l){i==="node"&&r.indent(-1),r.row("}"+(l?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(r,a,n){this.formatDeltaChildren(r,a,n)}}]),e}(X),K=function(e){return'<pre style="display:inline-block">&quot;'+e+"&quot;</pre>"},xr={added:function(e,t,r,a){var n=" <pre>([newValue])</pre>";return typeof a>"u"?"new value"+n:typeof a=="number"?"insert at index "+a+n:"add property "+K(a)+n},modified:function(e,t,r,a){var n=" <pre>([previousValue, newValue])</pre>";return typeof a>"u"?"modify value"+n:typeof a=="number"?"modify at index "+a+n:"modify property "+K(a)+n},deleted:function(e,t,r,a){var n=" <pre>([previousValue, 0, 0])</pre>";return typeof a>"u"?"delete value"+n:typeof a=="number"?"remove index "+a+n:"delete property "+K(a)+n},moved:function(e,t,r,a){return'move from <span title="(position to remove at original state)">'+("index "+a+'</span> to <span title="(position to insert at final')+(' state)">index '+e[1]+"</span>")},textdiff:function(e,t,r,a){var n=typeof a>"u"?"":typeof a=="number"?" at index "+a:" at property "+K(a);return"text diff"+n+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},W=function(e,t){var r=this.getDeltaType(t),a=xr[r],n=a&&a.apply(a,Array.prototype.slice.call(arguments,1)),i=JSON.stringify(t,null,2);r==="textdiff"&&(i=i.split("\\n").join(`\\n"+
   "`)),e.indent(),e.row(i,n),e.indent(-1)};$.prototype.format_added=W;$.prototype.format_modified=W;$.prototype.format_deleted=W;$.prototype.format_moved=W;$.prototype.format_textdiff=W;var le=void 0;function et(o,e){return le||(le=new $),le.format(o,e)}var rt=Object.freeze({default:$,format:et}),J={add:"add",remove:"remove",replace:"replace",move:"move"},tr=function(o){L(e,o);function e(){P(this,e);var t=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!0,t}return j(e,[{key:"prepareContext",value:function(r){pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,r),r.result=[],r.path=[],r.pushCurrentOp=function(a){var n=a.op,i=a.value,s={op:n,path:this.currentPath()};typeof i<"u"&&(s.value=i),this.result.push(s)},r.pushMoveOp=function(a){var n=this.currentPath();this.result.push({op:J.move,from:n,path:this.toPath(a)})},r.currentPath=function(){return"/"+this.path.join("/")},r.toPath=function(a){var n=this.path.slice();return n[n.length-1]=a,"/"+n.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(r,a){r.out("[ERROR] "+a)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(r,a,n){var i=r.path;i.push(n)}},{key:"nodeEnd",value:function(r){var a=r.path;a.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(r,a,n){this.formatDeltaChildren(r,a,n)}},{key:"format_added",value:function(r,a){r.pushCurrentOp({op:J.add,value:a[0]})}},{key:"format_modified",value:function(r,a){r.pushCurrentOp({op:J.replace,value:a[1]})}},{key:"format_deleted",value:function(r){r.pushCurrentOp({op:J.remove})}},{key:"format_moved",value:function(r,a){var n=a[1];r.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(r,a){var n={};return this.prepareContext(n),this.recurse(n,r,a),n.result}}]),e}(X),Re=function(e){return e[e.length-1]},tt=function(e,t){return e.sort(t),e},nt=function(e,t){var r=parseInt(e,10),a=parseInt(t,10);return isNaN(r)||isNaN(a)?0:a-r},at=function(e){return tt(e,function(t,r){var a=t.path.split("/"),n=r.path.split("/");return a.length!==n.length?a.length-n.length:nt(Re(a),Re(n))})},nr=function(e,t){var r=Array(t.length+1).fill().map(function(){return[]});return e.map(function(a){var n=t.map(function(i){return i(a)}).indexOf(!0);return n<0&&(n=t.length),{item:a,position:n}}).reduce(function(a,n){return a[n.position].push(n.item),a},r)},it=function(e){var t=e.op;return t==="move"},st=function(e){var t=e.op;return t==="remove"},ot=function(e){var t=nr(e,[it,st]),r=Pr(t,3),a=r[0],n=r[1],i=r[2],s=at(n);return[].concat(ae(s),ae(a),ae(i))},fe=void 0,ar=function(e,t){return fe||(fe=new tr),ot(fe.format(e,t))},lt=function(e,t){console.log(ar(e,t))},ft=Object.freeze({default:tr,partitionOps:nr,format:ar,log:lt});function S(o){return ye&&ye[o]||function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}}var F={added:S("green"),deleted:S("red"),movedestination:S("gray"),moved:S("yellow"),unchanged:S("gray"),error:S("white.bgRed"),textDiffLine:S("gray")},ir=function(o){L(e,o);function e(){P(this,e);var t=G(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return j(e,[{key:"prepareContext",value:function(r){pe(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,r),r.indent=function(a){this.indentLevel=(this.indentLevel||0)+(typeof a>"u"?1:a),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},r.outLine=function(){this.buffer.push(`
`+(this.indentPad||""))},r.out=function(){for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];for(var s=0,l=n.length;s<l;s++){var u=n[s].split(`
`),f=u.join(`
`+(this.indentPad||""));this.color&&this.color[0]&&(f=this.color[0](f)),this.buffer.push(f)}},r.pushColor=function(a){this.color=this.color||[],this.color.unshift(a)},r.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(r,a){r.pushColor(F.error),r.out("[ERROR]"+a),r.popColor()}},{key:"formatValue",value:function(r,a){r.out(JSON.stringify(a,null,2))}},{key:"formatTextDiffString",value:function(r,a){var n=this.parseTextDiff(a);r.indent();for(var i=0,s=n.length;i<s;i++){var l=n[i];r.pushColor(F.textDiffLine),r.out(l.location.line+","+l.location.chr+" "),r.popColor();for(var u=l.pieces,f=0,h=u.length;f<h;f++){var v=u[f];r.pushColor(F[v.type]),r.out(v.text),r.popColor()}i<s-1&&r.outLine()}r.indent(-1)}},{key:"rootBegin",value:function(r,a,n){r.pushColor(F[a]),a==="node"&&(r.out(n==="array"?"[":"{"),r.indent())}},{key:"rootEnd",value:function(r,a,n){a==="node"&&(r.indent(-1),r.out(n==="array"?"]":"}")),r.popColor()}},{key:"nodeBegin",value:function(r,a,n,i,s){r.pushColor(F[i]),r.out(n+": "),i==="node"&&(r.out(s==="array"?"[":"{"),r.indent())}},{key:"nodeEnd",value:function(r,a,n,i,s,l){i==="node"&&(r.indent(-1),r.out(s==="array"?"]":"}"+(l?"":","))),l||r.outLine(),r.popColor()}},{key:"format_unchanged",value:function(r,a,n){typeof n>"u"||this.formatValue(r,n)}},{key:"format_movedestination",value:function(r,a,n){typeof n>"u"||this.formatValue(r,n)}},{key:"format_node",value:function(r,a,n){this.formatDeltaChildren(r,a,n)}},{key:"format_added",value:function(r,a){this.formatValue(r,a[0])}},{key:"format_modified",value:function(r,a){r.pushColor(F.deleted),this.formatValue(r,a[0]),r.popColor(),r.out(" => "),r.pushColor(F.added),this.formatValue(r,a[1]),r.popColor()}},{key:"format_deleted",value:function(r,a){this.formatValue(r,a[0])}},{key:"format_moved",value:function(r,a){r.out("==> "+a[1])}},{key:"format_textdiff",value:function(r,a){this.formatTextDiffString(r,a[0])}}]),e}(X),ue=void 0,sr=function(e,t){return ue||(ue=new ir),ue.format(e,t)};function ut(o,e){console.log(sr(o,e))}var ht=Object.freeze({default:ir,format:sr,log:ut});Object.freeze({base:Jr,html:Zr,annotated:rt,jsonpatch:ft,console:ht});function Me(o,e,t,r,a,n,i){try{var s=o[n](i),l=s.value}catch(u){t(u);return}s.done?e(l):Promise.resolve(l).then(r,a)}function vt(o){return function(){var e=this,t=arguments;return new Promise(function(r,a){var n=o.apply(e,t);function i(l){Me(n,r,a,i,s,"next",l)}function s(l){Me(n,r,a,i,s,"throw",l)}i(void 0)})}}function pt(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(o,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}function ct(o,e,t){return e&&Ae(o.prototype,e),t&&Ae(o,t),o}function Te(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var mt=function(){function o(){pt(this,o),Te(this,"diffPatcher",new Xr({arrays:{detectMove:!1},textDiff:{minLength:1}})),Te(this,"scheduler",new or)}return ct(o,[{key:"diff",value:function(){var e=vt(ge.mark(function r(a){return ge.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.scheduler.request();case 2:return i.abrupt("return",{id:a.id,delta:this.diffPatcher.diff(a.a,a.b)});case 3:case"end":return i.stop()}},r,this)}));function t(r){return e.apply(this,arguments)}return t}()}]),o}();export{mt as JsonDiffMain};
