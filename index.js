!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["prosemirror-dev-toolkit"]={})}(this,(function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t){let e;return a(t,(t=>e=t))(),e}function u(t,e,n){t.$$.on_destroy.push(a(e,n))}function f(t,e,n,r){if(t){const o=d(t,e,n,r);return t[0](o)}}function d(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}function p(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function h(t,e,n,r,o,i){if(o){const s=d(e,n,r,i);t.p(s,o)}}function g(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function v(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function m(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function y(t){return null==t?"":t}function b(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function k(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function C(){return j(" ")}function O(){return j("")}function q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function T(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:E(t,r,e[r])}function S(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function N(t,e,n){t.classList[n?"add":"remove"](e)}let M;function D(t){M=t}function R(){if(!M)throw new Error("Function called outside component initialization");return M}function P(t){R().$$.on_mount.push(t)}function I(t,e){R().$$.context.set(t,e)}function z(t){return R().$$.context.get(t)}function B(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const F=[],L=[],U=[],V=[],G=Promise.resolve();let K=!1;function H(t){U.push(t)}let J=!1;const Y=new Set;function Q(){if(!J){J=!0;do{for(let t=0;t<F.length;t+=1){const e=F[t];D(e),Z(e.$$)}for(D(null),F.length=0;L.length;)L.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];Y.has(e)||(Y.add(e),e())}U.length=0}while(F.length);for(;V.length;)V.pop()();K=!1,J=!1,Y.clear()}}function Z(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const W=new Set;let X;function tt(){X={r:0,c:[],p:X}}function et(){X.r||i(X.c),X=X.p}function nt(t,e){t&&t.i&&(W.delete(t),t.i(e))}function rt(t,e,n,r){if(t&&t.o){if(W.has(t))return;W.add(t),X.c.push((()=>{W.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function ot(t){t&&t.c()}function it(t,e,n,o){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,n),o||H((()=>{const e=a.map(r).filter(s);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(H)}function st(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(F.push(t),K||(K=!0,G.then(Q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(t,n,r,s,l,a,c,u=[-1]){const f=M;D(t);const d=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let p=!1;if(d.ctx=r?r(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),p&&lt(t,e)),n})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(x)}else d.fragment&&d.fragment.c();n.intro&&nt(t.$$.fragment),it(t,n.target,n.anchor,n.customElement),Q()}D(f)}class ct{$destroy(){st(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ut(t,e){return I(t,e)}function ft(t){return z(t)}function dt(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}function pt(t){let n,r,o,i,s,l,a,c,u,f,d,p,h,g,v,m,w,C,O,T,A,N,M,D;return{c(){n=_("button"),r=k("svg"),o=k("title"),i=j("prosemirror"),s=k("desc"),l=j("Created using Figma"),a=k("use"),c=k("use"),u=k("use"),f=k("use"),d=k("use"),p=k("use"),h=k("use"),g=k("defs"),v=k("path"),m=k("path"),w=k("path"),C=k("path"),O=k("path"),T=k("path"),A=k("path"),S(a,"xlink:href","#a"),E(a,"transform","matrix(2 0 0 2 118 116)"),E(a,"fill","#FFF"),S(c,"xlink:href","#b"),E(c,"transform","rotate(16 59.054 420.192) scale(2)"),E(c,"fill","#FFF"),S(u,"xlink:href","#c"),E(u,"transform","matrix(2 0 0 2 154.024 141.58)"),E(u,"fill","#363755"),S(f,"xlink:href","#d"),E(f,"transform","matrix(2 0 0 2 220 334.8)"),E(f,"fill","#FFF"),S(d,"xlink:href","#e"),E(d,"transform","matrix(2 0 0 2 218.826 262.052)"),E(d,"fill","#363755"),S(p,"xlink:href","#f"),E(p,"transform","matrix(2 0 0 2 197.108 184.998)"),E(p,"fill","#FFF"),S(h,"xlink:href","#g"),E(h,"transform","matrix(2 0 0 2 221.8 216)"),E(h,"fill","#363755"),E(v,"id","a"),E(v,"d","M73.5 0C32.859 0 0 32.859 0 73.5S32.859 147 73.5 147 147 114.141 147 73.5 114.069 0 73.5\n        0z"),E(m,"id","b"),E(m,"d","M193.601 107.116c0-13.376 8.238-23.91\n        20.619-31.153-2.244-7.447-5.19-14.6-8.824-21.32-13.886\n        3.633-25.12-1.799-34.568-11.26-9.449-9.437-12.344-20.672-8.709-34.571A111.362 111.362 0 0 0\n        140.799 0c-7.243 12.37-20.339 20.594-33.689 20.594-13.363\n        0-26.446-8.225-33.701-20.594A110.888 110.888 0 0 0 52.1 8.812c3.634 13.9.753 25.134-8.721\n        34.57-9.436 9.462-20.67 14.894-34.569 11.26A112.178 112.178 0 0 0 0 75.963c12.369 7.243\n        20.593 17.777 20.593 31.153 0 13.352-8.224 26.448-20.593 33.704a113.338 113.338 0 0 0 8.811\n        21.321c13.899-3.634 25.133-.752 34.569 8.697 9.448 9.462 12.355 20.696 8.721 34.57a112.653\n        112.653 0 0 0 21.32 8.837c7.243-12.407 20.338-20.619 33.702-20.619 13.35 0 26.446 8.225\n        33.701 20.619a114.22 114.22 0 0 0 21.32-8.837c-3.634-13.874-.752-25.108 8.709-34.57\n        9.449-9.437 20.683-14.869 34.569-11.26a112.343 112.343 0 0 0\n        8.823-21.321c-12.406-7.256-20.644-17.789-20.644-31.141zm-86.491 46.57c-25.732\n        0-46.58-20.849-46.58-46.57 0-25.733 20.86-46.595 46.58-46.595 25.732 0 46.567 20.875 46.567\n        46.595 0 25.734-20.835 46.57-46.567 46.57z"),E(w,"id","c"),E(w,"d","M98.088 49.91c-6.9 83.9 10.8 103.401 10.8 103.401s-55.1\n        5.499-82.7-13.401c-30.5-20.9-26-67.5-25.9-94.6.1-28.4 25.6-45.8 49.9-45.3 29.1.5 50.2 21.6\n        47.9 49.9z"),E(C,"id","d"),E(C,"d","M.1.1c12.2 33.3 22.5 42.7 40 55.2 25.3 18 36.6 17.5 76.3 41C78.1 60.3 30.8 45.7 0 0l.1.1z"),E(O,"id","e"),E(O,"d","M.687 36.474c3 13.3 17.9 29.9 30.4 41.6 24.8 23.2 42 22.4 86\n        54.7-18.2-51.8-18.8-62-43.5-106.1-24.7-44-67.6-20.3-67.6-20.3s-8.4 16.6-5.3 29.9v.2z"),E(T,"id","f"),E(T,"d","M38.346 11.5s-4-11.6-18-11.5c-30 .2-28.8 52.1 16.9 52 39.6-.1 39.2-49.4\n        16.1-49.6-10.2-.2-15 9.1-15 9.1z"),E(A,"id","g"),E(A,"d","M26.5 15c10.8 0 2 14.9-.6 20.9-1.8-8.4-10.2-20.9.6-20.9zM10.2.1C4.6.1 0 4.6 0 10.3c0 5.6\n        4.5 10.2 10.2 10.2 5.6 0 10.2-4.5 10.2-10.2C20.4 4.7 15.9.1 10.2.1zM40.7 0c-4.8 0-8.8\n        4.5-8.8 10.2 0 5.6 3.9 10.2 8.8 10.2 4.8 0 8.8-4.5 8.8-10.2C49.5 4.6 45.6 0 40.7 0z"),E(r,"width","530"),E(r,"height","530"),E(r,"viewBox","0 0 530 530"),E(r,"xmlns","http://www.w3.org/2000/svg"),E(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),E(r,"class","svelte-d6qgv8"),E(n,"class",N=y(`floating-btn ${t[0]}`)+" svelte-d6qgv8")},m(e,y){$(e,n,y),b(n,r),b(r,o),b(o,i),b(r,s),b(s,l),b(r,a),b(r,c),b(r,u),b(r,f),b(r,d),b(r,p),b(r,h),b(r,g),b(g,v),b(g,m),b(g,w),b(g,C),b(g,O),b(g,T),b(g,A),M||(D=q(n,"click",t[1]),M=!0)},p(t,[e]){1&e&&N!==(N=y(`floating-btn ${t[0]}`)+" svelte-d6qgv8")&&E(n,"class",N)},i:e,o:e,d(t){t&&x(n),M=!1,D()}}}function ht(t,e,n){let{buttonPosition:r}=e;return t.$$set=t=>{"buttonPosition"in t&&n(0,r=t.buttonPosition)},[r,function(e){B.call(this,t,e)}]}dt(".hidden.svelte-d6qgv8.svelte-d6qgv8{display:none;visibility:hidden}.floating-btn.svelte-d6qgv8.svelte-d6qgv8{background:var(--color-blue-bg);border:0;border-radius:50%;box-shadow:0 0 30px rgba(34, 34, 34, 0.3);cursor:pointer;position:fixed;padding:6px;transition:opacity 0.3s;-webkit-transition:opacity 0.3s;z-index:99999}.floating-btn.bottom-right.svelte-d6qgv8.svelte-d6qgv8{bottom:16px;right:16px}.floating-btn.bottom-left.svelte-d6qgv8.svelte-d6qgv8{bottom:16px;left:16px}.floating-btn.top-right.svelte-d6qgv8.svelte-d6qgv8{top:16px;right:16px}.floating-btn.top-left.svelte-d6qgv8.svelte-d6qgv8{top:16px;left:16px}.floating-btn.svelte-d6qgv8.svelte-d6qgv8:hover{opacity:0.7}.floating-btn.svelte-d6qgv8>svg.svelte-d6qgv8{display:block;width:34px;height:34px;position:relative}");class gt extends ct{constructor(t){super(),at(this,t,ht,pt,l,{buttonPosition:0})}}const vt=[];function mt(t,n=e){let r;const o=new Set;function i(e){if(l(t,e)&&(t=e,r)){const e=!vt.length;for(const e of o)e[1](),vt.push(e,t);if(e){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,l=e){const a=[s,l];return o.add(a),1===o.size&&(r=n(i)||e),s(t),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}function yt(t,n,r){const o=!Array.isArray(t),l=o?[t]:t,c=n.length<2;return u=t=>{let r=!1;const u=[];let f=0,d=e;const p=()=>{if(f)return;d();const r=n(o?u[0]:u,t);c?t(r):d=s(r)?r:e},h=l.map(((t,e)=>a(t,(t=>{u[e]=t,f&=~(1<<e),r&&p()}),(()=>{f|=1<<e}))));return r=!0,p(),function(){i(h),d()}},{subscribe:mt(r,u).subscribe};var u}const bt="__prosemirror-dev-toolkit__snapshots",$t=mt([]),xt=mt(),wt=mt(),_t="undefined"!=typeof window?localStorage.getItem(bt):null;if(_t&&_t.length>0)try{const t=JSON.parse(_t);$t.set(t)}catch(t){console.error("Corrupted snapshots values in localStorage",t)}function kt(t,e){const n=Object.getPrototypeOf(t.state).constructor.create({schema:t.state.schema,plugins:t.state.plugins,doc:t.state.schema.nodeFromJSON(e)});t.updateState(n)}function jt(t){$t.update((e=>e.map((e=>e.timestamp===t.timestamp?t:e))))}function Ct(t){const e=document.createElement("a"),n=new Blob([JSON.stringify(t.doc)],{type:"application/json"});e.href=URL.createObjectURL(n),e.download=`${t.name}.json`,e.click()}function Ot(t){$t.update((e=>e.filter((e=>e.timestamp!==t.timestamp))));const e=c(xt);(null==e?void 0:e.timestamp)===t.timestamp&&xt.set(void 0)}$t.subscribe((t=>{"undefined"!=typeof window&&localStorage.setItem(bt,JSON.stringify(t))}));function qt(t){let n,r,o,s,l,a,c,u,f,d,p,h,g,v,m,y,w,k,j,O;return{c(){n=_("ul"),r=_("li"),o=_("button"),o.textContent="STATE",s=C(),l=_("li"),a=_("button"),a.textContent="HISTORY",c=C(),u=_("li"),f=_("button"),f.textContent="PLUGINS",d=C(),p=_("li"),h=_("button"),h.textContent="SCHEMA",g=C(),v=_("li"),m=_("button"),m.textContent="STRUCTURE",y=C(),w=_("li"),k=_("button"),k.textContent="SNAPSHOTS",E(o,"class","svelte-uy9g7w"),N(o,"active","state"===t[0]),E(a,"class","svelte-uy9g7w"),N(a,"active","history"===t[0]),E(f,"class","svelte-uy9g7w"),N(f,"active","plugins"===t[0]),E(h,"class","svelte-uy9g7w"),N(h,"active","schema"===t[0]),E(m,"class","svelte-uy9g7w"),N(m,"active","structure"===t[0]),E(k,"class","svelte-uy9g7w"),N(k,"active","snapshots"===t[0]),E(n,"class","tabs-menu svelte-uy9g7w")},m(e,i){$(e,n,i),b(n,r),b(r,o),b(n,s),b(n,l),b(l,a),b(n,c),b(n,u),b(u,f),b(n,d),b(n,p),b(p,h),b(n,g),b(n,v),b(v,m),b(n,y),b(n,w),b(w,k),j||(O=[q(o,"click",t[2]),q(a,"click",t[3]),q(f,"click",t[4]),q(h,"click",t[5]),q(m,"click",t[6]),q(k,"click",t[7])],j=!0)},p(t,[e]){1&e&&N(o,"active","state"===t[0]),1&e&&N(a,"active","history"===t[0]),1&e&&N(f,"active","plugins"===t[0]),1&e&&N(h,"active","schema"===t[0]),1&e&&N(m,"active","structure"===t[0]),1&e&&N(k,"active","snapshots"===t[0])},i:e,o:e,d(t){t&&x(n),j=!1,i(O)}}}function Et(t,e,n){let{active:r,onClickTab:o}=e;return t.$$set=t=>{"active"in t&&n(0,r=t.active),"onClickTab"in t&&n(1,o=t.onClickTab)},[r,o,()=>o("state"),()=>o("history"),()=>o("plugins"),()=>o("schema"),()=>o("structure"),()=>o("snapshots")]}dt("ul.svelte-uy9g7w{display:flex;list-style:none;margin:0;overflow-x:scroll;padding:0}button.svelte-uy9g7w{background:transparent;border:0;border-bottom:2px solid transparent;color:var(--color-white);cursor:pointer;height:100%;padding:1em}button.svelte-uy9g7w:hover{background:rgba(255, 255, 255, 0.05)}button.active.svelte-uy9g7w{border-bottom:2px solid var(--color-red-light)}");class Tt extends ct{constructor(t){super(),at(this,t,Et,qt,l,{active:0,onClickTab:1})}}var St={prettyPrint:function(t,e){var n,r,o,i,s,l;for(r=(e=e||{}).indent_size||4,o=e.indent_char||" ",s=e.brace_style||"collapse",i=0==e.max_char?1/0:e.max_char||70,l=e.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],n=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}},this.get_content=function(){for(var t="",e=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return e.length?e.join(""):["","TK_EOF"];if(t=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(t,this.Utils.whitespace))e.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){e.push("\n");for(var r=0;r<this.indent_level;r++)e.push(this.indent_string);this.line_char_count=0}else e.push(" "),this.line_char_count++;n=!1}e.push(t)}}return e.length?e.join(""):""},this.get_contents_to=function(t){if(this.pos==this.input.length)return["","TK_EOF"];var e="",n=new RegExp("</"+t+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),o=r?r.index:this.input.length;return this.pos<o&&(e=this.input.substring(this.pos,o),this.pos=o),e},this.record_tag=function(t){this.tags[t+"count"]?(this.tags[t+"count"]++,this.tags[t+this.tags[t+"count"]]=this.indent_level):(this.tags[t+"count"]=1,this.tags[t+this.tags[t+"count"]]=this.indent_level),this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent,this.tags.parent=t+this.tags[t+"count"]},this.retrieve_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]],this.tags.parent=this.tags[e+"parent"]),delete this.tags[t+this.tags[t+"count"]+"parent"],delete this.tags[t+this.tags[t+"count"]],1==this.tags[t+"count"]?delete this.tags[t+"count"]:this.tags[t+"count"]--}},this.get_tag=function(){var t,e,n="",r=[],o=!1;do{if(this.pos>=this.input.length)return r.length?r.join(""):["","TK_EOF"];n=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(n,this.Utils.whitespace)?(o=!0,this.line_char_count--):("'"!==n&&'"'!==n||r[1]&&"!"===r[1]||(n+=this.get_unformatted(n),o=!0),"="===n&&(o=!1),r.length&&"="!==r[r.length-1]&&">"!==n&&o&&(this.line_char_count>=this.max_char?(this.print_newline(!1,r),this.line_char_count=0):(r.push(" "),this.line_char_count++),o=!1),"<"===n&&(t=this.pos-1),r.push(n))}while(">"!==n);var i,s=r.join("");i=-1!=s.indexOf(" ")?s.indexOf(" "):s.indexOf(">");var a=s.substring(1,i).toLowerCase();if("/"===s.charAt(s.length-2)||this.Utils.in_array(a,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===a)this.record_tag(a),this.tag_type="SCRIPT";else if("style"===a)this.record_tag(a),this.tag_type="STYLE";else if(this.Utils.in_array(a,l)){var c=this.get_unformatted("</"+a+">",s);r.push(c),t>0&&this.Utils.in_array(this.input.charAt(t-1),this.Utils.whitespace)&&r.splice(0,0,this.input.charAt(t-1)),e=this.pos-1,this.Utils.in_array(this.input.charAt(e+1),this.Utils.whitespace)&&r.push(this.input.charAt(e+1)),this.tag_type="SINGLE"}else if("!"===a.charAt(0))if(-1!=a.indexOf("[if")){if(-1!=s.indexOf("!IE")){c=this.get_unformatted("--\x3e",s);r.push(c)}this.tag_type="START"}else if(-1!=a.indexOf("[endif"))this.tag_type="END",this.unindent();else if(-1!=a.indexOf("[cdata[")){c=this.get_unformatted("]]>",s);r.push(c),this.tag_type="SINGLE"}else{c=this.get_unformatted("--\x3e",s);r.push(c),this.tag_type="SINGLE"}else"/"===a.charAt(0)?(this.retrieve_tag(a.substring(1)),this.tag_type="END"):(this.record_tag(a),this.tag_type="START"),this.Utils.in_array(a,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return r.join("")},this.get_unformatted=function(t,e){if(e&&-1!=e.toLowerCase().indexOf(t))return"";var n="",r="",o=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"===n||"\r"===n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,o=!0}while(-1==r.toLowerCase().indexOf(t));return r},this.get_token=function(){var t;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var e=this.last_token.substr(7);return"string"!=typeof(t=this.get_contents_to(e))?t:[t,"TK_"+e]}return"CONTENT"===this.current_mode?"string"!=typeof(t=this.get_content())?t:[t,"TK_CONTENT"]:"TAG"===this.current_mode?"string"!=typeof(t=this.get_tag())?t:[t,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(t){return(t=this.indent_level+t||0)<1?"":Array(t+1).join(this.indent_string)},this.printer=function(t,e,n,r,o){this.input=t||"",this.output=[],this.indent_character=e,this.indent_string="",this.indent_size=n,this.brace_style=o,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var i=0;i<this.indent_size;i++)this.indent_string+=this.indent_character;this.print_newline=function(t,e){if(this.line_char_count=0,e&&e.length){if(!t)for(;this.Utils.in_array(e[e.length-1],this.Utils.whitespace);)e.pop();e.push("\n");for(var n=0;n<this.indent_level;n++)e.push(this.indent_string)}},this.print_token=function(t){this.output.push(t)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this},n.printer(t,o,r,i,s);;){var a=n.get_token();if(n.token_text=a[0],n.token_type=a[1],"TK_EOF"===n.token_type)break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent(),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===n.last_token&&""===n.last_text){var c=n.token_text.match(/\w+/)[0],u=n.output[n.output.length-1].match(/<\s*(\w+)/);null!==u&&u[1]===c||n.print_newline(!0,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var f=n.token_text.match(/^\s*<([a-z]+)/i);f&&n.Utils.in_array(f[1],l)||n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_CONTENT":""!==n.token_text&&n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==n.token_text){n.output.push("\n");var d=n.token_text;if("TK_SCRIPT"==n.token_type)var p="function"==typeof js_beautify&&js_beautify;else if("TK_STYLE"==n.token_type)p="function"==typeof css_beautify&&css_beautify;if("keep"==e.indent_scripts)var h=0;else if("separate"==e.indent_scripts)h=-n.indent_level;else h=1;var g=n.get_full_indent(h);if(p)d=p(d.replace(/^\s*/,g),e);else{var v=d.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,m=n.get_full_indent(h-v);d=d.replace(/^\s*/,g).replace(/\r\n|\r|\n/g,"\n"+m).replace(/\s*$/,"")}d&&(n.print_token(d),n.print_newline(!0,n.output))}n.current_mode="TAG"}n.last_token=n.token_type,n.last_text=n.token_text}return n.output.join("")}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function At(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var Nt={exports:{}},Mt=At(Object.freeze({__proto__:null}));!function(t,e){!function(t,e){e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0},s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},a=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},u=function(){function t(e){r(this,t),this.selfOptions=e||{},this.pipes={}}return o(t,[{key:"options",value:function(t){return t&&(this.selfOptions=t),this.selfOptions}},{key:"pipe",value:function(t,e){var n=e;if("string"==typeof t){if(void 0===n)return this.pipes[t];this.pipes[t]=n}if(t&&t.name){if(n=t,n.processor===this)return n;this.pipes[n.name]=n}return n.processor=this,n}},{key:"process",value:function(t,e){var n=t;n.options=this.options();for(var r=e||t.pipe||"default",o=void 0,i=void 0;r;)void 0!==n.nextAfterChildren&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),"string"==typeof r&&(r=this.pipe(r)),r.process(n),i=n,o=r,r=null,n&&n.next&&(n=n.next,r=i.nextPipe||n.pipe||o);return n.hasResult?n.result:void 0}}]),t}(),f=function(){function t(e){r(this,t),this.name=e,this.filters=[]}return o(t,[{key:"process",value:function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,r=this.filters.length,o=t,i=0;i<r;i++){var s=this.filters[i];if(e&&this.log("filter: "+s.filterName),s(o),"object"===(void 0===o?"undefined":n(o))&&o.exiting){o.exiting=!1;break}}!o.next&&this.resultCheck&&this.resultCheck(o)}},{key:"log",value:function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)}},{key:"append",value:function(){var t;return(t=this.filters).push.apply(t,arguments),this}},{key:"prepend",value:function(){var t;return(t=this.filters).unshift.apply(t,arguments),this}},{key:"indexOf",value:function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++)if(this.filters[e].filterName===t)return e;throw new Error("filter not found: "+t)}},{key:"list",value:function(){return this.filters.map((function(t){return t.filterName}))}},{key:"after",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e+1,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"before",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,0),Array.prototype.splice.apply(this.filters,n),this}},{key:"replace",value:function(t){var e=this.indexOf(t),n=Array.prototype.slice.call(arguments,1);if(!n.length)throw new Error("a filter is required");return n.unshift(e,1),Array.prototype.splice.apply(this.filters,n),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return this.filters.splice(e,1),this}},{key:"clear",value:function(){return this.filters.length=0,this}},{key:"shouldHaveResult",value:function(t){if(!1!==t){if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var n=new Error(e.name+" failed");throw n.noResult=!0,n}},this}}else this.resultCheck=null}}]),t}(),d=function(){function t(){r(this,t)}return o(t,[{key:"setResult",value:function(t){return this.result=t,this.hasResult=!0,this}},{key:"exit",value:function(){return this.exiting=!0,this}},{key:"switchTo",value:function(t,e){return"string"==typeof t||t instanceof f?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this}},{key:"push",value:function(t,e){return t.parent=this,void 0!==e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this}}]),t}(),p="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array};function h(t){var e=/^\/(.*)\/([gimyu]*)$/.exec(t.toString());return new RegExp(e[1],e[2])}function g(t){if("object"!==(void 0===t?"undefined":n(t)))return t;if(null===t)return null;if(p(t))return t.map(g);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return h(t);var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=g(t[r]));return e}var v=function(t){function e(t,n){r(this,e);var o=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.left=t,o.right=n,o.pipe="diff",o}return s(e,t),o(e,[{key:"setResult",value:function(t){if(this.options.cloneDiffValues&&"object"===(void 0===t?"undefined":n(t))){var e="function"==typeof this.options.cloneDiffValues?this.options.cloneDiffValues:g;"object"===n(t[0])&&(t[0]=e(t[0])),"object"===n(t[1])&&(t[1]=e(t[1]))}return d.prototype.setResult.apply(this,arguments)}}]),e}(d),m=function(t){function e(t,n){r(this,e);var o=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.left=t,o.delta=n,o.pipe="patch",o}return s(e,t),e}(d),y=function(t){function e(t){r(this,e);var n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.delta=t,n.pipe="reverse",n}return s(e,t),e}(d),b="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},$=function(t){if(t.left!==t.right)if(void 0!==t.left)if(void 0!==t.right){if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");t.leftType=null===t.left?"null":n(t.left),t.rightType=null===t.right?"null":n(t.right),t.leftType===t.rightType&&"boolean"!==t.leftType&&"number"!==t.leftType?("object"===t.leftType&&(t.leftIsArray=b(t.left)),"object"===t.rightType&&(t.rightIsArray=b(t.right)),t.leftIsArray===t.rightIsArray?t.left instanceof RegExp&&(t.right instanceof RegExp?t.setResult([t.left.toString(),t.right.toString()]).exit():t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()):t.setResult([t.left,t.right]).exit()}else t.setResult([t.left,0,0]).exit();else{if("function"==typeof t.right)throw new Error("functions are not supported");t.setResult([t.right]).exit()}else t.setResult(void 0).exit()};$.filterName="trivial";var x=function(t){if(void 0!==t.delta){if(t.nested=!b(t.delta),!t.nested)if(1!==t.delta.length)if(2!==t.delta.length)3===t.delta.length&&0===t.delta[2]&&t.setResult(void 0).exit();else{if(t.left instanceof RegExp){var e=/^\/(.*)\/([gimyu]+)$/.exec(t.delta[1]);if(e)return void t.setResult(new RegExp(e[1],e[2])).exit()}t.setResult(t.delta[1]).exit()}else t.setResult(t.delta[0]).exit()}else t.setResult(t.left).exit()};x.filterName="trivial";var w=function(t){void 0!==t.delta?(t.nested=!b(t.delta),t.nested||(1!==t.delta.length?2!==t.delta.length?3===t.delta.length&&0===t.delta[2]&&t.setResult([t.delta[0]]).exit():t.setResult([t.delta[1],t.delta[0]]).exit():t.setResult([t.delta[0],0,0]).exit())):t.setResult(t.delta).exit()};function _(t){if(t&&t.children){for(var e=t.children.length,n=void 0,r=t.result,o=0;o<e;o++)void 0!==(n=t.children[o]).result&&((r=r||{})[n.childName]=n.result);r&&t.leftIsArray&&(r._t="a"),t.setResult(r).exit()}}function k(t){if(!t.leftIsArray&&"object"===t.leftType){var e=void 0,n=void 0,r=t.options.propertyFilter;for(e in t.left)Object.prototype.hasOwnProperty.call(t.left,e)&&(r&&!r(e,t)||(n=new v(t.left[e],t.right[e]),t.push(n,e)));for(e in t.right)Object.prototype.hasOwnProperty.call(t.right,e)&&(r&&!r(e,t)||void 0===t.left[e]&&(n=new v(void 0,t.right[e]),t.push(n,e)));t.children&&0!==t.children.length?t.exit():t.setResult(void 0).exit()}}w.filterName="trivial",_.filterName="collectChildren",k.filterName="objects";var j=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new m(t.left[e],t.delta[e]),t.push(n,e);t.exit()}};j.filterName="objects";var C=function(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,r=0;r<e;r++)n=t.children[r],Object.prototype.hasOwnProperty.call(t.left,n.childName)&&void 0===n.result?delete t.left[n.childName]:t.left[n.childName]!==n.result&&(t.left[n.childName]=n.result);t.setResult(t.left).exit()}};C.filterName="collectChildren";var O=function(t){if(t.nested&&!t.delta._t){var e=void 0,n=void 0;for(e in t.delta)n=new y(t.delta[e]),t.push(n,e);t.exit()}};function q(t){if(t&&t.children&&!t.delta._t){for(var e=t.children.length,n=void 0,r={},o=0;o<e;o++)r[(n=t.children[o]).childName]!==n.result&&(r[n.childName]=n.result);t.setResult(r).exit()}}O.filterName="objects",q.filterName="collectChildren";var E=function(t,e,n,r){return t[n]===e[r]},T=function(t,e,n,r){var o=t.length,i=e.length,s=void 0,l=void 0,a=[o+1];for(s=0;s<o+1;s++)for(a[s]=[i+1],l=0;l<i+1;l++)a[s][l]=0;for(a.match=n,s=1;s<o+1;s++)for(l=1;l<i+1;l++)n(t,e,s-1,l-1,r)?a[s][l]=a[s-1][l-1]+1:a[s][l]=Math.max(a[s-1][l],a[s][l-1]);return a},S=function(t,e,n,r){for(var o=e.length,i=n.length,s={sequence:[],indices1:[],indices2:[]};0!==o&&0!==i;)t.match(e,n,o-1,i-1,r)?(s.sequence.unshift(e[o-1]),s.indices1.unshift(o-1),s.indices2.unshift(i-1),--o,--i):t[o][i-1]>t[o-1][i]?--i:--o;return s},A={get:function(t,e,n,r){var o=r||{},i=T(t,e,n||E,o),s=S(i,t,e,o);return"string"==typeof t&&"string"==typeof e&&(s.sequence=s.sequence.join("")),s}},N=3,M="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},D="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]===e)return r;return-1};function R(t,e,n,r){for(var o=0;o<n;o++)for(var i=t[o],s=0;s<r;s++){var l=e[s];if(o!==s&&i===l)return!0}}function P(t,e,r,o,i){var s=t[r],l=e[o];if(s===l)return!0;if("object"!==(void 0===s?"undefined":n(s))||"object"!==(void 0===l?"undefined":n(l)))return!1;var a=i.objectHash;if(!a)return i.matchByPosition&&r===o;var c=void 0,u=void 0;return"number"==typeof r?(i.hashCache1=i.hashCache1||[],void 0===(c=i.hashCache1[r])&&(i.hashCache1[r]=c=a(s,r))):c=a(s),void 0!==c&&("number"==typeof o?(i.hashCache2=i.hashCache2||[],void 0===(u=i.hashCache2[o])&&(i.hashCache2[o]=u=a(l,o))):u=a(l),void 0!==u&&c===u)}var I=function(t){if(t.leftIsArray){var e={objectHash:t.options&&t.options.objectHash,matchByPosition:t.options&&t.options.matchByPosition},n=0,r=0,o=void 0,i=void 0,s=void 0,l=t.left,a=t.right,c=l.length,u=a.length,f=void 0;for(c>0&&u>0&&!e.objectHash&&"boolean"!=typeof e.matchByPosition&&(e.matchByPosition=!R(l,a,c,u));n<c&&n<u&&P(l,a,n,n,e);)o=n,f=new v(t.left[o],t.right[o]),t.push(f,o),n++;for(;r+n<c&&r+n<u&&P(l,a,c-1-r,u-1-r,e);)i=c-1-r,s=u-1-r,f=new v(t.left[i],t.right[s]),t.push(f,s),r++;var d=void 0;if(n+r!==c)if(n+r!==u){delete e.hashCache1,delete e.hashCache2;var p=l.slice(n,c-r),h=a.slice(n,u-r),g=A.get(p,h,P,e),m=[];for(d=d||{_t:"a"},o=n;o<c-r;o++)D(g.indices1,o-n)<0&&(d["_"+o]=[l[o],0,0],m.push(o));var y=!0;t.options&&t.options.arrays&&!1===t.options.arrays.detectMove&&(y=!1);var b=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(b=!0);var $=m.length;for(o=n;o<u-r;o++){var x=D(g.indices2,o-n);if(x<0){var w=!1;if(y&&$>0)for(var _=0;_<$;_++)if(P(p,h,(i=m[_])-n,o-n,e)){d["_"+i].splice(1,2,o,N),b||(d["_"+i][0]=""),s=o,f=new v(t.left[i],t.right[s]),t.push(f,s),m.splice(_,1),w=!0;break}w||(d[o]=[a[o]])}else i=g.indices1[x]+n,s=g.indices2[x]+n,f=new v(t.left[i],t.right[s]),t.push(f,s)}t.setResult(d).exit()}else{for(d=d||{_t:"a"},o=n;o<c-r;o++)d["_"+o]=[l[o],0,0];t.setResult(d).exit()}else{if(c===u)return void t.setResult(void 0).exit();for(d=d||{_t:"a"},o=n;o<u-r;o++)d[o]=[a[o]];t.setResult(d).exit()}}};I.filterName="arrays";var z={numerically:function(t,e){return t-e},numericallyBy:function(t){return function(e,n){return e[t]-n[t]}}},B=function(t){if(t.nested&&"a"===t.delta._t){var e=void 0,n=void 0,r=t.delta,o=t.left,i=[],s=[],l=[];for(e in r)if("_t"!==e)if("_"===e[0]){if(0!==r[e][2]&&r[e][2]!==N)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+r[e][2]);i.push(parseInt(e.slice(1),10))}else 1===r[e].length?s.push({index:parseInt(e,10),value:r[e][0]}):l.push({index:parseInt(e,10),delta:r[e]});for(e=(i=i.sort(z.numerically)).length-1;e>=0;e--){var a=r["_"+(n=i[e])],c=o.splice(n,1)[0];a[2]===N&&s.push({index:a[1],value:c})}var u=(s=s.sort(z.numericallyBy("index"))).length;for(e=0;e<u;e++){var f=s[e];o.splice(f.index,0,f.value)}var d=l.length,p=void 0;if(d>0)for(e=0;e<d;e++){var h=l[e];p=new m(t.left[h.index],h.delta),t.push(p,h.index)}t.children?t.exit():t.setResult(t.left).exit()}};B.filterName="arrays";var F=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,r=0;r<e;r++)n=t.children[r],t.left[n.childName]=n.result;t.setResult(t.left).exit()}};F.filterName="arraysCollectChildren";var L=function(t){if(t.nested){if("a"===t.delta._t){var e=void 0,n=void 0;for(e in t.delta)"_t"!==e&&(n=new y(t.delta[e]),t.push(n,e));t.exit()}}else t.delta[2]===N&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),N]).exit())};L.filterName="arrays";var U=function(t,e,n){if("string"==typeof e&&"_"===e[0])return parseInt(e.substr(1),10);if(M(n)&&0===n[2])return"_"+e;var r=+e;for(var o in t){var i=t[o];if(M(i))if(i[2]===N){var s=parseInt(o.substr(1),10),l=i[1];if(l===+e)return s;s<=r&&l>r?r++:s>=r&&l<r&&r--}else 0===i[2]?parseInt(o.substr(1),10)<=r&&r++:1===i.length&&o<=r&&r--}return r};function V(t){if(t&&t.children&&"a"===t.delta._t){for(var e=t.children.length,n=void 0,r={_t:"a"},o=0;o<e;o++){var i=(n=t.children[o]).newName;void 0===i&&(i=U(t.delta,n.childName,n.result)),r[i]!==n.result&&(r[i]=n.result)}t.setResult(r).exit()}}V.filterName="arraysCollectChildren";var G=function(t){t.left instanceof Date?(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?t.setResult([t.left,t.right]):t.setResult(void 0):t.setResult([t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};function K(t,e){return t(e={exports:{}},e.exports),e.exports}G.filterName="dates";var H=K((function(t){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var n=-1,r=1,o=0;e.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[o,t]]:[];void 0===n&&(n=!0);var s=n,l=this.diff_commonPrefix(t,e),a=t.substring(0,l);t=t.substring(l),e=e.substring(l),l=this.diff_commonSuffix(t,e);var c=t.substring(t.length-l);t=t.substring(0,t.length-l),e=e.substring(0,e.length-l);var u=this.diff_compute_(t,e,s,i);return a&&u.unshift([o,a]),c&&u.push([o,c]),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(t,e,i,s){var l;if(!t)return[[r,e]];if(!e)return[[n,t]];var a=t.length>e.length?t:e,c=t.length>e.length?e:t,u=a.indexOf(c);if(-1!=u)return l=[[r,a.substring(0,u)],[o,c],[r,a.substring(u+c.length)]],t.length>e.length&&(l[0][0]=l[2][0]=n),l;if(1==c.length)return[[n,t],[r,e]];var f=this.diff_halfMatch_(t,e);if(f){var d=f[0],p=f[1],h=f[2],g=f[3],v=f[4],m=this.diff_main(d,h,i,s),y=this.diff_main(p,g,i,s);return m.concat([[o,v]],y)}return i&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,s):this.diff_bisect_(t,e,s)},e.prototype.diff_lineMode_=function(t,e,i){t=(p=this.diff_linesToChars_(t,e)).chars1,e=p.chars2;var s=p.lineArray,l=this.diff_main(t,e,!1,i);this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([o,""]);for(var a=0,c=0,u=0,f="",d="";a<l.length;){switch(l[a][0]){case r:u++,d+=l[a][1];break;case n:c++,f+=l[a][1];break;case o:if(c>=1&&u>=1){l.splice(a-c-u,c+u),a=a-c-u;for(var p,h=(p=this.diff_main(f,d,!1,i)).length-1;h>=0;h--)l.splice(a,0,p[h]);a+=p.length}u=0,c=0,f="",d=""}a++}return l.pop(),l},e.prototype.diff_bisect_=function(t,e,o){for(var i=t.length,s=e.length,l=Math.ceil((i+s)/2),a=l,c=2*l,u=new Array(c),f=new Array(c),d=0;d<c;d++)u[d]=-1,f[d]=-1;u[a+1]=0,f[a+1]=0;for(var p=i-s,h=p%2!=0,g=0,v=0,m=0,y=0,b=0;b<l&&!((new Date).getTime()>o);b++){for(var $=-b+g;$<=b-v;$+=2){for(var x=a+$,w=(O=$==-b||$!=b&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-$;O<i&&w<s&&t.charAt(O)==e.charAt(w);)O++,w++;if(u[x]=O,O>i)v+=2;else if(w>s)g+=2;else if(h&&(j=a+p-$)>=0&&j<c&&-1!=f[j]&&O>=(k=i-f[j]))return this.diff_bisectSplit_(t,e,O,w,o)}for(var _=-b+m;_<=b-y;_+=2){for(var k,j=a+_,C=(k=_==-b||_!=b&&f[j-1]<f[j+1]?f[j+1]:f[j-1]+1)-_;k<i&&C<s&&t.charAt(i-k-1)==e.charAt(s-C-1);)k++,C++;if(f[j]=k,k>i)y+=2;else if(C>s)m+=2;else if(!h){var O;if((x=a+p-_)>=0&&x<c&&-1!=u[x])if(w=a+(O=u[x])-x,O>=(k=i-k))return this.diff_bisectSplit_(t,e,O,w,o)}}}return[[n,t],[r,e]]},e.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),s=e.substring(0,r),l=t.substring(n),a=e.substring(r),c=this.diff_main(i,s,!1,o),u=this.diff_main(l,a,!1,o);return c.concat(u)},e.prototype.diff_linesToChars_=function(t,e){var n=[],r={};function o(t){for(var e="",o=0,i=-1,s=n.length;i<t.length-1;){-1==(i=t.indexOf("\n",o))&&(i=t.length-1);var l=t.substring(o,i+1);o=i+1,(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?e+=String.fromCharCode(r[l]):(e+=String.fromCharCode(s),r[l]=s,n[s++]=l)}return e}return n[0]="",{chars1:o(t),chars2:o(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=Math.min(n,r);if(t==e)return o;for(var i=0,s=1;;){var l=t.substring(o-s),a=e.indexOf(l);if(-1==a)return i;s+=a,0!=a&&t.substring(o-s)!=e.substring(0,s)||(i=s,s++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var o=this;function i(t,e,n){for(var r,i,s,l,a=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(a,c+1));){var f=o.diff_commonPrefix(t.substring(n),e.substring(c)),d=o.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<d+f&&(u=e.substring(c-d,c)+e.substring(c,c+f),r=t.substring(0,n-d),i=t.substring(n+f),s=e.substring(0,c-d),l=e.substring(c+f))}return 2*u.length>=t.length?[r,i,s,l,u]:null}var s,l,a,c,u,f=i(n,r,Math.ceil(n.length/4)),d=i(n,r,Math.ceil(n.length/2));return f||d?(s=d?f&&f[4].length>d[4].length?f:d:f,t.length>e.length?(l=s[0],a=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],l=s[2],a=s[3]),[l,a,c,u,s[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var e=!1,i=[],s=0,l=null,a=0,c=0,u=0,f=0,d=0;a<t.length;)t[a][0]==o?(i[s++]=a,c=f,u=d,f=0,d=0,l=t[a][1]):(t[a][0]==r?f+=t[a][1].length:d+=t[a][1].length,l&&l.length<=Math.max(c,u)&&l.length<=Math.max(f,d)&&(t.splice(i[s-1],0,[n,l]),t[i[s-1]+1][0]=r,s--,a=--s>0?i[s-1]:-1,c=0,u=0,f=0,d=0,l=null,e=!0)),a++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==n&&t[a][0]==r){var p=t[a-1][1],h=t[a][1],g=this.diff_commonOverlap_(p,h),v=this.diff_commonOverlap_(h,p);g>=v?(g>=p.length/2||g>=h.length/2)&&(t.splice(a,0,[o,h.substring(0,g)]),t[a-1][1]=p.substring(0,p.length-g),t[a+1][1]=h.substring(g),a++):(v>=p.length/2||v>=h.length/2)&&(t.splice(a,0,[o,p.substring(0,v)]),t[a-1][0]=r,t[a-1][1]=h.substring(0,h.length-v),t[a+1][0]=n,t[a+1][1]=p.substring(v),a++),a++}a++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),o=n.charAt(0),i=r.match(e.nonAlphaNumericRegex_),s=o.match(e.nonAlphaNumericRegex_),l=i&&r.match(e.whitespaceRegex_),a=s&&o.match(e.whitespaceRegex_),c=l&&r.match(e.linebreakRegex_),u=a&&o.match(e.linebreakRegex_),f=c&&t.match(e.blanklineEndRegex_),d=u&&n.match(e.blanklineStartRegex_);return f||d?5:c||u?4:i&&!l&&a?3:l||a?2:i||s?1:0}for(var r=1;r<t.length-1;){if(t[r-1][0]==o&&t[r+1][0]==o){var i=t[r-1][1],s=t[r][1],l=t[r+1][1],a=this.diff_commonSuffix(i,s);if(a){var c=s.substring(s.length-a);i=i.substring(0,i.length-a),s=c+s.substring(0,s.length-a),l=c+l}for(var u=i,f=s,d=l,p=n(i,s)+n(s,l);s.charAt(0)===l.charAt(0);){i+=s.charAt(0),s=s.substring(1)+l.charAt(0),l=l.substring(1);var h=n(i,s)+n(s,l);h>=p&&(p=h,u=i,f=s,d=l)}t[r-1][1]!=u&&(u?t[r-1][1]=u:(t.splice(r-1,1),r--),t[r][1]=f,d?t[r+1][1]=d:(t.splice(r+1,1),r--))}r++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,i=[],s=0,l=null,a=0,c=!1,u=!1,f=!1,d=!1;a<t.length;)t[a][0]==o?(t[a][1].length<this.Diff_EditCost&&(f||d)?(i[s++]=a,c=f,u=d,l=t[a][1]):(s=0,l=null),f=d=!1):(t[a][0]==n?d=!0:f=!0,l&&(c&&u&&f&&d||l.length<this.Diff_EditCost/2&&c+u+f+d==3)&&(t.splice(i[s-1],0,[n,l]),t[i[s-1]+1][0]=r,s--,l=null,c&&u?(f=d=!0,s=0):(a=--s>0?i[s-1]:-1,f=d=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push([o,""]);for(var e,i=0,s=0,l=0,a="",c="";i<t.length;)switch(t[i][0]){case r:l++,c+=t[i][1],i++;break;case n:s++,a+=t[i][1],i++;break;case o:s+l>1?(0!==s&&0!==l&&(0!==(e=this.diff_commonPrefix(c,a))&&(i-s-l>0&&t[i-s-l-1][0]==o?t[i-s-l-1][1]+=c.substring(0,e):(t.splice(0,0,[o,c.substring(0,e)]),i++),c=c.substring(e),a=a.substring(e)),0!==(e=this.diff_commonSuffix(c,a))&&(t[i][1]=c.substring(c.length-e)+t[i][1],c=c.substring(0,c.length-e),a=a.substring(0,a.length-e))),0===s?t.splice(i-l,s+l,[r,c]):0===l?t.splice(i-s,s+l,[n,a]):t.splice(i-s-l,s+l,[n,a],[r,c]),i=i-s-l+(s?1:0)+(l?1:0)+1):0!==i&&t[i-1][0]==o?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,l=0,s=0,a="",c=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(i=1;i<t.length-1;)t[i-1][0]==o&&t[i+1][0]==o&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),u=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),u=!0)),i++;u&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var o,i=0,s=0,l=0,a=0;for(o=0;o<t.length&&(t[o][0]!==r&&(i+=t[o][1].length),t[o][0]!==n&&(s+=t[o][1].length),!(i>e));o++)l=i,a=s;return t.length!=o&&t[o][0]===n?a:a+(e-l)},e.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,s=/</g,l=/>/g,a=/\n/g,c=0;c<t.length;c++){var u=t[c][0],f=t[c][1].replace(i,"&amp;").replace(s,"&lt;").replace(l,"&gt;").replace(a,"&para;<br>");switch(u){case r:e[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case n:e[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case o:e[c]="<span>"+f+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==r&&(e[n]=t[n][1]);return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==n&&(e[r]=t[r][1]);return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,i=0,s=0,l=0;l<t.length;l++){var a=t[l][0],c=t[l][1];switch(a){case r:i+=c.length;break;case n:s+=c.length;break;case o:e+=Math.max(i,s),i=0,s=0}}return e+=Math.max(i,s)},e.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case r:e[i]="+"+encodeURI(t[i][1]);break;case n:e[i]="-"+t[i][1].length;break;case o:e[i]="="+t[i][1].length}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,e){for(var i=[],s=0,l=0,a=e.split(/\t/g),c=0;c<a.length;c++){var u=a[c].substring(1);switch(a[c].charAt(0)){case"+":try{i[s++]=[r,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var f=parseInt(u,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+u);var d=t.substring(l,l+=f);"="==a[c].charAt(0)?i[s++]=[o,d]:i[s++]=[n,d];break;default:if(a[c])throw new Error("Invalid diff operation in diff_fromDelta: "+a[c])}}if(l!=t.length)throw new Error("Delta length ("+l+") does not equal source text length ("+t.length+").");return i},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),o=this;function i(t,r){var i=t/e.length,s=Math.abs(n-r);return o.Match_Distance?i+s/o.Match_Distance:s?1:i}var s=this.Match_Threshold,l=t.indexOf(e,n);-1!=l&&(s=Math.min(i(0,l),s),-1!=(l=t.lastIndexOf(e,n+e.length))&&(s=Math.min(i(0,l),s)));var a,c,u=1<<e.length-1;l=-1;for(var f,d=e.length+t.length,p=0;p<e.length;p++){for(a=0,c=d;a<c;)i(p,n+c)<=s?a=c:d=c,c=Math.floor((d-a)/2+a);d=c;var h=Math.max(1,n-c+1),g=Math.min(n+c,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<p)-1;for(var m=g;m>=h;m--){var y=r[t.charAt(m-1)];if(v[m]=0===p?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&u){var b=i(p,m-1);if(b<=s){if(s=b,!((l=m-1)>n))break;h=Math.max(1,2*n-l)}}}if(i(p+1,n)>s)break;f=v}return l},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},e.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([o,i]);var s=e.substring(t.start2+t.length1,t.start2+t.length1+r);s&&t.diffs.push([o,s]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+s.length,t.length2+=i.length+s.length}},e.prototype.patch_make=function(t,i,s){var l,a;if("string"==typeof t&&"string"==typeof i&&void 0===s)l=t,(a=this.diff_main(l,i,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(t&&"object"==typeof t&&void 0===i&&void 0===s)a=t,l=this.diff_text1(a);else if("string"==typeof t&&i&&"object"==typeof i&&void 0===s)l=t,a=i;else{if("string"!=typeof t||"string"!=typeof i||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");l=t,a=s}if(0===a.length)return[];for(var c=[],u=new e.patch_obj,f=0,d=0,p=0,h=l,g=l,v=0;v<a.length;v++){var m=a[v][0],y=a[v][1];switch(f||m===o||(u.start1=d,u.start2=p),m){case r:u.diffs[f++]=a[v],u.length2+=y.length,g=g.substring(0,p)+y+g.substring(p);break;case n:u.length1+=y.length,u.diffs[f++]=a[v],g=g.substring(0,p)+g.substring(p+y.length);break;case o:y.length<=2*this.Patch_Margin&&f&&a.length!=v+1?(u.diffs[f++]=a[v],u.length1+=y.length,u.length2+=y.length):y.length>=2*this.Patch_Margin&&f&&(this.patch_addContext_(u,h),c.push(u),u=new e.patch_obj,f=0,h=g,d=p)}m!==r&&(d+=y.length),m!==n&&(p+=y.length)}return f&&(this.patch_addContext_(u,h),c.push(u)),c},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=new e.patch_obj;i.diffs=[];for(var s=0;s<o.diffs.length;s++)i.diffs[s]=o.diffs[s].slice();i.start1=o.start1,i.start2=o.start2,i.length1=o.length1,i.length2=o.length2,n[r]=i}return n},e.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var s=0,l=[],a=0;a<t.length;a++){var c,u,f=t[a].start2+s,d=this.diff_text1(t[a].diffs),p=-1;if(d.length>this.Match_MaxBits?-1!=(c=this.match_main(e,d.substring(0,this.Match_MaxBits),f))&&(-1==(p=this.match_main(e,d.substring(d.length-this.Match_MaxBits),f+d.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(e,d,f),-1==c)l[a]=!1,s-=t[a].length2-t[a].length1;else if(l[a]=!0,s=c-f,d==(u=-1==p?e.substring(c,c+d.length):e.substring(c,p+this.Match_MaxBits)))e=e.substring(0,c)+this.diff_text2(t[a].diffs)+e.substring(c+d.length);else{var h=this.diff_main(d,u,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(h)/d.length>this.Patch_DeleteThreshold)l[a]=!1;else{this.diff_cleanupSemanticLossless(h);for(var g,v=0,m=0;m<t[a].diffs.length;m++){var y=t[a].diffs[m];y[0]!==o&&(g=this.diff_xIndex(h,v)),y[0]===r?e=e.substring(0,c+g)+y[1]+e.substring(c+g):y[0]===n&&(e=e.substring(0,c+g)+e.substring(c+this.diff_xIndex(h,v+y[1].length))),y[0]!==n&&(v+=y[1].length)}}}}return[e=e.substring(i.length,e.length-i.length),l]},e.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],s=i.diffs;if(0==s.length||s[0][0]!=o)s.unshift([o,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>s[0][1].length){var l=e-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],i.start1-=l,i.start2-=l,i.length1+=l,i.length2+=l}return 0==(s=(i=t[t.length-1]).diffs).length||s[s.length-1][0]!=o?(s.push([o,n]),i.length1+=e,i.length2+=e):e>s[s.length-1][1].length&&(l=e-s[s.length-1][1].length,s[s.length-1][1]+=n.substring(0,l),i.length1+=l,i.length2+=l),n},e.prototype.patch_splitMax=function(t){for(var i=this.Match_MaxBits,s=0;s<t.length;s++)if(!(t[s].length1<=i)){var l=t[s];t.splice(s--,1);for(var a=l.start1,c=l.start2,u="";0!==l.diffs.length;){var f=new e.patch_obj,d=!0;for(f.start1=a-u.length,f.start2=c-u.length,""!==u&&(f.length1=f.length2=u.length,f.diffs.push([o,u]));0!==l.diffs.length&&f.length1<i-this.Patch_Margin;){var p=l.diffs[0][0],h=l.diffs[0][1];p===r?(f.length2+=h.length,c+=h.length,f.diffs.push(l.diffs.shift()),d=!1):p===n&&1==f.diffs.length&&f.diffs[0][0]==o&&h.length>2*i?(f.length1+=h.length,a+=h.length,d=!1,f.diffs.push([p,h]),l.diffs.shift()):(h=h.substring(0,i-f.length1-this.Patch_Margin),f.length1+=h.length,a+=h.length,p===o?(f.length2+=h.length,c+=h.length):d=!1,f.diffs.push([p,h]),h==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(h.length))}u=(u=this.diff_text2(f.diffs)).substring(u.length-this.Patch_Margin);var g=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);""!==g&&(f.length1+=g.length,f.length2+=g.length,0!==f.diffs.length&&f.diffs[f.diffs.length-1][0]===o?f.diffs[f.diffs.length-1][1]+=g:f.diffs.push([o,g])),d||t.splice(++s,0,f)}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},e.prototype.patch_fromText=function(t){var i=[];if(!t)return i;for(var s=t.split("\n"),l=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<s.length;){var c=s[l].match(a);if(!c)throw new Error("Invalid patch string: "+s[l]);var u=new e.patch_obj;for(i.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),l++;l<s.length;){var f=s[l].charAt(0);try{var d=decodeURI(s[l].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==f)u.diffs.push([n,d]);else if("+"==f)u.diffs.push([r,d]);else if(" "==f)u.diffs.push([o,d]);else{if("@"==f)break;if(""!==f)throw new Error('Invalid patch mode "'+f+'" in: '+d)}l++}}return i},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case r:t="+";break;case n:t="-";break;case o:t=" "}e[i+1]=t+encodeURI(this.diffs[i][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=e,t.exports.diff_match_patch=e,t.exports.DIFF_DELETE=n,t.exports.DIFF_INSERT=r,t.exports.DIFF_EQUAL=o})),J=2,Y=60,Q=null,Z=function(t){if(!Q){var e=void 0;if("undefined"!=typeof diff_match_patch)e="function"==typeof diff_match_patch?new diff_match_patch:new diff_match_patch.diff_match_patch;else if(H)try{e=H&&new H}catch(t){e=null}if(!e){if(!t)return null;var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}Q={diff:function(t,n){return e.patch_toText(e.patch_make(t,n))},patch:function(t,n){for(var r=e.patch_apply(e.patch_fromText(n),t),o=0;o<r[1].length;o++)r[1][o]||(new Error("text patch failed").textPatchFailed=!0);return r[0]}}}return Q},W=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||Y;if(t.left.length<e||t.right.length<e)t.setResult([t.left,t.right]).exit();else{var n=Z();if(n){var r=n.diff;t.setResult([r(t.left,t.right),0,J]).exit()}else t.setResult([t.left,t.right]).exit()}}};W.filterName="texts";var X=function(t){if(!t.nested&&t.delta[2]===J){var e=Z(!0).patch;t.setResult(e(t.left,t.delta[0])).exit()}};X.filterName="texts";var tt=function(t){var e=void 0,n=void 0,r=void 0,o=void 0,i=void 0,s=null,l=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(e=0,n=(r=t.split("\n")).length;e<n;e++){var a=(o=r[e]).slice(0,1);"@"===a?(s=l.exec(o),r[e]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):"+"===a?(r[e]="-"+r[e].slice(1),"+"===r[e-1].slice(0,1)&&(i=r[e],r[e]=r[e-1],r[e-1]=i)):"-"===a&&(r[e]="+"+r[e].slice(1))}return r.join("\n")},et=function(t){t.nested||t.delta[2]===J&&t.setResult([tt(t.delta[0]),0,J]).exit()};et.filterName="texts";var nt=function(){function t(e){r(this,t),this.processor=new u(e),this.processor.pipe(new f("diff").append(_,$,G,W,k,I).shouldHaveResult()),this.processor.pipe(new f("patch").append(C,F,x,X,j,B).shouldHaveResult()),this.processor.pipe(new f("reverse").append(q,V,w,et,O,L).shouldHaveResult())}return o(t,[{key:"options",value:function(){var t;return(t=this.processor).options.apply(t,arguments)}},{key:"diff",value:function(t,e){return this.processor.process(new v(t,e))}},{key:"patch",value:function(t,e){return this.processor.process(new m(t,e))}},{key:"reverse",value:function(t){return this.processor.process(new y(t))}},{key:"unpatch",value:function(t,e){return this.patch(t,this.reverse(e))}},{key:"clone",value:function(t){return g(t)}}]),t}(),rt="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},ot="function"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},it=function(t){return"_"===t.substr(0,1)?t.slice(1):t},st=function(t){return"_t"===t?-1:"_"===t.substr(0,1)?parseInt(t.slice(1),10):parseInt(t,10)+.1},lt=function(t,e){return st(t)-st(e)},at=function(){function t(){r(this,t)}return o(t,[{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),this.finalize(n)}},{key:"prepareContext",value:function(t){t.buffer=[],t.out=function(){var t;(t=this.buffer).push.apply(t,arguments)}}},{key:"typeFormattterNotFound",value:function(t,e){throw new Error("cannot format delta type: "+e)}},{key:"typeFormattterErrorFormatter",value:function(t,e){return e.toString()}},{key:"finalize",value:function(t){var e=t.buffer;if(rt(e))return e.join("")}},{key:"recurse",value:function(t,e,n,r,o,i,s){var l=e&&i?i.value:n;if(void 0!==e||void 0!==r){var a=this.getDeltaType(e,i),c="node"===a?"a"===e._t?"array":"object":"";void 0!==r?this.nodeBegin(t,r,o,a,c,s):this.rootBegin(t,a,c);try{(this["format_"+a]||this.typeFormattterNotFound(t,a)).call(this,t,e,l,r,o,i)}catch(n){this.typeFormattterErrorFormatter(t,n,e,l,r,o,i),"undefined"!=typeof console&&console.error&&console.error(n.stack)}void 0!==r?this.nodeEnd(t,r,o,a,c,s):this.rootEnd(t,a,c)}}},{key:"formatDeltaChildren",value:function(t,e,n){var r=this;this.forEachDeltaKey(e,n,(function(o,i,s,l){r.recurse(t,e[o],n?n[i]:void 0,o,i,s,l)}))}},{key:"forEachDeltaKey",value:function(t,e,n){var r=ot(t),o="a"===t._t,i={},s=void 0;if(void 0!==e)for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(void 0!==t[s]||o&&void 0!==t["_"+s]||r.push(s));for(s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var l=t[s];rt(l)&&3===l[2]&&(i[l[1].toString()]={key:s,value:e&&e[parseInt(s.substr(1))]},!1!==this.includeMoveDestinations&&void 0===e&&void 0===t[l[1]]&&r.push(l[1].toString()))}o?r.sort(lt):r.sort();for(var a=0,c=r.length;a<c;a++){var u=r[a];if(!o||"_t"!==u){var f=o?"number"==typeof u?u:parseInt(it(u),10):u,d=a===c-1;n(u,f,i[f],d)}}}},{key:"getDeltaType",value:function(t,e){if(void 0===t)return void 0!==e?"movedestination":"unchanged";if(rt(t)){if(1===t.length)return"added";if(2===t.length)return"modified";if(3===t.length&&0===t[2])return"deleted";if(3===t.length&&2===t[2])return"textdiff";if(3===t.length&&3===t[2])return"moved"}else if("object"===(void 0===t?"undefined":n(t)))return"node";return"unknown"}},{key:"parseTextDiff",value:function(t){for(var e=[],n=t.split("\n@@ "),r=0,o=n.length;r<o;r++){var i=n[r],s={pieces:[]},l=/^(?:@@ )?[-+]?(\d+),(\d+)/.exec(i).slice(1);s.location={line:l[0],chr:l[1]};for(var a=i.split("\n").slice(1),c=0,u=a.length;c<u;c++){var f=a[c];if(f.length){var d={type:"context"};"+"===f.substr(0,1)?d.type="added":"-"===f.substr(0,1)&&(d.type="deleted"),d.text=f.slice(1),s.pieces.push(d)}}e.push(s)}return e}}]),t}(),ct=Object.freeze({default:at}),ut=function(t){function e(){return r(this,e),l(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),o(e,[{key:"typeFormattterErrorFormatter",value:function(t,e){t.out('<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatValue",value:function(t,e){t.out("<pre>"+ft(JSON.stringify(e,null,2))+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,o=n.length;r<o;r++){var i=n[r];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+i.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+i.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=i.pieces,l=0,a=s.length;l<a;l++){var c=s[l];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+ft(decodeURI(c.text))+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){var r="jsondiffpatch-"+e+(n?" jsondiffpatch-child-node-type-"+n:"");t.out('<div class="jsondiffpatch-delta '+r+'">')}},{key:"rootEnd",value:function(t){t.out("</div>"+(t.hasArrows?'<script type="text/javascript">setTimeout('+dt.toString()+",10);<\/script>":""))}},{key:"nodeBegin",value:function(t,e,n,r,o){var i="jsondiffpatch-"+r+(o?" jsondiffpatch-child-node-type-"+o:"");t.out('<li class="'+i+'" data-key="'+n+'"><div class="jsondiffpatch-property-name">'+n+"</div>")}},{key:"nodeEnd",value:function(t){t.out("</li>")}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&(t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,n),t.out("</div>"))}},{key:"format_node",value:function(t,e,n){var r="a"===e._t?"array":"object";t.out('<ul class="jsondiffpatch-node jsondiffpatch-node-type-'+r+'">'),this.formatDeltaChildren(t,e,n),t.out("</ul>")}},{key:"format_added",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_modified",value:function(t,e){t.out('<div class="jsondiffpatch-value jsondiffpatch-left-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-value jsondiffpatch-right-value">'),this.formatValue(t,e[1]),t.out("</div>")}},{key:"format_deleted",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out("</div>")}},{key:"format_moved",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatValue(t,e[0]),t.out('</div><div class="jsondiffpatch-moved-destination">'+e[1]+"</div>"),t.out('<div class="jsondiffpatch-arrow" style="position: relative; left: -34px;">\n          <svg width="30" height="60" style="position: absolute; display: none;">\n          <defs>\n              <marker id="markerArrow" markerWidth="8" markerHeight="8"\n                 refx="2" refy="4"\n                     orient="auto" markerUnits="userSpaceOnUse">\n                  <path d="M1,1 L1,7 L7,4 L1,1" style="fill: #339;" />\n              </marker>\n          </defs>\n          <path d="M30,0 Q-10,25 26,50"\n            style="stroke: #88f; stroke-width: 2px; fill: none; stroke-opacity: 0.5; marker-end: url(#markerArrow);"\n          ></path>\n          </svg>\n      </div>'),t.hasArrows=!0}},{key:"format_textdiff",value:function(t,e){t.out('<div class="jsondiffpatch-value">'),this.formatTextDiffString(t,e[0]),t.out("</div>")}}]),e}(at);function ft(t){for(var e=t,n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/'/g,"&apos;"],[/"/g,"&quot;"]],r=0;r<n.length;r++)e=e.replace(n[r][0],n[r][1]);return e}var dt=function(t){var e=t||document,n=function(t){var e=t.textContent,n=t.innerText;return e||n},r=function(t,e){for(var n=t.children,r=0,o=n.length;r<o;r++)e(n[r],r)};!function(t,e,n){for(var r=t.querySelectorAll(e),o=0,i=r.length;o<i;o++)n(r[o])}(e,".jsondiffpatch-arrow",(function(t){var e=t.parentNode,o=t.children,i=t.style,s=e,l=o[0],a=l.children[1];l.style.display="none";var c=n(s.querySelector(".jsondiffpatch-moved-destination")),u=s.parentNode,f=void 0;if(r(u,(function(t){t.getAttribute("data-key")===c&&(f=t)})),f)try{var d=f.offsetTop-s.offsetTop;l.setAttribute("height",Math.abs(d)+6),i.top=-8+(d>0?0:d)+"px";var p=d>0?"M30,0 Q-10,"+Math.round(d/2)+" 26,"+(d-4):"M30,"+-d+" Q-10,"+Math.round(-d/2)+" 26,4";a.setAttribute("d",p),l.style.display=""}catch(t){}}))},pt=function(t,e,n){var r=e||document.body,o="jsondiffpatch-unchanged-",i={showing:o+"showing",hiding:o+"hiding",visible:o+"visible",hidden:o+"hidden"},s=r.classList;if(s){if(!n)return s.remove(i.showing),s.remove(i.hiding),s.remove(i.visible),s.remove(i.hidden),void(!1===t&&s.add(i.hidden));!1===t?(s.remove(i.showing),s.add(i.visible),setTimeout((function(){s.add(i.hiding)}),10)):(s.remove(i.hiding),s.add(i.showing),s.remove(i.hidden));var l=setInterval((function(){dt(r)}),100);setTimeout((function(){s.remove(i.showing),s.remove(i.hiding),!1===t?(s.add(i.hidden),s.remove(i.visible)):(s.add(i.visible),s.remove(i.hidden)),setTimeout((function(){s.remove(i.visible),clearInterval(l)}),n+400)}),n)}},ht=function(t,e){return pt(!1,t,e)},gt=void 0;function vt(t,e){return gt||(gt=new ut),gt.format(t,e)}var mt=Object.freeze({showUnchanged:pt,hideUnchanged:ht,default:ut,format:vt}),yt=function(t){function e(){r(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return s(e,t),o(e,[{key:"prepareContext",value:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("&nbsp;&nbsp;")},t.row=function(e,n){t.out('<tr><td style="white-space: nowrap;"><pre class="jsondiffpatch-annotated-indent" style="display: inline-block">'),t.out(t.indentPad),t.out('</pre><pre style="display: inline-block">'),t.out(e),t.out('</pre></td><td class="jsondiffpatch-delta-note"><div>'),t.out(n),t.out("</div></td></tr>")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.row("",'<pre class="jsondiffpatch-error">'+e+"</pre>")}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.out('<ul class="jsondiffpatch-textdiff">');for(var r=0,o=n.length;r<o;r++){var i=n[r];t.out('<li><div class="jsondiffpatch-textdiff-location"><span class="jsondiffpatch-textdiff-line-number">'+i.location.line+'</span><span class="jsondiffpatch-textdiff-char">'+i.location.chr+'</span></div><div class="jsondiffpatch-textdiff-line">');for(var s=i.pieces,l=0,a=s.length;l<a;l++){var c=s[l];t.out('<span class="jsondiffpatch-textdiff-'+c.type+'">'+c.text+"</span>")}t.out("</div></li>")}t.out("</ul>")}},{key:"rootBegin",value:function(t,e,n){t.out('<table class="jsondiffpatch-annotated-delta">'),"node"===e&&(t.row("{"),t.indent()),"array"===n&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"rootEnd",value:function(t,e){"node"===e&&(t.indent(-1),t.row("}")),t.out("</table>")}},{key:"nodeBegin",value:function(t,e,n,r,o){t.row("&quot;"+e+"&quot;: {"),"node"===r&&t.indent(),"array"===o&&t.row('"_t": "a",',"Array delta (member names indicate array indices)")}},{key:"nodeEnd",value:function(t,e,n,r,o,i){"node"===r&&t.indent(-1),t.row("}"+(i?"":","))}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}}]),e}(at),bt=function(t){return'<pre style="display:inline-block">&quot;'+t+"&quot;</pre>"},$t={added:function(t,e,n,r){var o=" <pre>([newValue])</pre>";return void 0===r?"new value"+o:"number"==typeof r?"insert at index "+r+o:"add property "+bt(r)+o},modified:function(t,e,n,r){var o=" <pre>([previousValue, newValue])</pre>";return void 0===r?"modify value"+o:"number"==typeof r?"modify at index "+r+o:"modify property "+bt(r)+o},deleted:function(t,e,n,r){var o=" <pre>([previousValue, 0, 0])</pre>";return void 0===r?"delete value"+o:"number"==typeof r?"remove index "+r+o:"delete property "+bt(r)+o},moved:function(t,e,n,r){return'move from <span title="(position to remove at original state)">index '+r+'</span> to <span title="(position to insert at final state)">index '+t[1]+"</span>"},textdiff:function(t,e,n,r){return"text diff"+(void 0===r?"":"number"==typeof r?" at index "+r:" at property "+bt(r))+', format is <a href="https://code.google.com/p/google-diff-match-patch/wiki/Unidiff">a variation of Unidiff</a>'}},xt=function(t,e){var n=this.getDeltaType(e),r=$t[n],o=r&&r.apply(r,Array.prototype.slice.call(arguments,1)),i=JSON.stringify(e,null,2);"textdiff"===n&&(i=i.split("\\n").join('\\n"+\n   "')),t.indent(),t.row(i,o),t.indent(-1)};yt.prototype.format_added=xt,yt.prototype.format_modified=xt,yt.prototype.format_deleted=xt,yt.prototype.format_moved=xt,yt.prototype.format_textdiff=xt;var wt=void 0;function _t(t,e){return wt||(wt=new yt),wt.format(t,e)}var kt=Object.freeze({default:yt,format:_t}),jt={add:"add",remove:"remove",replace:"replace",move:"move"},Ct=function(t){function e(){r(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!0,t}return s(e,t),o(e,[{key:"prepareContext",value:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.result=[],t.path=[],t.pushCurrentOp=function(t){var e=t.op,n=t.value,r={op:e,path:this.currentPath()};void 0!==n&&(r.value=n),this.result.push(r)},t.pushMoveOp=function(t){var e=this.currentPath();this.result.push({op:jt.move,from:e,path:this.toPath(t)})},t.currentPath=function(){return"/"+this.path.join("/")},t.toPath=function(t){var e=this.path.slice();return e[e.length-1]=t,"/"+e.join("/")}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.out("[ERROR] "+e)}},{key:"rootBegin",value:function(){}},{key:"rootEnd",value:function(){}},{key:"nodeBegin",value:function(t,e,n){t.path.push(n)}},{key:"nodeEnd",value:function(t){t.path.pop()}},{key:"format_unchanged",value:function(){}},{key:"format_movedestination",value:function(){}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){t.pushCurrentOp({op:jt.add,value:e[0]})}},{key:"format_modified",value:function(t,e){t.pushCurrentOp({op:jt.replace,value:e[1]})}},{key:"format_deleted",value:function(t){t.pushCurrentOp({op:jt.remove})}},{key:"format_moved",value:function(t,e){var n=e[1];t.pushMoveOp(n)}},{key:"format_textdiff",value:function(){throw new Error("Not implemented")}},{key:"format",value:function(t,e){var n={};return this.prepareContext(n),this.recurse(n,t,e),n.result}}]),e}(at),Ot=function(t){return t[t.length-1]},qt=function(t,e){return t.sort(e),t},Et=function(t,e){var n=parseInt(t,10),r=parseInt(e,10);return isNaN(n)||isNaN(r)?0:r-n},Tt=function(t){return qt(t,(function(t,e){var n=t.path.split("/"),r=e.path.split("/");return n.length!==r.length?n.length-r.length:Et(Ot(n),Ot(r))}))},St=function(t,e){var n=Array(e.length+1).fill().map((function(){return[]}));return t.map((function(t){var n=e.map((function(e){return e(t)})).indexOf(!0);return n<0&&(n=e.length),{item:t,position:n}})).reduce((function(t,e){return t[e.position].push(e.item),t}),n)},At=function(t){return"move"===t.op},Nt=function(t){return"remove"===t.op},Mt=function(t){var e=St(t,[At,Nt]),n=a(e,3),r=n[0],o=n[1],i=n[2],s=Tt(o);return[].concat(c(s),c(r),c(i))},Dt=void 0,Rt=function(t,e){return Dt||(Dt=new Ct),Mt(Dt.format(t,e))},Pt=function(t,e){console.log(Rt(t,e))},It=Object.freeze({default:Ct,partitionOps:St,format:Rt,log:Pt});function zt(t){return e&&e[t]||function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}}var Bt={added:zt("green"),deleted:zt("red"),movedestination:zt("gray"),moved:zt("yellow"),unchanged:zt("gray"),error:zt("white.bgRed"),textDiffLine:zt("gray")},Ft=function(t){function e(){r(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.includeMoveDestinations=!1,t}return s(e,t),o(e,[{key:"prepareContext",value:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareContext",this).call(this,t),t.indent=function(t){this.indentLevel=(this.indentLevel||0)+(void 0===t?1:t),this.indentPad=new Array(this.indentLevel+1).join("  "),this.outLine()},t.outLine=function(){this.buffer.push("\n"+(this.indentPad||""))},t.out=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,o=e.length;r<o;r++){var i=e[r].split("\n").join("\n"+(this.indentPad||""));this.color&&this.color[0]&&(i=this.color[0](i)),this.buffer.push(i)}},t.pushColor=function(t){this.color=this.color||[],this.color.unshift(t)},t.popColor=function(){this.color=this.color||[],this.color.shift()}}},{key:"typeFormattterErrorFormatter",value:function(t,e){t.pushColor(Bt.error),t.out("[ERROR]"+e),t.popColor()}},{key:"formatValue",value:function(t,e){t.out(JSON.stringify(e,null,2))}},{key:"formatTextDiffString",value:function(t,e){var n=this.parseTextDiff(e);t.indent();for(var r=0,o=n.length;r<o;r++){var i=n[r];t.pushColor(Bt.textDiffLine),t.out(i.location.line+","+i.location.chr+" "),t.popColor();for(var s=i.pieces,l=0,a=s.length;l<a;l++){var c=s[l];t.pushColor(Bt[c.type]),t.out(c.text),t.popColor()}r<o-1&&t.outLine()}t.indent(-1)}},{key:"rootBegin",value:function(t,e,n){t.pushColor(Bt[e]),"node"===e&&(t.out("array"===n?"[":"{"),t.indent())}},{key:"rootEnd",value:function(t,e,n){"node"===e&&(t.indent(-1),t.out("array"===n?"]":"}")),t.popColor()}},{key:"nodeBegin",value:function(t,e,n,r,o){t.pushColor(Bt[r]),t.out(n+": "),"node"===r&&(t.out("array"===o?"[":"{"),t.indent())}},{key:"nodeEnd",value:function(t,e,n,r,o,i){"node"===r&&(t.indent(-1),t.out("array"===o?"]":"}"+(i?"":","))),i||t.outLine(),t.popColor()}},{key:"format_unchanged",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_movedestination",value:function(t,e,n){void 0!==n&&this.formatValue(t,n)}},{key:"format_node",value:function(t,e,n){this.formatDeltaChildren(t,e,n)}},{key:"format_added",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_modified",value:function(t,e){t.pushColor(Bt.deleted),this.formatValue(t,e[0]),t.popColor(),t.out(" => "),t.pushColor(Bt.added),this.formatValue(t,e[1]),t.popColor()}},{key:"format_deleted",value:function(t,e){this.formatValue(t,e[0])}},{key:"format_moved",value:function(t,e){t.out("==> "+e[1])}},{key:"format_textdiff",value:function(t,e){this.formatTextDiffString(t,e[0])}}]),e}(at),Lt=void 0,Ut=function(t,e){return Lt||(Lt=new Ft),Lt.format(t,e)};function Vt(t,e){console.log(Ut(t,e))}var Gt=Object.freeze({default:Ft,format:Ut,log:Vt}),Kt=Object.freeze({base:ct,html:mt,annotated:kt,jsonpatch:It,console:Gt});function Ht(t,e){var n=void 0;return"string"==typeof e&&(n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d*))?(Z|([+-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6],+(n[7]||0))):e}function Jt(t){return new nt(t)}var Yt=void 0;function Qt(){return Yt||(Yt=new nt),Yt.diff.apply(Yt,arguments)}function Zt(){return Yt||(Yt=new nt),Yt.patch.apply(Yt,arguments)}function Wt(){return Yt||(Yt=new nt),Yt.unpatch.apply(Yt,arguments)}function Xt(){return Yt||(Yt=new nt),Yt.reverse.apply(Yt,arguments)}function te(){return Yt||(Yt=new nt),Yt.clone.apply(Yt,arguments)}t.DiffPatcher=nt,t.formatters=Kt,t.console=Gt,t.create=Jt,t.dateReviver=Ht,t.diff=Qt,t.patch=Zt,t.unpatch=Wt,t.reverse=Xt,t.clone=te,Object.defineProperty(t,"__esModule",{value:!0})}(e,Mt)}(0,Nt.exports);const Dt=new Nt.exports.DiffPatcher({arrays:{detectMove:!1,includeValueOnMove:!1},textDiff:{minLength:1}});function Rt(t,e){return Dt.diff(t,e)}const Pt=["docChanged","isGeneric","scrolledIntoView","selectionSet","storedMarksSet"];function It(t){return Object.keys(t).concat(Pt).reduce(((e,n)=>(e[n]=t[n],e)),{})}function zt(t){return{type:t.type,empty:t.empty,anchor:t.anchor,head:t.head,from:t.from,to:t.to}}function Bt(t){return("00"+t).slice(-2)}const Ft=t=>{const e=new Date(t);return[Bt(e.getHours()),Bt(e.getMinutes()),Bt(e.getSeconds()),(n=e.getMilliseconds(),("000"+n).slice(-3))].join(":");var n},Lt=/(&lt;\/?[\w\d\s="']+&gt;)/gim,Ut=t=>t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(Lt,"<span style='color: cadetblue;'>$&</span>");const Vt=mt(new Map),Gt=mt([]),Kt=mt(void 0);function Ht(t,e,n){const r=c(Vt),o=c(Gt)[0],i=function(t,e,n,r){const o=r?r.state:n,i=Rt(o.doc.toJSON(),e.doc.toJSON()),s=Rt(zt(o.selection),zt(e.selection));return{id:Math.random().toString()+Math.random().toString(),state:e,tr:It(t),timestamp:t.time,timeStr:Ft(t.time),contentDiff:i,selectionDiff:s,selectionHtml:Ut(St.prettyPrint([].join("\n"),{max_char:60,indent_size:2}))}}(t,e,n,r.get((null==o?void 0:o.topEntryId)||""));Vt.update((t=>new Map(t.set(i.id,i)))),Kt.set(i);const s=!i.contentDiff;if((null==o?void 0:o.isGroup)&&s){const t={isGroup:s,entryIds:[i.id,...o.entryIds],topEntryId:i.id,expanded:o.expanded};Gt.update((e=>[t,...e.slice(1)]))}else{const t={isGroup:s,entryIds:[i.id],topEntryId:i.id,expanded:!1};Gt.update((e=>[t,...e]))}}function Jt(){Vt.set(new Map),Gt.set([]),Kt.set(void 0)}const Yt=["jsonID","empty","anchor","from","head","to"],Qt=["$anchor","$head","$cursor","$to","$from"],Zt=["nodeAfter","nodeBefore","textOffset"];function Wt(t){return Yt.reduce(((e,n)=>(e[n]=t[n],e)),{})}function Xt(t){return Yt.concat(Qt).reduce(((e,n)=>{let r=t[n];if(r&&Qt.includes(n)){const t={};Zt.forEach((e=>{t[e]=r[e]})),r=Object.assign(Object.assign({},r),t)}return e[n]=r,e}),{})}function te(t,e,n,r,o){const i=o?[...o.path,t]:[];return{id:`[${i.join(",")}]`,index:t,key:e,value:n,depth:r+1,collapsed:!0,type:ee(n),path:i,parentId:o?o.id:null,circularOfId:null,children:[]}}function ee(t){return Array.isArray(t)?"array":t instanceof Map?"map":t instanceof Set?"set":t instanceof Date?"date":null===t?"null":typeof t}function ne(t,e,n,r,o,i,s,l,a,c,u){var f;if((null===(f=u.omitKeys)||void 0===f?void 0:f.includes(e))||u.maxDepth&&r>=u.maxDepth)return null;const d=te(t,e,n,r,i),p=l.get(d.id);if(o?d.collapsed=!1:p&&!c?d.collapsed=p.collapsed:u.shouldExpandNode&&(d.collapsed=!u.shouldExpandNode(d)),s.set(d.id,d),function(t,e,n,r){if(!e)return!0;if(t.collapsed&&(null==e?void 0:e.collapsed))return!1;if(!r.stopCircularRecursion)return!0;if(r.isCircularNode)return r.isCircularNode(t,n);if("object"===t.type||"array"===t.type){const e=n.get(t.value);if(e&&t.id!==e.id)return t.circularOfId=e.id,!1;n.set(t.value,t)}return!0}(d,i,a,u)){const t=u.mapChildren&&u.mapChildren(n,ee(n),d),e=null!=t?t:function(t,e){switch(e){case"array":return t.map(((t,e)=>[e.toString(),t]));case"map":return Array.from(t.entries()).map((([t,e],n)=>[`[map entry ${n}]`,{"[key]":t,"[value]":e}]));case"set":return Array.from(t.values()).map(((t,e)=>[`[set entry ${e}]`,t]));case"object":return Object.entries(t);default:return[]}}(n,ee(n));d.children=e.map((([t,e],n)=>ne(n,t,e,r+1,!1,d,s,l,a,c,u))).filter((t=>null!==t))}return d}const re=t=>{const e=te(0,"root",[],0,null),n=mt(e),r=mt(new Map),o=mt(new Map);return{tree:n,treeMap:r,defaultRootNode:e,init(t,i,s){t?n.set(t):n.set(e),r.set(i),o.set(s)},getNode:t=>c(r).get(t),toggleCollapse(e){const n=c(r).get(e);if(!n)return void console.warn(`Attempted to collapse non-existent node: ${e}`);const o=Object.assign(Object.assign({},n),{collapsed:!n.collapsed});r.update((t=>new Map(t.set(n.id,o))));const i=c(t.recursionOpts);i&&this.expandNodeChildren(o,i)},expandNodeChildren(t,e){const n=this.getNode((null==t?void 0:t.parentId)||"")||null;if(!n)throw Error("No parent in expandNodeChildren for node: "+t);const i=new Map(c(r)),s=c(r),l=c(o),a=ne(t.index,t.key,t.value,t.depth,!t.collapsed,n,i,s,l,!1,e);a&&(n.children=n.children.map((t=>t.id===a.id?a:t)),i.set(a.id,a),i.set(n.id,n),r.set(i),o.set(l))},expandAllNodesToNode(t){const e=new Map(c(r));!function t(e,n){n&&(e.set(n.id,Object.assign(Object.assign({},n),{collapsed:!1})),n.parentId&&t(e,e.get(n.parentId)))}(e,e.get(t)),r.set(e)}}};function oe(t,e,n){const r=t.slice();return r[14]=e[n],r}function ie(t){let e,n,r,o,i;return{c(){e=_("button"),n=j("▶"),E(e,"class",r=y("arrow-btn "+(t[0].collapsed?"collapsed":""))+" svelte-ngcjq5")},m(r,s){$(r,e,s),b(e,n),o||(i=q(e,"click",t[9]),o=!0)},p(t,n){1&n&&r!==(r=y("arrow-btn "+(t[0].collapsed?"collapsed":""))+" svelte-ngcjq5")&&E(e,"class",r)},d(t){t&&x(e),o=!1,i()}}}function se(t){let n,r=t[5].formatValue(t[0].value,t[0])+"";return{c(){n=j(r)},m(t,e){$(t,n,e)},p(t,e){1&e&&r!==(r=t[5].formatValue(t[0].value,t[0])+"")&&A(n,r)},i:e,o:e,d(t){t&&x(n)}}}function le(t){let e,n,r;var o=t[3];function i(t){return{props:{value:t[0].value,node:t[0],defaultFormatter:t[10]}}}return o&&(e=new o(i(t))),{c(){e&&ot(e.$$.fragment),n=O()},m(t,o){e&&it(e,t,o),$(t,n,o),r=!0},p(t,r){const s={};if(1&r&&(s.value=t[0].value),1&r&&(s.node=t[0]),o!==(o=t[3])){if(e){tt();const t=e;rt(t.$$.fragment,1,0,(()=>{st(t,1)})),et()}o?(e=new o(i(t)),ot(e.$$.fragment),nt(e.$$.fragment,1),it(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&nt(e.$$.fragment,t),r=!0)},o(t){e&&rt(e.$$.fragment,t),r=!1},d(t){t&&x(n),e&&st(e,t)}}}function ae(t){let n,r,o;return{c(){n=_("button"),n.textContent="log",E(n,"class","log-copy-button svelte-ngcjq5")},m(e,i){$(e,n,i),r||(o=q(n,"click",t[7]),r=!0)},p:e,d(t){t&&x(n),r=!1,o()}}}function ce(t){let n,r,o;return{c(){n=_("button"),n.textContent="copy",E(n,"class","log-copy-button svelte-ngcjq5")},m(e,i){$(e,n,i),r||(o=q(n,"click",t[8]),r=!0)},p:e,d(t){t&&x(n),r=!1,o()}}}function ue(t){let e,n,r,o=t[0].children,i=[];for(let e=0;e<o.length;e+=1)i[e]=fe(oe(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=_("li"),n=_("ul");for(let t=0;t<i.length;t+=1)i[t].c();E(n,"class","svelte-ngcjq5"),E(e,"class","row svelte-ngcjq5")},m(t,o){$(t,e,o),b(e,n);for(let t=0;t<i.length;t+=1)i[t].m(n,null);r=!0},p(t,e){if(1&e){let r;for(o=t[0].children,r=0;r<o.length;r+=1){const s=oe(t,o,r);i[r]?(i[r].p(s,e),nt(i[r],1)):(i[r]=fe(s),i[r].c(),nt(i[r],1),i[r].m(n,null))}for(tt(),r=o.length;r<i.length;r+=1)s(r);et()}},i(t){if(!r){for(let t=0;t<o.length;t+=1)nt(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(t){t&&x(e),w(i,t)}}}function fe(t){let e,n;return e=new he({props:{id:t[14].id}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.id=t[14].id),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function de(t){let e,n,r,o,s,l,a,c,u,f,d,p,h,g,v,m,y,w,k,T=t[0].key+"",S=t[2]&&ie(t);const M=[le,se],D=[];function R(t,e){return t[3]?0:1}c=R(t),u=D[c]=M[c](t);let P=t[1].showLogButton&&ae(t),I=t[1].showCopyButton&&ce(t),z=!t[0].collapsed&&t[2]&&ue(t);return{c(){e=_("li"),S&&S.c(),n=C(),r=_("div"),o=j(T),s=j(":"),l=C(),a=_("div"),u.c(),d=C(),p=_("div"),P&&P.c(),h=C(),I&&I.c(),v=C(),z&&z.c(),m=O(),E(r,"class","node-key svelte-ngcjq5"),N(r,"has-children",t[2]),N(r,"p-left",!t[2]),E(a,"class","node-value svelte-ngcjq5"),E(a,"data-type",f=t[0].type),N(a,"expanded",!t[0].collapsed&&t[2]),N(a,"has-children",t[2]),E(p,"class","buttons svelte-ngcjq5"),E(e,"class","row svelte-ngcjq5"),E(e,"data-tree-id",g=t[0].id),N(e,"collapsed",t[0].collapsed&&t[2])},m(i,u){$(i,e,u),S&&S.m(e,null),b(e,n),b(e,r),b(r,o),b(r,s),b(e,l),b(e,a),D[c].m(a,null),b(e,d),b(e,p),P&&P.m(p,null),b(p,h),I&&I.m(p,null),$(i,v,u),z&&z.m(i,u),$(i,m,u),y=!0,w||(k=[q(r,"click",t[9]),q(a,"click",t[9])],w=!0)},p(t,[i]){t[2]?S?S.p(t,i):(S=ie(t),S.c(),S.m(e,n)):S&&(S.d(1),S=null),(!y||1&i)&&T!==(T=t[0].key+"")&&A(o,T),4&i&&N(r,"has-children",t[2]),4&i&&N(r,"p-left",!t[2]);let s=c;c=R(t),c===s?D[c].p(t,i):(tt(),rt(D[s],1,1,(()=>{D[s]=null})),et(),u=D[c],u?u.p(t,i):(u=D[c]=M[c](t),u.c()),nt(u,1),u.m(a,null)),(!y||1&i&&f!==(f=t[0].type))&&E(a,"data-type",f),5&i&&N(a,"expanded",!t[0].collapsed&&t[2]),4&i&&N(a,"has-children",t[2]),t[1].showLogButton?P?P.p(t,i):(P=ae(t),P.c(),P.m(p,h)):P&&(P.d(1),P=null),t[1].showCopyButton?I?I.p(t,i):(I=ce(t),I.c(),I.m(p,null)):I&&(I.d(1),I=null),(!y||1&i&&g!==(g=t[0].id))&&E(e,"data-tree-id",g),5&i&&N(e,"collapsed",t[0].collapsed&&t[2]),!t[0].collapsed&&t[2]?z?(z.p(t,i),5&i&&nt(z,1)):(z=ue(t),z.c(),nt(z,1),z.m(m.parentNode,m)):z&&(tt(),rt(z,1,1,(()=>{z=null})),et())},i(t){y||(nt(u),nt(z),y=!0)},o(t){rt(u),rt(z),y=!1},d(t){t&&x(e),S&&S.d(),D[c].d(),P&&P.d(),I&&I.d(),t&&x(v),z&&z.d(t),t&&x(m),w=!1,i(k)}}}function pe(t,n,r){let o,i,s,l,c,f=e;t.$$.on_destroy.push((()=>f()));let{id:d}=n;const{treeStore:p,propsStore:h,rootElementStore:g}=z("svelte-tree-view");let v;return u(t,g,(t=>r(12,l=t))),p.treeMap.subscribe((t=>{const e=t.get(d);e&&v!==e&&r(0,v=e)})),t.$$set=t=>{"id"in t&&r(11,d=t.id)},t.$$.update=()=>{if(2048&t.$$.dirty){let t=p.getNode(d);if(!t)throw Error("[svelte-tree-view] TreeViewNode.svelte received undefined node from treeMapStore whereas it should be already unmounted!");r(0,v=t)}1&t.$$.dirty&&r(2,o=v&&v.children.length>0),2&t.$$.dirty&&r(3,s=c.valueComponent)},r(4,i=h.props),f(),f=a(i,(t=>r(1,c=t))),[v,c,o,s,i,h,g,function(){console.info("%c [svelte-tree-view]: Property added to window._node","color: #b8e248"),console.log(v.value);try{"undefined"!=typeof window&&(window._node=v.value)}catch(t){console.error("Failed to set _node, window was undefined")}},function(){try{navigator.clipboard.writeText(JSON.stringify(v.value))}catch(t){console.error("Copying node to clipboard failed: ",t)}},function(){var t;o?p.toggleCollapse(v.id):v.circularOfId&&(p.expandAllNodesToNode(v.circularOfId),null===(t=l.querySelector(`li[data-tree-id="${v.circularOfId}"]`))||void 0===t||t.scrollIntoView())},function(t){return h.formatValue(t,v)},d]}dt("ul.svelte-ngcjq5.svelte-ngcjq5{display:flex;flex-direction:column;height:max-content;list-style:none;padding:0;padding-left:var(--tree-view-left-indent);margin:0;width:100%}li.svelte-ngcjq5.svelte-ngcjq5{align-items:baseline;display:flex;height:max-content;line-height:var(--tree-view-line-height);list-style:none;width:100%}li.svelte-ngcjq5+li.svelte-ngcjq5{margin-top:0.25em}.empty-block.svelte-ngcjq5.svelte-ngcjq5{visibility:hidden}.node-key.svelte-ngcjq5.svelte-ngcjq5{color:var(--tree-view-base0D);margin-right:var(--tree-view-key-margin-right)}.node-key.has-children.svelte-ngcjq5.svelte-ngcjq5{cursor:pointer}.node-key.p-left.svelte-ngcjq5.svelte-ngcjq5{padding-left:1.1em}.node-value.svelte-ngcjq5.svelte-ngcjq5{color:var(--tree-view-base0B);margin-right:0.5em;word-break:break-all}.node-value[data-type=number].svelte-ngcjq5.svelte-ngcjq5,.node-value[data-type=boolean].svelte-ngcjq5.svelte-ngcjq5{color:var(--tree-view-base09)}.node-value[data-type=null].svelte-ngcjq5.svelte-ngcjq5,.node-value[data-type=undefined].svelte-ngcjq5.svelte-ngcjq5{color:var(--tree-view-base08)}.node-value.expanded.svelte-ngcjq5.svelte-ngcjq5{color:var(--tree-view-base03)}.node-value.has-children.svelte-ngcjq5.svelte-ngcjq5{cursor:pointer}.arrow-btn.svelte-ngcjq5.svelte-ngcjq5{background:transparent;border:0;color:var(--tree-view-base0D);cursor:pointer;margin-right:0.7em;padding:0;transition:all 150ms ease 0s;transform:rotateZ(90deg);transform-origin:47% 43%;position:relative;line-height:1.1em;font-size:0.75em}.arrow-btn.collapsed.svelte-ngcjq5.svelte-ngcjq5{transform:rotateZ(0deg)}.buttons.svelte-ngcjq5.svelte-ngcjq5{display:flex;flex-wrap:wrap}.log-copy-button.svelte-ngcjq5.svelte-ngcjq5{background:transparent;border:0;color:var(--tree-view-base0D);cursor:pointer;margin:0;padding:0 0.5em}.log-copy-button.svelte-ngcjq5.svelte-ngcjq5:hover{background:rgba(255, 162, 177, 0.4);border-radius:2px;color:var(--tree-view-base07)}");class he extends ct{constructor(t){super(),at(this,t,pe,de,l,{id:11})}}function ge(t,e,n){const r=t.slice();return r[18]=e[n],r}function ve(t){let e,n;return e=new he({props:{id:t[18].id}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.id=t[18].id),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function me(t){let e,n,r,o=t[2].children,i=[];for(let e=0;e<o.length;e+=1)i[e]=ve(ge(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=_("ul");for(let t=0;t<i.length;t+=1)i[t].c();E(e,"class",n=y(`${t[3].class||""} svelte-tree-view`)+" svelte-q3pq1s")},m(n,o){$(n,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);t[13](e),r=!0},p(t,[l]){if(4&l){let n;for(o=t[2].children,n=0;n<o.length;n+=1){const r=ge(t,o,n);i[n]?(i[n].p(r,l),nt(i[n],1)):(i[n]=ve(r),i[n].c(),nt(i[n],1),i[n].m(e,null))}for(tt(),n=o.length;n<i.length;n+=1)s(n);et()}(!r||8&l&&n!==(n=y(`${t[3].class||""} svelte-tree-view`)+" svelte-q3pq1s"))&&E(e,"class",n)},i(t){if(!r){for(let t=0;t<o.length;t+=1)nt(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(n){n&&x(e),w(i,n),t[13](null)}}}function ye(t,r,o){let i,s,l=e;var u;t.$$.on_destroy.push((()=>l()));let{data:f,theme:d,showLogButton:p=!1,showCopyButton:h=!1,valueComponent:g,recursionOpts:m={},valueFormatter:y}=r,b=null;const $={maxDepth:16,omitKeys:[],stopCircularRecursion:!1,shouldExpandNode:()=>!1};let x={showLogButton:p,showCopyButton:h,valueComponent:g,recursionOpts:Object.assign(Object.assign({},$),m),valueFormatter:y};const w=(t=>{const e=mt(t),n=yt(e,(t=>t.recursionOpts));return{props:e,recursionOpts:n,setProps(t){e.set(t)},formatValue(t,n){const{valueFormatter:r}=c(e),o=r?r(t,n):void 0;if(o)return o;switch(n.type){case"array":return`${n.circularOfId?"circular":""} [] ${t.length} items`;case"object":return`${n.circularOfId?"circular":""} {} ${Object.keys(t).length} keys`;case"map":case"set":return`${n.circularOfId?"circular":""} () ${t.size} entries`;case"date":return`${t.toISOString()}`;case"string":return`"${t}"`;case"boolean":return t?"true":"false";default:return t}}}})(x),_=(()=>{const t=mt(null);return{set:t.set,subscribe:t.subscribe}})(),k=re(w);return I("svelte-tree-view",{propsStore:w,rootElementStore:_,treeStore:k}),P((()=>{_.set(b)})),t.$$set=t=>{o(3,r=n(n({},r),v(t))),"data"in t&&o(4,f=t.data),"theme"in t&&o(5,d=t.theme),"showLogButton"in t&&o(6,p=t.showLogButton),"showCopyButton"in t&&o(7,h=t.showCopyButton),"valueComponent"in t&&o(8,g=t.valueComponent),"recursionOpts"in t&&o(9,m=t.recursionOpts),"valueFormatter"in t&&o(10,y=t.valueFormatter)},t.$$.update=()=>{if(5568&t.$$.dirty&&o(12,x={showLogButton:p,showCopyButton:h,valueComponent:g,valueFormatter:y,recursionOpts:x.recursionOpts}),6672&t.$$.dirty){const t=Object.assign(Object.assign({},$),m),e=(null===o(11,u=null==x?void 0:x.recursionOpts)||void 0===u?void 0:u.shouldExpandNode)!==t.shouldExpandNode,n=c(k.treeMap),{treeMap:r,tree:i,iteratedValues:s}=function(t,e,n,r){const o=new Map,i=new Map;return{treeMap:o,tree:ne(-1,"root",t,-1,!0,null,o,e,i,r,n),iteratedValues:i}}(f,n,t,e);k.init(i,r,s),o(12,x.recursionOpts=t,x),w.setProps(x)}if(33&t.$$.dirty&&d&&b){let t;for(t in d){const e=d[t];b&&t.includes("--tree-view-base")&&e&&b.style.setProperty(`--tree-view-${t}`,e)}}},o(1,i=k.tree),l(),l=a(i,(t=>o(2,s=t))),r=v(r),[b,i,s,r,f,d,p,h,g,m,y,u,x,function(t){L[t?"unshift":"push"]((()=>{b=t,o(0,b)}))}]}dt(".svelte-q3pq1s{box-sizing:border-box}:root{--tree-view-base00:#363755;--tree-view-base01:#604d49;--tree-view-base02:#6d5a55;--tree-view-base03:#d1929b;--tree-view-base04:#b79f8d;--tree-view-base05:#f9f8f2;--tree-view-base06:#f7f4f1;--tree-view-base07:#faf8f5;--tree-view-base08:#fa3e7e;--tree-view-base09:#fd993c;--tree-view-base0A:#f6bf81;--tree-view-base0B:#b8e248;--tree-view-base0C:#b4efe4;--tree-view-base0D:#85d9ef;--tree-view-base0E:#be87ff;--tree-view-base0F:#d6724c;--tree-view-font-family:'Helvetica Neue', 'Calibri Light', Roboto, sans-serif;--tree-view-font-size:13px;--tree-view-left-indent:0.875em;--tree-view-line-height:1.1;--tree-view-key-margin-right:0.5em}ul.svelte-q3pq1s{background:var(--tree-view-base00);font-family:var(--tree-view-font-family);font-size:var(--tree-view-font-size);height:max-content;list-style:none;margin:0;padding:0;width:max-content}");class be extends ct{constructor(t){super(),at(this,t,ye,me,l,{data:4,theme:5,showLogButton:6,showCopyButton:7,valueComponent:8,recursionOpts:9,valueFormatter:10})}}dt("section.svelte-12c20rw{border-top:1px solid rgba(255, 162, 177, 0.2);color:var(--color-white);display:flex;height:calc(100% - var(--height-tabs-menu));width:100%}.split-view h2{color:var(--color-red-gray);font-family:var(--font-sans);font-size:var(--font-medium);font-weight:400;letter-spacing:1px;margin:0;text-transform:uppercase}.split-view > .left-panel{display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}.split-view > .right-panel{border-left:1px solid rgba(255, 162, 177, 0.2);display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}.split-view .hidden{visibility:hidden}");const $e=t=>({}),xe=t=>({class:"right-panel"}),we=t=>({}),_e=t=>({class:"left-panel"});function ke(t){let e,n,r;const o=t[1].left,i=f(o,t,t[0],_e),s=t[1].right,l=f(s,t,t[0],xe);return{c(){e=_("section"),i&&i.c(),n=C(),l&&l.c(),E(e,"class","split-view svelte-12c20rw")},m(t,o){$(t,e,o),i&&i.m(e,null),b(e,n),l&&l.m(e,null),r=!0},p(t,[e]){i&&i.p&&(!r||1&e)&&h(i,o,t,t[0],r?p(o,t[0],e,we):g(t[0]),_e),l&&l.p&&(!r||1&e)&&h(l,s,t,t[0],r?p(s,t[0],e,$e):g(t[0]),xe)},i(t){r||(nt(i,t),nt(l,t),r=!0)},o(t){rt(i,t),rt(l,t),r=!1},d(t){t&&x(e),i&&i.d(t),l&&l.d(t)}}}function je(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=t=>{"$$scope"in t&&n(0,o=t.$$scope)},[o,r]}class Ce extends ct{constructor(t){super(),at(this,t,je,ke,l,{})}}function Oe(t){let e,r,o,s;const l=t[3].default,a=f(l,t,t[2],null);let c=[t[1]],u={};for(let t=0;t<c.length;t+=1)u=n(u,c[t]);return{c(){e=_("button"),a&&a.c(),T(e,u),N(e,"selected",t[0]),N(e,"svelte-1fdsptc",!0)},m(n,i){$(n,e,i),a&&a.m(e,null),e.autofocus&&e.focus(),r=!0,o||(s=[q(e,"click",t[4]),q(e,"mouseover",t[5]),q(e,"mouseenter",t[6]),q(e,"mouseleave",t[7]),q(e,"focus",t[8])],o=!0)},p(t,[n]){a&&a.p&&(!r||4&n)&&h(a,l,t,t[2],r?p(l,t[2],n,null):g(t[2]),null),T(e,u=function(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const s=t[i],l=e[i];if(l){for(const t in s)t in l||(r[t]=1);for(const t in l)o[t]||(n[t]=l[t],o[t]=1);t[i]=l}else for(const t in s)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(c,[t[1]])),N(e,"selected",t[0]),N(e,"svelte-1fdsptc",!0)},i(t){r||(nt(a,t),r=!0)},o(t){rt(a,t),r=!1},d(t){t&&x(e),a&&a.d(t),o=!1,i(s)}}}function qe(t,e,r){const o=["selected"];let i=m(e,o),{$$slots:s={},$$scope:l}=e,{selected:a=!1}=e,c={class:[i.class]};return t.$$set=t=>{e=n(n({},e),v(t)),r(9,i=m(e,o)),"selected"in t&&r(0,a=t.selected),"$$scope"in t&&r(2,l=t.$$scope)},[a,c,l,s,function(e){B.call(this,t,e)},function(e){B.call(this,t,e)},function(e){B.call(this,t,e)},function(e){B.call(this,t,e)},function(e){B.call(this,t,e)}]}dt(".hidden.svelte-1fdsptc{display:none;visibility:hidden}button.svelte-1fdsptc{background:transparent;border:0;border-radius:2px;color:var(--color-gray-light);cursor:pointer;font-size:var(--font-small);padding:6px 10px;text-transform:uppercase}button.svelte-1fdsptc:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-1fdsptc{background:rgba(255, 162, 177, 0.4)}");class Ee extends ct{constructor(t){super(),at(this,t,qe,Oe,l,{selected:0})}}function Te(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Se(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{$$slots:{default:[Te]},$$scope:{ctx:t}}}),i.$on("click",t[6]),l=new be({props:{class:"tree-view",data:t[0],showLogButton:!0,showCopyButton:!0,valueFormatter:Pe}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Current doc",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","top-row svelte-1h6tg0t"),E(e,"slot","left"),E(e,"class","left-panel svelte-1h6tg0t")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};1024&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};1&e&&(r.data=t[0]),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function Ae(t){let e;return{c(){e=_("span"),E(e,"class","caret-icon svelte-1h6tg0t"),N(e,"expanded",t[5])},m(t,n){$(t,e,n)},p(t,n){32&n&&N(e,"expanded",t[5])},d(t){t&&x(e)}}}function Ne(t){let e,n;return e=new be({props:{class:"tree-view",data:t[2]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.data=t[2]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Me(t){let n;return{c(){n=_("div"),n.textContent="No active marks",E(n,"class","no-marks svelte-1h6tg0t")},m(t,e){$(t,n,e)},p:e,i:e,o:e,d(t){t&&x(n)}}}function De(t){let e,n,r,o,i,s,l,a,c,u,f,d,p,h,g,v,m,y,w;i=new Ee({props:{class:"selection-btn",$$slots:{default:[Ae]},$$scope:{ctx:t}}}),i.$on("click",t[7]),l=new be({props:{class:"tree-view",data:t[1]}});const k=[Me,Ne],j=[];function O(t,e){return 0===t[2].length?0:1}return d=O(t),p=j[d]=k[d](t),y=new be({props:{class:"tree-view",data:{nodeSize:t[3],childCount:t[4]}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Selection",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),a=C(),c=_("div"),u=_("h2"),u.textContent="Active marks",f=C(),p.c(),h=C(),g=_("div"),v=_("h2"),v.textContent="Document stats",m=C(),ot(y.$$.fragment),E(n,"class","top-row svelte-1h6tg0t"),E(e,"slot","right"),E(e,"class","right-panel svelte-1h6tg0t")},m(t,p){$(t,e,p),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),b(e,a),b(e,c),b(c,u),b(c,f),j[d].m(c,null),b(e,h),b(e,g),b(g,v),b(g,m),it(y,g,null),w=!0},p(t,e){const n={};1056&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};2&e&&(r.data=t[1]),l.$set(r);let o=d;d=O(t),d===o?j[d].p(t,e):(tt(),rt(j[o],1,1,(()=>{j[o]=null})),et(),p=j[d],p?p.p(t,e):(p=j[d]=k[d](t),p.c()),nt(p,1),p.m(c,null));const s={};24&e&&(s.data={nodeSize:t[3],childCount:t[4]}),y.$set(s)},i(t){w||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),nt(p),nt(y.$$.fragment,t),w=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),rt(p),rt(y.$$.fragment,t),w=!1},d(t){t&&x(e),st(i),st(l),j[d].d(),st(y)}}}function Re(t){let e,n;return e=new Ce({props:{$$slots:{right:[De],left:[Se]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};1087&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Pe(t,e){if("object"===e.type&&t.type)return`{} ${t.type}`}function Ie(t,e,n){const{view:r}=ft("editor-view");let o=r.state.doc.toJSON(),i=Wt(r.state.selection),s=r.state,l=[],a=r.state.doc.nodeSize,c=r.state.doc.childCount,u=!1;return Kt.subscribe((t=>{if(!t)return;const{state:e}=t;s=e,n(0,o=e.doc.toJSON()),n(1,i=u?Xt(e.selection):Wt(e.selection)),n(2,l=function(t){if(t.selection.empty){const e=t.selection.$from,n=t.storedMarks;return n?n.map((t=>t.type.name)):e.marks().map((t=>t.type.name))}{const e=t.selection.$head,n=t.selection.$anchor,r=new Set;return e.marks().forEach((t=>r.add(t.type.name))),n.marks().forEach((t=>r.add(t.type.name))),Array.from(r)}}(e)),n(3,a=e.doc.nodeSize),n(4,c=e.doc.childCount)})),[o,i,l,a,c,u,function(){console.log(o),window._doc=o},function(){n(5,u=!u),n(1,i=u?Xt(s.selection):Wt(s.selection))}]}dt("@charset \"UTF-8\";.top-row.svelte-1h6tg0t{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-1h6tg0t{overflow:scroll}.right-panel.svelte-1h6tg0t{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:200px;width:200px}.split-view .selection-btn{height:24px;width:35px}.caret-icon.svelte-1h6tg0t::before{content:'▶'}.caret-icon.expanded.svelte-1h6tg0t::before{content:'▼'}.no-marks.svelte-1h6tg0t{color:var(--color-blue-light);margin:0.5em 0 1em 1em}.split-view .tree-view{margin:0.5em 0 1em 0}");class ze extends ct{constructor(t){super(),at(this,t,Ie,Re,l,{})}}function Be(t,e,n){if("array"===e)return[]}function Fe(t,e){if("array"===e&&0===t[1]&&0===t[2])return[];if("array"===e&&"string"==typeof t[0]&&0===t[1]&&2===t[2])return[];if("array"===e&&1===t.length&&"object"==typeof t[0])return[];if("object"!==e||"a"!==t._t)return;const n=[];for(const e in t)"_t"!==e&&("_"===e.charAt(0)?n.push([e.substr(1),t[e]]):n.push([e,t[e]]));return n}function Le(t,e,n){const r=t.slice();return r[5]=e[n],r[7]=n,r}function Ue(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ve(t){let e,n,r,o=t[5].entries.length+"";return{c(){e=j("["),n=j(o),r=j("]")},m(t,o){$(t,e,o),$(t,n,o),$(t,r,o)},p(t,e){1&e&&o!==(o=t[5].entries.length+"")&&A(n,o)},d(t){t&&x(e),t&&x(n),t&&x(r)}}}function Ge(t){let e;return{c(){e=_("span"),E(e,"class","caret-icon svelte-11dhq1h"),N(e,"expanded",t[5].expanded)},m(t,n){$(t,e,n)},p(t,n){1&n&&N(e,"expanded",t[5].expanded)},d(t){t&&x(e)}}}function Ke(t){let e,n=t[5].entries,r=[];for(let e=0;e<n.length;e+=1)r[e]=He(Ue(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=O()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);$(t,e,n)},p(t,o){if(7&o){let i;for(n=t[5].entries,i=0;i<n.length;i+=1){const s=Ue(t,n,i);r[i]?r[i].p(s,o):(r[i]=He(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){w(r,t),t&&x(e)}}}function He(t){let e,n,r,o,i,s,l=t[8]?.timeStr+"";function a(){return t[4](t[8],t[7])}return{c(){e=_("li"),n=_("button"),r=j(l),o=C(),E(n,"class","p-left svelte-11dhq1h"),E(e,"class","svelte-11dhq1h"),N(e,"selected",t[1]===t[8]?.id)},m(t,l){$(t,e,l),b(e,n),b(n,r),b(e,o),i||(s=q(n,"click",a),i=!0)},p(n,o){t=n,1&o&&l!==(l=t[8]?.timeStr+"")&&A(r,l),3&o&&N(e,"selected",t[1]===t[8]?.id)},d(t){t&&x(e),i=!1,s()}}}function Je(t){let e,n,r,o,i,s,l,a,c,u,f=t[5]?.topEntry?.timeStr+"",d=t[5].isGroup&&Ve(t),p=t[5].isGroup&&t[5].entries.length>1&&Ge(t);function h(){return t[3](t[5],t[7])}let g=t[5].isGroup&&t[5].expanded&&Ke(t);return{c(){e=_("li"),n=_("button"),r=_("span"),o=j(f),i=C(),d&&d.c(),s=C(),p&&p.c(),l=C(),g&&g.c(),a=O(),E(n,"class","svelte-11dhq1h"),N(n,"is-group",t[5].isGroup),E(e,"class","svelte-11dhq1h"),N(e,"selected",!t[5].expanded&&t[1]===t[5]?.topEntry?.id)},m(t,f){$(t,e,f),b(e,n),b(n,r),b(r,o),b(r,i),d&&d.m(r,null),b(n,s),p&&p.m(n,null),$(t,l,f),g&&g.m(t,f),$(t,a,f),c||(u=q(n,"click",h),c=!0)},p(i,s){t=i,1&s&&f!==(f=t[5]?.topEntry?.timeStr+"")&&A(o,f),t[5].isGroup?d?d.p(t,s):(d=Ve(t),d.c(),d.m(r,null)):d&&(d.d(1),d=null),t[5].isGroup&&t[5].entries.length>1?p?p.p(t,s):(p=Ge(t),p.c(),p.m(n,null)):p&&(p.d(1),p=null),1&s&&N(n,"is-group",t[5].isGroup),3&s&&N(e,"selected",!t[5].expanded&&t[1]===t[5]?.topEntry?.id),t[5].isGroup&&t[5].expanded?g?g.p(t,s):(g=Ke(t),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},d(t){t&&x(e),d&&d.d(),p&&p.d(),t&&x(l),g&&g.d(t),t&&x(a),c=!1,u()}}}function Ye(t){let n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Je(Le(t,r,e));return{c(){n=_("ul");for(let t=0;t<o.length;t+=1)o[t].c();E(n,"class","svelte-11dhq1h")},m(t,e){$(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(7&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=Le(t,r,i);o[i]?o[i].p(s,e):(o[i]=Je(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(t){t&&x(n),w(o,t)}}}function Qe(t,e,n){let{listItems:r=[],selectedId:o,onSelect:i}=e;return t.$$set=t=>{"listItems"in t&&n(0,r=t.listItems),"selectedId"in t&&n(1,o=t.selectedId),"onSelect"in t&&n(2,i=t.onSelect)},[r,o,i,(t,e)=>t.topEntry&&i(t.topEntry.id,e,!0),(t,e)=>t&&i(t.id,e,!1)]}dt("@charset \"UTF-8\";ul.svelte-11dhq1h.svelte-11dhq1h{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-11dhq1h.svelte-11dhq1h{transition:background 0.1s}li.svelte-11dhq1h.svelte-11dhq1h:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}li.selected.svelte-11dhq1h.svelte-11dhq1h{background:rgba(255, 162, 177, 0.4)}li.svelte-11dhq1h+li.svelte-11dhq1h{border-top:1px solid var(--color-purple)}button.svelte-11dhq1h.svelte-11dhq1h{background:transparent;border:0;color:var(--color-gray-light);cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;justify-content:space-between;padding:6px 18px;text-transform:uppercase;width:100%}button.p-left.svelte-11dhq1h.svelte-11dhq1h{margin-left:1em}.caret-icon.svelte-11dhq1h.svelte-11dhq1h::before{content:'▶'}.caret-icon.expanded.svelte-11dhq1h.svelte-11dhq1h::before{content:'▼'}");class Ze extends ct{constructor(t){super(),at(this,t,Qe,Ye,l,{listItems:0,selectedId:1,onSelect:2})}}function We(t,e,n){const r=t.slice();return r[4]=e[n],r}function Xe(t){let e,n=t[0](t[1])+"";return{c(){e=j(n)},m(t,n){$(t,e,n)},p(t,r){3&r&&n!==(n=t[0](t[1])+"")&&A(e,n)},d(t){t&&x(e)}}}function tn(t){let e;function n(t,e){return 1===t[1].length?on:2===t[1].length?rn:3===t[1].length&&0===t[1][1]&&0===t[1][2]?nn:3===t[1].length&&2===t[1][2]?en:void 0}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=O()},m(t,n){o&&o.m(t,n),$(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o&&o.d(1),o=r&&r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o&&o.d(t),t&&x(e)}}}function en(t){let e,n=fn(t[1][0]),r=[];for(let e=0;e<n.length;e+=1)r[e]=cn(We(t,n,e));return{c(){e=_("span");for(let t=0;t<r.length;t+=1)r[t].c();E(e,"class","updated svelte-ld8g2r")},m(t,n){$(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(2&o){let i;for(n=fn(t[1][0]),i=0;i<n.length;i+=1){const s=We(t,n,i);r[i]?r[i].p(s,o):(r[i]=cn(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&x(e),w(r,t)}}}function nn(t){let e,n,r=dn(t[1][0])+"";return{c(){e=_("span"),n=j(r),E(e,"class","deleted svelte-ld8g2r")},m(t,r){$(t,e,r),b(e,n)},p(t,e){2&e&&r!==(r=dn(t[1][0])+"")&&A(n,r)},d(t){t&&x(e)}}}function rn(t){let e,n,r,o,i,s,l,a,c=dn(t[1][0])+"",u=dn(t[1][1])+"";return{c(){e=_("span"),n=_("span"),r=j(c),o=C(),i=_("span"),i.textContent="=>",s=C(),l=_("span"),a=j(u),E(n,"class","deleted svelte-ld8g2r"),E(i,"class","arrow svelte-ld8g2r"),E(l,"class","added svelte-ld8g2r"),E(e,"class","updated svelte-ld8g2r")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(e,o),b(e,i),b(e,s),b(e,l),b(l,a)},p(t,e){2&e&&c!==(c=dn(t[1][0])+"")&&A(r,c),2&e&&u!==(u=dn(t[1][1])+"")&&A(a,u)},d(t){t&&x(e)}}}function on(t){let e,n,r=dn(t[1][0])+"";return{c(){e=_("span"),n=j(r),E(e,"class","added svelte-ld8g2r")},m(t,r){$(t,e,r),b(e,n)},p(t,e){2&e&&r!==(r=dn(t[1][0])+"")&&A(n,r)},d(t){t&&x(e)}}}function sn(t){let e,n,r=t[4].raw+"";return{c(){e=_("span"),n=j(r)},m(t,r){$(t,e,r),b(e,n)},p(t,e){2&e&&r!==(r=t[4].raw+"")&&A(n,r)},d(t){t&&x(e)}}}function ln(t){let e,n,r=t[4].add+"";return{c(){e=_("span"),n=j(r),E(e,"class","added svelte-ld8g2r")},m(t,r){$(t,e,r),b(e,n)},p(t,e){2&e&&r!==(r=t[4].add+"")&&A(n,r)},d(t){t&&x(e)}}}function an(t){let e,n,r=t[4].delete+"";return{c(){e=_("span"),n=j(r),E(e,"class","deleted svelte-ld8g2r")},m(t,r){$(t,e,r),b(e,n)},p(t,e){2&e&&r!==(r=t[4].delete+"")&&A(n,r)},d(t){t&&x(e)}}}function cn(t){let e;function n(t,e){return t[4].delete?an:t[4].add?ln:sn}let r=n(t),o=r(t);return{c(){o.c(),e=O()},m(t,n){o.m(t,n),$(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&x(e)}}}function un(t){let n,r;function o(t,e){return(null==n||2&e)&&(n=!!Array.isArray(t[1])),n?tn:Xe}let i=o(t,-1),s=i(t);return{c(){s.c(),r=O()},m(t,e){s.m(t,e),$(t,r,e)},p(t,[e]){i===(i=o(t,e))&&s?s.p(t,e):(s.d(1),s=i(t),s&&(s.c(),s.m(r.parentNode,r)))},i:e,o:e,d(t){s.d(t),t&&x(r)}}}function fn(t){return t.split(/\n/gm).slice(1).map((t=>{return{[t.startsWith("-")?"delete":t.startsWith("+")?"add":"raw"]:(e=t.substr(1),e.replace(/\s/gm," "))};var e}))}function dn(t){return"string"==typeof t?t:function(t){if(null===t)return"null";const e=JSON.stringify(t);return void 0===e?"undefined":e.length>22?`${e.substr(0,15)}…${e.substr(-5)}`:e}(t)}function pn(t,e,n){let r,{value:o,node:i,defaultFormatter:s}=e;return t.$$set=t=>{"value"in t&&n(2,o=t.value),"node"in t&&n(3,i=t.node),"defaultFormatter"in t&&n(0,s=t.defaultFormatter)},t.$$.update=()=>{8&t.$$.dirty&&n(1,r=i.value)},[s,r,o,i]}dt(".added.svelte-ld8g2r.svelte-ld8g2r{display:inline-block;background:var(--color-green-light);border-radius:1px;color:var(--color-green);padding:1px 2px;text-indent:0;min-height:1ex}.deleted.svelte-ld8g2r.svelte-ld8g2r{display:inline-block;background:var(--color-red);border-radius:1px;color:var(--color-gray-light);padding:1px 2px;text-decoration:line-through;text-indent:0;min-height:1ex}.updated.svelte-ld8g2r.svelte-ld8g2r{word-break:break-all}.updated.svelte-ld8g2r .added.svelte-ld8g2r{background:var(--color-yellow)}.arrow.svelte-ld8g2r.svelte-ld8g2r{color:var(--color-green-light)}");class hn extends ct{constructor(t){super(),at(this,t,pn,un,l,{value:2,node:3,defaultFormatter:0})}}function gn(t){let e,n,r;return n=new Ze({props:{listItems:t[4],selectedId:t[0]?.id||"",onSelect:t[7]}}),{c(){e=_("div"),ot(n.$$.fragment),E(e,"slot","left"),E(e,"class","left-panel svelte-12tyzyz")},m(t,o){$(t,e,o),it(n,e,null),r=!0},p(t,e){const r={};16&e&&(r.listItems=t[4]),1&e&&(r.selectedId=t[0]?.id||""),n.$set(r)},i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&x(e),st(n)}}}function vn(t){let n;return{c(){n=_("div"),n.textContent="Docs are equal.",E(n,"class","equal-diff svelte-12tyzyz")},m(t,e){$(t,n,e)},p:e,i:e,o:e,d(t){t&&x(n)}}}function mn(t){let e,n,r,o,i,s,l,a,c,u,f,d,p,h=t[0].contentDiff&&yn(t),g=t[0].selectionDiff&&$n(t),v=t[0].selectionHtml.length>0&&wn(t),m=t[1]&&kn(t);f=new Ee({props:{$$slots:{default:[On]},$$scope:{ctx:t}}}),f.$on("click",t[5]);let y=t[1]&&qn(t);return{c(){e=_("div"),h&&h.c(),n=C(),g&&g.c(),r=C(),v&&v.c(),o=C(),i=_("div"),s=_("div"),l=_("h2"),l.textContent="Transaction",a=C(),c=_("div"),m&&m.c(),u=C(),ot(f.$$.fragment),d=C(),y&&y.c(),E(s,"class","title-container svelte-12tyzyz"),E(i,"class","entry-row svelte-12tyzyz")},m(t,x){$(t,e,x),h&&h.m(e,null),b(e,n),g&&g.m(e,null),b(e,r),v&&v.m(e,null),b(e,o),b(e,i),b(i,s),b(s,l),b(s,a),b(s,c),m&&m.m(c,null),b(c,u),it(f,c,null),b(i,d),y&&y.m(i,null),p=!0},p(t,s){t[0].contentDiff?h?(h.p(t,s),1&s&&nt(h,1)):(h=yn(t),h.c(),nt(h,1),h.m(e,n)):h&&(tt(),rt(h,1,1,(()=>{h=null})),et()),t[0].selectionDiff?g?(g.p(t,s),1&s&&nt(g,1)):(g=$n(t),g.c(),nt(g,1),g.m(e,r)):g&&(tt(),rt(g,1,1,(()=>{g=null})),et()),t[0].selectionHtml.length>0?v?(v.p(t,s),1&s&&nt(v,1)):(v=wn(t),v.c(),nt(v,1),v.m(e,o)):v&&(tt(),rt(v,1,1,(()=>{v=null})),et()),t[1]?m?(m.p(t,s),2&s&&nt(m,1)):(m=kn(t),m.c(),nt(m,1),m.m(c,u)):m&&(tt(),rt(m,1,1,(()=>{m=null})),et());const l={};2050&s&&(l.$$scope={dirty:s,ctx:t}),f.$set(l),t[1]?y?(y.p(t,s),2&s&&nt(y,1)):(y=qn(t),y.c(),nt(y,1),y.m(i,null)):y&&(tt(),rt(y,1,1,(()=>{y=null})),et())},i(t){p||(nt(h),nt(g),nt(v),nt(m),nt(f.$$.fragment,t),nt(y),p=!0)},o(t){rt(h),rt(g),rt(v),rt(m),rt(f.$$.fragment,t),rt(y),p=!1},d(t){t&&x(e),h&&h.d(),g&&g.d(),v&&v.d(),m&&m.d(),st(f),y&&y.d()}}}function yn(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{class:"hidden",$$slots:{default:[bn]},$$scope:{ctx:t}}}),l=new be({props:{class:"tree-view",data:t[0].contentDiff,showLogButton:!0,showCopyButton:!0,valueComponent:hn,recursionOpts:{maxDepth:12,mapChildren:Fe,shouldExpandNode:Sn}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Doc diff",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","title-container svelte-12tyzyz"),E(e,"class","entry-row svelte-12tyzyz")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};2048&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};1&e&&(r.data=t[0].contentDiff),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function bn(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function $n(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{class:"hidden",$$slots:{default:[xn]},$$scope:{ctx:t}}}),l=new be({props:{class:"tree-view",data:t[0].selectionDiff,valueComponent:hn,recursionOpts:{mapChildren:Be,shouldExpandNode:An}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Selection diff",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","title-container svelte-12tyzyz"),E(e,"class","entry-row svelte-12tyzyz")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};2048&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};1&e&&(r.data=t[0].selectionDiff),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function xn(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function wn(t){let e,n,r,o,i,s,l,a,c,u=t[0].selectionHtml+"";return i=new Ee({props:{class:"hidden",$$slots:{default:[_n]},$$scope:{ctx:t}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Selection content",o=C(),ot(i.$$.fragment),s=C(),l=_("pre"),a=_("code"),E(n,"class","title-container svelte-12tyzyz"),E(l,"class","selection-html svelte-12tyzyz"),E(e,"class","entry-row svelte-12tyzyz")},m(t,f){$(t,e,f),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),b(e,l),b(l,a),a.innerHTML=u,c=!0},p(t,e){const n={};2048&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n),(!c||1&e)&&u!==(u=t[0].selectionHtml+"")&&(a.innerHTML=u)},i(t){c||(nt(i.$$.fragment,t),c=!0)},o(t){rt(i.$$.fragment,t),c=!1},d(t){t&&x(e),st(i)}}}function _n(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function kn(t){let e,n,r,o;return e=new Ee({props:{$$slots:{default:[jn]},$$scope:{ctx:t}}}),e.$on("click",t[8]),r=new Ee({props:{$$slots:{default:[Cn]},$$scope:{ctx:t}}}),r.$on("click",t[6]),{c(){ot(e.$$.fragment),n=C(),ot(r.$$.fragment)},m(t,i){it(e,t,i),$(t,n,i),it(r,t,i),o=!0},p(t,n){const o={};2052&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const i={};2048&n&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(t){o||(nt(e.$$.fragment,t),nt(r.$$.fragment,t),o=!0)},o(t){rt(e.$$.fragment,t),rt(r.$$.fragment,t),o=!1},d(t){st(e,t),t&&x(n),st(r,t)}}}function jn(t){let e,n=t[2]?"collapse":"expand";return{c(){e=j(n)},m(t,n){$(t,e,n)},p(t,r){4&r&&n!==(n=t[2]?"collapse":"expand")&&A(e,n)},d(t){t&&x(e)}}}function Cn(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function On(t){let e,n=t[1]?"hide":"show";return{c(){e=j(n)},m(t,n){$(t,e,n)},p(t,r){2&r&&n!==(n=t[1]?"hide":"show")&&A(e,n)},d(t){t&&x(e)}}}function qn(t){let e,n;return e=new be({props:{class:"tree-view",data:t[0].tr,showLogButton:!0,showCopyButton:!0,recursionOpts:t[3]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.data=t[0].tr),8&n&&(r.recursionOpts=t[3]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function En(t){let e,n,r,o;const i=[mn,vn],s=[];function l(t,e){return t[0]?0:1}return n=l(t),r=s[n]=i[n](t),{c(){e=_("div"),r.c(),E(e,"slot","right"),E(e,"class","right-panel")},m(t,r){$(t,e,r),s[n].m(e,null),o=!0},p(t,o){let a=n;n=l(t),n===a?s[n].p(t,o):(tt(),rt(s[a],1,1,(()=>{s[a]=null})),et(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),nt(r,1),r.m(e,null))},i(t){o||(nt(r),o=!0)},o(t){rt(r),o=!1},d(t){t&&x(e),s[n].d()}}}function Tn(t){let e,n;return e=new Ce({props:{$$slots:{right:[En],left:[gn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};2079&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}dt(".left-panel.svelte-12tyzyz.svelte-12tyzyz{flex-grow:0;padding:0;min-width:190px;width:190px}.title-container.svelte-12tyzyz.svelte-12tyzyz{align-items:center;display:flex;justify-content:space-between}.entry-row.svelte-12tyzyz+.entry-row.svelte-12tyzyz{margin-top:1em}.selection-html.svelte-12tyzyz.svelte-12tyzyz{margin:0.5em 0 0 0;padding:0}.equal-diff.svelte-12tyzyz.svelte-12tyzyz{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");const Sn=()=>!0,An=()=>!0;function Nn(t,e,n){let r,o,i;u(t,Vt,(t=>n(9,o=t))),u(t,Gt,(t=>n(10,i=t)));let s,l=!1,a=!1,c={maxDepth:12,stopCircularRecursion:!0,omitKeys:["schema"],shouldExpandNode:()=>a};return Kt.subscribe((t=>{t&&n(0,s=t)})),t.$$.update=()=>{1536&t.$$.dirty&&n(4,r=i.map((t=>({isGroup:t.isGroup,topEntry:o.get(t.topEntryId),entries:t.entryIds.map((t=>o.get(t))),expanded:t.expanded}))))},[s,l,a,c,r,function(){n(1,l=!l)},function(){console.info("%c [prosemirror-dev-toolkit]: Property added to window._tr","color: #b8e248"),console.log(null==s?void 0:s.tr),window._tr=null==s?void 0:s.tr},function(t,e,i){n(0,s=o.get(t));const l=r[e];l.isGroup&&l.entries.length>1&&i&&Gt.update((t=>t.map(((t,n)=>n!==e?t:Object.assign(Object.assign({},t),{expanded:!t.expanded})))))},function(){n(2,a=!a),n(3,c=Object.assign(Object.assign({},c),{shouldExpandNode:()=>a}))},o,i]}class Mn extends ct{constructor(t){super(),at(this,t,Nn,Tn,l,{})}}function Dn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Rn(t){let e,n,r,o,i,s,l=t[4].value+"";function a(){return t[3](t[4])}return{c(){e=_("li"),n=_("button"),r=j(l),o=C(),E(n,"class","svelte-d4jvis"),N(n,"selected",t[1]===t[4].key),E(e,"class","svelte-d4jvis")},m(t,l){$(t,e,l),b(e,n),b(n,r),b(e,o),i||(s=q(n,"click",a),i=!0)},p(e,o){t=e,1&o&&l!==(l=t[4].value+"")&&A(r,l),3&o&&N(n,"selected",t[1]===t[4].key)},d(t){t&&x(e),i=!1,s()}}}function Pn(t){let n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Rn(Dn(t,r,e));return{c(){n=_("ul");for(let t=0;t<o.length;t+=1)o[t].c();E(n,"class","svelte-d4jvis")},m(t,e){$(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(7&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=Dn(t,r,i);o[i]?o[i].p(s,e):(o[i]=Rn(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(t){t&&x(n),w(o,t)}}}function In(t,e,n){let{listItems:r=[],selectedKey:o,onSelect:i}=e;return t.$$set=t=>{"listItems"in t&&n(0,r=t.listItems),"selectedKey"in t&&n(1,o=t.selectedKey),"onSelect"in t&&n(2,i=t.onSelect)},[r,o,i,t=>i(t)]}dt("ul.svelte-d4jvis.svelte-d4jvis{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-d4jvis+li.svelte-d4jvis{border-top:1px solid var(--color-purple)}button.svelte-d4jvis.svelte-d4jvis{background:transparent;border:0;color:var(--color-gray-light);cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;padding:6px 18px;text-transform:uppercase;width:100%}button.svelte-d4jvis.svelte-d4jvis:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-d4jvis.svelte-d4jvis{background:rgba(255, 162, 177, 0.4)}");class zn extends ct{constructor(t){super(),at(this,t,In,Pn,l,{listItems:0,selectedKey:1,onSelect:2})}}function Bn(t){let e,n,r;return n=new zn({props:{listItems:t[4],selectedKey:t[0].key,onSelect:t[5]}}),{c(){e=_("div"),ot(n.$$.fragment),E(e,"slot","left"),E(e,"class","left-panel svelte-1lr8k7m")},m(t,o){$(t,e,o),it(n,e,null),r=!0},p(t,e){const r={};16&e&&(r.listItems=t[4]),1&e&&(r.selectedKey=t[0].key),n.$set(r)},i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&x(e),st(n)}}}function Fn(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{$$slots:{default:[Ln]},$$scope:{ctx:t}}}),i.$on("click",t[6]),l=new Ee({props:{$$slots:{default:[Un]},$$scope:{ctx:t}}}),l.$on("click",t[7]),{c(){e=_("div"),n=_("h2"),n.textContent="Plugin state",r=C(),o=_("div"),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(e,"class","top-row svelte-1lr8k7m")},m(t,c){$(t,e,c),b(e,n),b(e,r),b(e,o),it(i,o,null),b(o,s),it(l,o,null),a=!0},p(t,e){const n={};2050&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};2048&e&&(r.$$scope={dirty:e,ctx:t}),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function Ln(t){let e,n=t[1]?"collapse":"expand";return{c(){e=j(n)},m(t,n){$(t,e,n)},p(t,r){2&r&&n!==(n=t[1]?"collapse":"expand")&&A(e,n)},d(t){t&&x(e)}}}function Un(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Vn(t){let n;return{c(){n=_("div"),n.textContent="Plugin has no state",E(n,"class","empty-state svelte-1lr8k7m")},m(t,e){$(t,n,e)},p:e,i:e,o:e,d(t){t&&x(n)}}}function Gn(t){let e,n;return e=new be({props:{data:t[3],showLogButton:!0,showCopyButton:!0,recursionOpts:t[2]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.data=t[3]),4&n&&(r.recursionOpts=t[2]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Kn(t){let e,n,r,o,i,s=t[3]&&Fn(t);const l=[Gn,Vn],a=[];function c(t,e){return t[3]?0:1}return r=c(t),o=a[r]=l[r](t),{c(){e=_("div"),s&&s.c(),n=C(),o.c(),E(e,"slot","right"),E(e,"class","right-panel svelte-1lr8k7m")},m(t,o){$(t,e,o),s&&s.m(e,null),b(e,n),a[r].m(e,null),i=!0},p(t,i){t[3]?s?(s.p(t,i),8&i&&nt(s,1)):(s=Fn(t),s.c(),nt(s,1),s.m(e,n)):s&&(tt(),rt(s,1,1,(()=>{s=null})),et());let u=r;r=c(t),r===u?a[r].p(t,i):(tt(),rt(a[u],1,1,(()=>{a[u]=null})),et(),o=a[r],o?o.p(t,i):(o=a[r]=l[r](t),o.c()),nt(o,1),o.m(e,null))},i(t){i||(nt(s),nt(o),i=!0)},o(t){rt(s),rt(o),i=!1},d(t){t&&x(e),s&&s.d(),a[r].d()}}}function Hn(t){let e,n;return e=new Ce({props:{$$slots:{right:[Kn],left:[Bn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};2079&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Jn(t,e,n){let r,o;const{view:i}=ft("editor-view");let s=!1,l={maxDepth:10,stopCircularRecursion:!0,shouldExpandNode:()=>s},a=i.state,c=a.plugins,u=c[0];return Kt.subscribe((t=>{t&&(n(8,a=t.state),n(9,c=a.plugins),n(0,u=c.find((t=>t.key===u.key))))})),t.$$.update=()=>{257&t.$$.dirty&&n(3,r=null==u?void 0:u.getState(a)),768&t.$$.dirty&&n(4,o=c.map((t=>({key:t.key,value:t.key.toUpperCase(),empty:!t.getState(a)}))))},[u,s,l,r,o,function(t){n(0,u=c.find((e=>e.key===t.key)))},function(){n(1,s=!s),n(2,l=Object.assign(Object.assign({},l),{shouldExpandNode:()=>s}))},function(){window._plugin=[u,r],console.info("%c [prosemirror-dev-toolkit]: Property added to window._plugin","color: #b8e248"),console.log(u),console.log(r)},a,c]}dt(".top-row.svelte-1lr8k7m{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5em}.left-panel.svelte-1lr8k7m{flex-grow:0;overflow:scroll;padding:0;min-width:190px;width:190px}.right-panel.svelte-1lr8k7m{border-left:1px solid rgba(255, 162, 177, 0.2)}.empty-state.svelte-1lr8k7m{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");class Yn extends ct{constructor(t){super(),at(this,t,Jn,Hn,l,{})}}function Qn(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Zn(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{class:"hidden",$$slots:{default:[Qn]},$$scope:{ctx:t}}}),l=new be({props:{class:"tree-view",data:t[0],showLogButton:!0,showCopyButton:!0,recursionOpts:{stopCircularRecursion:!0}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Nodes",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","top-row svelte-gtpvw8"),E(e,"slot","left"),E(e,"class","left-panel svelte-gtpvw8")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};8&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function Wn(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Xn(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{class:"hidden",$$slots:{default:[Wn]},$$scope:{ctx:t}}}),l=new be({props:{class:"tree-view",data:t[1],showLogButton:!0,showCopyButton:!0,recursionOpts:{stopCircularRecursion:!0}}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Marks",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","top-row svelte-gtpvw8"),E(e,"slot","right"),E(e,"class","right-panel svelte-gtpvw8")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};8&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function tr(t){let e,n;return e=new Ce({props:{$$slots:{right:[Xn],left:[Zn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function er(t){const{view:e}=ft("editor-view");return[e.state.schema.nodes,e.state.schema.marks]}dt(".top-row.svelte-gtpvw8{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-gtpvw8{overflow:scroll;padding:1em}.right-panel.svelte-gtpvw8{border-left:1px solid rgba(255, 162, 177, 0.2);overflow:scroll;padding:1em}");class nr extends ct{constructor(t){super(),at(this,t,er,tr,l,{})}}function rr(t,e,n){const r=t.slice();return r[14]=e[n],r[16]=n,r}function or(t){let e,n;return e=new lr({props:{node:t[14],startPos:t[5][t[16]]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.node=t[14]),32&n&&(r.startPos=t[5][t[16]]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function ir(t){let e,n,r,o,i,s,l,a,c,u,f,d,p,h,g,v,m,k=t[2].content,O=[];for(let e=0;e<k.length;e+=1)O[e]=or(rr(t,k,e));const T=t=>rt(O[t],1,1,(()=>{O[t]=null}));return{c(){e=_("li"),n=_("div"),r=_("div"),o=j(t[0]),i=C(),s=_("button"),l=j(t[6]),a=C(),c=_("div"),u=j(t[4]),d=C(),p=_("ul");for(let t=0;t<O.length;t+=1)O[t].c();E(r,"class","number-box svelte-wsqcg0"),E(s,"aria-label","Show node info button"),E(s,"class","svelte-wsqcg0"),N(s,"selected",!1),E(c,"class","number-box svelte-wsqcg0"),E(n,"class","doc-node-body svelte-wsqcg0"),E(n,"style",f=`background: ${t[7]}`),E(p,"class","svelte-wsqcg0"),N(p,"inline-children",t[3]),E(e,"class",h=y(`${t[9].class||""} doc-node`)+" svelte-wsqcg0"),N(e,"root",t[1])},m(f,h){$(f,e,h),b(e,n),b(n,r),b(r,o),b(n,i),b(n,s),b(s,l),b(n,a),b(n,c),b(c,u),b(e,d),b(e,p);for(let t=0;t<O.length;t+=1)O[t].m(p,null);g=!0,v||(m=q(s,"click",t[8]),v=!0)},p(t,[r]){if((!g||1&r)&&A(o,t[0]),(!g||64&r)&&A(l,t[6]),(!g||16&r)&&A(u,t[4]),(!g||128&r&&f!==(f=`background: ${t[7]}`))&&E(n,"style",f),36&r){let e;for(k=t[2].content,e=0;e<k.length;e+=1){const n=rr(t,k,e);O[e]?(O[e].p(n,r),nt(O[e],1)):(O[e]=or(n),O[e].c(),nt(O[e],1),O[e].m(p,null))}for(tt(),e=k.length;e<O.length;e+=1)T(e);et()}8&r&&N(p,"inline-children",t[3]),(!g||512&r&&h!==(h=y(`${t[9].class||""} doc-node`)+" svelte-wsqcg0"))&&E(e,"class",h),514&r&&N(e,"root",t[1])},i(t){if(!g){for(let t=0;t<k.length;t+=1)nt(O[t]);g=!0}},o(t){O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)rt(O[t]);g=!1},d(t){t&&x(e),w(O,t),v=!1,m()}}}function sr(t,e,r){let o,i,s,l,a,c;const{selected:u,colors:f,handleNodeClick:d}=ft("doc-view");let{node:p,startPos:h,isRoot:g=!1}=e;return t.$$set=t=>{r(9,e=n(n({},e),v(t))),"node"in t&&r(10,p=t.node),"startPos"in t&&r(0,h=t.startPos),"isRoot"in t&&r(1,g=t.isRoot)},t.$$.update=()=>{1024&t.$$.dirty&&r(2,o=p.content),1024&t.$$.dirty&&r(7,i=f[p.type.name]),1024&t.$$.dirty&&r(6,s=p.isText&&p.marks.length>0?`${p.type.name} - [${p.marks.map((t=>t.type.name)).join(", ")}]`:p.type.name),1027&t.$$.dirty&&r(5,l=Array(p.childCount).fill(void 0).reduce(((t,e,n)=>{if(0===n)return[g?0:h+1];let r=t[n-1],o=p.child(n-1);return[...t,r+o.nodeSize]}),[])),1025&t.$$.dirty&&r(4,a=h+p.nodeSize),4&t.$$.dirty&&r(3,c=o.content.every((t=>t.isInline)))},e=v(e),[h,g,o,c,a,l,s,i,function(){d(p)},e,p]}dt(".hidden.svelte-wsqcg0{display:none;visibility:hidden}.doc-node.svelte-wsqcg0{border-left:1px solid var(--color-blue-bg);border-right:1px solid var(--color-blue-bg);display:flex;flex-direction:column;padding:0 12px}.doc-node.root.svelte-wsqcg0{border:0;padding:0}.doc-node-body.svelte-wsqcg0{background:var(--color-blue-bg);color:var(--color-black);display:flex;font-size:13px;margin-top:3px}.number-box.svelte-wsqcg0{padding:3px 6px;background:rgba(255, 255, 255, 0.3)}button.svelte-wsqcg0{background:transparent;border:0;color:var(--color-black);cursor:pointer;display:flex;height:100%;padding:3px 9px;white-space:pre;width:100%}button.svelte-wsqcg0:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}button.selected.svelte-wsqcg0{background:rgba(255, 162, 177, 0.4)}ul.svelte-wsqcg0{list-style:none;margin:0;padding:0}.inline-children.svelte-wsqcg0{border-left:1px solid var(--color-purple);border-right:1px solid var(--color-purple);display:flex;flex-wrap:wrap;padding:0 12px}.inline-children.svelte-wsqcg0>.doc-node{flex-grow:1;padding:0}");class lr extends ct{constructor(t){super(),at(this,t,sr,ir,l,{node:10,startPos:0,isRoot:1})}}const ar=["#EA7C7F","#67B0C6","#94BB7F","#CA9EDB","#DCDC5D","#B9CC7C","#DD97D8","#FFB761","#4D8FD1","#F36E98","#E45F44","#A6A4AE","#FCC047","#FFC129","#D3929C","#4CBCD4","#8D7BC0"];function cr(t){return Object.keys(t.nodes).reduce(((t,e,n)=>{const r=n>=ar.length?function(t,e){const n=t/e;return Math.round(e*(n-Math.floor(n)))}(n,ar.length):n;return t[e]=ar[r],t}),{})}function ur(t){let e,n,r;return n=new lr({props:{class:t[1].class,node:t[0],startPos:0,depth:0,isRoot:!0}}),{c(){e=_("ul"),ot(n.$$.fragment),E(e,"class","svelte-is7zuw")},m(t,o){$(t,e,o),it(n,e,null),r=!0},p(t,[e]){const r={};2&e&&(r.class=t[1].class),1&e&&(r.node=t[0]),n.$set(r)},i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&x(e),st(n)}}}function fr(t,e,r){let{doc:o,schema:i,selected:s={type:"",start:0,end:0},handleNodeSelect:l}=e;return ut("doc-view",{selected:s,colors:cr(i),handleNodeClick:l}),t.$$set=t=>{r(1,e=n(n({},e),v(t))),"doc"in t&&r(0,o=t.doc),"schema"in t&&r(2,i=t.schema),"selected"in t&&r(3,s=t.selected),"handleNodeSelect"in t&&r(4,l=t.handleNodeSelect)},e=v(e),[o,e,i,s,l]}dt("ul.svelte-is7zuw{list-style:none;margin:0;padding:0}");class dr extends ct{constructor(t){super(),at(this,t,fr,ur,l,{doc:0,schema:2,selected:3,handleNodeSelect:4})}}function pr(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function hr(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{class:"hidden",$$slots:{default:[pr]},$$scope:{ctx:t}}}),l=new dr({props:{class:"m-top",doc:t[0],schema:t[2],handleNodeSelect:t[3]}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Current doc",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","top-row svelte-1kbpoug"),E(e,"slot","left"),E(e,"class","left-panel")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};256&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};1&e&&(r.doc=t[0]),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function gr(t){let e;return{c(){e=j("log")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function vr(t){let e,n,r,o,i,s,l,a;return i=new Ee({props:{$$slots:{default:[gr]},$$scope:{ctx:t}}}),i.$on("click",t[4]),l=new be({props:{class:"m-top",data:t[1]}}),{c(){e=_("div"),n=_("div"),r=_("h2"),r.textContent="Node info",o=C(),ot(i.$$.fragment),s=C(),ot(l.$$.fragment),E(n,"class","top-row svelte-1kbpoug"),E(e,"slot","right"),E(e,"class","right-panel svelte-1kbpoug")},m(t,c){$(t,e,c),b(e,n),b(n,r),b(n,o),it(i,n,null),b(e,s),it(l,e,null),a=!0},p(t,e){const n={};256&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n);const r={};2&e&&(r.data=t[1]),l.$set(r)},i(t){a||(nt(i.$$.fragment,t),nt(l.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),rt(l.$$.fragment,t),a=!1},d(t){t&&x(e),st(i),st(l)}}}function mr(t){let e,n;return e=new Ce({props:{$$slots:{right:[vr],left:[hr]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};259&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function yr(t,e,n){let r;const{view:o}=ft("editor-view");let i,s=o.state.doc,l=o.state.doc,a=o.state.schema;return Kt.subscribe((t=>{t&&(clearTimeout(i),i=setTimeout((()=>{n(0,s=t.state.doc)}),100))})),t.$$.update=()=>{32&t.$$.dirty&&n(1,r=l.toJSON())},[s,r,a,function(t){n(5,l=t)},function(){console.log(l),window._node=l,console.info("%c [prosemirror-dev-toolkit]: Property added to window._node","color: #b8e248")},l]}dt(".top-row.svelte-1kbpoug{align-items:center;display:flex;justify-content:space-between}.right-panel.svelte-1kbpoug{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:220px;width:220px}.split-view .m-top{margin-top:0.5em}");class br extends ct{constructor(t){super(),at(this,t,yr,mr,l,{})}}function $r(t,e,n){const r=t.slice();return r[23]=e[n],r}function xr(t){let e,n,r,o,i=t[23].name+"";function s(){return t[16](t[23])}return{c(){e=_("button"),n=j(i),E(e,"class","unstyled-btn svelte-jq5ccu"),E(e,"aria-label","Edit snapshot name button")},m(t,i){$(t,e,i),b(e,n),r||(o=q(e,"dblclick",s),r=!0)},p(e,r){t=e,1&r&&i!==(i=t[23].name+"")&&A(n,i)},d(t){t&&x(e),r=!1,o()}}}function wr(t){let e,n,r,o;return{c(){e=_("input"),e.value=n=t[2].name,E(e,"class","svelte-jq5ccu")},m(n,i){$(n,e,i),r||(o=[q(e,"input",t[5]),q(e,"keypress",t[6])],r=!0)},p(t,r){4&r&&n!==(n=t[2].name)&&e.value!==n&&(e.value=n)},d(t){t&&x(e),r=!1,i(o)}}}function _r(t){let e;return{c(){e=j("Show")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function kr(t){let e;return{c(){e=j("Hide")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function jr(t){let e;return{c(){e=j("Delete")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Cr(t){let e;return{c(){e=j("Confirm Delete")},m(t,n){$(t,e,n)},d(t){t&&x(e)}}}function Or(t){let e,n,r,o,s,l,a,c,u,f,d,p;function h(t,e){return t[2]&&t[2].timestamp===t[23].timestamp?wr:xr}let g=h(t),v=g(t);function m(t,e){return t[1]?.timestamp===t[23].timestamp?kr:_r}let y=m(t),w=y(t);function k(){return t[17](t[23])}function j(){return t[18](t[23])}function O(){return t[19](t[23])}function T(t,e){return t[3]?.timestamp===t[23].timestamp?Cr:jr}let S=T(t),A=S(t);function N(){return t[20](t[23])}return{c(){e=_("li"),v.c(),n=C(),r=_("button"),w.c(),o=C(),s=_("button"),s.textContent="Restore",l=C(),a=_("button"),a.textContent="Export",c=C(),u=_("button"),A.c(),f=C(),E(r,"class","snapshot-btn ml-2 svelte-jq5ccu"),E(s,"class","snapshot-btn svelte-jq5ccu"),E(a,"class","snapshot-btn svelte-jq5ccu"),E(u,"class","snapshot-btn svelte-jq5ccu"),E(e,"class","svelte-jq5ccu")},m(t,i){$(t,e,i),v.m(e,null),b(e,n),b(e,r),w.m(r,null),b(e,o),b(e,s),b(e,l),b(e,a),b(e,c),b(e,u),A.m(u,null),b(e,f),d||(p=[q(r,"click",k),q(s,"click",j),q(a,"click",O),q(u,"click",N)],d=!0)},p(o,i){g===(g=h(t=o))&&v?v.p(t,i):(v.d(1),v=g(t),v&&(v.c(),v.m(e,n))),y!==(y=m(t))&&(w.d(1),w=y(t),w&&(w.c(),w.m(r,null))),S!==(S=T(t))&&(A.d(1),A=S(t),A&&(A.c(),A.m(u,null)))},d(t){t&&x(e),v.d(),w.d(),A.d(),d=!1,i(p)}}}function qr(t){let n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=Or($r(t,r,e));return{c(){n=_("ul");for(let t=0;t<o.length;t+=1)o[t].c();E(n,"class","svelte-jq5ccu")},m(t,e){$(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(2047&e){let i;for(r=t[0],i=0;i<r.length;i+=1){const s=$r(t,r,i);o[i]?o[i].p(s,e):(o[i]=Or(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},i:e,o:e,d(t){t&&x(n),w(o,t)}}}function Er(t,e,n){let r,o,i,{snapshots:s=[],selectedSnapshot:l,onUpdate:a,onView:c,onRestore:u,onExport:f,onDelete:d}=e;function p(t){n(2,r=t),n(3,o=void 0)}function h(t){(null==l?void 0:l.timestamp)===t.timestamp?c():c(t),n(3,o=void 0)}function g(t){u(t),n(3,o=void 0)}function v(t){f(t),n(3,o=void 0)}function m(t){o&&o.timestamp===t.timestamp?(d(t),n(3,o=void 0)):n(3,o=t)}return t.$$set=t=>{"snapshots"in t&&n(0,s=t.snapshots),"selectedSnapshot"in t&&n(1,l=t.selectedSnapshot),"onUpdate"in t&&n(11,a=t.onUpdate),"onView"in t&&n(12,c=t.onView),"onRestore"in t&&n(13,u=t.onRestore),"onExport"in t&&n(14,f=t.onExport),"onDelete"in t&&n(15,d=t.onDelete)},[s,l,r,o,p,function(t){r&&(n(2,r.name=t.target.value,r),clearTimeout(i),i=setTimeout((()=>{a(r)}),150))},function(t){"Enter"===t.key&&r&&(a(r),clearTimeout(i),n(2,r=void 0),n(3,o=void 0))},h,g,v,m,a,c,u,f,d,t=>p(t),t=>h(t),t=>g(t),t=>v(t),t=>m(t)]}dt("ul.svelte-jq5ccu.svelte-jq5ccu{color:var(--color-white);list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-jq5ccu+li.svelte-jq5ccu{border-top:1px solid var(--color-purple)}li.svelte-jq5ccu.svelte-jq5ccu{align-items:center;display:flex;font-family:monospace;padding:6px 18px}input.svelte-jq5ccu.svelte-jq5ccu{background:transparent;border:0;color:var(--color-white);height:100%;margin:0;padding:2px;width:100%}.unstyled-btn.svelte-jq5ccu.svelte-jq5ccu{background:transparent;border:0;color:var(--color-white);cursor:pointer;display:block;font-family:monospace;margin:0;padding:0;text-align:start;width:100%}.snapshot-btn.svelte-jq5ccu.svelte-jq5ccu{background:transparent;border:0;border-radius:3px;color:var(--color-gray-light);cursor:pointer;display:flex;font-size:11px;padding:6px 18px;text-transform:uppercase}.snapshot-btn.svelte-jq5ccu.svelte-jq5ccu:hover{background:rgba(255, 162, 177, 0.4);color:var(--color-white)}.ml-2.svelte-jq5ccu.svelte-jq5ccu{margin-left:1rem}");class Tr extends ct{constructor(t){super(),at(this,t,Er,qr,l,{snapshots:0,selectedSnapshot:1,onUpdate:11,onView:12,onRestore:13,onExport:14,onDelete:15})}}function Sr(t){let e,n;return e=new Tr({props:{snapshots:t[0],selectedSnapshot:t[1],onUpdate:jt,onView:t[4],onRestore:t[3],onExport:Ct,onDelete:Ot}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.snapshots=t[0]),2&n&&(r.selectedSnapshot=t[1]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Ar(t){let n;return{c(){n=_("div"),n.textContent='Save snapshots by clicking "Save snapshot" button.',E(n,"class","no-snapshots svelte-t3nvwj")},m(t,e){$(t,n,e)},p:e,i:e,o:e,d(t){t&&x(n)}}}function Nr(t){let e,n,r,o;const i=[Ar,Sr],s=[];function l(t,e){return 0===t[0].length?0:1}return n=l(t),r=s[n]=i[n](t),{c(){e=_("div"),r.c(),E(e,"slot","right"),E(e,"class","right-panel svelte-t3nvwj")},m(t,r){$(t,e,r),s[n].m(e,null),o=!0},p(t,o){let a=n;n=l(t),n===a?s[n].p(t,o):(tt(),rt(s[a],1,1,(()=>{s[a]=null})),et(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),nt(r,1),r.m(e,null))},i(t){o||(nt(r),o=!0)},o(t){rt(r),o=!1},d(t){t&&x(e),s[n].d()}}}function Mr(t){let e,n;return e=new Ce({props:{$$slots:{right:[Nr]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};35&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Dr(t,e,n){let r,o;u(t,$t,(t=>n(0,r=t))),u(t,xt,(t=>n(1,o=t)));const{view:i}=ft("editor-view");return[r,o,i,function(t){!function(t,e){kt(t,e.doc),wt.set(void 0),xt.set(void 0)}(i,t),Jt()},t=>function(t,e){if(e)c(wt)||wt.set(t.state),kt(t,e.doc);else{const e=c(wt);e?t.updateState(e):console.error("No previous state to restore!"),wt.set(void 0)}xt.set(e)}(i,t)]}dt(".right-panel.svelte-t3nvwj{padding:0}.no-snapshots.svelte-t3nvwj{align-items:center;color:var(--color-red-light);display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");class Rr extends ct{constructor(t){super(),at(this,t,Dr,Mr,l,{})}}function Pr(t){let n;return{c(){n=_("p"),n.textContent="nuting here"},m(t,e){$(t,n,e)},i:e,o:e,d(t){t&&x(n)}}}function Ir(t){let e,n;return e=new Rr({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function zr(t){let e,n;return e=new br({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Br(t){let e,n;return e=new nr({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Fr(t){let e,n;return e=new Yn({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Lr(t){let e,n;return e=new Mn({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Ur(t){let e,n;return e=new ze({}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Vr(t){let e,n,r,o,l,a,c,u,f,d,p,h,g,v,m,y,w,k,j,O,T,S;m=new Tt({props:{onClickTab:t[9],active:t[1]}});const A=[Ur,Lr,Fr,Br,zr,Ir,Pr],N=[];function M(t,e){return"state"===t[1]?0:"history"===t[1]?1:"plugins"===t[1]?2:"schema"===t[1]?3:"structure"===t[1]?4:"snapshots"===t[1]?5:6}return w=M(t),k=N[w]=A[w](t),{c(){var i,s,b;e=_("div"),n=_("div"),r=_("div"),o=C(),l=_("div"),a=_("div"),c=_("button"),c.textContent="Save snapshot",u=C(),f=_("button"),f.textContent="Import snapshot",d=C(),p=_("button"),p.textContent="X",h=C(),g=_("input"),v=C(),ot(m.$$.fragment),y=C(),k.c(),E(r,"class","resizing-div svelte-qb8f9s"),E(c,"class","snap-save-btn svelte-qb8f9s"),E(f,"class","snap-import-btn svelte-qb8f9s"),E(p,"class","close-btn svelte-qb8f9s"),E(p,"aria-label","Close dev-toolkit button"),i="display",s="none",g.style.setProperty(i,s,b?"important":""),E(g,"type","file"),E(g,"accept",".json"),g.multiple=!0,E(l,"class","container svelte-qb8f9s"),E(n,"class","floating-dock svelte-qb8f9s"),E(n,"style",j=`top: ${t[2]}%; height: ${t[3]}%;`),E(e,"class","floating-dock-wrapper svelte-qb8f9s")},m(i,x){$(i,e,x),b(e,n),b(n,r),b(n,o),b(n,l),b(l,a),b(a,c),b(a,u),b(a,f),b(a,d),b(a,p),b(l,h),b(l,g),t[10](g),b(l,v),it(m,l,null),b(l,y),N[w].m(l,null),O=!0,T||(S=[q(r,"mousedown",t[5]),q(c,"click",t[6]),q(f,"click",t[7]),q(p,"click",(function(){s(t[0])&&t[0].apply(this,arguments)})),q(g,"change",t[8])],T=!0)},p(e,[r]){t=e;const o={};2&r&&(o.active=t[1]),m.$set(o);let i=w;w=M(t),w!==i&&(tt(),rt(N[i],1,1,(()=>{N[i]=null})),et(),k=N[w],k||(k=N[w]=A[w](t),k.c()),nt(k,1),k.m(l,null)),(!O||12&r&&j!==(j=`top: ${t[2]}%; height: ${t[3]}%;`))&&E(n,"style",j)},i(t){O||(nt(m.$$.fragment,t),nt(k),O=!0)},o(t){rt(m.$$.fragment,t),rt(k),O=!1},d(n){n&&x(e),t[10](null),st(m),N[w].d(),T=!1,i(S)}}}function Gr(t,e,n){let{onClose:r}=e;const{view:o}=ft("editor-view");let i,s="state",l=50,a=50;var c;function u(t){t.preventDefault(),n(2,l=100*t.clientY/window.innerHeight),n(3,a=100*(1-t.clientY/window.innerHeight))}function f(t){t.preventDefault(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f)}return c=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",f)},R().$$.on_destroy.push(c),t.$$set=t=>{"onClose"in t&&n(0,r=t.onClose)},[r,s,l,a,i,function(t){document.addEventListener("mousemove",u),document.addEventListener("mouseup",f)},function(){const t=(new Date).toLocaleString("sv"),e=prompt("Enter snapshot name",t);e&&function(t,e){const n={name:t,timestamp:Date.now(),doc:e};$t.update((t=>[n,...t]))}(e,o.state.doc.toJSON())},function(){i.click()},function(t){const e=t.target;Array.from(e.files||[]).forEach((t=>{const e=new FileReader;e.readAsText(t),e.onload=e=>{var n,r;const i="string"==typeof(null===(n=e.target)||void 0===n?void 0:n.result)?null===(r=e.target)||void 0===r?void 0:r.result:"";try{const e=JSON.parse(i);if(!e||"object"!=typeof e)throw Error("Imported snapshot was not a JSON object"+e);!function(t,e,n){const r=n.nodeFromJSON(e),o={name:t,timestamp:Date.now(),doc:r.toJSON()};$t.update((t=>[o,...t]))}(t.name.slice(0,t.name.lastIndexOf(".")),e,o.state.schema)}catch(t){console.error("Failed to import snapshot: "+t)}}}))},function(t){n(1,s=t)},function(t){L[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}dt(".floating-dock-wrapper.svelte-qb8f9s{position:fixed;width:0px;height:0px;top:0px;left:0px;z-index:99999999}.floating-dock.svelte-qb8f9s{background-color:var(--color-blue-bg);position:fixed;z-index:1;box-shadow:rgba(34, 34, 34, 0.3) 0px 0px 4px 0px;left:0px;top:50%;width:100%;height:50%}.resizing-div.svelte-qb8f9s{position:absolute;z-index:2;opacity:0;top:-5px;height:10px;left:0px;width:100%;cursor:row-resize}.container.svelte-qb8f9s{height:100%}.snap-save-btn.svelte-qb8f9s{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:var(--color-white);cursor:pointer;font-size:12px;height:24px;line-height:25px;padding:0 6px;position:absolute;right:134px;top:-28px}.snap-save-btn.svelte-qb8f9s:hover{background:rgba(255, 162, 177, 0.8)}.snap-import-btn.svelte-qb8f9s{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:var(--color-white);cursor:pointer;font-size:12px;height:24px;line-height:25px;padding:0 6px;position:absolute;right:32px;top:-28px}.snap-import-btn.svelte-qb8f9s:hover{background:rgba(255, 162, 177, 0.8)}.close-btn.svelte-qb8f9s{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:var(--color-white);cursor:pointer;height:24px;position:absolute;right:4px;top:-28px;width:24px}.close-btn.svelte-qb8f9s:hover{background:rgba(255, 162, 177, 0.8)}");class Kr extends ct{constructor(t){super(),at(this,t,Gr,Vr,l,{onClose:0})}}function Hr(t){let e,n;return e=new gt({props:{buttonPosition:t[1]}}),e.$on("click",t[2]),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.buttonPosition=t[1]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function Jr(t){let n,r;return n=new Kr({props:{onClose:t[3]}}),{c(){ot(n.$$.fragment)},m(t,e){it(n,t,e),r=!0},p:e,i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){st(n,t)}}}function Yr(t){let e,n,r,o;const i=[Jr,Hr],s=[];function l(t,e){return t[0]?0:1}return n=l(t),r=s[n]=i[n](t),{c(){e=_("section"),r.c(),E(e,"class","svelte-hs9d0n")},m(t,r){$(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let a=n;n=l(t),n===a?s[n].p(t,o):(tt(),rt(s[a],1,1,(()=>{s[a]=null})),et(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),nt(r,1),r.m(e,null))},i(t){o||(nt(r),o=!0)},o(t){rt(r),o=!1},d(t){t&&x(e),s[n].d()}}}function Qr(t,e,n){let{view:r,devToolsExpanded:o=!1,buttonPosition:i="bottom-right"}=e;return ut("editor-view",{view:r}),P((()=>{const t=document&&document.querySelector("html");o&&t&&(t.style.marginBottom="341px")})),t.$$set=t=>{"view"in t&&n(4,r=t.view),"devToolsExpanded"in t&&n(0,o=t.devToolsExpanded),"buttonPosition"in t&&n(1,i=t.buttonPosition)},[o,i,function(){n(0,o=!0);const t=document&&document.querySelector("html");t&&(t.style.marginBottom="341px")},function(){n(0,o=!1);const t=document&&document.querySelector("html");t&&(t.style.marginBottom="")},r]}dt(".svelte-hs9d0n{--font-sans:Helvetica Neue, Calibri Light, Roboto, sans-serif;--font-small:11px;--font-medium:13px;--font-large:16px;--height-tabs-menu:48px;--color-black:#222;--color-blue-bg:#363755;--color-blue-light:#85d9ef;--color-gray-light:#d3d3d9;--color-green:green;--color-green-light:#87cc86;--color-purple-dark:rgb(80, 68, 93);--color-purple:rgb(96, 76, 104);--color-purple-light:rgb(99, 99, 123);--color-red:#d66363;--color-red-gray:rgb(187, 145, 163);--color-red-light:rgb(255, 162, 177);--color-yellow:#eaea37;--color-white:#fff}:root{--tree-view-base00:#363755;--tree-view-base01:#604d49;--tree-view-base02:#6d5a55;--tree-view-base03:#d1929b;--tree-view-base04:#b79f8d;--tree-view-base05:#f9f8f2;--tree-view-base06:#f7f4f1;--tree-view-base07:#faf8f5;--tree-view-base08:#fa3e7e;--tree-view-base09:#fd993c;--tree-view-base0A:#f6bf81;--tree-view-base0B:#b8e248;--tree-view-base0C:#b4efe4;--tree-view-base0D:#85d9ef;--tree-view-base0E:#be87ff;--tree-view-base0F:#d6724c}section.svelte-hs9d0n{font-family:var(--font-sans);font-size:var(--font-medium)}");class Zr extends ct{constructor(t){super(),at(this,t,Qr,Yr,l,{view:4,devToolsExpanded:0,buttonPosition:1})}}let Wr,Xr=!1;const to="__prosemirror-dev-toolkit__";try{"undefined"!=typeof window&&(window.applyDevTools=no)}catch(t){}let eo;function no(t,e={}){const n=function(){let t=document.querySelector(`.${to}`);return t||(t=document.createElement("div"),t.className=to,document.body.appendChild(t)),t}();ro();const r=new Zr({target:n,props:Object.assign({view:t},e)});try{"undefined"!=typeof window&&(window.editorView=t)}catch(t){}const o=t.destroy.bind(t);return t.destroy=()=>{ro(),o()},eo=()=>{Jt(),Xr=!1,Wr&&Wr(),Wr=void 0,r.$destroy()},function(t){return Xr=!0,new Promise((e=>{setTimeout((()=>{Wr&&Wr();const n=(t.someProp("dispatchTransaction")||t.dispatch).bind(t);t.setProps({dispatchTransaction:e=>{const r=t.state;n(e),Xr&&Ht(e,t.state,r)}}),Wr=()=>t.setProps({dispatchTransaction:n}),e()}),1)}))}(t)}function ro(){eo&&eo(),eo=void 0}t.applyDevTools=no,t.removeDevTools=ro,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
