/*! For license information please see main.f311c23d.chunk.js.LICENSE.txt */
(this["webpackJsonpexample-app"]=this["webpackJsonpexample-app"]||[]).push([[0],{107:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Ea}));var o,r=n(53),i=n(5),s=n(11),c=n(117),a=n(29),l=n(10),u=n(9),f=n(7),p=n(14),d=n(46),h=n(3),v=n(108),m=n(109);function g(){}function y(e,t){for(var n in t)e[n]=t[n];return e}function b(e,t,n,o,r){e.__svelte_meta={loc:{file:t,line:n,column:o,char:r}}}function w(e){return e()}function $(){return Object.create(null)}function k(e){e.forEach(w)}function x(e){return"function"===typeof e}function S(e,t){return e!=e?t==t:e!==t||e&&"object"===typeof e||"function"===typeof e}function O(e,t){if(null!=e&&"function"!==typeof e.subscribe)throw new Error("'".concat(t,"' is not a store with a 'subscribe' method"))}function C(e){if(null==e)return g;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=e.subscribe.apply(e,n);return r.unsubscribe?function(){return r.unsubscribe()}:r}function j(e){var t;return C(e,(function(e){return t=e}))(),t}function N(e,t,n){e.$$.on_destroy.push(C(t,n))}function D(e,t,n,o){if(e){var r=M(e,t,n,o);return e[0](r)}}function M(e,t,n,o){return e[1]&&o?y(n.ctx.slice(),e[1](o(t))):n.ctx}function E(e,t,n,o,r,i,s){var c=function(e,t,n,o){if(e[2]&&o){var r=e[2](o(n));if(void 0===t.dirty)return r;if("object"===typeof r){for(var i=[],s=Math.max(t.dirty.length,r.length),c=0;c<s;c+=1)i[c]=t.dirty[c]|r[c];return i}return t.dirty|r}return t.dirty}(t,o,r,i);if(c){var a=M(t,n,o,s);e.p(a,c)}}function T(e){var t={};for(var n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function R(e,t){var n={};for(var o in t=new Set(t),e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function B(e){return null==e?"":e}function P(e){e.parentNode.removeChild(e)}function A(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function z(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function I(e){return document.createTextNode(e)}function V(){return I(" ")}function F(){return I("")}function L(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function q(e,t){var n=Object.getOwnPropertyDescriptors(e.__proto__);for(var o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:L(e,o,t[o])}function J(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function K(e){return Array.from(e.childNodes)}function H(e,t,n){e.classList[n?"add":"remove"](t)}function W(e){o=e}function U(){if(!o)throw new Error("Function called outside component initialization");return o}function G(e){U().$$.on_mount.push(e)}function X(e,t){U().$$.context.set(e,t)}function Y(e){return U().$$.context.get(e)}function Z(e,t){var n=e.$$.callbacks[t.type];n&&n.slice().forEach((function(e){return e(t)}))}var Q=[],ee=[],te=[],ne=[],oe=Promise.resolve(),re=!1;function ie(e){te.push(e)}var se=!1,ce=new Set;function ae(){if(!se){se=!0;do{for(var e=0;e<Q.length;e+=1){var t=Q[e];W(t),le(t.$$)}for(W(null),Q.length=0;ee.length;)ee.pop()();for(var n=0;n<te.length;n+=1){var o=te[n];ce.has(o)||(ce.add(o),o())}te.length=0}while(Q.length);for(;ne.length;)ne.pop()();re=!1,se=!1,ce.clear()}}function le(e){if(null!==e.fragment){e.update(),k(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}var ue,fe=new Set;function pe(){ue={r:0,c:[],p:ue}}function de(){ue.r||k(ue.c),ue=ue.p}function he(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function ve(e,t,n,o){if(e&&e.o){if(fe.has(e))return;fe.add(e),ue.c.push((function(){fe.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}var me="undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:e;function ge(e){e&&e.c()}function ye(e,t,n,o){var r=e.$$,i=r.fragment,s=r.on_mount,c=r.on_destroy,a=r.after_update;i&&i.m(t,n),o||ie((function(){var t=s.map(w).filter(x);c?c.push.apply(c,Object(d.a)(t)):k(t),e.$$.on_mount=[]})),a.forEach(ie)}function be(e,t){var n=e.$$;null!==n.fragment&&(k(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function we(e,t){-1===e.$$.dirty[0]&&(Q.push(e),re||(re=!0,oe.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,n,r,i,s){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],a=o;W(e);var l=e.$$={fragment:null,ctx:null,props:s,update:g,not_equal:i,bound:$(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:t.context||[]),callbacks:$(),dirty:c,skip_bound:!1},u=!1;if(l.ctx=n?n(e,t.props||{},(function(t,n){var o=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return l.ctx&&i(l.ctx[t],l.ctx[t]=o)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](o),u&&we(e,t)),n})):[],l.update(),u=!0,k(l.before_update),l.fragment=!!r&&r(l.ctx),t.target){if(t.hydrate){var f=K(t.target);l.fragment&&l.fragment.l(f),f.forEach(P)}else l.fragment&&l.fragment.c();t.intro&&he(e.$$.fragment),ye(e,t.target,t.anchor,t.customElement),ae()}W(a)}function ke(e,t){document.dispatchEvent(function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(e,Object.assign({version:"3.38.2"},t)))}function xe(e,t){ke("SvelteDOMInsert",{target:e,node:t}),function(e,t){e.appendChild(t)}(e,t)}function Se(e,t,n){ke("SvelteDOMInsert",{target:e,node:t,anchor:n}),function(e,t,n){e.insertBefore(t,n||null)}(e,t,n)}function Oe(e){ke("SvelteDOMRemove",{node:e}),P(e)}function Ce(e,t,n,o,r,i){var s=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];r&&s.push("preventDefault"),i&&s.push("stopPropagation"),ke("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:s});var c=function(e,t,n,o){return e.addEventListener(t,n,o),function(){return e.removeEventListener(t,n,o)}}(e,t,n,o);return function(){ke("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:s}),c()}}function je(e,t,n){L(e,t,n),null==n?ke("SvelteDOMRemoveAttribute",{node:e,attribute:t}):ke("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function Ne(e,t){t=""+t,e.wholeText!==t&&(ke("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function De(e){if("string"!==typeof e&&(!e||"object"!==typeof e||!("length"in e))){var t="{#each} only iterates over array-like objects.";throw"function"===typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function Me(e,t,n){for(var o=0,r=Object.keys(t);o<r.length;o++){var i=r[o];~n.indexOf(i)||console.warn("<".concat(e,'> received an unexpected slot "').concat(i,'".'))}}var Ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){if(Object(f.a)(this,n),!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");return t.call(this)}return Object(p.a)(n,[{key:"$destroy",value:function(){Object(c.a)(Object(a.a)(n.prototype),"$destroy",this).call(this),this.$destroy=function(){console.warn("Component was already destroyed")}}},{key:"$capture_state",value:function(){}},{key:"$inject_state",value:function(){}}]),n}(function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,[{key:"$destroy",value:function(){be(this,1),this.$destroy=g}},{key:"$on",value:function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}()),Te=Math.pow(2,16);function Re(e){return 65535&e}var Be=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},Pe=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};Pe.prototype.recover=function(e){var t=0,n=Re(e);if(!this.inverted)for(var o=0;o<n;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Te}(e)},Pe.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Pe.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},Pe.prototype._map=function(e,t,n){for(var o=0,r=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?o:0);if(c>e)break;var a=this.ranges[s+r],l=this.ranges[s+i],u=c+a;if(e<=u){var f=c+o+((a?e==c?-1:e==u?1:t:t)<0?0:l);if(n)return f;var p=e==(t<0?c:u)?null:s/3+(e-c)*Te;return new Be(f,t<0?e!=c:e!=u,p)}o+=l-a}return n?e+o:new Be(e+o)},Pe.prototype.touches=function(e,t){for(var n=0,o=Re(t),r=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>e)break;var a=this.ranges[s+r];if(e<=c+a&&s==3*o)return!0;n+=this.ranges[s+i]-a}return!1},Pe.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,o=0,r=0;o<this.ranges.length;o+=3){var i=this.ranges[o],s=i-(this.inverted?r:0),c=i+(this.inverted?0:r),a=this.ranges[o+t],l=this.ranges[o+n];e(s,s+a,c,c+l),r+=l-a}},Pe.prototype.invert=function(){return new Pe(this.ranges,!this.inverted)},Pe.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Pe.offset=function(e){return 0==e?Pe.empty:new Pe(e<0?[0,-e,0]:[0,0,e])},Pe.empty=new Pe([]);var Ae=function(e,t,n,o){this.maps=e||[],this.from=n||0,this.to=null==o?this.maps.length:o,this.mirror=t};function _e(e){var t=Error.call(this,e);return t.__proto__=_e.prototype,t}Ae.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new Ae(this.maps,this.mirror,e,t)},Ae.prototype.copy=function(){return new Ae(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Ae.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},Ae.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var o=e.getMirror(t);this.appendMap(e.maps[t],null!=o&&o<t?n+o:null)}},Ae.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},Ae.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},Ae.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var o=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=o&&o>t?n-o-1:null)}},Ae.prototype.invert=function(){var e=new Ae;return e.appendMappingInverted(this),e},Ae.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},Ae.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},Ae.prototype._map=function(e,t,n){for(var o=!1,r=this.from;r<this.to;r++){var i=this.maps[r].mapResult(e,t);if(null!=i.recover){var s=this.getMirror(r);if(null!=s&&s>r&&s<this.to){r=s,e=this.maps[s].recover(i.recover);continue}}i.deleted&&(o=!0),e=i.pos}return n?e:new Be(e,o)},_e.prototype=Object.create(Error.prototype),_e.prototype.constructor=_e,_e.prototype.name="TransformError";var ze=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ae},Ie={before:{configurable:!0},docChanged:{configurable:!0}};function Ve(){throw new Error("Override me")}Ie.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ze.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new _e(t.failed);return this},ze.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},Ie.docChanged.get=function(){return this.steps.length>0},ze.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(ze.prototype,Ie);var Fe=Object.create(null),Le=function(){};Le.prototype.apply=function(e){return Ve()},Le.prototype.getMap=function(){return Pe.empty},Le.prototype.invert=function(e){return Ve()},Le.prototype.map=function(e){return Ve()},Le.prototype.merge=function(e){return null},Le.prototype.toJSON=function(){return Ve()},Le.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Fe[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},Le.jsonID=function(e,t){if(e in Fe)throw new RangeError("Duplicate use of step JSON ID "+e);return Fe[e]=t,t.prototype.jsonID=e,t};var qe=function(e,t){this.doc=e,this.failed=t};qe.ok=function(e){return new qe(e,null)},qe.fail=function(e){return new qe(null,e)},qe.fromReplace=function(e,t,n,o){try{return qe.ok(e.replace(t,n,o))}catch(r){if(r instanceof h.g)return qe.fail(r.message);throw r}};var Je=function(e){function t(t,n,o,r){e.call(this),this.from=t,this.to=n,this.slice=o,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&He(e,this.from,this.to)?qe.fail("Structure replace would overwrite content"):qe.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new Pe([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted?null:new t(n.pos,Math.max(n.pos,o.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?h.h.empty:new h.h(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?h.h.empty:new h.h(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),o,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,h.h.fromJSON(e,n.slice),!!n.structure)},t}(Le);Le.jsonID("replace",Je);var Ke=function(e){function t(t,n,o,r,i,s,c){e.call(this),this.from=t,this.to=n,this.gapFrom=o,this.gapTo=r,this.slice=i,this.insert=s,this.structure=!!c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(He(e,this.from,this.gapFrom)||He(e,this.gapTo,this.to)))return qe.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return qe.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?qe.fromReplace(e,this.from,this.to,n):qe.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new Pe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&o.deleted||r<n.pos||i>o.pos?null:new t(n.pos,o.pos,r,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,h.h.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(Le);function He(e,t,n){for(var o=e.resolve(t),r=n-t,i=o.depth;r>0&&i>0&&o.indexAfter(i)==o.node(i).childCount;)i--,r--;if(r>0)for(var s=o.node(i).maybeChild(o.indexAfter(i));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function We(e,t,n){for(var o=[],r=0;r<e.childCount;r++){var i=e.child(r);i.content.size&&(i=i.copy(We(i.content,t,i))),i.isInline&&(i=t(i,n,r)),o.push(i)}return h.c.fromArray(o)}Le.jsonID("replaceAround",Ke),ze.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,r=e.depth,i=n.before(r+1),s=o.after(r+1),c=i,a=s,l=h.c.empty,u=0,f=r,p=!1;f>t;f--)p||n.index(f)>0?(p=!0,l=h.c.from(n.node(f).copy(l)),u++):c--;for(var d=h.c.empty,v=0,m=r,g=!1;m>t;m--)g||o.after(m+1)<o.end(m)?(g=!0,d=h.c.from(o.node(m).copy(d)),v++):a++;return this.step(new Ke(c,a,i,s,new h.h(l.append(d),u,v),l.size-u,!0))},ze.prototype.wrap=function(e,t){for(var n=h.c.empty,o=t.length-1;o>=0;o--)n=h.c.from(t[o].type.create(t[o].attrs,n));var r=e.start,i=e.end;return this.step(new Ke(r,i,r,i,new h.h(n,0,0),t.length,!0))},ze.prototype.setBlockType=function(e,t,n,o){var r=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&function(e,t,n){var o=e.resolve(t),r=o.index();return o.parent.canReplaceWith(r,r+1,n)}(r.doc,r.mapping.slice(i).map(t),n)){r.clearIncompatible(r.mapping.slice(i).map(t,1),n);var s=r.mapping.slice(i),c=s.map(t,1),a=s.map(t+e.nodeSize,1);return r.step(new Ke(c,a,c+1,a-1,new h.h(h.c.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}})),this},ze.prototype.setNodeMarkup=function(e,t,n,o){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var i=t.create(n,null,o||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,i);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Ke(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new h.h(h.c.from(i),0,0),1,!0))},ze.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),r=h.c.empty,i=h.c.empty,s=o.depth,c=o.depth-t,a=t-1;s>c;s--,a--){r=h.c.from(o.node(s).copy(r));var l=n&&n[a];i=h.c.from(l?l.type.create(l.attrs,i):o.node(s).copy(i))}return this.step(new Je(e,e,new h.h(r.append(i),t,t),!0))},ze.prototype.join=function(e,t){void 0===t&&(t=1);var n=new Je(e-t,e+t,h.h.empty,!0);return this.step(n)};var Ue=function(e){function t(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),r=o.node(o.sharedDepth(this.to)),i=new h.h(We(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),r),n.openStart,n.openEnd);return qe.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new Ge(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new t(n.pos,o.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Le);Le.jsonID("addMark",Ue);var Ge=function(e){function t(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),o=new h.h(We(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return qe.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new Ue(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new t(n.pos,o.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(Le);function Xe(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Le.jsonID("removeMark",Ge),ze.prototype.addMark=function(e,t,n){var o=this,r=[],i=[],s=null,c=null;return this.doc.nodesBetween(e,t,(function(o,a,l){if(o.isInline){var u=o.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var f=Math.max(a,e),p=Math.min(a+o.nodeSize,t),d=n.addToSet(u),h=0;h<u.length;h++)u[h].isInSet(d)||(s&&s.to==f&&s.mark.eq(u[h])?s.to=p:r.push(s=new Ge(f,p,u[h])));c&&c.to==f?c.to=p:i.push(c=new Ue(f,p,n))}}})),r.forEach((function(e){return o.step(e)})),i.forEach((function(e){return o.step(e)})),this},ze.prototype.removeMark=function(e,t,n){var o=this;void 0===n&&(n=null);var r=[],i=0;return this.doc.nodesBetween(e,t,(function(o,s){if(o.isInline){i++;var c=null;if(n instanceof h.e)for(var a,l=o.marks;a=n.isInSet(l);)(c||(c=[])).push(a),l=a.removeFromSet(l);else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var u=Math.min(s+o.nodeSize,t),f=0;f<c.length;f++){for(var p=c[f],d=void 0,v=0;v<r.length;v++){var m=r[v];m.step==i-1&&p.eq(r[v].style)&&(d=m)}d?(d.to=u,d.step=i):r.push({style:p,from:Math.max(s,e),to:u,step:i})}}})),r.forEach((function(e){return o.step(new Ge(e.from,e.to,e.style))})),this},ze.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),r=[],i=e+1,s=0;s<o.childCount;s++){var c=o.child(s),a=i+c.nodeSize,l=n.matchType(c.type,c.attrs);if(l){n=l;for(var u=0;u<c.marks.length;u++)t.allowsMarkType(c.marks[u].type)||this.step(new Ge(i,a,c.marks[u]))}else r.push(new Je(i,a,h.h.empty));i=a}if(!n.validEnd){var f=n.fillBefore(h.c.empty,!0);this.replace(i,i,new h.h(f,0,0))}for(var p=r.length-1;p>=0;p--)this.step(r[p]);return this},ze.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=h.h.empty);var o=function(e,t,n,o){if(void 0===n&&(n=t),void 0===o&&(o=h.h.empty),t==n&&!o.size)return null;var r=e.resolve(t),i=e.resolve(n);return Xe(r,i,o)?new Je(t,n,o):new Ye(r,i,o).fit()}(this.doc,e,t,n);return o&&this.step(o),this},ze.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new h.h(h.c.from(n),0,0))},ze.prototype.delete=function(e,t){return this.replace(e,t,h.h.empty)},ze.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Ye=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var o=0;o<=e.depth;o++){var r=e.node(o);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(o))})}this.placed=h.c.empty;for(var i=e.depth;i>0;i--)this.placed=h.c.from(e.node(i).copy(this.placed))},Ze={depth:{configurable:!0}};function Qe(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Qe(e.firstChild.content,t-1,n)))}function et(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(et(e.lastChild.content,t-1,n)))}function tt(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function nt(e,t,n){if(t<=0)return e;var o=e.content;return t>1&&(o=o.replaceChild(0,nt(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(h.c.empty,!0)))),e.copy(o)}function ot(e,t,n,o,r){var i=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var c=o.fillBefore(i.content,!0,s);return c&&!function(e,t,n){for(var o=n;o<t.childCount;o++)if(!e.allowsMarks(t.child(o).marks))return!0;return!1}(n,i.content,s)?c:null}function rt(e,t,n,o,r){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(rt(i.content,t+1,n,o,i)))}if(t>o){var s=r.contentMatchAt(0),c=s.fillBefore(e).append(e);e=c.append(s.matchFragment(c).fillBefore(h.c.empty,!0))}return e}function it(e,t){for(var n=[],o=Math.min(e.depth,t.depth);o>=0;o--){var r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;r==t.start(o)&&n.push(o)}return n}Ze.depth.get=function(){return this.frontier.length-1},Ye.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,r=this.close(t<0?this.$to:o.doc.resolve(t));if(!r)return null;for(var i=this.placed,s=o.depth,c=r.depth;s&&c&&1==i.childCount;)i=i.firstChild.content,s--,c--;var a=new h.h(i,s,c);return t>-1?new Ke(o.pos,t,this.$to.pos,this.$to.end(),a,n):a.size||o.pos!=this.$to.pos?new Je(o.pos,r.pos,a):void 0},Ye.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,o=(t?(n=tt(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var i=this.frontier[r],s=i.type,c=i.match,a=void 0,l=void 0;if(1==e&&(o?c.matchType(o.type)||(l=c.fillBefore(h.c.from(o),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:r,parent:n,inject:l};if(2==e&&o&&(a=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:r,parent:n,wrap:a};if(n&&c.matchType(n.type))break}},Ye.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,r=tt(t,n);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new h.h(t,n+1,Math.max(o,r.size+n>=t.size-o?n+1:0)),!0)},Ye.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,o=e.openEnd,r=tt(t,n);if(r.childCount<=1&&n>0){var i=t.size-n<=n+r.size;this.unplaced=new h.h(Qe(t,n-1,1),n-1,i?n-1:o)}else this.unplaced=new h.h(Qe(t,n,1),n,o)},Ye.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,o=e.parent,r=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var c=this.unplaced,a=o?o.content:c.content,l=c.openStart-t,u=0,f=[],p=this.frontier[n],d=p.match,v=p.type;if(r){for(var m=0;m<r.childCount;m++)f.push(r.child(m));d=d.matchFragment(r)}for(var g=a.size+t-(c.content.size-c.openEnd);u<a.childCount;){var y=a.child(u),b=d.matchType(y.type);if(!b)break;(++u>1||0==l||y.content.size)&&(d=b,f.push(nt(y.mark(v.allowedMarks(y.marks)),1==u?l:0,u==a.childCount?g:-1)))}var w=u==a.childCount;w||(g=-1),this.placed=et(this.placed,n,h.c.from(f)),this.frontier[n].match=d,w&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var $=0,k=a;$<g;$++){var x=k.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),k=x.content}this.unplaced=w?0==t?h.h.empty:new h.h(Qe(c.content,t-1,1),t-1,g<0?c.openEnd:t-1):new h.h(Qe(c.content,t,u),c.openStart,c.openEnd)},Ye.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ot(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,o=this.$to.after(n);n>1&&o==this.$to.end(--n);)++o;return o},Ye.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],o=n.match,r=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=ot(e,t,r,o,i);if(s){for(var c=t-1;c>=0;c--){var a=this.frontier[c],l=a.match,u=ot(e,c,a.type,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},Ye.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=et(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var o=e.node(n),r=o.type.contentMatch.fillBefore(o.content,!0,e.index(n));this.openFrontierNode(o.type,o.attrs,r)}return e},Ye.prototype.openFrontierNode=function(e,t,n){var o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=et(this.placed,this.depth,h.c.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Ye.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(h.c.empty,!0);e.childCount&&(this.placed=et(this.placed,this.frontier.length,e))},Object.defineProperties(Ye.prototype,Ze),ze.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var o=this.doc.resolve(e),r=this.doc.resolve(t);if(Xe(o,r,n))return this.step(new Je(e,t,n));var i=it(o,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var s=-(o.depth+1);i.unshift(s);for(var c=o.depth,a=o.pos-1;c>0;c--,a--){var l=o.node(c).type.spec;if(l.defining||l.isolating)break;i.indexOf(c)>-1?s=c:o.before(c)==a&&i.splice(1,0,-c)}for(var u=i.indexOf(s),f=[],p=n.openStart,d=n.content,v=0;;v++){var m=d.firstChild;if(f.push(m),v==n.openStart)break;d=m.content}p>0&&f[p-1].type.spec.defining&&o.node(u).type!=f[p-1].type?p-=1:p>=2&&f[p-1].isTextblock&&f[p-2].type.spec.defining&&o.node(u).type!=f[p-2].type&&(p-=2);for(var g=n.openStart;g>=0;g--){var y=(g+p+1)%(n.openStart+1),b=f[y];if(b)for(var w=0;w<i.length;w++){var $=i[(w+u)%i.length],k=!0;$<0&&(k=!1,$=-$);var x=o.node($-1),S=o.index($-1);if(x.canReplaceWith(S,S,b.type,b.marks))return this.replace(o.before($),k?r.after($):t,new h.h(rt(n.content,0,n.openStart,y),y,n.openEnd))}}for(var O=this.steps.length,C=i.length-1;C>=0&&(this.replace(e,t,n),!(this.steps.length>O));C--){var j=i[C];j<0||(e=o.before(j),t=r.after(j))}return this},ze.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=function(e,t,n){var o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(var r=o.depth-1;r>=0;r--){var i=o.index(r);if(o.node(r).canReplaceWith(i,i,n))return o.before(r+1);if(i>0)return null}if(o.parentOffset==o.parent.content.size)for(var s=o.depth-1;s>=0;s--){var c=o.indexAfter(s);if(o.node(s).canReplaceWith(c,c,n))return o.after(s+1);if(c<o.node(s).childCount)return null}}(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new h.h(h.c.from(n),0,0))},ze.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),o=this.doc.resolve(t),r=it(n,o),i=0;i<r.length;i++){var s=r[i],c=i==r.length-1;if(c&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),o.end(s));if(s>0&&(c||n.node(s-1).canReplace(n.index(s-1),o.indexAfter(s-1))))return this.delete(n.before(s),o.after(s))}for(var a=1;a<=n.depth&&a<=o.depth;a++)if(e-n.start(a)==n.depth-a&&t>n.end(a)&&o.end(a)-t!=o.depth-a)return this.delete(n.before(a),t);return this.delete(e,t)};var st=Object.create(null),ct=function(e,t,n){this.ranges=n||[new lt(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},at={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};at.anchor.get=function(){return this.$anchor.pos},at.head.get=function(){return this.$head.pos},at.from.get=function(){return this.$from.pos},at.to.get=function(){return this.$to.pos},at.$from.get=function(){return this.ranges[0].$from},at.$to.get=function(){return this.ranges[0].$to},at.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},ct.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},ct.prototype.replace=function(e,t){void 0===t&&(t=h.h.empty);for(var n=t.content.lastChild,o=null,r=0;r<t.openEnd;r++)o=n,n=n.lastChild;for(var i=e.steps.length,s=this.ranges,c=0;c<s.length;c++){var a=s[c],l=a.$from,u=a.$to,f=e.mapping.slice(i);e.replaceRange(f.map(l.pos),f.map(u.pos),c?h.h.empty:t),0==c&&gt(e,i,(n?n.isInline:o&&o.isTextblock)?-1:1)}},ct.prototype.replaceWith=function(e,t){for(var n=e.steps.length,o=this.ranges,r=0;r<o.length;r++){var i=o[r],s=i.$from,c=i.$to,a=e.mapping.slice(n),l=a.map(s.pos),u=a.map(c.pos);r?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),gt(e,n,t.isInline?-1:1))}},ct.findFrom=function(e,t,n){var o=e.parent.inlineContent?new ut(e):mt(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(var r=e.depth-1;r>=0;r--){var i=t<0?mt(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):mt(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}},ct.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new ht(e.node(0))},ct.atStart=function(e){return mt(e,e,0,0,1)||new ht(e)},ct.atEnd=function(e){return mt(e,e,e.content.size,e.childCount,-1)||new ht(e)},ct.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=st[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},ct.jsonID=function(e,t){if(e in st)throw new RangeError("Duplicate use of selection JSON ID "+e);return st[e]=t,t.prototype.jsonID=e,t},ct.prototype.getBookmark=function(){return ut.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(ct.prototype,at),ct.prototype.visible=!0;var lt=function(e,t){this.$from=e,this.$to=t},ut=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,o){var r=n.resolve(o.map(this.head));if(!r.parent.inlineContent)return e.near(r);var i=n.resolve(o.map(this.anchor));return new t(i.parent.inlineContent?i:r,r)},t.prototype.replace=function(t,n){if(void 0===n&&(n=h.h.empty),e.prototype.replace.call(this,t,n),n==h.h.empty){var o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new ft(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))},t.between=function(n,o,r){var i=n.pos-o.pos;if(r&&!i||(r=i>=0?1:-1),!o.parent.inlineContent){var s=e.findFrom(o,r,!0)||e.findFrom(o,-r,!0);if(!s)return e.near(o,r);o=s.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-r,!0)||e.findFrom(n,r,!0)).$anchor).pos<o.pos!=i<0)&&(n=o),new t(n,o)},Object.defineProperties(t.prototype,n),t}(ct);ct.jsonID("text",ut);var ft=function(e,t){this.anchor=e,this.head=t};ft.prototype.map=function(e){return new ft(e.map(this.anchor),e.map(this.head))},ft.prototype.resolve=function(e){return ut.between(e.resolve(this.anchor),e.resolve(this.head))};var pt=function(e){function t(t){var n=t.nodeAfter,o=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,o),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,o){var r=o.mapResult(this.anchor),i=r.deleted,s=r.pos,c=n.resolve(s);return i?e.near(c):new t(c)},t.prototype.content=function(){return new h.h(h.c.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new dt(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(ct);pt.prototype.visible=!1,ct.jsonID("node",pt);var dt=function(e){this.anchor=e};dt.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,o=t.pos;return n?new ft(o,o):new dt(o)},dt.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&pt.isSelectable(n)?new pt(t):ct.near(t)};var ht=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=h.h.empty),n==h.h.empty){t.delete(0,t.doc.content.size);var o=e.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return vt},t}(ct);ct.jsonID("all",ht);var vt={map:function(){return this},resolve:function(e){return new ht(e)}};function mt(e,t,n,o,r,i){if(t.inlineContent)return ut.create(e,n);for(var s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var c=t.child(s);if(c.isAtom){if(!i&&pt.isSelectable(c))return pt.create(e,n-(r<0?c.nodeSize:0))}else{var a=mt(e,c,n+r,r<0?c.childCount:0,r,i);if(a)return a}n+=c.nodeSize*r}}function gt(e,t,n){var o=e.steps.length-1;if(!(o<t)){var r,i=e.steps[o];if(i instanceof Je||i instanceof Ke)e.mapping.maps[o].forEach((function(e,t,n,o){null==r&&(r=o)})),e.setSelection(ct.near(e.doc.resolve(r),n))}}var yt=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return h.d.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||h.d.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var i=this.doc.resolve(t);r=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(ct.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(ze);function bt(e,t){return t&&e?e.bind(t):e}var wt=function(e,t,n){this.name=e,this.init=bt(t.init,n),this.apply=bt(t.apply,n)},$t=[new wt("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new wt("selection",{init:function(e,t){return e.selection||ct.atStart(t.doc)},apply:function(e){return e.selection}}),new wt("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,o){return o.selection.$cursor?e.storedMarks:null}}),new wt("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],kt=function(e,t){var n=this;this.schema=e,this.fields=$t.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new wt(e.key,e.spec.state,e))}))},xt=function(e){this.config=e},St={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};St.schema.get=function(){return this.config.schema},St.plugins.get=function(){return this.config.plugins},xt.prototype.apply=function(e){return this.applyTransaction(e).state},xt.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},xt.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),o=null;;){for(var r=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var c=o?o[i].n:0,a=o?o[i].state:this,l=c<t.length&&s.spec.appendTransaction.call(s,c?t.slice(c):t,a,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!o){o=[];for(var u=0;u<this.config.plugins.length;u++)o.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),r=!0}o&&(o[i]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},xt.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new xt(this.config),n=this.config.fields,o=0;o<n.length;o++){var r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}for(var i=0;i<Ot.length;i++)Ot[i](this,e,t);return t},St.tr.get=function(){return new yt(this)},xt.create=function(e){for(var t=new kt(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new xt(t),o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n},xt.prototype.reconfigure=function(e){for(var t=new kt(this.schema,e.plugins),n=t.fields,o=new xt(t),r=0;r<n.length;r++){var i=n[r].name;o[i]=this.hasOwnProperty(i)?this[i]:n[r].init(e,o)}return o},xt.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t},xt.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new kt(e.schema,e.plugins),r=new xt(o);return o.fields.forEach((function(o){if("doc"==o.name)r.doc=h.f.fromJSON(e.schema,t.doc);else if("selection"==o.name)r.selection=ct.fromJSON(r.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],c=s.spec.state;if(s.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(r[o.name]=c.fromJSON.call(s,e,t[i],r))}r[o.name]=o.init(e,r)}})),r},xt.addApplyListener=function(e){Ot.push(e)},xt.removeApplyListener=function(e){var t=Ot.indexOf(e);t>-1&&Ot.splice(t,1)},Object.defineProperties(xt.prototype,St);var Ot=[];function Ct(e,t,n){for(var o in e){var r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=Ct(r,t,{})),n[o]=r}return n}var jt=function(e){this.props={},e.props&&Ct(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:function(e){if(e in Nt)return e+"$"+ ++Nt[e];return Nt[e]=0,e+"$"}("plugin")};jt.prototype.getState=function(e){return e[this.key]};var Nt=Object.create(null);var Dt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var Mt=/Edge\/(\d+)/.exec(navigator.userAgent),Et=/MSIE \d/.test(navigator.userAgent),Tt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Dt.mac=/Mac/.test(navigator.platform);var Rt=Dt.ie=!!(Et||Tt||Mt);Dt.ie_version=Et?document.documentMode||6:Tt?+Tt[1]:Mt?+Mt[1]:null,Dt.gecko=!Rt&&/gecko\/(\d+)/i.test(navigator.userAgent),Dt.gecko_version=Dt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Bt=!Rt&&/Chrome\/(\d+)/.exec(navigator.userAgent);Dt.chrome=!!Bt,Dt.chrome_version=Bt&&+Bt[1],Dt.safari=!Rt&&/Apple Computer/.test(navigator.vendor),Dt.ios=Dt.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Dt.android=/Android \d/.test(navigator.userAgent),Dt.webkit="webkitFontSmoothing"in document.documentElement.style,Dt.webkit_version=Dt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Pt=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},At=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},_t=null,zt=function(e,t,n){var o=_t||(_t=document.createRange());return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},It=function(e,t,n,o){return n&&(Ft(e,t,n,o,-1)||Ft(e,t,n,o,1))},Vt=/^(img|br|input|textarea|hr)$/i;function Ft(e,t,n,o,r){for(;;){if(e==n&&t==o)return!0;if(t==(r<0?0:Lt(e))){var i=e.parentNode;if(1!=i.nodeType||qt(e)||Vt.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Pt(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?Lt(e):0}}}function Lt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function qt(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Jt=function(e){var t=e.isCollapsed;return t&&Dt.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Kt(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Ht(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Wt(e,t){return"number"==typeof e?e:e[t]}function Ut(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,o=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*o}}function Gt(e,t,n){for(var o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=At(s))if(1==s.nodeType){var c=s==i.body||1!=s.nodeType,a=c?Ht(i):Ut(s),l=0,u=0;if(t.top<a.top+Wt(o,"top")?u=-(a.top-t.top+Wt(r,"top")):t.bottom>a.bottom-Wt(o,"bottom")&&(u=t.bottom-a.bottom+Wt(r,"bottom")),t.left<a.left+Wt(o,"left")?l=-(a.left-t.left+Wt(r,"left")):t.right>a.right-Wt(o,"right")&&(l=t.right-a.right+Wt(r,"right")),l||u)if(c)i.defaultView.scrollBy(l,u);else{var f=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var d=s.scrollLeft-f,h=s.scrollTop-p;t={left:t.left-d,top:t.top-h,right:t.right-d,bottom:t.bottom-h}}if(c)break}}function Xt(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=At(e));return t}function Yt(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=o.dom,i=o.top,s=o.left;r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}var Zt=null;function Qt(e,t){for(var n,o,r=2e8,i=0,s=t.top,c=t.top,a=e.firstChild,l=0;a;a=a.nextSibling,l++){var u=void 0;if(1==a.nodeType)u=a.getClientRects();else{if(3!=a.nodeType)continue;u=zt(a).getClientRects()}for(var f=0;f<u.length;f++){var p=u[f];if(p.top<=s&&p.bottom>=c){s=Math.max(p.bottom,s),c=Math.min(p.top,c);var d=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(d<r){n=a,r=d,o=d&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==a.nodeType&&d&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,o=document.createRange(),r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);var i=on(o,1);if(i.top!=i.bottom&&en(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||r&&1==n.nodeType?{node:e,offset:i}:Qt(n,o)}function en(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function tn(e,t,n){var o=e.childNodes.length;if(o&&n.top<n.bottom)for(var r=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-n.top)/(n.bottom-n.top))-2)),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var c=s.getClientRects(),a=0;a<c.length;a++){var l=c[a];if(en(t,l))return tn(s,t,l)}if((i=(i+1)%o)==r)break}return e}function nn(e,t){var n,o,r,i,s=e.root;if(s.caretPositionFromPoint)try{var c=s.caretPositionFromPoint(t.left,t.top);c&&(r=(n=c).offsetNode,i=n.offset)}catch(m){}if(!r&&s.caretRangeFromPoint){var a=s.caretRangeFromPoint(t.left,t.top);a&&(r=(o=a).startContainer,i=o.startOffset)}var l,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var f=e.dom.getBoundingClientRect();if(!en(t,f))return null;if(!(u=tn(e.dom,t,f)))return null}if(Dt.safari)for(var p=u;r&&p;p=At(p))p.draggable&&(r=i=null);if(u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),r){if(Dt.gecko&&1==r.nodeType&&(i=Math.min(i,r.childNodes.length))<r.childNodes.length){var d,h=r.childNodes[i];"IMG"==h.nodeName&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}r==e.dom&&i==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=i&&1==r.nodeType&&"BR"==r.childNodes[i-1].nodeName||(l=function(e,t,n,o){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var c=s.dom.getBoundingClientRect();if(c.left>o.left||c.top>o.top)r=s.posBefore;else{if(!(c.right<o.left||c.bottom<o.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n)}(e,r,i,t))}null==l&&(l=function(e,t,n){var o=Qt(t,n),r=o.node,i=o.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var c=r.getBoundingClientRect();s=c.left!=c.right&&n.left>(c.left+c.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}(e,u,t));var v=e.docView.nearestDesc(u,!0);return{pos:l,inside:v?v.posAtStart-v.border:-1}}function on(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var rn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sn(e,t,n){var o=e.docView.domFromPos(t,n<0?-1:1),r=o.node,i=o.offset,s=Dt.webkit||Dt.gecko;if(3==r.nodeType){if(!s||!rn.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){var c=i,a=i,l=n<0?1:-1;return n<0&&!i?(a++,l=-1):n>=0&&i==r.nodeValue.length?(c--,l=1):n<0?c--:a++,cn(on(zt(r,c,a),l),l<0)}var u=on(zt(r,i,i),n);if(Dt.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var f=on(zt(r,i-1,i-1),-1);if(f.top==u.top){var p=on(zt(r,i,i+1),-1);if(p.top!=u.top)return cn(p,p.left<f.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==Lt(r))){var d=r.childNodes[i-1];if(1==d.nodeType)return an(d.getBoundingClientRect(),!1)}if(i<Lt(r)){var h=r.childNodes[i];if(1==h.nodeType)return an(h.getBoundingClientRect(),!0)}return an(r.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==Lt(r))){var v=r.childNodes[i-1],m=3==v.nodeType?zt(v,Lt(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(m)return cn(on(m,1),!1)}if(i<Lt(r)){var g=r.childNodes[i],y=3==g.nodeType?zt(g,0,s?0:1):1==g.nodeType?g:null;if(y)return cn(on(y,-1),!0)}return cn(on(3==r.nodeType?zt(r):r,-n),n>=0)}function cn(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function an(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function ln(e,t,n){var o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r&&r.focus()}}var un=/[\u0590-\u08ac]/;var fn=null,pn=null,dn=!1;function hn(e,t,n){return fn==t&&pn==n?dn:(fn=t,pn=n,dn="up"==n||"down"==n?function(e,t,n){var o=t.selection,r="up"==n?o.$from:o.$to;return ln(e,t,(function(){for(var t=e.docView.domFromPos(r.pos,"up"==n?-1:1).node;;){var o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}for(var i=sn(e,r.pos,1),s=t.firstChild;s;s=s.nextSibling){var c=void 0;if(1==s.nodeType)c=s.getClientRects();else{if(3!=s.nodeType)continue;c=zt(s,0,s.nodeValue.length).getClientRects()}for(var a=0;a<c.length;a++){var l=c[a];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var o=t.selection.$head;if(!o.parent.isTextblock)return!1;var r=o.parentOffset,i=!r,s=r==o.parent.content.size,c=getSelection();return un.test(o.parent.textContent)&&c.modify?ln(e,t,(function(){var t=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=!(o.depth?e.docView.domAfterPos(o.before()):e.dom).contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(t),null!=s&&(c.caretBidiLevel=s),a})):"left"==n||"backward"==n?i:s}(e,t,n))}var vn=function(e,t,n,o){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},mn={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};vn.prototype.matchesWidget=function(){return!1},vn.prototype.matchesMark=function(){return!1},vn.prototype.matchesNode=function(){return!1},vn.prototype.matchesHack=function(){return!1},mn.beforePosition.get=function(){return!1},vn.prototype.parseRule=function(){return null},vn.prototype.stopEvent=function(){return!1},mn.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},mn.border.get=function(){return 0},vn.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},vn.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var o=this.children[t];if(o==e)return n;n+=o.size}},mn.posBefore.get=function(){return this.parent.posBeforeChild(this)},mn.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},mn.posAfter.get=function(){return this.posBefore+this.size},mn.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},vn.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,r;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(r=o.pmViewDesc)||r.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(r)+r.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var c;if(e==this.dom&&this.contentDOM)c=t>Pt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))c=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var a=e;;a=a.parentNode){if(a==this.dom){c=!1;break}if(a.parentNode.firstChild!=a)break}if(null==c&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){c=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==c?n>0:c)?this.posAtEnd:this.posAtStart},vn.prototype.nearestDesc=function(e,t){for(var n=!0,o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r&&(!t||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;n=!1}}},vn.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},vn.prototype.posFromDOM=function(e,t,n){for(var o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}return-1},vn.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<r)return o.descAt(e-n-o.border);n=r}},vn.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,o=0,r=!0;;o++,r=!1){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)n+=this.children[o++].size;var i=o==this.children.length?null:this.children[o];if(n==e&&(0==t||!i||!i.size||i.border||t<0&&r)||i&&i.domAtom&&e<n+i.size)return{node:this.contentDOM,offset:i?Pt(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var s=n+i.size;if(!i.domAtom&&(t<0&&!i.border?s>=e:s>e)&&(s>e||o+1>=this.children.length||!this.children[o+1].beforePosition))return i.domFromPos(e-n-i.border,t);n=s}},vn.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,r=-1,i=n,s=0;;s++){var c=this.children[s],a=i+c.size;if(-1==o&&e<=a){var l=i+c.border;if(e>=l&&t<=a-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,l);e=i;for(var u=s;u>0;u--){var f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=Pt(f.dom)+1;break}e-=f.size}-1==o&&(o=0)}if(o>-1&&(a>t||s==this.children.length-1)){t=a;for(var p=s+1;p<this.children.length;p++){var d=this.children[p];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){r=Pt(d.dom);break}t+=d.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:r}},vn.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},vn.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,o=t.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[o]},vn.prototype.setSelection=function(e,t,n,o){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,c=0;s<this.children.length;s++){var a=this.children[s],l=c+a.size;if(r>c&&i<l)return a.setSelection(e-c-a.border,t-c-a.border,n,o);c=l}var u=this.domFromPos(e,e?-1:1),f=t==e?u:this.domFromPos(t,t?-1:1),p=n.getSelection(),d=!1;if((Dt.gecko||Dt.safari)&&e==t){var h=u.node,v=u.offset;if(3==h.nodeType)(d=v&&"\n"==h.nodeValue[v-1])&&v==h.nodeValue.length&&h.nextSibling&&"BR"==h.nextSibling.nodeName&&(u=f={node:h.parentNode,offset:Pt(h)+1});else{var m=h.childNodes[v-1];d=m&&("BR"==m.nodeName||"false"==m.contentEditable)}}if(Dt.gecko&&p.focusNode&&p.focusNode!=f.node&&1==p.focusNode.nodeType){var g=p.focusNode.childNodes[p.focusOffset];g&&"false"==g.contentEditable&&(o=!0)}if(o||d&&Dt.safari||!It(u.node,u.offset,p.anchorNode,p.anchorOffset)||!It(f.node,f.offset,p.focusNode,p.focusOffset)){var y=!1;if((p.extend||e==t)&&!d){p.collapse(u.node,u.offset);try{e!=t&&p.extend(f.node,f.offset),y=!0}catch($){if(!($ instanceof DOMException))throw $}}if(!y){if(e>t){var b=u;u=f,f=b}var w=document.createRange();w.setEnd(f.node,f.offset),w.setStart(u.node,u.offset),p.removeAllRanges(),p.addRange(w)}}},vn.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},mn.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},vn.prototype.markDirty=function(e,t){for(var n=0,o=0;o<this.children.length;o++){var r=this.children[o],i=n+r.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+r.border,c=i-r.border;if(e>=s&&t<=c)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=c||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-s,t-s):r.dirty=3);r.dirty=3}n=i}this.dirty=2},vn.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},mn.domAtom.get=function(){return!1},Object.defineProperties(vn.prototype,mn);var gn=[],yn=function(e){function t(t,n,o,r){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(o,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r}))),!n.type.spec.raw){if(1!=s.nodeType){var c=document.createElement("span");c.appendChild(s),s=c}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,gn,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(vn),bn=function(e){function t(t,n,o,r){e.call(this,t,gn,n,null),this.textDOM=o,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(vn),wn=function(e){function t(t,n,o,r){e.call(this,t,[],o,r),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,o,r){var i=r.nodeViews[n.type.name],s=i&&i(n,r,o);return s&&s.dom||(s=h.b.renderSpec(document,n.type.spec.toDOM(n,o))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,o){var r=t.create(this.parent,this.mark,!0,o),i=this.children,s=this.size;n<s&&(i=_n(i,n,s,o)),e>0&&(i=_n(i,0,e,o));for(var c=0;c<i.length;c++)i[c].parent=r;return r.children=i,r},t}(vn),$n=function(e){function t(t,n,o,r,i,s,c,a,l){e.call(this,t,n.isLeaf?gn:[],i,s),this.nodeDOM=c,this.node=n,this.outerDeco=o,this.innerDeco=r,s&&this.updateChildren(a,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,o,r,i,s){var c,a,l=i.nodeViews[n.type.name],u=l&&l(n,i,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:s}),o,r),f=u&&u.dom,p=u&&u.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(f=(c=h.b.renderSpec(document,n.type.spec.toDOM(n))).dom,p=c.contentDOM);p||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var d=f;return f=Tn(f,o,n),u?a=new On(e,n,o,r,f,p,d,u,i,s+1):n.isText?new xn(e,n,o,r,f,d,i):new t(e,n,o,r,f,p,d,i,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?h.c.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Rn(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,o=this.node.inlineContent,r=t,i=o&&e.composing&&this.localCompositionNode(e,t),s=new Pn(this,i&&i.node);!function(e,t,n,o){var r=t.locals(e),i=0;if(0==r.length){for(var s=0;s<e.childCount;s++){var c=e.child(s);o(c,r,t.forChild(i,c),s),i+=c.nodeSize}return}for(var a=0,l=[],u=null,f=0;;){if(a<r.length&&r[a].to==i){for(var p=r[a++],d=void 0;a<r.length&&r[a].to==i;)(d||(d=[p])).push(r[a++]);if(d){d.sort(An);for(var h=0;h<d.length;h++)n(d[h],f,!!u)}else n(p,f,!!u)}var v=void 0,m=void 0;if(u)m=-1,v=u,u=null;else{if(!(f<e.childCount))break;m=f,v=e.child(f++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;a<r.length&&r[a].from<=i&&r[a].to>i;)l.push(r[a++]);var y=i+v.nodeSize;if(v.isText){var b=y;a<r.length&&r[a].from<b&&(b=r[a].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(u=v.cut(b-i),v=v.cut(0,b-i),y=b,m=-1)}o(v,l.length?v.isInline&&!v.isLeaf?l.filter((function(e){return!e.inline})):l.slice():gn,t.forChild(i,v),m),i=y}}(this.node,this.innerDeco,(function(t,i,c){t.spec.marks?s.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&!c&&s.syncToMarks(i==n.node.childCount?h.d.none:n.node.child(i).marks,o,e),s.placeWidget(t,e,r)}),(function(t,n,i,c){s.syncToMarks(t.marks,o,e),s.findNodeMatch(t,n,i,c)||s.updateNextNode(t,n,i,e,c)||s.addNode(t,n,i,e,r),r+=t.nodeSize})),s.syncToMarks(gn,o,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),Cn(this.contentDOM,this.children,e),Dt.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,o=n.from,r=n.to;if(!(!(e.state.selection instanceof ut)||o<t||r>t+this.node.content.size)){var i=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=Lt(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var c=s.nodeValue,a=function(e,t,n,o){for(var r=0,i=0;r<e.childCount&&i<=o;){var s=e.child(r++),c=i;if(i+=s.nodeSize,s.isText){for(var a=s.text;r<e.childCount;){var l=e.child(r++);if(i+=l.nodeSize,!l.isText)break;a+=l.text}if(i>=n){var u=a.lastIndexOf(t,o-c);if(u>=0&&u+t.length+c>=n)return c+u}}}return-1}(this.node.content,c,o-t,r-t);return a<0?null:{node:s,pos:a,text:c}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,o=t.pos,r=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new bn(this,i,n,r);e.compositionNodes.push(s),this.children=_n(this.children,o,o+r.length,e,s)}},t.prototype.update=function(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)},t.prototype.updateInner=function(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!Rn(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Mn(this.dom,this.nodeDOM,Dn(this.outerDeco,this.node,t),Dn(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(vn);function kn(e,t,n,o,r){return Tn(o,t,e),new $n(null,e,t,n,o,o,o,r,0)}var xn=function(e){function t(t,n,o,r,i,s,c){e.call(this,t,n,o,r,i,null,s,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,o){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,o)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,o){var r=this.node.cut(e,n),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,o)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}($n),Sn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(vn),On=function(e){function t(t,n,o,r,i,s,c,a,l,u){e.call(this,t,n,o,r,i,s,c,l,u),this.spec=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,o,r){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,o);return i&&this.updateInner(t,n,o,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,o,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,o,r){this.spec.setSelection?this.spec.setSelection(t,n,o):e.prototype.setSelection.call(this,t,n,o,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}($n);function Cn(e,t,n){for(var o=e.firstChild,r=!1,i=0;i<t.length;i++){var s=t[i],c=s.dom;if(c.parentNode==e){for(;c!=o;)o=Bn(o),r=!0;o=o.nextSibling}else r=!0,e.insertBefore(c,o);if(s instanceof wn){var a=o?o.previousSibling:e.lastChild;Cn(s.contentDOM,s.children,n),o=a?a.nextSibling:e.firstChild}}for(;o;)o=Bn(o),r=!0;r&&n.trackWrites==e&&(n.trackWrites=null)}function jn(e){e&&(this.nodeName=e)}jn.prototype=Object.create(null);var Nn=[new jn];function Dn(e,t,n){if(0==e.length)return Nn;for(var o=n?Nn[0]:new jn,r=[o],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var c in s.nodeName&&r.push(o=new jn(s.nodeName)),s){var a=s[c];null!=a&&(n&&1==r.length&&r.push(o=new jn(t.isInline?"span":"div")),"class"==c?o.class=(o.class?o.class+" ":"")+a:"style"==c?o.style=(o.style?o.style+";":"")+a:"nodeName"!=c&&(o[c]=a))}}return r}function Mn(e,t,n,o){if(n==Nn&&o==Nn)return t;for(var r=t,i=0;i<o.length;i++){var s=o[i],c=n[i];if(i){var a=void 0;c&&c.nodeName==s.nodeName&&r!=e&&(a=r.parentNode)&&a.tagName.toLowerCase()==s.nodeName||((a=document.createElement(s.nodeName)).pmIsDeco=!0,a.appendChild(r),c=Nn[0]),r=a}En(r,c||Nn[0],s)}return r}function En(e,t,n){for(var o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):gn,s=n.class?n.class.split(" ").filter(Boolean):gn,c=0;c<i.length;c++)-1==s.indexOf(i[c])&&e.classList.remove(i[c]);for(var a=0;a<s.length;a++)-1==i.indexOf(s[a])&&e.classList.add(s[a])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function Tn(e,t,n){return Mn(e,e,Nn,Dn(t,n,1!=e.nodeType))}function Rn(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Bn(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var Pn=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var n=e.childCount,o=t.length,r=new Map;n>0&&o>0;o--){var i=t[o-1],s=i.node;if(s){if(s!=e.child(n-1))break;--n,r.set(i,n)}}return{index:n,matched:r}}(e.node.content,e.children)};function An(e,t){return e.type.side-t.type.side}function _n(e,t,n,o,r){for(var i=[],s=0,c=0;s<e.length;s++){var a=e[s],l=c,u=c+=a.size;l>=n||u<=t?i.push(a):(l<t&&i.push(a.slice(0,t-l,o)),r&&(i.push(r),r=null),u>n&&i.push(a.slice(n-l,a.size,o)))}return i}function zn(e,t){var n=e.root.getSelection(),o=e.state.doc;if(!n.focusNode)return null;var r=e.docView.nearestDesc(n.focusNode),i=r&&0==r.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var c,a,l=o.resolve(s);if(Jt(n)){for(c=l;r&&!r.node;)r=r.parent;if(r&&r.node.isAtom&&pt.isSelectable(r.node)&&r.parent&&(!r.node.isInline||!function(e,t,n){for(var o=0==t,r=t==Lt(e);o||r;){if(e==n)return!0;var i=Pt(e);if(!(e=e.parentNode))return!1;o=o&&0==i,r=r&&i==Lt(e)}}(n.focusNode,n.focusOffset,r.dom))){var u=r.posBefore;a=new pt(s==u?l:o.resolve(u))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=o.resolve(f)}a||(a=Wn(e,c,l,"pointer"==t||e.state.selection.head<l.pos&&!i?1:-1));return a}function In(e){return e.editable?e.hasFocus():Un(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Vn(e,t){var n=e.state.selection;if(Kn(e,n),In(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setEnd(o.parentNode,Pt(o)+1):n.setEnd(o,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&Dt.ie&&Dt.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{var o,r,i=n.anchor,s=n.head;!Fn||n instanceof ut||(n.$from.parent.inlineContent||(o=Ln(e,n.from)),n.empty||n.$from.parent.inlineContent||(r=Ln(e,n.to))),e.docView.setSelection(i,s,e.root,t),Fn&&(o&&Jn(o),r&&Jn(r)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){In(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}Pn.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},Pn.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Pn.prototype.syncToMarks=function(e,t,n){for(var o=0,r=this.stack.length>>1,i=Math.min(r,e.length);o<i&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,c=this.index;c<Math.min(this.index+3,this.top.children.length);c++)if(this.top.children[c].matchesMark(e[r])){s=c;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var a=wn.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,r++}},Pn.prototype.findNodeMatch=function(e,t,n,o){var r=this.top.children,i=-1;if(o>=this.preMatch.index){for(var s=this.index;s<r.length;s++)if(r[s].matchesNode(e,t,n)){i=s;break}}else for(var c=this.index,a=Math.min(r.length,c+1);c<a;c++){var l=r[c];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){i=c;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},Pn.prototype.updateNextNode=function(e,t,n,o,r){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof $n){var c=this.preMatch.matched.get(s);if(null!=c&&c!=r)return!1;var a=s.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&Rn(t,s.outerDeco)))&&s.update(e,t,n,o))return this.destroyBetween(this.index,i),s.dom!=a&&(this.changed=!0),this.index++,!0;break}}return!1},Pn.prototype.addNode=function(e,t,n,o,r){this.top.children.splice(this.index++,0,$n.create(this.top,e,t,n,o,r)),this.changed=!0},Pn.prototype.placeWidget=function(e,t,n){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){var r=new yn(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},Pn.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof wn;)e=e.children[e.children.length-1];if(!e||!(e instanceof xn)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Sn(this.top,gn,t,null)),this.changed=!0}};var Fn=Dt.safari||Dt.chrome&&Dt.chrome_version<63;function Ln(e,t){var n=e.docView.domFromPos(t,0),o=n.node,r=n.offset,i=r<o.childNodes.length?o.childNodes[r]:null,s=r?o.childNodes[r-1]:null;if(Dt.safari&&i&&"false"==i.contentEditable)return qn(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return qn(i);if(s)return qn(s)}}function qn(e){return e.contentEditable="true",Dt.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Jn(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Kn(e,t){if(t instanceof pt){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Hn(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Hn(e)}function Hn(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Wn(e,t,n,o){return e.someProp("createSelectionBetween",(function(o){return o(e,t,n)}))||ut.between(t,n,o)}function Un(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Gn(e,t){var n=e.selection,o=n.$anchor,r=n.$head,i=t>0?o.max(r):o.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&ct.findFrom(s,t)}function Xn(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Yn(e,t,n){var o=e.state.selection;if(!(o instanceof ut)){if(o instanceof pt&&o.node.isInline)return Xn(e,new ut(t>0?o.$to:o.$from));var r=Gn(e.state,t);return!!r&&Xn(e,r)}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=Gn(e.state,t);return!!(i&&i instanceof pt)&&Xn(e,i)}if(!(Dt.mac&&n.indexOf("m")>-1)){var s,c=o.$head,a=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!a||a.isText)return!1;var l=t<0?c.pos-a.nodeSize:c.pos;return!!(a.isAtom||(s=e.docView.descAt(l))&&!s.contentDOM)&&(pt.isSelectable(a)?Xn(e,new pt(t<0?e.state.doc.resolve(c.pos-a.nodeSize):c)):!!Dt.webkit&&Xn(e,new ut(e.state.doc.resolve(t<0?l:l+a.nodeSize))))}}function Zn(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Qn(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function eo(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){var r,i,s=!1;for(Dt.gecko&&1==n.nodeType&&o<Zn(n)&&Qn(n.childNodes[o])&&(s=!0);;)if(o>0){if(1!=n.nodeType)break;var c=n.childNodes[o-1];if(Qn(c))r=n,i=--o;else{if(3!=c.nodeType)break;o=(n=c).nodeValue.length}}else{if(no(n))break;for(var a=n.previousSibling;a&&Qn(a);)r=n.parentNode,i=Pt(a),a=a.previousSibling;if(a)o=Zn(n=a);else{if((n=n.parentNode)==e.dom)break;o=0}}s?oo(e,t,n,o):r&&oo(e,t,r,i)}}function to(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){for(var r,i,s=Zn(n);;)if(o<s){if(1!=n.nodeType)break;if(!Qn(n.childNodes[o]))break;r=n,i=++o}else{if(no(n))break;for(var c=n.nextSibling;c&&Qn(c);)r=c.parentNode,i=Pt(c)+1,c=c.nextSibling;if(c)o=0,s=Zn(n=c);else{if((n=n.parentNode)==e.dom)break;o=s=0}}r&&oo(e,t,r,i)}}function no(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function oo(e,t,n,o){if(Jt(t)){var r=document.createRange();r.setEnd(n,o),r.setStart(n,o),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(n,o);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&Vn(e)}),50)}function ro(e,t,n){var o=e.state.selection;if(o instanceof ut&&!o.empty||n.indexOf("s")>-1)return!1;if(Dt.mac&&n.indexOf("m")>-1)return!1;var r=o.$from,i=o.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Gn(e.state,t);if(s&&s instanceof pt)return Xn(e,s)}if(!r.parent.inlineContent){var c=t<0?r:i,a=o instanceof ht?ct.near(c,t):ct.findFrom(c,t);return!!a&&Xn(e,a)}return!1}function io(e,t){if(!(e.state.selection instanceof ut))return!0;var n=e.state.selection,o=n.$head,r=n.$anchor,i=n.empty;if(!o.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){var c=e.state.tr;return t<0?c.delete(o.pos-s.nodeSize,o.pos):c.delete(o.pos,o.pos+s.nodeSize),e.dispatch(c),!0}return!1}function so(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function co(e,t){var n=t.keyCode,o=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||Dt.mac&&72==n&&"c"==o?io(e,-1)||eo(e):46==n||Dt.mac&&68==n&&"c"==o?io(e,1)||to(e):13==n||27==n||(37==n?Yn(e,-1,o)||eo(e):39==n?Yn(e,1,o)||to(e):38==n?ro(e,-1,o)||eo(e):40==n?function(e){if(Dt.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;so(e,r,!0),setTimeout((function(){return so(e,r,!1)}),20)}}}(e)||ro(e,1,o)||to(e):o==(Dt.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function ao(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Dt.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||Dt.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function lo(e,t,n,o,r){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=zn(e,i);if(s&&!e.state.selection.eq(s)){var c=e.state.tr.setSelection(s);"pointer"==i?c.setMeta("pointer",!0):"key"==i&&c.scrollIntoView(),e.dispatch(c)}}else{var a=e.state.doc.resolve(t),l=a.sharedDepth(n);t=a.before(l+1),n=e.state.doc.resolve(n).after(l+1);var u=e.state.selection,f=function(e,t,n){var o=e.docView.parseRange(t,n),r=o.node,i=o.fromOffset,s=o.toOffset,c=o.from,a=o.to,l=e.root.getSelection(),u=null,f=l.anchorNode;if(f&&e.dom.contains(1==f.nodeType?f:f.parentNode)&&(u=[{node:f,offset:l.anchorOffset}],Jt(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Dt.chrome&&8===e.lastKeyCode)for(var p=s;p>i;p--){var d=r.childNodes[p-1],v=d.pmViewDesc;if("BR"==d.nodeName&&!v){s=p;break}if(!v||v.size)break}var m=e.state.doc,g=e.someProp("domParser")||h.a.fromSchema(e.state.schema),y=m.resolve(c),b=null,w=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:ao,context:y});if(u&&null!=u[0].pos){var $=u[0].pos,k=u[1]&&u[1].pos;null==k&&(k=$),b={anchor:$+c,head:k+c}}return{doc:w,sel:b,from:c,to:a}}(e,t,n);if(Dt.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,d=p&&p.nodeValue?p.nodeValue.length:1;f.sel={anchor:f.sel.anchor+d,head:f.sel.anchor+d}}var v,m,g=e.state.doc,y=g.slice(f.from,f.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(v=e.state.selection.to,m="end"):(v=e.state.selection.from,m="start"),e.lastKeyCode=null;var b=function(e,t,n,o,r){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),c=s.a,a=s.b;if("end"==r){o-=c+Math.max(0,i-Math.min(c,a))-i}if(c<i&&e.size<t.size){a=(i-=o<=i&&o>=c?i-o:0)+(a-c),c=i}else if(a<i){c=(i-=o<=i&&o>=a?i-o:0)+(c-a),a=i}return{start:i,endA:c,endB:a}}(y.content,f.doc.content,f.from,v,m);if(!b){if(!(o&&u instanceof ut&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if((Dt.ios&&e.lastIOSEnter>Date.now()-225||Dt.android)&&r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Kt(13,"Enter"))})))return void(e.lastIOSEnter=0);if(f.sel){var w=uo(e,e.state.doc,f.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}b={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof ut&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),Dt.ie&&Dt.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&" \xa0"==f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)&&(b.start--,b.endA--,b.endB--);var $,k=f.doc.resolveNoCache(b.start-f.from),x=f.doc.resolveNoCache(b.endB-f.from),S=k.sameParent(x)&&k.parent.inlineContent;if((Dt.ios&&e.lastIOSEnter>Date.now()-225&&(!S||r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!S&&k.pos<f.doc.content.size&&($=ct.findFrom(f.doc.resolve(k.pos+1),1,!0))&&$.head==x.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Kt(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,n,o,r){if(!o.parent.isTextblock||n-t<=r.pos-o.pos||fo(o,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(fo(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||fo(s,!0,!1)<n)return!1;return o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(g,b.start,b.endA,k,x)&&e.someProp("handleKeyDown",(function(t){return t(e,Kt(8,"Backspace"))})))Dt.android&&Dt.chrome&&e.domObserver.suppressSelectionUpdates();else{Dt.chrome&&Dt.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),Dt.android&&!S&&k.start()!=x.start()&&0==x.parentOffset&&k.depth==x.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,x=f.doc.resolveNoCache(b.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Kt(13,"Enter"))}))}),20));var O,C,j,N,D=b.start,M=b.endA;if(S)if(k.pos==x.pos)Dt.ie&&Dt.ie_version<=11&&0==k.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Vn(e)}),20)),O=e.state.tr.delete(D,M),C=g.resolve(b.start).marksAcross(g.resolve(b.endA));else if(b.endA==b.endB&&(N=g.resolve(b.start))&&(j=function(e,t){for(var n,o,r,i=e.firstChild.marks,s=t.firstChild.marks,c=i,a=s,l=0;l<s.length;l++)c=s[l].removeFromSet(c);for(var u=0;u<i.length;u++)a=i[u].removeFromSet(a);if(1==c.length&&0==a.length)o=c[0],n="add",r=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=c.length||1!=a.length)return null;o=a[0],n="remove",r=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var f=[],p=0;p<t.childCount;p++)f.push(r(t.child(p)));if(h.c.from(f).eq(e))return{mark:o,type:n}}(k.parent.content.cut(k.parentOffset,x.parentOffset),N.parent.content.cut(N.parentOffset,b.endA-N.start()))))O=e.state.tr,"add"==j.type?O.addMark(D,M,j.mark):O.removeMark(D,M,j.mark);else if(k.parent.child(k.index()).isText&&k.index()==x.index()-(x.textOffset?0:1)){var E=k.parent.textBetween(k.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,D,M,E)})))return;O=e.state.tr.insertText(E,D,M)}if(O||(O=e.state.tr.replace(D,M,f.doc.slice(b.start-f.from,b.endB-f.from))),f.sel){var T=uo(e,O.doc,f.sel);T&&!(Dt.chrome&&Dt.android&&e.composing&&T.empty&&(b.start!=b.endB||e.lastAndroidDelete<Date.now()-100)&&(T.head==D||T.head==O.mapping.map(M)-1)||Dt.ie&&T.empty&&T.head==D)&&O.setSelection(T)}C&&O.ensureMarks(C),e.dispatch(O.scrollIntoView())}}}function uo(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Wn(e,t.resolve(n.anchor),t.resolve(n.head))}function fo(e,t,n){for(var o=e.depth,r=t?e.end():e.pos;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n)for(var i=e.node(o).maybeChild(e.indexAfter(o));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function po(e,t){for(var n=[],o=t.content,r=t.openStart,i=t.openEnd;r>1&&i>1&&1==o.childCount&&1==o.firstChild.childCount;){r--,i--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var c=e.someProp("clipboardSerializer")||h.b.fromSchema(e.state.schema),a=$o(),l=a.createElement("div");l.appendChild(c.serializeFragment(o,{document:a}));for(var u,f=l.firstChild;f&&1==f.nodeType&&(u=bo[f.nodeName.toLowerCase()]);){for(var p=u.length-1;p>=0;p--){for(var d=a.createElement(u[p]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}f=l.firstChild}return f&&1==f.nodeType&&f.setAttribute("data-pm-slice",r+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function ho(e,t,n,o,r){var i,s,c=r.parent.type.spec.code;if(!n&&!t)return null;var a=t&&(o||c||!n);if(a){if(e.someProp("transformPastedText",(function(e){t=e(t,c||o)})),c)return new h.h(h.c.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,r,o)}));l?s=l:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),i=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,o=$o().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);(n=r&&bo[r[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""));if(o.innerHTML=e,n)for(var i=0;i<n.length;i++)o=o.querySelector(n[i])||o;return o}(n);var u=i&&i.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!s){var p=e.someProp("clipboardParser")||e.someProp("domParser")||h.a.fromSchema(e.state.schema);s=p.parseSlice(i,{preserveWhitespace:!(!a&&!f),context:r})}return s=f?function(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}for(var r=e.content,i=e.openStart,s=e.openEnd,c=n.length-2;c>=0;c-=2){var a=o.nodes[n[c]];if(!a||a.hasRequiredAttrs())break;r=h.c.from(a.create(n[c+1],r)),i++,s++}return new h.h(r,i,s)}(function(e,t,n){t<e.openStart&&(e=new h.h(yo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new h.h(yo(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(s,+f[1],+f[2]),f[3]):h.h.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var o=t.node(n).contentMatchAt(t.index(n)),r=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&mo(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=go(i[i.length-1],r.length));var s=vo(e,n);i.push(s),o=o.matchType(s.type,s.attrs),r=n}}})),i)return{v:h.c.from(i)}},o=t.depth;o>=0;o--){var r=n(o);if(r)return r.v}return e}(s.content,r),!1),e.someProp("transformPasted",(function(e){s=e(s)})),s}function vo(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,h.c.from(e));return e}function mo(e,t,n,o,r){if(r<e.length&&r<t.length&&e[r]==t[r]){var i=mo(e,t,n,o.lastChild,r+1);if(i)return o.copy(o.content.replaceChild(o.childCount-1,i));if(o.contentMatchAt(o.childCount).matchType(r==e.length-1?n.type:e[r+1]))return o.copy(o.content.append(h.c.from(vo(n,e,r+1))))}}function go(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,go(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(h.c.empty,!0);return e.copy(n.append(o))}function yo(e,t,n,o,r,i){var s=t<0?e.firstChild:e.lastChild,c=s.content;return r<o-1&&(c=yo(c,t,n,o,r+1,i)),r>=n&&(c=t<0?s.contentMatchAt(0).fillBefore(c,e.childCount>1||i<=r).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(h.c.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(c))}var bo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},wo=null;function $o(){return wo||(wo=document.implementation.createHTMLDocument("title"))}var ko={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xo=Dt.ie&&Dt.ie_version<=11,So=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};So.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},So.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Oo=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);Dt.ie&&Dt.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new So,xo&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Oo.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Oo.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Oo.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,ko),xo&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Oo.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}xo&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Oo.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Oo.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Oo.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Oo.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Un(e)){var e;if(this.suppressingSelectionUpdates)return Vn(this.view);if(Dt.ie&&Dt.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&It(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Oo.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Oo.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Oo.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Un(this.view)&&!this.ignoreSelectionChange(t),o=-1,r=-1,i=!1,s=[];if(this.view.editable)for(var c=0;c<e.length;c++){var a=this.registerMutation(e[c],s);a&&(o=o<0?a.from:Math.min(a.from,o),r=r<0?a.to:Math.max(a.to,r),a.typeOver&&(i=!0))}if(Dt.gecko&&s.length>1){var l=s.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=l[0],f=l[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,r),function(e){if(Co)return;Co=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(o,r,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Vn(this.view),this.currentSelection.set(t))}},Oo.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var o=0;o<e.addedNodes.length;o++)t.push(e.addedNodes[o]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var r=e.previousSibling,i=e.nextSibling;if(Dt.ie&&Dt.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var c=e.addedNodes[s],a=c.previousSibling,l=c.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(r=a),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}var u=r&&r.parentNode==e.target?Pt(r)+1:0,f=n.localPosFromDOM(e.target,u,-1),p=i&&i.parentNode==e.target?Pt(i):e.target.childNodes.length;return{from:f,to:n.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Co=!1;var jo={},No={};function Do(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Mo(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Eo(e,t)})}))}function Eo(e,t){return e.someProp("handleDOMEvents",(function(n){var o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)}))}function To(e){return{left:e.clientX,top:e.clientY}}function Ro(e,t,n,o,r){if(-1==o)return!1;for(var i=e.state.doc.resolve(o),s=function(o){if(e.someProp(t,(function(t){return o>i.depth?t(e,n,i.nodeAfter,i.before(o),r,!0):t(e,n,i.node(o),i.before(o),r,!1)})))return{v:!0}},c=i.depth+1;c>0;c--){var a=s(c);if(a)return a.v}return!1}function Bo(e,t,n){e.focused||e.focus();var o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function Po(e,t,n,o,r){return Ro(e,"handleClickOn",t,n,o)||e.someProp("handleClick",(function(n){return n(e,t,o)}))||(r?function(e,t){if(-1==t)return!1;var n,o,r=e.state.selection;r instanceof pt&&(n=r.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var c=s>i.depth?i.nodeAfter:i.node(s);if(pt.isSelectable(c)){o=n&&r.$from.depth>0&&s>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?i.before(r.$from.depth):i.before(s);break}}return null!=o&&(Bo(e,pt.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&pt.isSelectable(o))&&(Bo(e,new pt(n),"pointer"),!0)}(e,n))}function Ao(e,t,n,o){return Ro(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",(function(n){return n(e,t,o)}))}function _o(e,t,n,o){return Ro(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",(function(n){return n(e,t,o)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Bo(e,ut.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(t),r=o.depth+1;r>0;r--){var i=r>o.depth?o.nodeAfter:o.node(r),s=o.before(r);if(i.inlineContent)Bo(e,ut.create(n,s+1,s+1+i.content.size),"pointer");else{if(!pt.isSelectable(i))continue;Bo(e,pt.create(n,s),"pointer")}return!0}}(e,n)}function zo(e){return Ko(e)}No.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Fo(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!Dt.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||co(e,t)?t.preventDefault():Do(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,Kt(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},No.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},No.keypress=function(e,t){if(!(Fo(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||Dt.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof ut)||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var Io=Dt.mac?"metaKey":"ctrlKey";jo.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=zo(e),o=Date.now(),r="singleClick";o-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(t,e.lastClick)&&!t[Io]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:o,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(To(t));i&&("singleClick"==r?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Vo(e,i,t,n)):("doubleClick"==r?Ao:_o)(e,i.pos,i.inside,t)?t.preventDefault():Do(e,"pointer"))};var Vo=function(e,t,n,o){var r,i,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=o,this.selectNode=n[Io],this.allowDefault=n.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),i=t.inside;else{var c=e.state.doc.resolve(t.pos);r=c.parent,i=c.depth?c.before():0}this.mightDrag=null;var a=o?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;var u=e.state.selection;(r.type.spec.draggable&&!1!==r.type.spec.selectable||u instanceof pt&&u.from<=i&&u.to>i)&&(this.mightDrag={node:r,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Dt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Do(e,"pointer")};function Fo(e,t){return!!e.composing||!!(Dt.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Vo.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Vo.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(To(e))),this.allowDefault||!t?Do(this.view,"pointer"):Po(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||Dt.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||Dt.chrome&&!(this.view.state.selection instanceof ut)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2?(Bo(this.view,ct.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Do(this.view,"pointer")}},Vo.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Do(this.view,"pointer"),0==e.buttons&&this.done()},jo.touchdown=function(e){zo(e),Do(e,"pointer")},jo.contextmenu=function(e){return zo(e)};var Lo=Dt.android?5e3:-1;function qo(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Ko(e)}),t))}function Jo(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Ko(e,t){if(e.domObserver.forceFlush(),Jo(e),t||e.docView.dirty){var n=zn(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}No.compositionstart=No.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),Ko(e,!0),e.markCursor=null;else if(Ko(e),Dt.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=e.root.getSelection(),r=o.focusNode,i=o.focusOffset;r&&1==r.nodeType&&0!=i;){var s=i<0?r.lastChild:r.childNodes[i-1];if(!s)break;if(3==s.nodeType){o.collapse(s,s.nodeValue.length);break}r=s,i=-1}e.composing=!0}qo(e,Lo)},No.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,qo(e,20))};var Ho=Dt.ie&&Dt.ie_version<15||Dt.ios&&Dt.webkit_version<604;function Wo(e,t,n,o){var r=ho(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,r||h.h.empty)})))return!0;if(!r)return!1;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}jo.copy=No.cut=function(e,t){var n=e.state.selection,o="cut"==t.type;if(!n.empty){var r=Ho?null:t.clipboardData,i=po(e,n.content()),s=i.dom,c=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",c)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(r),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},No.paste=function(e,t){var n=Ho?null:t.clipboardData;n&&Wo(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){e.focus(),o.parentNode&&o.parentNode.removeChild(o),n?Wo(e,o.value,null,t):Wo(e,o.textContent,o.innerHTML,t)}),50)}}(e,t)};var Uo=function(e,t){this.slice=e,this.move=t},Go=Dt.mac?"altKey":"ctrlKey";for(var Xo in jo.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var o=e.state.selection,r=o.empty?null:e.posAtCoords(To(t));if(r&&r.pos>=o.from&&r.pos<=(o instanceof pt?o.to-1:o.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(pt.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(pt.create(e.state.doc,i.posBefore)))}var s=e.state.selection.content(),c=po(e,s),a=c.dom,l=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Ho?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ho||t.dataTransfer.setData("text/plain",l),e.dragging=new Uo(s,!t[Go])}},jo.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},No.dragover=No.dragenter=function(e,t){return t.preventDefault()},No.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var o=e.posAtCoords(To(t));if(o){var r=e.state.doc.resolve(o.pos);if(r){var i=n&&n.slice;i?e.someProp("transformPasted",(function(e){i=e(i)})):i=ho(e,t.dataTransfer.getData(Ho?"Text":"text/plain"),Ho?null:t.dataTransfer.getData("text/html"),!1,r);var s=n&&!t[Go];if(e.someProp("handleDrop",(function(n){return n(e,t,i||h.h.empty,s)})))t.preventDefault();else if(i){t.preventDefault();var c=i?function(e,t,n){var o=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,i=0;i<n.openStart;i++)r=r.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var c=o.depth;c>=0;c--){var a=c==o.depth?0:o.pos<=(o.start(c+1)+o.end(c+1))/2?-1:1,l=o.index(c)+(a>0?1:0),u=o.node(c),f=!1;if(1==s)f=u.canReplace(l,l,r);else{var p=u.contentMatchAt(l).findWrapping(r.firstChild.type);f=p&&u.canReplaceWith(l,l,p[0])}if(f)return 0==a?o.pos:a<0?o.before(c+1):o.after(c+1)}return null}(e.state.doc,r.pos,i):r.pos;null==c&&(c=r.pos);var a=e.state.tr;s&&a.deleteSelection();var l=a.mapping.map(c),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,f=a.doc;if(u?a.replaceRangeWith(l,l,i.content.firstChild):a.replaceRange(l,l,i),!a.doc.eq(f)){var p=a.doc.resolve(l);if(u&&pt.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))a.setSelection(new pt(p));else{var d=a.mapping.map(c);a.mapping.maps[a.mapping.maps.length-1].forEach((function(e,t,n,o){return d=o})),a.setSelection(Wn(e,p,a.doc.resolve(d)))}e.focus(),e.dispatch(a.setMeta("uiEvent","drop"))}}}}}},jo.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Vn(e)}),20))},jo.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},jo.beforeinput=function(e,t){if(Dt.chrome&&Dt.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Kt(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},No)jo[Xo]=No[Xo];function Yo(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0}var Zo=function(e,t){this.spec=t||rr,this.side=this.spec.side||0,this.toDOM=e};Zo.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,this.side<0?-1:1),i=r.pos;return r.deleted?null:new tr(i-n,i-n,this)},Zo.prototype.valid=function(){return!0},Zo.prototype.eq=function(e){return this==e||e instanceof Zo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yo(this.spec,e.spec))};var Qo=function(e,t){this.spec=t||rr,this.attrs=e};Qo.prototype.map=function(e,t,n,o){var r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new tr(r,i,this)},Qo.prototype.valid=function(e,t){return t.from<t.to},Qo.prototype.eq=function(e){return this==e||e instanceof Qo&&Yo(this.attrs,e.attrs)&&Yo(this.spec,e.spec)},Qo.is=function(e){return e.type instanceof Qo};var er=function(e,t){this.spec=t||rr,this.attrs=e};er.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,1);if(r.deleted)return null;var i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new tr(r.pos-n,i.pos-n,this)},er.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),o=n.index,r=n.offset;return r==t.from&&r+e.child(o).nodeSize==t.to},er.prototype.eq=function(e){return this==e||e instanceof er&&Yo(this.attrs,e.attrs)&&Yo(this.spec,e.spec)};var tr=function(e,t,n){this.from=e,this.to=t,this.type=n},nr={spec:{configurable:!0},inline:{configurable:!0}};tr.prototype.copy=function(e,t){return new tr(e,t,this.type)},tr.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},tr.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},tr.widget=function(e,t,n){return new tr(e,e,new Zo(t,n))},tr.inline=function(e,t,n,o){return new tr(e,t,new Qo(n,o))},tr.node=function(e,t,n,o){return new tr(e,t,new er(n,o))},nr.spec.get=function(){return this.type.spec},nr.inline.get=function(){return this.type instanceof Qo},Object.defineProperties(tr.prototype,nr);var or=[],rr={},ir=function(e,t){this.local=e&&e.length?e:or,this.children=t&&t.length?t:or};ir.create=function(e,t){return t.length?fr(t,e,0,rr):sr},ir.prototype.find=function(e,t,n){var o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o},ir.prototype.findInner=function(e,t,n,o,r){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(var c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){var a=this.children[c]+1;this.children[c+2].findInner(e-a,t-a,n,o+a,r)}},ir.prototype.map=function(e,t,n){return this==sr||0==e.maps.length?this:this.mapInner(e,t,0,0,n||rr)},ir.prototype.mapInner=function(e,t,n,o,r){for(var i,s=0;s<this.local.length;s++){var c=this.local[s].map(e,n,o);c&&c.type.valid(t,c)?(i||(i=[])).push(c):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,o,r,i,s){for(var c=e.slice(),a=function(e,t,n,o){for(var s=0;s<c.length;s+=3){var a=c[s+1],l=void 0;-1==a||e>a+i||(t>=c[s]+i?c[s+1]=-1:n>=r&&(l=o-n-(t-e))&&(c[s]+=l,c[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(a);for(var u=!1,f=0;f<c.length;f+=3)if(-1==c[f+1]){var p=n.map(e[f]+i),d=p-r;if(d<0||d>=o.content.size){u=!0;continue}var h=n.map(e[f+1]+i,-1)-r,v=o.content.findIndex(d),m=v.index,g=v.offset,y=o.maybeChild(m);if(y&&g==d&&g+y.nodeSize==h){var b=c[f+2].mapInner(n,y,p+1,e[f]+i+1,s);b!=sr?(c[f]=d,c[f+1]=h,c[f+2]=b):(c[f+1]=-2,u=!0)}else u=!0}if(u){var w=fr(function(e,t,n,o,r,i,s){function c(e,t){for(var i=0;i<e.local.length;i++){var a=e.local[i].map(o,r,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)c(e.children[l+2],e.children[l]+t+1)}for(var a=0;a<e.length;a+=3)-1==e[a+1]&&c(e[a+2],t[a]+i+1);return n}(c,e,t||[],n,r,i,s),o,0,s);t=w.local;for(var $=0;$<c.length;$+=3)c[$+1]<0&&(c.splice($,3),$-=3);for(var k=0,x=0;k<w.children.length;k+=3){for(var S=w.children[k];x<c.length&&c[x]<S;)x+=3;c.splice(x,0,w.children[k],w.children[k+1],w.children[k+2])}}return new ir(t&&t.sort(pr),c)}(this.children,i,e,t,n,o,r):i?new ir(i.sort(pr)):sr},ir.prototype.add=function(e,t){return t.length?this==sr?ir.create(e,t):this.addInner(e,t,0):this},ir.prototype.addInner=function(e,t,n){var o,r=this,i=0;e.forEach((function(e,s){var c,a=s+n;if(c=lr(t,e,a)){for(o||(o=r.children.slice());i<o.length&&o[i]<s;)i+=3;o[i]==s?o[i+2]=o[i+2].addInner(e,c,a+1):o.splice(i,0,s,s+e.nodeSize,fr(c,e,a+1,rr)),i+=3}}));for(var s=ar(i?ur(t):t,-n),c=0;c<s.length;c++)s[c].type.valid(e,s[c])||s.splice(c--,1);return new ir(s.length?this.local.concat(s).sort(pr):this.local,o||this.children)},ir.prototype.remove=function(e){return 0==e.length||this==sr?this:this.removeInner(e,0)},ir.prototype.removeInner=function(e,t){for(var n=this.children,o=this.local,r=0;r<n.length;r+=3){for(var i=void 0,s=n[r]+t,c=n[r+1]+t,a=0,l=void 0;a<e.length;a++)(l=e[a])&&l.from>s&&l.to<c&&(e[a]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[r+2].removeInner(i,s+1);u!=sr?n[r+2]=u:(n.splice(r,3),r-=3)}}if(o.length)for(var f=0,p=void 0;f<e.length;f++)if(p=e[f])for(var d=0;d<o.length;d++)o[d].eq(p,t)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return n==this.children&&o==this.local?this:o.length||n.length?new ir(o,n):sr},ir.prototype.forChild=function(e,t){if(this==sr)return this;if(t.isLeaf)return ir.empty;for(var n,o,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(n=this.children[r+2]);break}for(var i=e+1,s=i+t.content.size,c=0;c<this.local.length;c++){var a=this.local[c];if(a.from<s&&a.to>i&&a.type instanceof Qo){var l=Math.max(i,a.from)-i,u=Math.min(s,a.to)-i;l<u&&(o||(o=[])).push(a.copy(l,u))}}if(o){var f=new ir(o.sort(pr));return n?new cr([f,n]):f}return n||sr},ir.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ir)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},ir.prototype.locals=function(e){return dr(this.localsInner(e))},ir.prototype.localsInner=function(e){if(this==sr)return or;if(e.inlineContent||!this.local.some(Qo.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Qo||t.push(this.local[n]);return t};var sr=new ir;ir.empty=sr,ir.removeOverlap=dr;var cr=function(e){this.members=e};function ar(e,t){if(!t||!e.length)return e;for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(new tr(r.from+t,r.to+t,r.type))}return n}function lr(e,t,n){if(t.isLeaf)return null;for(var o=n+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<o&&((r||(r=[])).push(s),e[i]=null);return r}function ur(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function fr(e,t,n,o){var r=[],i=!1;t.forEach((function(t,s){var c=lr(e,t,s+n);if(c){i=!0;var a=fr(c,t,n+s+1,o);a!=sr&&r.push(s,s+t.nodeSize,a)}}));for(var s=ar(i?ur(e):e,-n).sort(pr),c=0;c<s.length;c++)s[c].type.valid(t,s[c])||(o.onRemove&&o.onRemove(s[c].spec),s.splice(c--,1));return s.length||r.length?new ir(s,r):sr}function pr(e,t){return e.from-t.from||e.to-t.to}function dr(e){for(var t=e,n=0;n<t.length-1;n++){var o=t[n];if(o.from!=o.to)for(var r=n+1;r<t.length;r++){var i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),hr(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),hr(t,r+1,i.copy(o.to,i.to)))}}return t}function hr(e,t,n){for(;t<e.length&&pr(n,e[t])>0;)t++;e.splice(t,0,n)}function vr(e){var t=[];return e.someProp("decorations",(function(n){var o=n(e.state);o&&o!=sr&&t.push(o)})),e.cursorWrapper&&t.push(ir.create(e.state.doc,[e.cursorWrapper.deco])),cr.from(t)}cr.prototype.forChild=function(e,t){if(t.isLeaf)return ir.empty;for(var n=[],o=0;o<this.members.length;o++){var r=this.members[o].forChild(e,t);r!=sr&&(r instanceof cr?n=n.concat(r.members):n.push(r))}return cr.from(n)},cr.prototype.eq=function(e){if(!(e instanceof cr)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},cr.prototype.locals=function(e){for(var t,n=!0,o=0;o<this.members.length;o++){var r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?dr(n?t:t.sort(pr)):or},cr.from=function(e){switch(e.length){case 0:return sr;case 1:return e[0];default:return new cr(e)}};var mr=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=wr(this),this.markCursor=null,this.cursorWrapper=null,br(this),this.nodeViews=$r(this),this.docView=kn(this.state.doc,yr(this),vr(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Oo(e,(function(t,n,o,r){return lo(e,t,n,o,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=jo[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Eo(e,t)||!e.editable&&t.type in No||n(e,t)})};for(var n in jo)t(n);Dt.safari&&e.dom.addEventListener("input",(function(){return null})),Mo(e)}(this),this.pluginViews=[],this.updatePluginViews()},gr={props:{configurable:!0},root:{configurable:!0}};function yr(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var o in n)"class"==o?t.class+=" "+n[o]:t[o]||"contenteditable"==o||"nodeName"==o||(t[o]=String(n[o]))})),[tr.node(0,e.state.doc.content.size,t)]}function br(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:tr.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function wr(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function $r(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function kr(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}gr.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},mr.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Mo(this),this._props=e,this.updateStateInner(e.state,!0)},mr.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var o in t.state=this.state,e)t[o]=e[o];this.update(t)},mr.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},mr.prototype.updateStateInner=function(e,t){var n=this,o=this.state,r=!1,i=!1;if(e.storedMarks&&this.composing&&(Jo(this),i=!0),this.state=e,t){var s=$r(this);(function(e,t){var n=0,o=0;for(var r in e){if(e[r]!=t[r])return!0;n++}for(var i in t)o++;return n!=o})(s,this.nodeViews)&&(this.nodeViews=s,r=!0),Mo(this)}this.editable=wr(this),br(this);var c=vr(this),a=yr(this),l=t?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=r||!this.docView.matchesNode(e.doc,a,c);!u&&e.selection.eq(o.selection)||(i=!0);var f="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top),i=(o.left+o.right)/2,s=r+1;s<Math.min(innerHeight,o.bottom);s+=5){var c=e.root.elementFromPoint(i,s);if(c!=e.dom&&e.dom.contains(c)){var a=c.getBoundingClientRect();if(a.top>=r-20){t=c,n=a.top;break}}}return{refDOM:t,refTop:n,stack:Xt(e.dom)}}(this);if(i){this.domObserver.stop();var p=u&&(Dt.ie||Dt.chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&function(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(o.selection,e.selection);if(u){var d=Dt.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!r&&this.docView.update(e.doc,a,c,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=kn(e.doc,a,c,this.dom,this)),d&&!this.trackWrites&&(p=!0)}p||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return It(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Vn(this,p):(Kn(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var h=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof pt?Gt(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),h):Gt(this,this.coordsAtPos(e.selection.head,1),h))}else f&&function(e){var t=e.refDOM,n=e.refTop,o=e.stack,r=t?t.getBoundingClientRect().top:0;Yt(o,0==r?0:r-n)}(f)},mr.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},mr.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<this.state.plugins.length;o++){var r=this.state.plugins[o];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},mr.prototype.someProp=function(e,t){var n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var s=r[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},mr.prototype.hasFocus=function(){return this.root.activeElement==this.dom},mr.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Zt)return e.focus(Zt);var t=Xt(e);e.focus(null==Zt?{get preventScroll(){return Zt={preventScroll:!0},!0}}:void 0),Zt||(Zt=!1,Yt(t,0))}(this.dom),Vn(this),this.domObserver.start()},gr.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},mr.prototype.posAtCoords=function(e){return nn(this,e)},mr.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),sn(this,e,t)},mr.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},mr.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},mr.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},mr.prototype.endOfTextblock=function(e,t){return hn(this,t||this.state,e)},mr.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vr(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},mr.prototype.dispatchEvent=function(e){return function(e,t){Eo(e,t)||!jo[t.type]||!e.editable&&t.type in No||jo[t.type](e,t)}(this,e)},mr.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(mr.prototype,gr);kr(".floating-btn.svelte-sbul9f.svelte-sbul9f{position:fixed;bottom:16px;right:16px;background:#363755;box-shadow:0 0 30px rgb(0 0 0 / 30%);border-radius:50%;padding:4px 6px;-webkit-transition:opacity 0.3s;transition:opacity 0.3s;z-index:99999}.floating-btn.svelte-sbul9f.svelte-sbul9f:hover{opacity:0.7;cursor:pointer}.floating-btn.svelte-sbul9f>svg.svelte-sbul9f{width:34px;height:34px;position:relative;bottom:-2px}");var xr="src/FloatingBtn.svelte";function Sr(e){var t,n,o,r,i,c,a,l,u,f,p,d,h,v,m,y,w,$,k,S,O,C,j,N={c:function(){t=_("div"),n=z("svg"),o=z("title"),r=I("prosemirror"),i=z("desc"),c=I("Created using Figma"),a=z("use"),l=z("use"),u=z("use"),f=z("use"),p=z("use"),d=z("use"),h=z("use"),v=z("defs"),m=z("path"),y=z("path"),w=z("path"),$=z("path"),k=z("path"),S=z("path"),O=z("path"),b(o,xr,36,4,736),b(i,xr,37,4,767),J(a,"xlink:href","#a"),je(a,"transform","matrix(2 0 0 2 118 116)"),je(a,"fill","#FFF"),b(a,xr,38,4,804),J(l,"xlink:href","#b"),je(l,"transform","rotate(16 59.054 420.192) scale(2)"),je(l,"fill","#FFF"),b(l,xr,39,4,880),J(u,"xlink:href","#c"),je(u,"transform","matrix(2 0 0 2 154.024 141.58)"),je(u,"fill","#363755"),b(u,xr,40,4,967),J(f,"xlink:href","#d"),je(f,"transform","matrix(2 0 0 2 220 334.8)"),je(f,"fill","#FFF"),b(f,xr,41,4,1053),J(p,"xlink:href","#e"),je(p,"transform","matrix(2 0 0 2 218.826 262.052)"),je(p,"fill","#363755"),b(p,xr,42,4,1131),J(d,"xlink:href","#f"),je(d,"transform","matrix(2 0 0 2 197.108 184.998)"),je(d,"fill","#FFF"),b(d,xr,43,4,1218),J(h,"xlink:href","#g"),je(h,"transform","matrix(2 0 0 2 221.8 216)"),je(h,"fill","#363755"),b(h,xr,44,4,1302),je(m,"id","a"),je(m,"d","M73.5 0C32.859 0 0 32.859 0 73.5S32.859 147 73.5 147 147 114.141 147 73.5 114.069 0 73.5\n        0z"),b(m,xr,46,6,1396),je(y,"id","b"),je(y,"d","M193.601 107.116c0-13.376 8.238-23.91\n        20.619-31.153-2.244-7.447-5.19-14.6-8.824-21.32-13.886\n        3.633-25.12-1.799-34.568-11.26-9.449-9.437-12.344-20.672-8.709-34.571A111.362 111.362 0 0 0\n        140.799 0c-7.243 12.37-20.339 20.594-33.689 20.594-13.363\n        0-26.446-8.225-33.701-20.594A110.888 110.888 0 0 0 52.1 8.812c3.634 13.9.753 25.134-8.721\n        34.57-9.436 9.462-20.67 14.894-34.569 11.26A112.178 112.178 0 0 0 0 75.963c12.369 7.243\n        20.593 17.777 20.593 31.153 0 13.352-8.224 26.448-20.593 33.704a113.338 113.338 0 0 0 8.811\n        21.321c13.899-3.634 25.133-.752 34.569 8.697 9.448 9.462 12.355 20.696 8.721 34.57a112.653\n        112.653 0 0 0 21.32 8.837c7.243-12.407 20.338-20.619 33.702-20.619 13.35 0 26.446 8.225\n        33.701 20.619a114.22 114.22 0 0 0 21.32-8.837c-3.634-13.874-.752-25.108 8.709-34.57\n        9.449-9.437 20.683-14.869 34.569-11.26a112.343 112.343 0 0 0\n        8.823-21.321c-12.406-7.256-20.644-17.789-20.644-31.141zm-86.491 46.57c-25.732\n        0-46.58-20.849-46.58-46.57 0-25.733 20.86-46.595 46.58-46.595 25.732 0 46.567 20.875 46.567\n        46.595 0 25.734-20.835 46.57-46.567 46.57z"),b(y,xr,51,6,1544),je(w,"id","c"),je(w,"d","M98.088 49.91c-6.9 83.9 10.8 103.401 10.8 103.401s-55.1\n        5.499-82.7-13.401c-30.5-20.9-26-67.5-25.9-94.6.1-28.4 25.6-45.8 49.9-45.3 29.1.5 50.2 21.6\n        47.9 49.9z"),b(w,xr,68,6,2746),je($,"id","d"),je($,"d","M.1.1c12.2 33.3 22.5 42.7 40 55.2 25.3 18 36.6 17.5 76.3 41C78.1 60.3 30.8 45.7 0 0l.1.1z"),b($,xr,74,6,2968),je(k,"id","e"),je(k,"d","M.687 36.474c3 13.3 17.9 29.9 30.4 41.6 24.8 23.2 42 22.4 86\n        54.7-18.2-51.8-18.8-62-43.5-106.1-24.7-44-67.6-20.3-67.6-20.3s-8.4 16.6-5.3 29.9v.2z"),b(k,xr,78,6,3106),je(S,"id","f"),je(S,"d","M38.346 11.5s-4-11.6-18-11.5c-30 .2-28.8 52.1 16.9 52 39.6-.1 39.2-49.4\n        16.1-49.6-10.2-.2-15 9.1-15 9.1z"),b(S,xr,83,6,3308),je(O,"id","g"),je(O,"d","M26.5 15c10.8 0 2 14.9-.6 20.9-1.8-8.4-10.2-20.9.6-20.9zM10.2.1C4.6.1 0 4.6 0 10.3c0 5.6\n        4.5 10.2 10.2 10.2 5.6 0 10.2-4.5 10.2-10.2C20.4 4.7 15.9.1 10.2.1zM40.7 0c-4.8 0-8.8\n        4.5-8.8 10.2 0 5.6 3.9 10.2 8.8 10.2 4.8 0 8.8-4.5 8.8-10.2C49.5 4.6 45.6 0 40.7 0z"),b(O,xr,88,6,3469),b(v,xr,45,4,1383),je(n,"width","530"),je(n,"height","530"),je(n,"viewBox","0 0 530 530"),je(n,"xmlns","http://www.w3.org/2000/svg"),je(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),je(n,"class","svelte-sbul9f"),b(n,xr,29,2,578),je(t,"class","floating-btn svelte-sbul9f"),b(t,xr,28,0,530)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,g){Se(s,t,g),xe(t,n),xe(n,o),xe(o,r),xe(n,i),xe(i,c),xe(n,a),xe(n,l),xe(n,u),xe(n,f),xe(n,p),xe(n,d),xe(n,h),xe(n,v),xe(v,m),xe(v,y),xe(v,w),xe(v,$),xe(v,k),xe(v,S),xe(v,O),C||(j=Ce(t,"click",(function(){x(e[0])&&e[0].apply(this,arguments)}),!1,!1,!1),C=!0)},p:function(t,n){Object(s.a)(n,1)[0];e=t},i:g,o:g,d:function(e){e&&Oe(t),C=!1,j()}};return ke("SvelteRegisterBlock",{block:N,id:Sr.name,type:"component",source:"",ctx:e}),N}function Or(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("FloatingBtn",r,[]);var i=t.onClick,s=["onClick"];return Object.keys(t).forEach((function(e){~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<FloatingBtn> was created with unknown prop '".concat(e,"'"))})),e.$$set=function(e){"onClick"in e&&n(0,i=e.onClick)},e.$capture_state=function(){return{onClick:i}},e.$inject_state=function(e){"onClick"in e&&n(0,i=e.onClick)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i]}var Cr=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Or,Sr,S,{onClick:0}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"FloatingBtn",options:e,id:Sr.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"onClick"in s||console.warn("<FloatingBtn> was created without expected prop 'onClick'"),o}return Object(p.a)(n,[{key:"onClick",get:function(){throw new Error("<FloatingBtn>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<FloatingBtn>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr("ul.svelte-jy18ep{display:flex;list-style:none;margin:0;overflow-x:scroll;padding:0}button.svelte-jy18ep{background:transparent;border:0;border-bottom:2px solid transparent;color:white;cursor:pointer;height:100%;padding:1em}button.svelte-jy18ep:hover{background:rgba(255, 255, 255, 0.05)}button.active.svelte-jy18ep{border-bottom:2px solid #ffa2b1}");var jr="src/tabs/TabsMenu.svelte";function Nr(e){var t,n,o,r,i,c,a,l,u,f,p,d,h,v,m,y,w,$,x,S,O={c:function(){t=_("ul"),n=_("li"),(o=_("button")).textContent="STATE",r=V(),i=_("li"),(c=_("button")).textContent="HISTORY",a=V(),l=_("li"),(u=_("button")).textContent="PLUGINS",f=V(),p=_("li"),(d=_("button")).textContent="SCHEMA",h=V(),v=_("li"),(m=_("button")).textContent="STRUCTURE",y=V(),w=_("li"),($=_("button")).textContent="SNAPSHOTS",je(o,"class","svelte-jy18ep"),H(o,"active","state"===e[0]),b(o,jr,26,4,495),b(n,jr,25,2,486),je(c,"class","svelte-jy18ep"),H(c,"active","history"===e[0]),b(c,jr,29,4,608),b(i,jr,28,2,599),je(u,"class","svelte-jy18ep"),H(u,"active","plugins"===e[0]),b(u,jr,34,4,739),b(l,jr,33,2,730),je(d,"class","svelte-jy18ep"),H(d,"active","schema"===e[0]),b(d,jr,39,4,870),b(p,jr,38,2,861),je(m,"class","svelte-jy18ep"),H(m,"active","structure"===e[0]),b(m,jr,42,4,986),b(v,jr,41,2,977),je($,"class","svelte-jy18ep"),H($,"active","snapshots"===e[0]),b($,jr,47,4,1123),b(w,jr,46,2,1114),je(t,"class","tabs-menu svelte-jy18ep"),b(t,jr,24,0,461)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,g){Se(s,t,g),xe(t,n),xe(n,o),xe(t,r),xe(t,i),xe(i,c),xe(t,a),xe(t,l),xe(l,u),xe(t,f),xe(t,p),xe(p,d),xe(t,h),xe(t,v),xe(v,m),xe(t,y),xe(t,w),xe(w,$),x||(S=[Ce(o,"click",e[2],!1,!1,!1),Ce(c,"click",e[3],!1,!1,!1),Ce(u,"click",e[4],!1,!1,!1),Ce(d,"click",e[5],!1,!1,!1),Ce(m,"click",e[6],!1,!1,!1),Ce($,"click",e[7],!1,!1,!1)],x=!0)},p:function(e,t){var n=Object(s.a)(t,1)[0];1&n&&H(o,"active","state"===e[0]),1&n&&H(c,"active","history"===e[0]),1&n&&H(u,"active","plugins"===e[0]),1&n&&H(d,"active","schema"===e[0]),1&n&&H(m,"active","structure"===e[0]),1&n&&H($,"active","snapshots"===e[0])},i:g,o:g,d:function(e){e&&Oe(t),x=!1,k(S)}};return ke("SvelteRegisterBlock",{block:O,id:Nr.name,type:"component",source:"",ctx:e}),O}function Dr(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("TabsMenu",r,[]);var i=t.active,s=t.onClickTab,c=["active","onClickTab"];Object.keys(t).forEach((function(e){~c.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<TabsMenu> was created with unknown prop '".concat(e,"'"))}));return e.$$set=function(e){"active"in e&&n(0,i=e.active),"onClickTab"in e&&n(1,s=e.onClickTab)},e.$capture_state=function(){return{active:i,onClickTab:s}},e.$inject_state=function(e){"active"in e&&n(0,i=e.active),"onClickTab"in e&&n(1,s=e.onClickTab)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,s,function(){return s("state")},function(){return s("history")},function(){return s("plugins")},function(){return s("schema")},function(){return s("structure")},function(){return s("snapshots")}]}var Mr=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Dr,Nr,S,{active:0,onClickTab:1}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"TabsMenu",options:e,id:Nr.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"active"in s||console.warn("<TabsMenu> was created without expected prop 'active'"),void 0!==r[1]||"onClickTab"in s||console.warn("<TabsMenu> was created without expected prop 'onClickTab'"),o}return Object(p.a)(n,[{key:"active",get:function(){throw new Error("<TabsMenu>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<TabsMenu>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onClickTab",get:function(){throw new Error("<TabsMenu>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<TabsMenu>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee),Er=[];function Tr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,o=[];function r(n){if(S(e,n)&&(e=n,t)){for(var r=!Er.length,i=0;i<o.length;i+=1){var s=o[i];s[1](),Er.push(s,e)}if(r){for(var c=0;c<Er.length;c+=2)Er[c][0](Er[c+1]);Er.length=0}}}function i(t){r(t(e))}function s(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,c=[i,s];return o.push(c),1===o.length&&(t=n(r)||g),i(e),function(){var e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(t(),t=null)}}return{set:r,update:i,subscribe:s}}var Rr="APP_CONTEXT",Br=Tr(new Map),Pr=Tr([]),Ar=function(e,t,n){var o=!Array.isArray(e),r=o?[e]:e,i=t.length<2;return{subscribe:Tr(n,(function(e){var n=!1,s=[],c=0,a=g,l=function(){if(!c){a();var n=t(o?s[0]:s,e);i?e(n):a=x(n)?n:g}},u=r.map((function(e,t){return C(e,(function(e){s[t]=e,c&=~(1<<t),n&&l()}),(function(){c|=1<<t}))}));return n=!0,l(),function(){k(u),a()}})).subscribe}}([Br,Pr],(function(e){var t,n=e[0],o=e[1];return n.get((null===(t=o[0])||void 0===t?void 0:t.topEntryId)||"")}));function _r(e){if(e.selection.empty){var t=e.selection.$from,n=e.storedMarks;return n?n.map((function(e){return e.type.name})):t.marks().map((function(e){return e.type.name}))}var o=e.selection.$head,r=e.selection.$anchor,i=new Set;return o.marks().forEach((function(e){return i.add(e.type.name)})),r.marks().forEach((function(e){return i.add(e.type.name)})),Array.from(i)}var zr=function(){return(zr=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Ir(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}var Vr=["jsonID","empty","anchor","from","head","to"],Fr=["$anchor","$head","$cursor","$to","$from"],Lr=["nodeAfter","nodeBefore","textOffset"];function qr(e){return Vr.reduce((function(t,n){return t[n]=e[n],t}),{})}function Jr(e){return Vr.concat(Fr).reduce((function(t,n){var o=e[n];if(o&&Fr.includes(n)){var r={};Lr.forEach((function(e){r[e]=o[e]})),o=zr(zr({},o),r)}return t[n]=o,t}),{})}kr(":root{--json-tree-label-color:rgb(133, 217, 239);--json-tree-string-color:rgb(184, 226, 72);--json-tree-number-color:rgb(184, 226, 72)}section.svelte-qshaer{border-top:1px solid rgba(255, 162, 177, 0.2);color:white;display:flex;height:calc(100% - var(--height-tabs-menu));width:100%}h2{color:#bb91a3;font-family:var(--font-sans);font-size:var(--font-medium);font-weight:400;letter-spacing:1px;margin:0;text-transform:uppercase}.left-panel{display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}.right-panel{border-left:1px solid rgba(255, 162, 177, 0.2);display:flex;flex-direction:column;flex-grow:1;overflow:scroll;padding:1em}");var Kr=function(e){return{}},Hr=function(e){return{class:"right-panel svelte-qshaer"}},Wr=function(e){return{}},Ur=function(e){return{class:"left-panel svelte-qshaer"}};function Gr(e){var t,n,o,r=e[1].left,i=D(r,e,e[0],Ur),c=e[1].right,a=D(c,e,e[0],Hr),l={c:function(){t=_("section"),i&&i.c(),n=V(),a&&a.c(),je(t,"class","svelte-qshaer"),b(t,"src/tabs/SplitView.svelte",37,0,819)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,r){Se(e,t,r),i&&i.m(t,null),xe(t,n),a&&a.m(t,null),o=!0},p:function(e,t){var n=Object(s.a)(t,1)[0];i&&i.p&&(!o||1&n)&&E(i,r,e,e[0],n,Wr,Ur),a&&a.p&&(!o||1&n)&&E(a,c,e,e[0],n,Kr,Hr)},i:function(e){o||(he(i,e),he(a,e),o=!0)},o:function(e){ve(i,e),ve(a,e),o=!1},d:function(e){e&&Oe(t),i&&i.d(e),a&&a.d(e)}};return ke("SvelteRegisterBlock",{block:l,id:Gr.name,type:"component",source:"",ctx:e}),l}function Xr(e,t,n){var o=t.$$slots,r=void 0===o?{}:o,i=t.$$scope;Me("SplitView",r,["left","right"]);var s=[];return Object.keys(t).forEach((function(e){~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<SplitView> was created with unknown prop '".concat(e,"'"))})),e.$$set=function(e){"$$scope"in e&&n(0,i=e.$$scope)},[i,r]}var Yr=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Xr,Gr,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"SplitView",options:e,id:Gr.name}),o}return n}(Ee);function Zr(e,t,n,o,r){var i=r?Ir(Ir([],r.path),[e]):[];return{id:"["+i.join(",")+"]",index:e,key:t,value:n,depth:o+1,collapsed:!0,type:Qr(n),path:i,parentId:r?r.id:null,recursiveOfId:null,children:[]}}function Qr(e){return Array.isArray(e)?"array":e instanceof Map?"map":e instanceof Set?"set":null===e?"null":typeof e}function ei(e,t,n,o,r,i,s,c,a){var l;if((null===(l=a.omitKeys)||void 0===l?void 0:l.includes(t))||a.maxDepth&&o>=a.maxDepth)return null;var u=Zr(e,t,n,o,r),f=s.get(u.id);if(f&&(u.collapsed=f.collapsed),i.set(u.id,u),function(e,t,n){if(!n.stopRecursion)return!0;if(n.isRecursiveNode)return n.isRecursiveNode(e,t);if("object"===e.type||"array"===e.type){var o=t.get(e.value);if(o)return e.recursiveOfId=o.id,!1;t.set(e.value,e)}return!0}(u,c,a)){var p=a.mapChildren&&a.mapChildren(n,Qr(n),u),d=null!==p&&void 0!==p?p:function(e){switch(Qr(e)){case"array":return e.map((function(e,t){return[t.toString(),e]}));case"map":return Array.from(e.entries());case"set":return Array.from(e.values()).map((function(e,t){return[t.toString(),e]}));case"object":return Object.entries(e);default:return[]}}(n);u.children=d.map((function(e,t){return ei(t,e[0],e[1],o+1,u,i,s,c,a)})).filter((function(e){return null!==e}))}return a.shouldExpandNode&&(u.collapsed=!a.shouldExpandNode(u)),u}var ti=function(e){var t=Tr(new Map),n=Tr(Zr(0,"root",[],0,null)),o=Tr(e),r=Tr(null);function i(e){return j(t).get(e)}X("app",{treeMapStore:t,treeStore:n,propsStore:o,rootElementStore:r,getNode:i,toggleCollapse:function(e){var n=i(e);n?t.update((function(e){return new Map(e.set(n.id,zr(zr({},n),{collapsed:!n.collapsed})))})):console.warn("Attempted to collapse non-existent node: "+e)},expandAllNodesToNode:function(e){var n=new Map(j(t));!function e(t,n){n&&(t.set(n.id,zr(zr({},n),{collapsed:!1})),n.parentId&&e(t,t.get(n.parentId)))}(n,n.get(e)),t.set(n)},formatValue:function(e,t){var n=j(o).valueFormatter,r=n?n(e,t):void 0;if(r)return r;switch(t.type){case"array":return(t.recursiveOfId?"recursive":"")+" [] "+e.length+" items";case"object":return(t.recursiveOfId?"recursive":"")+" {} "+Object.keys(e).length+" keys";case"map":case"set":return(t.recursiveOfId?"recursive":"")+" () "+e.size+" entries";case"string":return'"'+e+'"';case"boolean":return e?"true":"false";default:return e}}})};kr("ul.svelte-silq6e.svelte-silq6e{--string-color:var(--json-tree-string-color, #cb3f41);--symbol-color:var(--json-tree-symbol-color, #cb3f41);--boolean-color:var(--json-tree-boolean-color, #112aa7);--function-color:var(--json-tree-function-color, #112aa7);--number-color:var(--json-tree-number-color, #3029cf);--label-color:var(--json-tree-label-color, #871d8f);--arrow-color:var(--json-tree-arrow-color, #727272);--null-color:var(--json-tree-null-color, #8d8d8d);--undefined-color:var(--json-tree-undefined-color, #8d8d8d);--date-color:var(--json-tree-date-color, #8d8d8d);--li-identation:var(--json-tree-li-indentation, 1em);--li-line-height:var(--json-tree-li-line-height, 1.3);--li-colon-space:0.3em}ul.svelte-silq6e.svelte-silq6e{display:flex;flex-direction:column;height:max-content;list-style:none;padding:0;margin:0;width:100%}li.svelte-silq6e.svelte-silq6e{align-items:baseline;display:flex;height:max-content;line-height:var(--li-line-height);list-style:none;width:100%}li.svelte-silq6e+li.svelte-silq6e{margin-top:0.25em}.empty-block.svelte-silq6e.svelte-silq6e{visibility:hidden}.node-key.svelte-silq6e.svelte-silq6e{color:#85d9ef;margin-right:0.5em}.node-key.has-children.svelte-silq6e.svelte-silq6e{cursor:pointer}.node-key.p-left.svelte-silq6e.svelte-silq6e{padding-left:1.1em}.node-value.svelte-silq6e.svelte-silq6e{color:#b8e248;margin-right:0.5em}.node-value[data-type='number'].svelte-silq6e.svelte-silq6e{color:#fd993c}.node-value.expanded.svelte-silq6e.svelte-silq6e{color:#d1929b}.node-value.has-children.svelte-silq6e.svelte-silq6e{cursor:pointer}.arrow-btn.svelte-silq6e.svelte-silq6e{background:transparent;border:0;color:#85d9ef;cursor:pointer;margin-right:0.5em;padding:0;transition:all 150ms ease 0s;transform:rotateZ(0deg);transform-origin:45% 50%;position:relative;line-height:1.1em;font-size:0.75em}.arrow-btn.collapsed.svelte-silq6e.svelte-silq6e{transform:rotateZ(90deg)}.buttons.svelte-silq6e.svelte-silq6e{display:flex;flex-wrap:wrap}.log-copy-button.svelte-silq6e.svelte-silq6e{background:transparent;border:0;color:#85d9ef;cursor:pointer;margin:0;padding:0 0.5em}.log-copy-button.svelte-silq6e.svelte-silq6e:hover{background:rgba(255, 162, 177, 0.4);border-radius:2px;color:white}");var ni=me.console,oi="src/svelte-tree-view/TreeNode.svelte";function ri(e,t,n){var o=e.slice();return o[17]=t[n],o}function ii(e){var t,n,o,r,i,s={c:function(){t=_("button"),n=I("\u25b6"),je(t,"class",o=B("arrow-btn ".concat(e[0].collapsed?"collapsed":""))+" svelte-silq6e"),b(t,oi,131,4,3589)},m:function(o,s){Se(o,t,s),xe(t,n),r||(i=Ce(t,"click",e[9],!1,!1,!1),r=!0)},p:function(e,n){1&n&&o!==(o=B("arrow-btn ".concat(e[0].collapsed?"collapsed":""))+" svelte-silq6e")&&je(t,"class",o)},d:function(e){e&&Oe(t),r=!1,i()}};return ke("SvelteRegisterBlock",{block:s,id:ii.name,type:"if",source:"(131:2) {#if hasChildren}",ctx:e}),s}function si(e){var t,n=e[6](e[0].value,e[0])+"",o={c:function(){t=I(n)},m:function(e,n){Se(e,t,n)},p:function(e,o){1&o&&n!==(n=e[6](e[0].value,e[0])+"")&&Ne(t,n)},i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:o,id:si.name,type:"else",source:"(161:4) {:else}",ctx:e}),o}function ci(e){var t,n,o,r=e[3];function i(e){return{props:{value:e[0].value,node:e[0],defaultFormatter:e[11]},$$inline:!0}}r&&(t=new r(i(e)));var s={c:function(){t&&ge(t.$$.fragment),n=F()},m:function(e,r){t&&ye(t,e,r),Se(e,n,r),o=!0},p:function(e,o){var s={};if(1&o&&(s.value=e[0].value),1&o&&(s.node=e[0]),1&o&&(s.defaultFormatter=e[11]),r!==(r=e[3])){if(t){pe();var c=t;ve(c.$$.fragment,1,0,(function(){be(c,1)})),de()}r?(ge((t=new r(i(e))).$$.fragment),he(t.$$.fragment,1),ye(t,n.parentNode,n)):t=null}else r&&t.$set(s)},i:function(e){o||(t&&he(t.$$.fragment,e),o=!0)},o:function(e){t&&ve(t.$$.fragment,e),o=!1},d:function(e){e&&Oe(n),t&&be(t,e)}};return ke("SvelteRegisterBlock",{block:s,id:ci.name,type:"if",source:"(154:4) {#if valueComponent}",ctx:e}),s}function ai(e){var t,n,o,r={c:function(){(t=_("button")).textContent="log",je(t,"class","log-copy-button svelte-silq6e"),b(t,oi,166,6,4403)},m:function(r,i){Se(r,t,i),n||(o=Ce(t,"click",e[7],!1,!1,!1),n=!0)},p:g,d:function(e){e&&Oe(t),n=!1,o()}};return ke("SvelteRegisterBlock",{block:r,id:ai.name,type:"if",source:"(166:4) {#if $propsStore.showLogButton}",ctx:e}),r}function li(e){var t,n,o,r={c:function(){(t=_("button")).textContent="copy",je(t,"class","log-copy-button svelte-silq6e"),b(t,oi,169,6,4526)},m:function(r,i){Se(r,t,i),n||(o=Ce(t,"click",e[8],!1,!1,!1),n=!0)},p:g,d:function(e){e&&Oe(t),n=!1,o()}};return ke("SvelteRegisterBlock",{block:r,id:li.name,type:"if",source:"(169:4) {#if $propsStore.showCopyButton}",ctx:e}),r}function ui(e){var t,n,o,r=e[0].children;De(r);for(var i=[],s=0;s<r.length;s+=1)i[s]=fi(ri(e,r,s));var c=function(e){return ve(i[e],1,1,(function(){i[e]=null}))},a={c:function(){t=_("li"),n=_("ul");for(var e=0;e<i.length;e+=1)i[e].c();je(n,"style","padding-left: 0.875em"),je(n,"class","svelte-silq6e"),b(n,oi,175,4,4694),je(t,"class","row svelte-silq6e"),b(t,oi,174,2,4673)},m:function(e,r){Se(e,t,r),xe(t,n);for(var s=0;s<i.length;s+=1)i[s].m(n,null);o=!0},p:function(e,t){if(1&t){var o;for(De(r=e[0].children),o=0;o<r.length;o+=1){var s=ri(e,r,o);i[o]?(i[o].p(s,t),he(i[o],1)):(i[o]=fi(s),i[o].c(),he(i[o],1),i[o].m(n,null))}for(pe(),o=r.length;o<i.length;o+=1)c(o);de()}},i:function(e){if(!o){for(var t=0;t<r.length;t+=1)he(i[t]);o=!0}},o:function(e){i=i.filter(Boolean);for(var t=0;t<i.length;t+=1)ve(i[t]);o=!1},d:function(e){e&&Oe(t),A(i,e)}};return ke("SvelteRegisterBlock",{block:a,id:ui.name,type:"if",source:"(174:0) {#if !node.collapsed && hasChildren}",ctx:e}),a}function fi(e){var t,n;t=new hi({props:{id:e[17].id},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};1&n&&(o.id=e[17].id),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:fi.name,type:"each",source:"(177:6) {#each node.children as child}",ctx:e}),o}function pi(e){var t,n,o,r,i,c,a,l,u,f,p,d,h,v,m,g,y,w,$,x=e[0].key+"",S=e[2]&&ii(e),O=[ci,si],C=[];function j(e,t){return e[3]?0:1}l=j(e),u=C[l]=O[l](e);var N=e[1].showLogButton&&ai(e),D=e[1].showCopyButton&&li(e),M=!e[0].collapsed&&e[2]&&ui(e),E={c:function(){t=_("li"),S&&S.c(),n=V(),o=_("div"),r=I(x),i=I(":"),c=V(),a=_("div"),u.c(),p=V(),d=_("div"),N&&N.c(),h=V(),D&&D.c(),m=V(),M&&M.c(),g=F(),je(o,"class","node-key svelte-silq6e"),H(o,"has-children",e[2]),H(o,"p-left",!e[2]),b(o,oi,138,2,3736),je(a,"class","node-value svelte-silq6e"),je(a,"data-type",f=e[0].type),H(a,"expanded",!e[0].collapsed&&e[2]),H(a,"has-children",e[2]),b(a,oi,146,2,3898),je(d,"class","buttons svelte-silq6e"),b(d,oi,164,2,4339),je(t,"class","row svelte-silq6e"),je(t,"data-tree-id",v=e[0].id),H(t,"collapsed",e[0].collapsed&&e[2]),b(t,oi,129,0,3477)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,u){Se(s,t,u),S&&S.m(t,null),xe(t,n),xe(t,o),xe(o,r),xe(o,i),xe(t,c),xe(t,a),C[l].m(a,null),xe(t,p),xe(t,d),N&&N.m(d,null),xe(d,h),D&&D.m(d,null),Se(s,m,u),M&&M.m(s,u),Se(s,g,u),y=!0,w||($=[Ce(o,"click",e[9],!1,!1,!1),Ce(a,"click",e[9],!1,!1,!1)],w=!0)},p:function(e,i){var c=Object(s.a)(i,1)[0];e[2]?S?S.p(e,c):((S=ii(e)).c(),S.m(t,n)):S&&(S.d(1),S=null),(!y||1&c)&&x!==(x=e[0].key+"")&&Ne(r,x),4&c&&H(o,"has-children",e[2]),4&c&&H(o,"p-left",!e[2]);var p=l;(l=j(e))===p?C[l].p(e,c):(pe(),ve(C[p],1,1,(function(){C[p]=null})),de(),(u=C[l])?u.p(e,c):(u=C[l]=O[l](e)).c(),he(u,1),u.m(a,null)),(!y||1&c&&f!==(f=e[0].type))&&je(a,"data-type",f),5&c&&H(a,"expanded",!e[0].collapsed&&e[2]),4&c&&H(a,"has-children",e[2]),e[1].showLogButton?N?N.p(e,c):((N=ai(e)).c(),N.m(d,h)):N&&(N.d(1),N=null),e[1].showCopyButton?D?D.p(e,c):((D=li(e)).c(),D.m(d,null)):D&&(D.d(1),D=null),(!y||1&c&&v!==(v=e[0].id))&&je(t,"data-tree-id",v),5&c&&H(t,"collapsed",e[0].collapsed&&e[2]),!e[0].collapsed&&e[2]?M?(M.p(e,c),5&c&&he(M,1)):((M=ui(e)).c(),he(M,1),M.m(g.parentNode,g)):M&&(pe(),ve(M,1,1,(function(){M=null})),de())},i:function(e){y||(he(u),he(M),y=!0)},o:function(e){ve(u),ve(M),y=!1},d:function(e){e&&Oe(t),S&&S.d(),C[l].d(),N&&N.d(),D&&D.d(),e&&Oe(m),M&&M.d(e),e&&Oe(g),w=!1,k($)}};return ke("SvelteRegisterBlock",{block:E,id:pi.name,type:"component",source:"",ctx:e}),E}function di(e,t,n){var o,r,i,s,c,a=t.$$slots,l=void 0===a?{}:a;t.$$scope;Me("TreeNode",l,[]);var u=t.id,f=Y("app"),p=f.treeMapStore,d=f.propsStore,h=f.rootElementStore,v=f.getNode,m=f.toggleCollapse,g=f.expandAllNodesToNode,y=f.formatValue;function b(){console.info("%c [prosemirror-dev-toolkit]: Property added to window._node","color: #b8e248"),console.log(o.value),window._node=o.value}function w(){navigator.clipboard.writeText(JSON.stringify(o.value))}function $(){if(r)m(o.id);else if(o.recursiveOfId){g(o.recursiveOfId);var e=c.querySelector('li[data-tree-id="'.concat(o.recursiveOfId,'"]'));e&&e.scrollIntoView()}}O(d,"propsStore"),N(e,d,(function(e){return n(1,s=e)})),O(h,"rootElementStore"),N(e,h,(function(e){return n(12,c=e)})),p.subscribe((function(e){var t=e.get(u);o!==t&&n(0,o=t)}));var k=["id"];Object.keys(t).forEach((function(e){~k.indexOf(e)||"$$"===e.slice(0,2)||ni.warn("<TreeNode> was created with unknown prop '".concat(e,"'"))}));return e.$$set=function(e){"id"in e&&n(10,u=e.id)},e.$capture_state=function(){return{getContext:Y,id:u,treeMapStore:p,propsStore:d,rootElementStore:h,getNode:v,toggleCollapse:m,expandAllNodesToNode:g,formatValue:y,handleLogNode:b,handleCopyNodeToClipboard:w,handleToggleCollapse:$,node:o,hasChildren:r,valueComponent:i,$propsStore:s,$rootElementStore:c}},e.$inject_state=function(e){"id"in e&&n(10,u=e.id),"node"in e&&n(0,o=e.node),"hasChildren"in e&&n(2,r=e.hasChildren),"valueComponent"in e&&n(3,i=e.valueComponent)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){1024&e.$$.dirty&&n(0,o=v(u)),1&e.$$.dirty&&n(2,r=o.children.length>0),2&e.$$.dirty&&n(3,i=s.valueComponent)},[o,s,r,i,d,h,y,b,w,$,u,function(e){return y(e,o)}]}var hi=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,di,pi,S,{id:10}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"TreeNode",options:e,id:pi.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[10]||"id"in s||ni.warn("<TreeNode> was created without expected prop 'id'"),o}return Object(p.a)(n,[{key:"id",get:function(){throw new Error("<TreeNode>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<TreeNode>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr(".svelte-5tqfg8{box-sizing:border-box}section.svelte-5tqfg8{font-family:Helvetica Neue, Calibri Light, Roboto, sans-serif;font-size:13px;height:max-content}");function vi(e,t,n){var o=e.slice();return o[15]=t[n],o}function mi(e){var t,n;t=new hi({props:{id:e[15].id},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};2&n&&(o.id=e[15].id),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:mi.name,type:"each",source:"(53:2) {#each $treeStore.children as child}",ctx:e}),o}function gi(e){var t,n,o,r=e[1].children;De(r);for(var i=[],c=0;c<r.length;c+=1)i[c]=mi(vi(e,r,c));var a=function(e){return ve(i[e],1,1,(function(){i[e]=null}))},l={c:function(){t=_("section");for(var o=0;o<i.length;o+=1)i[o].c();je(t,"class",n=B(e[3].class)+" svelte-5tqfg8"),b(t,"src/svelte-tree-view/Main.svelte",51,0,1637)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(n,r){Se(n,t,r);for(var s=0;s<i.length;s+=1)i[s].m(t,null);e[12](t),o=!0},p:function(e,c){var l=Object(s.a)(c,1)[0];if(2&l){var u;for(De(r=e[1].children),u=0;u<r.length;u+=1){var f=vi(e,r,u);i[u]?(i[u].p(f,l),he(i[u],1)):(i[u]=mi(f),i[u].c(),he(i[u],1),i[u].m(t,null))}for(pe(),u=r.length;u<i.length;u+=1)a(u);de()}(!o||8&l&&n!==(n=B(e[3].class)+" svelte-5tqfg8"))&&je(t,"class",n)},i:function(e){if(!o){for(var t=0;t<r.length;t+=1)he(i[t]);o=!0}},o:function(e){i=i.filter(Boolean);for(var t=0;t<i.length;t+=1)ve(i[t]);o=!1},d:function(n){n&&Oe(t),A(i,n),e[12](null)}};return ke("SvelteRegisterBlock",{block:l,id:gi.name,type:"component",source:"",ctx:e}),l}function yi(e,t,n){var o,r=t,i=r.$$slots,s=void 0===i?{}:i;r.$$scope;Me("Main",s,[]);var c=t.data,a=t.leftIndent,l=void 0===a?4:a,u=t.showLogButton,f=void 0!==u&&u,p=t.showCopyButton,d=void 0!==p&&p,h=t.valueComponent,v=void 0===h?void 0:h,m=t.recursionOpts,g=void 0===m?{}:m,b=t.valueFormatter,w=void 0===b?void 0:b,$=null,k={leftIndent:l,showLogButton:f,showCopyButton:d,valueComponent:v,recursionOpts:Object.assign({maxDepth:10,omitKeys:[],stopRecursion:!1,shouldExpandNode:function(){return!1}},g),valueFormatter:w};ti(k);var x=Y("app"),S=x.treeMapStore,C=x.treeStore,D=x.rootElementStore;return O(C,"treeStore"),N(e,C,(function(e){return n(1,o=e)})),G((function(){D.set($)})),e.$$set=function(e){n(3,t=y(y({},t),T(e))),"data"in e&&n(4,c=e.data),"leftIndent"in e&&n(5,l=e.leftIndent),"showLogButton"in e&&n(6,f=e.showLogButton),"showCopyButton"in e&&n(7,d=e.showCopyButton),"valueComponent"in e&&n(8,v=e.valueComponent),"recursionOpts"in e&&n(9,g=e.recursionOpts),"valueFormatter"in e&&n(10,w=e.valueFormatter)},e.$capture_state=function(){return{getContext:Y,onMount:G,get:j,createNode:Zr,recurseObjectProperties:ei,getValueType:Qr,createContext:ti,TreeNode:hi,data:c,leftIndent:l,showLogButton:f,showCopyButton:d,valueComponent:v,recursionOpts:g,valueFormatter:w,rootElement:$,props:k,treeMapStore:S,treeStore:C,rootElementStore:D,$treeStore:o}},e.$inject_state=function(e){n(3,t=y(y({},t),e)),"data"in t&&n(4,c=e.data),"leftIndent"in t&&n(5,l=e.leftIndent),"showLogButton"in t&&n(6,f=e.showLogButton),"showCopyButton"in t&&n(7,d=e.showCopyButton),"valueComponent"in t&&n(8,v=e.valueComponent),"recursionOpts"in t&&n(9,g=e.recursionOpts),"valueFormatter"in t&&n(10,w=e.valueFormatter),"rootElement"in t&&n(0,$=e.rootElement),"props"in t&&n(11,k=e.props)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){if(2016&e.$$.dirty&&n(11,k={leftIndent:l,showLogButton:f,showCopyButton:d,valueComponent:v,recursionOpts:Object.assign({maxDepth:10,omitKeys:[],stopRecursion:!1,shouldExpandNode:function(){return!1}},g),valueFormatter:w}),2064&e.$$.dirty){var t=new Map,o=j(S),r=new Map,i=ei(-1,"root",c,-1,null,t,o,r,k.recursionOpts);S.set(t),C.set(i)}},t=T(t),[$,o,C,t,c,l,f,d,v,g,w,k,function(e){ee[e?"unshift":"push"]((function(){n(0,$=e)}))}]}var bi=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,yi,gi,S,{data:4,leftIndent:5,showLogButton:6,showCopyButton:7,valueComponent:8,recursionOpts:9,valueFormatter:10}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"Main",options:e,id:gi.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[4]||"data"in s||console.warn("<Main> was created without expected prop 'data'"),o}return Object(p.a)(n,[{key:"data",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"leftIndent",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"showLogButton",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"showCopyButton",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"valueComponent",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"recursionOpts",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"valueFormatter",get:function(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr("button.svelte-12kwmti{background:transparent;border:0;border-radius:2px;color:#d3d3d9;cursor:pointer;font-size:var(--font-small);padding:6px 10px;text-transform:uppercase}button.svelte-12kwmti:hover{background:rgba(255, 162, 177, 0.4);color:white}button.selected.svelte-12kwmti{background:rgba(255, 162, 177, 0.4)}");function wi(e){for(var t,n,o,r,i=e[3].default,c=D(i,e,e[2],null),a=[e[1]],l={},u=0;u<a.length;u+=1)l=y(l,a[u]);var f={c:function(){t=_("button"),c&&c.c(),q(t,l),H(t,"selected",e[0]),H(t,"svelte-12kwmti",!0),b(t,"src/Button.svelte",22,0,476)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,s){Se(i,t,s),c&&c.m(t,null),n=!0,o||(r=[Ce(t,"click",e[4],!1,!1,!1),Ce(t,"mouseover",e[5],!1,!1,!1),Ce(t,"mouseenter",e[6],!1,!1,!1),Ce(t,"mouseleave",e[7],!1,!1,!1)],o=!0)},p:function(e,o){var r=Object(s.a)(o,1)[0];c&&c.p&&(!n||4&r)&&E(c,i,e,e[2],r,null,null),q(t,l=function(e,t){for(var n={},o={},r={$$scope:1},i=e.length;i--;){var s=e[i],c=t[i];if(c){for(var a in s)a in c||(o[a]=1);for(var l in c)r[l]||(n[l]=c[l],r[l]=1);e[i]=c}else for(var u in s)r[u]=1}for(var f in o)f in n||(n[f]=void 0);return n}(a,[e[1]])),H(t,"selected",e[0]),H(t,"svelte-12kwmti",!0)},i:function(e){n||(he(c,e),n=!0)},o:function(e){ve(c,e),n=!1},d:function(e){e&&Oe(t),c&&c.d(e),o=!1,k(r)}};return ke("SvelteRegisterBlock",{block:f,id:wi.name,type:"component",source:"",ctx:e}),f}function $i(e,t,n){var o=["selected"],r=R(t,o),i=t,s=i.$$slots,c=void 0===s?{}:s,a=i.$$scope;Me("Button",c,["default"]);var l=t.selected,u=void 0!==l&&l,f={class:[r.class]};return e.$$set=function(e){t=y(y({},t),T(e)),n(8,r=R(t,o)),"selected"in e&&n(0,u=e.selected),"$$scope"in e&&n(2,a=e.$$scope)},e.$capture_state=function(){return{selected:u,buttonProps:f}},e.$inject_state=function(e){"selected"in t&&n(0,u=e.selected),"buttonProps"in t&&n(1,f=e.buttonProps)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[u,f,a,c,function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)}]}var ki=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,$i,wi,S,{selected:0}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"Button",options:e,id:wi.name}),o}return Object(p.a)(n,[{key:"selected",get:function(){throw new Error("<Button>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<Button>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr("@charset \"UTF-8\";:root{--json-tree-label-color:rgb(133, 217, 239);--json-tree-string-color:rgb(184, 226, 72);--json-tree-number-color:rgb(184, 226, 72)}.top-row.svelte-w3fzk6{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-w3fzk6{overflow:scroll}.right-panel.svelte-w3fzk6{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:200px;width:200px}.selection-btn{height:24px;width:35px}.caret-icon.svelte-w3fzk6::before{content:'\u25b6'}.caret-icon.expanded.svelte-w3fzk6::before{content:'\u25bc'}.no-marks.svelte-w3fzk6{color:#85d9ef;margin:0.5em 0 1em 1em}.tree-view{margin:0.5em 0 1em 0}");var xi=me.console,Si="src/tabs/state/StateTab.svelte";function Oi(e,t,n){var o=e.slice();return o[10]=t[n],o}function Ci(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ci.name,type:"slot",source:"(91:6) <Button on:click={handleClickLogDoc}>",ctx:e}),n}function ji(e){var t,n,o,r,i,s,c,a;(i=new ki({props:{$$slots:{default:[Ci]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[6]),c=new bi({props:{class:"tree-view",data:e[0],showLogButton:!0,showCopyButton:!0,valueFormatter:Pi},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Current doc",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),je(o,"class","svelte-w3fzk6"),b(o,Si,89,6,2350),je(n,"class","top-row svelte-w3fzk6"),b(n,Si,88,4,2322),je(t,"slot","left"),je(t,"class","left-panel svelte-w3fzk6"),b(t,Si,87,2,2281)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};8192&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};1&t&&(o.data=e[0]),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:ji.name,type:"slot",source:"(88:2) ",ctx:e}),l}function Ni(e){var t,n={c:function(){je(t=_("span"),"class","caret-icon svelte-w3fzk6"),H(t,"expanded",e[5]),b(t,Si,104,9,2762)},m:function(e,n){Se(e,t,n)},p:function(e,n){32&n&&H(t,"expanded",e[5])},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ni.name,type:"slot",source:'(104:6) <Button class=\\"selection-btn\\" on:click={handleExpandSelection}         >',ctx:e}),n}function Di(e){var t,n;t=new bi({props:{class:"tree-view",data:e[1],recursionOpts:{maxDepth:10}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};2&n&&(o.data=e[1]),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Di.name,type:"else",source:"(111:4) {:else}",ctx:e}),o}function Mi(e){var t,n={c:function(){je(t=_("div"),"class","svelte-w3fzk6"),b(t,Si,109,6,2970)},m:function(e,n){Se(e,t,n)},p:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Mi.name,type:"each",source:"(109:4) {#each [...[]] as _}",ctx:e}),n}function Ei(e){var t,n;t=new bi({props:{class:"tree-view",data:e[2]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};4&n&&(o.data=e[2]),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Ei.name,type:"else",source:"(124:6) {:else}",ctx:e}),o}function Ti(e){var t,n={c:function(){(t=_("div")).textContent="No active marks",je(t,"class","no-marks svelte-w3fzk6"),b(t,Si,122,8,3220)},m:function(e,n){Se(e,t,n)},p:g,i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ti.name,type:"if",source:"(122:6) {#if activeMarks.length === 0}",ctx:e}),n}function Ri(e){var t,n,o,r,i,s,c,a,l,u,f,p,d,h,v,m,g,y;(i=new ki({props:{class:"selection-btn",$$slots:{default:[Ni]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[7]);var w=[].concat();De(w);for(var $=[],k=0;k<w.length;k+=1)$[k]=Mi(Oi(e,w,k));var x=null;w.length||(x=Di(e));var S=[Ti,Ei],O=[];function C(e,t){return 0===e[2].length?0:1}f=C(e),p=O[f]=S[f](e),g=new bi({props:{class:"tree-view",data:{nodeSize:e[3],childCount:e[4]}},$$inline:!0});var j={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Selection",r=V(),ge(i.$$.fragment),s=V();for(var e=0;e<$.length;e+=1)$[e].c();x&&x.c(),c=V(),a=_("div"),(l=_("h2")).textContent="Active marks",u=V(),p.c(),d=V(),h=_("div"),(v=_("h2")).textContent="Document stats",m=V(),ge(g.$$.fragment),je(o,"class","svelte-w3fzk6"),b(o,Si,102,6,2665),je(n,"class","top-row svelte-w3fzk6"),b(n,Si,101,4,2637),je(l,"class","svelte-w3fzk6"),b(l,Si,120,6,3153),je(a,"class","svelte-w3fzk6"),b(a,Si,119,4,3141),je(v,"class","svelte-w3fzk6"),b(v,Si,128,6,3375),je(h,"class","svelte-w3fzk6"),b(h,Si,127,4,3363),je(t,"slot","right"),je(t,"class","right-panel svelte-w3fzk6"),b(t,Si,100,2,2594)},m:function(e,p){Se(e,t,p),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s);for(var b=0;b<$.length;b+=1)$[b].m(t,null);x&&x.m(t,null),xe(t,c),xe(t,a),xe(a,l),xe(a,u),O[f].m(a,null),xe(t,d),xe(t,h),xe(h,v),xe(h,m),ye(g,h,null),y=!0},p:function(e,n){var o={};if(8224&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o),2&n){var r;for(De(w=[].concat()),r=0;r<w.length;r+=1){var s=Oi(e,w,r);$[r]?$[r].p(s,n):($[r]=Mi(s),$[r].c(),$[r].m(t,c))}for(;r<$.length;r+=1)$[r].d(1);$.length=w.length,!w.length&&x?x.p(e,n):w.length?x&&(pe(),ve(x,1,1,(function(){x=null})),de()):((x=Di(e)).c(),he(x,1),x.m(t,c))}var l=f;(f=C(e))===l?O[f].p(e,n):(pe(),ve(O[l],1,1,(function(){O[l]=null})),de(),(p=O[f])?p.p(e,n):(p=O[f]=S[f](e)).c(),he(p,1),p.m(a,null));var u={};24&n&&(u.data={nodeSize:e[3],childCount:e[4]}),g.$set(u)},i:function(e){y||(he(i.$$.fragment,e),he(p),he(g.$$.fragment,e),y=!0)},o:function(e){ve(i.$$.fragment,e),ve(p),ve(g.$$.fragment,e),y=!1},d:function(e){e&&Oe(t),be(i),A($,e),x&&x.d(),O[f].d(),be(g)}};return ke("SvelteRegisterBlock",{block:j,id:Ri.name,type:"slot",source:"(101:2) ",ctx:e}),j}function Bi(e){var t,n;t=new Yr({props:{$$slots:{right:[Ri],left:[ji]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};8255&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Bi.name,type:"component",source:"",ctx:e}),o}function Pi(e,t){if("object"===t.type&&e.type)return"{} ".concat(e.type)}function Ai(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("StateTab",r,[]);var i=Y(Rr).view,s=i.state.doc.toJSON(),c=qr(i.state.selection),a=i.state,l=[],u=i.state.doc.nodeSize,f=i.state.doc.childCount,p=!1;function d(){console.log(s),window._doc=s}function h(){n(5,p=!p),n(1,c=p?Jr(a.selection):qr(a.selection))}Ar.subscribe((function(e){if(e){var t=e.state;a=t,n(0,s=t.doc.toJSON()),n(1,c=qr(t.selection)),n(2,l=_r(t)),n(3,u=t.doc.nodeSize),n(4,f=t.doc.childCount)}}));var v=[];return Object.keys(t).forEach((function(e){~v.indexOf(e)||"$$"===e.slice(0,2)||xi.warn("<StateTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,get:j,APP_CONTEXT:Rr,latestEntry:Ar,getActiveMarks:_r,createSelection:qr,createFullSelection:Jr,SplitView:Yr,TreeView:bi,Button:ki,view:i,doc:s,selection:c,currentState:a,activeMarks:l,nodeSize:u,childCount:f,expandedSelection:p,handleClickLogDoc:d,handleExpandSelection:h,formatDocNodeValue:Pi}},e.$inject_state=function(e){"doc"in e&&n(0,s=e.doc),"selection"in e&&n(1,c=e.selection),"currentState"in e&&(a=e.currentState),"activeMarks"in e&&n(2,l=e.activeMarks),"nodeSize"in e&&n(3,u=e.nodeSize),"childCount"in e&&n(4,f=e.childCount),"expandedSelection"in e&&n(5,p=e.expandedSelection)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,c,l,u,f,p,d,h]}var _i=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Ai,Bi,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"StateTab",options:e,id:Bi.name}),o}return n}(Ee);function zi(e,t,n){if("array"===t)return[]}function Ii(e,t){if("array"===t&&0===e[1]&&0===e[2])return[];if("array"===t&&"string"===typeof e[0]&&0===e[1]&&2===e[2])return[];if("array"===t&&1===e.length&&"object"===typeof e[0])return[];if("object"===t&&"a"===e._t){var n=[];for(var o in e)"_t"!==o&&("_"===o.charAt(0)?n.push([o.substr(1),e[o]]):n.push([o,e[o]]));return n}}kr("@charset \"UTF-8\";ul.svelte-8g1ejv.svelte-8g1ejv{color:white;list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-8g1ejv.svelte-8g1ejv{transition:background 0.1s}li.svelte-8g1ejv.svelte-8g1ejv:hover{background:rgba(255, 162, 177, 0.4);color:white}li.selected.svelte-8g1ejv.svelte-8g1ejv{background:rgba(255, 162, 177, 0.4)}li.svelte-8g1ejv+li.svelte-8g1ejv{border-top:1px solid #604c68}button.svelte-8g1ejv.svelte-8g1ejv{background:transparent;border:0;color:#d3d3d9;cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;justify-content:space-between;padding:6px 18px;text-transform:uppercase;width:100%}button.p-left.svelte-8g1ejv.svelte-8g1ejv{margin-left:1em}.caret-icon.svelte-8g1ejv.svelte-8g1ejv::before{content:'\u25b6'}.caret-icon.expanded.svelte-8g1ejv.svelte-8g1ejv::before{content:'\u25bc'}");var Vi="src/tabs/history/HistoryList.svelte";function Fi(e,t,n){var o=e.slice();return o[5]=t[n],o[7]=n,o}function Li(e,t,n){var o=e.slice();return o[8]=t[n],o}function qi(e){var t,n,o,r=e[5].entries.length+"",i={c:function(){t=I("["),n=I(r),o=I("]")},m:function(e,r){Se(e,t,r),Se(e,n,r),Se(e,o,r)},p:function(e,t){1&t&&r!==(r=e[5].entries.length+"")&&Ne(n,r)},d:function(e){e&&Oe(t),e&&Oe(n),e&&Oe(o)}};return ke("SvelteRegisterBlock",{block:i,id:qi.name,type:"if",source:"(56:10) {#if group.isGroup}",ctx:e}),i}function Ji(e){var t,n={c:function(){je(t=_("span"),"class","caret-icon svelte-8g1ejv"),H(t,"expanded",e[5].expanded),b(t,Vi,60,10,1325)},m:function(e,n){Se(e,t,n)},p:function(e,n){1&n&&H(t,"expanded",e[5].expanded)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ji.name,type:"if",source:"(60:8) {#if group.isGroup && group.entries.length > 1}",ctx:e}),n}function Ki(e){var t,n=e[5].entries;De(n);for(var o=[],r=0;r<n.length;r+=1)o[r]=Hi(Li(e,n,r));var i={c:function(){for(var e=0;e<o.length;e+=1)o[e].c();t=F()},m:function(e,n){for(var r=0;r<o.length;r+=1)o[r].m(e,n);Se(e,t,n)},p:function(e,r){if(7&r){var i;for(De(n=e[5].entries),i=0;i<n.length;i+=1){var s=Li(e,n,i);o[i]?o[i].p(s,r):(o[i]=Hi(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d:function(e){A(o,e),e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:i,id:Ki.name,type:"if",source:"(65:4) {#if group.isGroup && group.expanded}",ctx:e}),i}function Hi(e){var t,n,o,r,i,s,c=e[8].timeStr+"";function a(){return e[4](e[8],e[7])}var l={c:function(){t=_("li"),n=_("button"),o=I(c),r=V(),je(n,"class","p-left svelte-8g1ejv"),b(n,Vi,67,10,1574),je(t,"class","svelte-8g1ejv"),H(t,"selected",e[1]===e[8].id),b(t,Vi,66,8,1515)},m:function(e,c){Se(e,t,c),xe(t,n),xe(n,o),xe(t,r),i||(s=Ce(n,"click",a,!1,!1,!1),i=!0)},p:function(n,r){e=n,1&r&&c!==(c=e[8].timeStr+"")&&Ne(o,c),3&r&&H(t,"selected",e[1]===e[8].id)},d:function(e){e&&Oe(t),i=!1,s()}};return ke("SvelteRegisterBlock",{block:l,id:Hi.name,type:"each",source:"(66:6) {#each group.entries as subEntry}",ctx:e}),l}function Wi(e){var t,n,o,r,i,s,c,a,l,u,f=e[5].topEntry.timeStr+"",p=e[5].isGroup&&qi(e),d=e[5].isGroup&&e[5].entries.length>1&&Ji(e);function h(){return e[3](e[5],e[7])}var v=e[5].isGroup&&e[5].expanded&&Ki(e),m={c:function(){t=_("li"),n=_("button"),o=_("span"),r=I(f),i=V(),p&&p.c(),s=V(),d&&d.c(),c=V(),v&&v.c(),a=F(),b(o,Vi,53,8,1118),je(n,"class","svelte-8g1ejv"),H(n,"is-group",e[5].isGroup),b(n,Vi,49,6,986),je(t,"class","svelte-8g1ejv"),H(t,"selected",!e[5].expanded&&e[1]===e[5].topEntry.id),b(t,Vi,48,4,906)},m:function(e,f){Se(e,t,f),xe(t,n),xe(n,o),xe(o,r),xe(o,i),p&&p.m(o,null),xe(n,s),d&&d.m(n,null),Se(e,c,f),v&&v.m(e,f),Se(e,a,f),l||(u=Ce(n,"click",h,!1,!1,!1),l=!0)},p:function(i,s){e=i,1&s&&f!==(f=e[5].topEntry.timeStr+"")&&Ne(r,f),e[5].isGroup?p?p.p(e,s):((p=qi(e)).c(),p.m(o,null)):p&&(p.d(1),p=null),e[5].isGroup&&e[5].entries.length>1?d?d.p(e,s):((d=Ji(e)).c(),d.m(n,null)):d&&(d.d(1),d=null),1&s&&H(n,"is-group",e[5].isGroup),3&s&&H(t,"selected",!e[5].expanded&&e[1]===e[5].topEntry.id),e[5].isGroup&&e[5].expanded?v?v.p(e,s):((v=Ki(e)).c(),v.m(a.parentNode,a)):v&&(v.d(1),v=null)},d:function(e){e&&Oe(t),p&&p.d(),d&&d.d(),e&&Oe(c),v&&v.d(e),e&&Oe(a),l=!1,u()}};return ke("SvelteRegisterBlock",{block:m,id:Wi.name,type:"each",source:"(48:2) {#each listItems as group, groupIdx}",ctx:e}),m}function Ui(e){var t,n=e[0];De(n);for(var o=[],r=0;r<n.length;r+=1)o[r]=Wi(Fi(e,n,r));var i={c:function(){t=_("ul");for(var e=0;e<o.length;e+=1)o[e].c();je(t,"class","svelte-8g1ejv"),b(t,Vi,46,0,858)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){Se(e,t,n);for(var r=0;r<o.length;r+=1)o[r].m(t,null)},p:function(e,r){var i=Object(s.a)(r,1)[0];if(7&i){var c;for(De(n=e[0]),c=0;c<n.length;c+=1){var a=Fi(e,n,c);o[c]?o[c].p(a,i):(o[c]=Wi(a),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},i:g,o:g,d:function(e){e&&Oe(t),A(o,e)}};return ke("SvelteRegisterBlock",{block:i,id:Ui.name,type:"component",source:"",ctx:e}),i}function Gi(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("HistoryList",r,[]);var i=t.listItems,s=void 0===i?[]:i,c=t.selectedId,a=t.onSelect,l=["listItems","selectedId","onSelect"];Object.keys(t).forEach((function(e){~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<HistoryList> was created with unknown prop '".concat(e,"'"))}));return e.$$set=function(e){"listItems"in e&&n(0,s=e.listItems),"selectedId"in e&&n(1,c=e.selectedId),"onSelect"in e&&n(2,a=e.onSelect)},e.$capture_state=function(){return{listItems:s,selectedId:c,onSelect:a}},e.$inject_state=function(e){"listItems"in e&&n(0,s=e.listItems),"selectedId"in e&&n(1,c=e.selectedId),"onSelect"in e&&n(2,a=e.onSelect)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,c,a,function(e,t){return a(e.topEntry.id,t,!0)},function(e,t){return a(e.id,t,!1)}]}var Xi=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Gi,Ui,S,{listItems:0,selectedId:1,onSelect:2}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"HistoryList",options:e,id:Ui.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[1]||"selectedId"in s||console.warn("<HistoryList> was created without expected prop 'selectedId'"),void 0!==r[2]||"onSelect"in s||console.warn("<HistoryList> was created without expected prop 'onSelect'"),o}return Object(p.a)(n,[{key:"listItems",get:function(){throw new Error("<HistoryList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<HistoryList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"selectedId",get:function(){throw new Error("<HistoryList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<HistoryList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onSelect",get:function(){throw new Error("<HistoryList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<HistoryList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr(".added.svelte-l7s70u.svelte-l7s70u{display:inline-block;background:#87cc86;border-radius:1px;color:green;padding:1px 2px;text-indent:0;min-height:1ex}.deleted.svelte-l7s70u.svelte-l7s70u{display:inline-block;background:#d66363;border-radius:1px;color:#ffe6e6;padding:1px 2px;text-decoration:line-through;text-indent:0;min-height:1ex}.updated.svelte-l7s70u .added.svelte-l7s70u{background:#eaea37}.arrow.svelte-l7s70u.svelte-l7s70u{color:#87cc86}");var Yi="src/tabs/history/DiffValue.svelte";function Zi(e,t,n){var o=e.slice();return o[2]=t[n],o}function Qi(e){var t,n=e[1](e[0])+"",o={c:function(){t=I(n)},m:function(e,n){Se(e,t,n)},p:function(e,o){3&o&&n!==(n=e[1](e[0])+"")&&Ne(t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:o,id:Qi.name,type:"else",source:"(83:0) {:else}",ctx:e}),o}function es(e){var t;function n(e,t){return 1===e[0].length?rs:2===e[0].length?os:3===e[0].length&&0===e[0][1]&&0===e[0][2]?ns:3===e[0].length&&2===e[0][2]?ts:void 0}var o=n(e),r=o&&o(e),i={c:function(){r&&r.c(),t=F()},m:function(e,n){r&&r.m(e,n),Se(e,t,n)},p:function(e,i){o===(o=n(e))&&r?r.p(e,i):(r&&r.d(1),(r=o&&o(e))&&(r.c(),r.m(t.parentNode,t)))},d:function(e){r&&r.d(e),e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:i,id:es.name,type:"if",source:"(58:0) {#if Array.isArray(value)}",ctx:e}),i}function ts(e){var t,n=fs(e[0][0]);De(n);for(var o=[],r=0;r<n.length;r+=1)o[r]=as(Zi(e,n,r));var i={c:function(){t=_("span");for(var e=0;e<o.length;e+=1)o[e].c();je(t,"class","updated svelte-l7s70u"),b(t,Yi,70,4,1969)},m:function(e,n){Se(e,t,n);for(var r=0;r<o.length;r+=1)o[r].m(t,null)},p:function(e,r){if(1&r){var i;for(De(n=fs(e[0][0])),i=0;i<n.length;i+=1){var s=Zi(e,n,i);o[i]?o[i].p(s,r):(o[i]=as(s),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d:function(e){e&&Oe(t),A(o,e)}};return ke("SvelteRegisterBlock",{block:i,id:ts.name,type:"if",source:"(70:49) ",ctx:e}),i}function ns(e){var t,n,o=ds(e[0][0])+"",r={c:function(){t=_("span"),n=I(o),je(t,"class","deleted svelte-l7s70u"),b(t,Yi,68,4,1859)},m:function(e,o){Se(e,t,o),xe(t,n)},p:function(e,t){1&t&&o!==(o=ds(e[0][0])+"")&&Ne(n,o)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:r,id:ns.name,type:"if",source:"(68:67) ",ctx:e}),r}function os(e){var t,n,o,r,i,s,c,a,l=ds(e[0][0])+"",u=ds(e[0][1])+"",f={c:function(){t=_("span"),n=_("span"),o=I(l),r=V(),(i=_("span")).textContent="=>",s=V(),c=_("span"),a=I(u),je(n,"class","deleted svelte-l7s70u"),b(n,Yi,63,6,1619),je(i,"class","arrow svelte-l7s70u"),b(i,Yi,64,6,1681),je(c,"class","added svelte-l7s70u"),b(c,Yi,65,6,1721),je(t,"class","updated svelte-l7s70u"),b(t,Yi,62,4,1590)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(t,r),xe(t,i),xe(t,s),xe(t,c),xe(c,a)},p:function(e,t){1&t&&l!==(l=ds(e[0][0])+"")&&Ne(o,l),1&t&&u!==(u=ds(e[0][1])+"")&&Ne(a,u)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:f,id:os.name,type:"if",source:"(62:31) ",ctx:e}),f}function rs(e){var t,n,o=ds(e[0][0])+"",r={c:function(){t=_("span"),n=I(o),je(t,"class","added svelte-l7s70u"),b(t,Yi,60,4,1500)},m:function(e,o){Se(e,t,o),xe(t,n)},p:function(e,t){1&t&&o!==(o=ds(e[0][0])+"")&&Ne(n,o)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:r,id:rs.name,type:"if",source:"(60:2) {#if value.length === 1}",ctx:e}),r}function is(e){var t,n,o=e[2].raw+"",r={c:function(){t=_("span"),n=I(o),b(t,Yi,77,10,2219)},m:function(e,o){Se(e,t,o),xe(t,n)},p:function(e,t){1&t&&o!==(o=e[2].raw+"")&&Ne(n,o)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:r,id:is.name,type:"else",source:"(77:8) {:else}",ctx:e}),r}function ss(e){var t,n,o=e[2].add+"",r={c:function(){t=_("span"),n=I(o),je(t,"class","added svelte-l7s70u"),b(t,Yi,75,10,2155)},m:function(e,o){Se(e,t,o),xe(t,n)},p:function(e,t){1&t&&o!==(o=e[2].add+"")&&Ne(n,o)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:r,id:ss.name,type:"if",source:"(75:27) ",ctx:e}),r}function cs(e){var t,n,o=e[2].delete+"",r={c:function(){t=_("span"),n=I(o),je(t,"class","deleted svelte-l7s70u"),b(t,Yi,73,10,2074)},m:function(e,o){Se(e,t,o),xe(t,n)},p:function(e,t){1&t&&o!==(o=e[2].delete+"")&&Ne(n,o)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:r,id:cs.name,type:"if",source:"(73:8) {#if item.delete}",ctx:e}),r}function as(e){var t;function n(e,t){return e[2].delete?cs:e[2].add?ss:is}var o=n(e),r=o(e),i={c:function(){r.c(),t=F()},m:function(e,n){r.m(e,n),Se(e,t,n)},p:function(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),(r=o(e))&&(r.c(),r.m(t.parentNode,t)))},d:function(e){r.d(e),e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:i,id:as.name,type:"each",source:"(72:6) {#each parseTextDiff(value[0]) as item}",ctx:e}),i}function ls(e){var t,n;function o(e,n){return(null==t||1&n)&&(t=!!Array.isArray(e[0])),t?es:Qi}var r=o(e,-1),i=r(e),c={c:function(){i.c(),n=F()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,t){i.m(e,t),Se(e,n,t)},p:function(e,t){var c=Object(s.a)(t,1)[0];r===(r=o(e,c))&&i?i.p(e,c):(i.d(1),(i=r(e))&&(i.c(),i.m(n.parentNode,n)))},i:g,o:g,d:function(e){i.d(e),e&&Oe(n)}};return ke("SvelteRegisterBlock",{block:c,id:ls.name,type:"component",source:"",ctx:e}),c}function us(e){return e.replace(/\s/gm,"\xa0")}function fs(e){return e.split(/\n/gm).slice(1).map((function(e){var t=e.startsWith("-")?"delete":e.startsWith("+")?"add":"raw";return Object(r.a)({},t,us(e.substr(1)))}))}function ps(e){if(null===e)return"null";var t=JSON.stringify(e);return"undefined"===typeof t?"undefined":t.length>22?"".concat(t.substr(0,15),"\u2026").concat(t.substr(-5)):t}function ds(e){return"string"===typeof e?e:ps(e)}function hs(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("DiffValue",r,[]);var i=t.value,s=t.defaultFormatter,c=["value","defaultFormatter"];return Object.keys(t).forEach((function(e){~c.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<DiffValue> was created with unknown prop '".concat(e,"'"))})),e.$$set=function(e){"value"in e&&n(0,i=e.value),"defaultFormatter"in e&&n(1,s=e.defaultFormatter)},e.$capture_state=function(){return{value:i,defaultFormatter:s,replaceSpacesWithNonBreakingSpace:us,parseTextDiff:fs,stringifyAndShrink:ps,getValueString:ds}},e.$inject_state=function(e){"value"in e&&n(0,i=e.value),"defaultFormatter"in e&&n(1,s=e.defaultFormatter)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,s]}var vs=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,hs,ls,S,{value:0,defaultFormatter:1}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"DiffValue",options:e,id:ls.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"value"in s||console.warn("<DiffValue> was created without expected prop 'value'"),void 0!==r[1]||"defaultFormatter"in s||console.warn("<DiffValue> was created without expected prop 'defaultFormatter'"),o}return Object(p.a)(n,[{key:"value",get:function(){throw new Error("<DiffValue>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DiffValue>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"defaultFormatter",get:function(){throw new Error("<DiffValue>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DiffValue>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr(".left-panel.svelte-af06zv.svelte-af06zv{flex-grow:0;padding:0;min-width:190px;width:190px}.title-container.svelte-af06zv.svelte-af06zv{align-items:center;display:flex;justify-content:space-between}.entry-row.svelte-af06zv+.entry-row.svelte-af06zv{margin-top:1em}.selection-html.svelte-af06zv.svelte-af06zv{margin:0.5em 0 0 0;padding:0}.equal-diff.svelte-af06zv.svelte-af06zv{align-items:center;color:#ffa2b1;display:flex;font-size:14px;height:100%;justify-content:center;width:100%}.hidden{visibility:hidden}");var ms=me.Object,gs=me.console,ys="src/tabs/history/HistoryTab.svelte";function bs(e){var t,n,o;n=new Xi({props:{listItems:e[2],selectedId:e[0]&&e[0].id,onSelect:e[5]},$$inline:!0});var r={c:function(){t=_("div"),ge(n.$$.fragment),je(t,"slot","left"),je(t,"class","left-panel svelte-af06zv"),b(t,ys,71,2,2060)},m:function(e,r){Se(e,t,r),ye(n,t,null),o=!0},p:function(e,t){var o={};4&t&&(o.listItems=e[2]),1&t&&(o.selectedId=e[0]&&e[0].id),n.$set(o)},i:function(e){o||(he(n.$$.fragment,e),o=!0)},o:function(e){ve(n.$$.fragment,e),o=!1},d:function(e){e&&Oe(t),be(n)}};return ke("SvelteRegisterBlock",{block:r,id:bs.name,type:"slot",source:"(72:2) ",ctx:e}),r}function ws(e){var t,n={c:function(){(t=_("div")).textContent="Docs are equal.",je(t,"class","equal-diff svelte-af06zv"),b(t,ys,156,6,4775)},m:function(e,n){Se(e,t,n)},p:g,i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:ws.name,type:"else",source:"(156:4) {:else}",ctx:e}),n}function $s(e){var t,n,o,r,i,s,c,a,l,u,f,p,d,h=e[0].contentDiff&&ks(e),v=e[0].selectionDiff&&Ss(e),m=e[0].selectionHtml.length>0&&Cs(e);(u=new ki({props:{$$slots:{default:[Ns]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[3]);var g=e[1]&&Ds(e),y=e[1]&&Es(e),w={c:function(){t=_("div"),h&&h.c(),n=V(),v&&v.c(),o=V(),m&&m.c(),r=V(),i=_("div"),s=_("div"),(c=_("h2")).textContent="Transaction",a=V(),l=_("div"),ge(u.$$.fragment),f=V(),g&&g.c(),p=V(),y&&y.c(),b(c,ys,130,12,4052),b(l,ys,131,12,4085),je(s,"class","title-container svelte-af06zv"),b(s,ys,129,10,4010),je(i,"class","entry-row svelte-af06zv"),b(i,ys,128,8,3976),b(t,ys,81,6,2398)},m:function(e,b){Se(e,t,b),h&&h.m(t,null),xe(t,n),v&&v.m(t,null),xe(t,o),m&&m.m(t,null),xe(t,r),xe(t,i),xe(i,s),xe(s,c),xe(s,a),xe(s,l),ye(u,l,null),xe(l,f),g&&g.m(l,null),xe(i,p),y&&y.m(i,null),d=!0},p:function(e,s){e[0].contentDiff?h?(h.p(e,s),1&s&&he(h,1)):((h=ks(e)).c(),he(h,1),h.m(t,n)):h&&(pe(),ve(h,1,1,(function(){h=null})),de()),e[0].selectionDiff?v?(v.p(e,s),1&s&&he(v,1)):((v=Ss(e)).c(),he(v,1),v.m(t,o)):v&&(pe(),ve(v,1,1,(function(){v=null})),de()),e[0].selectionHtml.length>0?m?(m.p(e,s),1&s&&he(m,1)):((m=Cs(e)).c(),he(m,1),m.m(t,r)):m&&(pe(),ve(m,1,1,(function(){m=null})),de());var c={};514&s&&(c.$$scope={dirty:s,ctx:e}),u.$set(c),e[1]?g?(g.p(e,s),2&s&&he(g,1)):((g=Ds(e)).c(),he(g,1),g.m(l,null)):g&&(pe(),ve(g,1,1,(function(){g=null})),de()),e[1]?y?(y.p(e,s),2&s&&he(y,1)):((y=Es(e)).c(),he(y,1),y.m(i,null)):y&&(pe(),ve(y,1,1,(function(){y=null})),de())},i:function(e){d||(he(h),he(v),he(m),he(u.$$.fragment,e),he(g),he(y),d=!0)},o:function(e){ve(h),ve(v),ve(m),ve(u.$$.fragment,e),ve(g),ve(y),d=!1},d:function(e){e&&Oe(t),h&&h.d(),v&&v.d(),m&&m.d(),be(u),g&&g.d(),y&&y.d()}};return ke("SvelteRegisterBlock",{block:w,id:$s.name,type:"if",source:"(81:4) {#if selectedEntry}",ctx:e}),w}function ks(e){var t,n,o,r,i,s,c,a;i=new ki({props:{class:"hidden",$$slots:{default:[xs]},$$scope:{ctx:e}},$$inline:!0}),c=new bi({props:{class:"tree-view",data:e[0].contentDiff,showLogButton:!0,showCopyButton:!0,valueComponent:vs,recursionOpts:{maxDepth:12,mapChildren:Ii,shouldExpandNode:Bs}},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Doc diff",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,ys,85,14,2534),je(n,"class","title-container svelte-af06zv"),b(n,ys,84,12,2490),je(t,"class","entry-row svelte-af06zv"),b(t,ys,83,10,2454)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};512&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};1&t&&(o.data=e[0].contentDiff),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:ks.name,type:"if",source:"(83:8) {#if selectedEntry.contentDiff}",ctx:e}),l}function xs(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:xs.name,type:"slot",source:'(87:14) <Button class=\\"hidden\\">',ctx:e}),n}function Ss(e){var t,n,o,r,i,s,c,a;i=new ki({props:{class:"hidden",$$slots:{default:[Os]},$$scope:{ctx:e}},$$inline:!0}),c=new bi({props:{class:"tree-view",data:e[0].selectionDiff,valueComponent:vs,recursionOpts:{mapChildren:zi,shouldExpandNode:Ps}},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Selection diff",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,ys,105,14,3171),je(n,"class","title-container svelte-af06zv"),b(n,ys,104,12,3127),je(t,"class","entry-row svelte-af06zv"),b(t,ys,103,10,3091)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};512&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};1&t&&(o.data=e[0].selectionDiff),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:Ss.name,type:"if",source:"(103:8) {#if selectedEntry.selectionDiff}",ctx:e}),l}function Os(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Os.name,type:"slot",source:'(107:14) <Button class=\\"hidden\\">',ctx:e}),n}function Cs(e){var t,n,o,r,i,s,c,a,l,u=e[0].selectionHtml+"";i=new ki({props:{class:"hidden",$$slots:{default:[js]},$$scope:{ctx:e}},$$inline:!0});var f={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Selection content",r=V(),ge(i.$$.fragment),s=V(),c=_("pre"),a=_("code"),b(o,ys,122,14,3746),je(n,"class","title-container svelte-af06zv"),b(n,ys,121,12,3702),b(a,ys,125,40,3882),je(c,"class","selection-html svelte-af06zv"),b(c,ys,125,12,3854),je(t,"class","entry-row svelte-af06zv"),b(t,ys,120,10,3666)},m:function(e,f){Se(e,t,f),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),xe(t,c),xe(c,a),a.innerHTML=u,l=!0},p:function(e,t){var n={};512&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n),(!l||1&t)&&u!==(u=e[0].selectionHtml+"")&&(a.innerHTML=u)},i:function(e){l||(he(i.$$.fragment,e),l=!0)},o:function(e){ve(i.$$.fragment,e),l=!1},d:function(e){e&&Oe(t),be(i)}};return ke("SvelteRegisterBlock",{block:f,id:Cs.name,type:"if",source:"(120:8) {#if selectedEntry.selectionHtml.length > 0}",ctx:e}),f}function js(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:js.name,type:"slot",source:'(124:14) <Button class=\\"hidden\\">',ctx:e}),n}function Ns(e){var t,n=e[1]?"hide":"show",o={c:function(){t=I(n)},m:function(e,n){Se(e,t,n)},p:function(e,o){2&o&&n!==(n=e[1]?"hide":"show")&&Ne(t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:o,id:Ns.name,type:"slot",source:"(133:14) <Button on:click={toggleShowTr}>",ctx:e}),o}function Ds(e){var t,n;(t=new ki({props:{$$slots:{default:[Ms]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[4]);var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};512&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Ds.name,type:"if",source:"(136:14) {#if showTr}",ctx:e}),o}function Ms(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ms.name,type:"slot",source:"(137:16) <Button on:click={handleLogTr}>",ctx:e}),n}function Es(e){var t,n;t=new bi({props:{class:"tree-view",data:e[0].tr,showLogButton:!0,showCopyButton:!0,recursionOpts:{maxDepth:12,omitKeys:["schema","contentMatch"],shouldExpandNode:As}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};1&n&&(o.data=e[0].tr),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Es.name,type:"if",source:"(141:10) {#if showTr}",ctx:e}),o}function Ts(e){var t,n,o,r,i=[$s,ws],s=[];function c(e,t){return e[0]?0:1}n=c(e),o=s[n]=i[n](e);var a={c:function(){t=_("div"),o.c(),je(t,"slot","right"),je(t,"class","right-panel"),b(t,ys,79,2,2329)},m:function(e,o){Se(e,t,o),s[n].m(t,null),r=!0},p:function(e,r){var a=n;(n=c(e))===a?s[n].p(e,r):(pe(),ve(s[a],1,1,(function(){s[a]=null})),de(),(o=s[n])?o.p(e,r):(o=s[n]=i[n](e)).c(),he(o,1),o.m(t,null))},i:function(e){r||(he(o),r=!0)},o:function(e){ve(o),r=!1},d:function(e){e&&Oe(t),s[n].d()}};return ke("SvelteRegisterBlock",{block:a,id:Ts.name,type:"slot",source:"(80:2) ",ctx:e}),a}function Rs(e){var t,n;t=new Yr({props:{$$slots:{right:[Ts],left:[bs]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};519&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Rs.name,type:"component",source:"",ctx:e}),o}var Bs=function(){return!0},Ps=function(){return!0},As=function(){return!1};function _s(e,t,n){var o,r,i;O(Pr,"shownHistoryGroups"),N(e,Pr,(function(e){return n(6,r=e)})),O(Br,"stateHistory"),N(e,Br,(function(e){return n(7,i=e)}));var s=t.$$slots,c=void 0===s?{}:s;t.$$scope;Me("HistoryTab",c,[]);var a=Y(Rr).view,l=void 0,u=!1;function f(){n(1,u=!u)}function p(){console.info("%c [prosemirror-dev-toolkit]: Property added to window._tr","color: #b8e248"),console.log(l.tr),window._tr=l.tr}function d(e,t,r){n(0,l=i.get(e));var s=o[t];s.isGroup&&s.entries.length>1&&r&&Pr.update((function(e){return e.map((function(e,n){return n!==t?e:Object.assign(Object.assign({},e),{expanded:!e.expanded})}))}))}Ar.subscribe((function(e){n(0,l=e)}));var h=[];return ms.keys(t).forEach((function(e){~h.indexOf(e)||"$$"===e.slice(0,2)||gs.warn("<HistoryTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,writable:Tr,APP_CONTEXT:Rr,stateHistory:Br,shownHistoryGroups:Pr,latestEntry:Ar,mapDocDeltaChildren:Ii,mapSelectionDeltaChildren:zi,SplitView:Yr,TreeView:bi,HistoryList:Xi,DiffValue:vs,Button:ki,view:a,selectedEntry:l,showTr:u,toggleShowTr:f,handleLogTr:p,handleEntrySelect:d,listItems:o,$shownHistoryGroups:r,$stateHistory:i}},e.$inject_state=function(e){"selectedEntry"in e&&n(0,l=e.selectedEntry),"showTr"in e&&n(1,u=e.showTr),"listItems"in e&&n(2,o=e.listItems)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){192&e.$$.dirty&&n(2,o=r.map((function(e){return{isGroup:e.isGroup,topEntry:i.get(e.topEntryId),entries:e.entryIds.map((function(e){return i.get(e)})),expanded:e.expanded}})))},[l,u,o,f,p,d,r,i]}var zs=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,_s,Rs,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"HistoryTab",options:e,id:Rs.name}),o}return n}(Ee);kr("ul.svelte-1fgmf1d.svelte-1fgmf1d{color:white;list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-1fgmf1d+li.svelte-1fgmf1d{border-top:1px solid #604c68}button.svelte-1fgmf1d.svelte-1fgmf1d{background:transparent;border:0;color:#d3d3d9;cursor:pointer;display:flex;font-family:monospace;font-size:var(--font-small);height:100%;padding:6px 18px;text-transform:uppercase;width:100%}button.svelte-1fgmf1d.svelte-1fgmf1d:hover{background:rgba(255, 162, 177, 0.4);color:white}button.selected.svelte-1fgmf1d.svelte-1fgmf1d{background:rgba(255, 162, 177, 0.4)}button.selected.empty.svelte-1fgmf1d.svelte-1fgmf1d{background:#50445d}button.empty.svelte-1fgmf1d.svelte-1fgmf1d{background:transparent;color:#63637b}button.empty.svelte-1fgmf1d.svelte-1fgmf1d:hover{background:#50445d}");var Is="src/tabs/List.svelte";function Vs(e,t,n){var o=e.slice();return o[4]=t[n],o}function Fs(e){var t,n,o,r,i,s,c=e[4].value+"";function a(){return e[3](e[4])}var l={c:function(){t=_("li"),n=_("button"),o=I(c),r=V(),je(n,"class","svelte-1fgmf1d"),H(n,"selected",e[1]===e[4].key),H(n,"empty",e[4].empty),b(n,Is,43,6,870),je(t,"class","svelte-1fgmf1d"),b(t,Is,42,4,859)},m:function(e,c){Se(e,t,c),xe(t,n),xe(n,o),xe(t,r),i||(s=Ce(n,"click",a,!1,!1,!1),i=!0)},p:function(t,r){e=t,1&r&&c!==(c=e[4].value+"")&&Ne(o,c),3&r&&H(n,"selected",e[1]===e[4].key),1&r&&H(n,"empty",e[4].empty)},d:function(e){e&&Oe(t),i=!1,s()}};return ke("SvelteRegisterBlock",{block:l,id:Fs.name,type:"each",source:"(42:2) {#each listItems as item}",ctx:e}),l}function Ls(e){var t,n=e[0];De(n);for(var o=[],r=0;r<n.length;r+=1)o[r]=Fs(Vs(e,n,r));var i={c:function(){t=_("ul");for(var e=0;e<o.length;e+=1)o[e].c();je(t,"class","svelte-1fgmf1d"),b(t,Is,40,0,822)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){Se(e,t,n);for(var r=0;r<o.length;r+=1)o[r].m(t,null)},p:function(e,r){var i=Object(s.a)(r,1)[0];if(7&i){var c;for(De(n=e[0]),c=0;c<n.length;c+=1){var a=Vs(e,n,c);o[c]?o[c].p(a,i):(o[c]=Fs(a),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},i:g,o:g,d:function(e){e&&Oe(t),A(o,e)}};return ke("SvelteRegisterBlock",{block:i,id:Ls.name,type:"component",source:"",ctx:e}),i}function qs(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("List",r,[]);var i=t.listItems,s=void 0===i?[]:i,c=t.selectedKey,a=t.onSelect,l=["listItems","selectedKey","onSelect"];Object.keys(t).forEach((function(e){~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<List> was created with unknown prop '".concat(e,"'"))}));return e.$$set=function(e){"listItems"in e&&n(0,s=e.listItems),"selectedKey"in e&&n(1,c=e.selectedKey),"onSelect"in e&&n(2,a=e.onSelect)},e.$capture_state=function(){return{listItems:s,selectedKey:c,onSelect:a}},e.$inject_state=function(e){"listItems"in e&&n(0,s=e.listItems),"selectedKey"in e&&n(1,c=e.selectedKey),"onSelect"in e&&n(2,a=e.onSelect)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,c,a,function(e){return a(e)}]}var Js=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,qs,Ls,S,{listItems:0,selectedKey:1,onSelect:2}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"List",options:e,id:Ls.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[1]||"selectedKey"in s||console.warn("<List> was created without expected prop 'selectedKey'"),void 0!==r[2]||"onSelect"in s||console.warn("<List> was created without expected prop 'onSelect'"),o}return Object(p.a)(n,[{key:"listItems",get:function(){throw new Error("<List>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<List>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"selectedKey",get:function(){throw new Error("<List>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<List>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onSelect",get:function(){throw new Error("<List>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<List>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr(".top-row.svelte-hqyavx{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5em}.left-panel.svelte-hqyavx{flex-grow:0;overflow:scroll;padding:0;min-width:190px;width:190px}.right-panel.svelte-hqyavx{border-left:1px solid rgba(255, 162, 177, 0.2)}.empty-state.svelte-hqyavx{align-items:center;color:#ffa2b1;display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");var Ks=me.Object,Hs=me.console,Ws="src/tabs/PluginsTab.svelte";function Us(e){var t,n,o;n=new Js({props:{listItems:e[4],selectedKey:e[0].key,onSelect:e[5]},$$inline:!0});var r={c:function(){t=_("div"),ge(n.$$.fragment),je(t,"slot","left"),je(t,"class","left-panel svelte-hqyavx"),b(t,Ws,74,2,2110)},m:function(e,r){Se(e,t,r),ye(n,t,null),o=!0},p:function(e,t){var o={};16&t&&(o.listItems=e[4]),1&t&&(o.selectedKey=e[0].key),n.$set(o)},i:function(e){o||(he(n.$$.fragment,e),o=!0)},o:function(e){ve(n.$$.fragment,e),o=!1},d:function(e){e&&Oe(t),be(n)}};return ke("SvelteRegisterBlock",{block:r,id:Us.name,type:"slot",source:"(75:2) ",ctx:e}),r}function Gs(e){var t,n,o,r,i,s,c,a;(i=new ki({props:{$$slots:{default:[Xs]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[6]),(c=new ki({props:{$$slots:{default:[Ys]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[7]);var l={c:function(){t=_("div"),(n=_("h2")).textContent="Plugin state",o=V(),r=_("div"),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(n,Ws,80,8,2343),b(r,Ws,81,8,2373),je(t,"class","top-row svelte-hqyavx"),b(t,Ws,79,6,2313)},m:function(e,l){Se(e,t,l),xe(t,n),xe(t,o),xe(t,r),ye(i,r,null),xe(r,s),ye(c,r,null),a=!0},p:function(e,t){var n={};2050&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};2048&t&&(o.$$scope={dirty:t,ctx:e}),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:Gs.name,type:"if",source:"(79:4) {#if pluginState}",ctx:e}),l}function Xs(e){var t,n=e[1]?"collapse":"expand",o={c:function(){t=I(n)},m:function(e,n){Se(e,t,n)},p:function(e,o){2&o&&n!==(n=e[1]?"collapse":"expand")&&Ne(t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:o,id:Xs.name,type:"slot",source:"(83:10) <Button on:click={handleToggleExpand}>",ctx:e}),o}function Ys(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Ys.name,type:"slot",source:"(86:10) <Button on:click={handleLogState}>",ctx:e}),n}function Zs(e){var t,n={c:function(){(t=_("div")).textContent="Plugin has no state",je(t,"class","empty-state svelte-hqyavx"),b(t,Ws,92,6,2722)},m:function(e,n){Se(e,t,n)},p:g,i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Zs.name,type:"else",source:"(92:4) {:else}",ctx:e}),n}function Qs(e){var t,n;t=new bi({props:{data:e[3],showLogButton:!0,showCopyButton:!0,recursionOpts:e[2]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};8&n&&(o.data=e[3]),4&n&&(o.recursionOpts=e[2]),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Qs.name,type:"if",source:"(90:4) {#if pluginState}",ctx:e}),o}function ec(e){var t,n,o,r,i,s=e[3]&&Gs(e),c=[Qs,Zs],a=[];function l(e,t){return e[3]?0:1}o=l(e),r=a[o]=c[o](e);var u={c:function(){t=_("div"),s&&s.c(),n=V(),r.c(),je(t,"slot","right"),je(t,"class","right-panel svelte-hqyavx"),b(t,Ws,77,2,2246)},m:function(e,r){Se(e,t,r),s&&s.m(t,null),xe(t,n),a[o].m(t,null),i=!0},p:function(e,i){e[3]?s?(s.p(e,i),8&i&&he(s,1)):((s=Gs(e)).c(),he(s,1),s.m(t,n)):s&&(pe(),ve(s,1,1,(function(){s=null})),de());var u=o;(o=l(e))===u?a[o].p(e,i):(pe(),ve(a[u],1,1,(function(){a[u]=null})),de(),(r=a[o])?r.p(e,i):(r=a[o]=c[o](e)).c(),he(r,1),r.m(t,null))},i:function(e){i||(he(s),he(r),i=!0)},o:function(e){ve(s),ve(r),i=!1},d:function(e){e&&Oe(t),s&&s.d(),a[o].d()}};return ke("SvelteRegisterBlock",{block:u,id:ec.name,type:"slot",source:"(78:2) ",ctx:e}),u}function tc(e){var t,n;t=new Yr({props:{$$slots:{right:[ec],left:[Us]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};2079&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:tc.name,type:"component",source:"",ctx:e}),o}function nc(e,t,n){var o,r,i=t.$$slots,s=void 0===i?{}:i;t.$$scope;Me("PluginsTab",s,[]);var c=Y(Rr).view,a=!1,l={maxDepth:10,stopRecursion:!0,shouldExpandNode:function(){return a}},u=c.state,f=u.plugins,p=f[0];function d(e){n(0,p=f.find((function(t){return t.key===e.key})))}function h(){n(1,a=!a),n(2,l=Object.assign({},l))}function v(){window._plugin=[p,o],console.info("%c [prosemirror-dev-toolkit]: Property added to window._plugin","color: #b8e248"),console.log(p),console.log(o)}Ar.subscribe((function(e){e&&(n(8,u=e.state),n(9,f=u.plugins),n(0,p=f.find((function(e){return e.key===p.key}))))}));var m=[];return Ks.keys(t).forEach((function(e){~m.indexOf(e)||"$$"===e.slice(0,2)||Hs.warn("<PluginsTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,writable:Tr,Plugin:jt,latestEntry:Ar,APP_CONTEXT:Rr,SplitView:Yr,TreeView:bi,List:Js,Button:ki,view:c,expandPluginState:a,recursionOpts:l,editorState:u,plugins:f,selectedPlugin:p,handlePluginSelect:d,handleToggleExpand:h,handleLogState:v,pluginState:o,listItems:r}},e.$inject_state=function(e){"expandPluginState"in e&&n(1,a=e.expandPluginState),"recursionOpts"in e&&n(2,l=e.recursionOpts),"editorState"in e&&n(8,u=e.editorState),"plugins"in e&&n(9,f=e.plugins),"selectedPlugin"in e&&n(0,p=e.selectedPlugin),"pluginState"in e&&n(3,o=e.pluginState),"listItems"in e&&n(4,r=e.listItems)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){257&e.$$.dirty&&n(3,o=null===p||void 0===p?void 0:p.getState(u)),768&e.$$.dirty&&n(4,r=f.map((function(e){return{key:e.key,value:e.key.toUpperCase(),empty:!e.getState(u)}})))},[p,a,l,o,r,d,h,v,u,f]}var oc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,nc,tc,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"PluginsTab",options:e,id:tc.name}),o}return n}(Ee);kr(".top-row.svelte-byag31{align-items:center;display:flex;justify-content:space-between}.left-panel.svelte-byag31{overflow:scroll;padding:1em}.right-panel.svelte-byag31{border-left:1px solid rgba(255, 162, 177, 0.2);overflow:scroll;padding:1em}.hidden{visibility:hidden}");var rc="src/tabs/SchemaTab.svelte";function ic(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:ic.name,type:"slot",source:'(33:6) <Button class=\\"hidden\\">',ctx:e}),n}function sc(e){var t,n,o,r,i,s,c,a;i=new ki({props:{class:"hidden",$$slots:{default:[ic]},$$scope:{ctx:e}},$$inline:!0}),c=new bi({props:{class:"tree-view",data:e[0],showLogButton:!0,showCopyButton:!0,recursionOpts:{maxDepth:6,omitKeys:["nodes","marks","topNodeType"]}},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Nodes",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,rc,31,6,767),je(n,"class","top-row svelte-byag31"),b(n,rc,30,4,739),je(t,"slot","left"),je(t,"class","left-panel svelte-byag31"),b(t,rc,29,2,698)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};8&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:sc.name,type:"slot",source:"(30:2) ",ctx:e}),l}function cc(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:cc.name,type:"slot",source:'(49:6) <Button class=\\"hidden\\">',ctx:e}),n}function ac(e){var t,n,o,r,i,s,c,a;i=new ki({props:{class:"hidden",$$slots:{default:[cc]},$$scope:{ctx:e}},$$inline:!0}),c=new bi({props:{class:"tree-view",data:e[1],showLogButton:!0,showCopyButton:!0,recursionOpts:{maxDepth:6,omitKeys:["nodes","marks","topNodeType"]}},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Marks",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,rc,47,6,1127),je(n,"class","top-row svelte-byag31"),b(n,rc,46,4,1099),je(t,"slot","right"),je(t,"class","right-panel svelte-byag31"),b(t,rc,45,2,1056)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};8&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:ac.name,type:"slot",source:"(46:2) ",ctx:e}),l}function lc(e){var t,n;t=new Yr({props:{$$slots:{right:[ac],left:[sc]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:lc.name,type:"component",source:"",ctx:e}),o}function uc(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("SchemaTab",r,[]);var i=Y(Rr).view,s=i.state.schema.nodes,c=i.state.schema.marks,a=[];return Object.keys(t).forEach((function(e){~a.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<SchemaTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,APP_CONTEXT:Rr,SplitView:Yr,TreeView:bi,Button:ki,view:i,nodes:s,marks:c}},e.$inject_state=function(e){"nodes"in e&&n(0,s=e.nodes),"marks"in e&&n(1,c=e.marks)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,c]}var fc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,uc,lc,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"SchemaTab",options:e,id:lc.name}),o}return n}(Ee);kr(".wrapper.svelte-62eojm{border-left:1px solid #606178;border-right:1px solid #606178;display:flex;flex-direction:column;padding:0 12px}.wrapper.root.svelte-62eojm{border:0;padding:0}.container.svelte-62eojm{background:#363755;color:black;display:flex;font-size:13px;margin-top:3px}.number-box.svelte-62eojm{padding:3px 6px;background:rgba(255, 255, 255, 0.3)}button.svelte-62eojm{background:transparent;border:0;color:#272624;cursor:pointer;display:flex;height:100%;padding:3px 9px;white-space:pre;width:100%}button.svelte-62eojm:hover{background:rgba(255, 162, 177, 0.4);color:white}button.selected.svelte-62eojm{background:rgba(255, 162, 177, 0.4)}.inline-children.svelte-62eojm{border-left:1px solid #606178;border-right:1px solid #606178;display:flex;flex-wrap:wrap;padding:0 12px}.inline-children.svelte-62eojm>div{flex-grow:1;padding:0}");var pc="src/tabs/structure/DocNode.svelte";function dc(e,t,n){var o=e.slice();return o[13]=t[n],o[15]=n,o}function hc(e){var t,n,o=e[0].content.content;De(o);for(var r=[],i=0;i<o.length;i+=1)r[i]=vc(dc(e,o,i));var s=function(e){return ve(r[e],1,1,(function(){r[e]=null}))},c={c:function(){for(var e=0;e<r.length;e+=1)r[e].c();t=F()},m:function(e,o){for(var i=0;i<r.length;i+=1)r[i].m(e,o);Se(e,t,o),n=!0},p:function(e,n){if(33&n){var i;for(De(o=e[0].content.content),i=0;i<o.length;i+=1){var c=dc(e,o,i);r[i]?(r[i].p(c,n),he(r[i],1)):(r[i]=vc(c),r[i].c(),he(r[i],1),r[i].m(t.parentNode,t))}for(pe(),i=o.length;i<r.length;i+=1)s(i);de()}},i:function(e){if(!n){for(var t=0;t<o.length;t+=1)he(r[t]);n=!0}},o:function(e){r=r.filter(Boolean);for(var t=0;t<r.length;t+=1)ve(r[t]);n=!1},d:function(e){A(r,e),e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:c,id:hc.name,type:"if",source:"(78:4) {#if node.content.size !== 0}",ctx:e}),c}function vc(e){var t,n;t=new yc({props:{node:e[13],startPos:e[5][e[15]]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};1&n&&(o.node=e[13]),32&n&&(o.startPos=e[5][e[15]]),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:vc.name,type:"each",source:"(79:6) {#each node.content.content as child, i}",ctx:e}),o}function mc(e){var t,n,o,r,i,c,a,l,u,f,p,d,h,v,m,g,y,w=0!==e[0].content.size&&hc(e),$={c:function(){t=_("div"),n=_("div"),o=_("div"),r=I(e[1]),i=V(),c=_("button"),a=I(e[4]),l=V(),u=_("div"),f=I(e[6]),d=V(),h=_("div"),w&&w.c(),je(o,"class","number-box svelte-62eojm"),b(o,pc,72,4,1832),je(c,"class","svelte-62eojm"),H(c,"selected",!1),b(c,pc,73,4,1877),je(u,"class","number-box svelte-62eojm"),b(u,pc,74,4,1967),je(n,"class","container svelte-62eojm"),je(n,"style",p="background: ".concat(e[3])),b(n,pc,71,2,1773),je(h,"class","svelte-62eojm"),H(h,"inline-children",e[7]),b(h,pc,76,2,2017),je(t,"class",v=B("".concat(e[9].class||""," wrapper"))+" svelte-62eojm"),H(t,"root",e[2]),b(t,pc,70,0,1704)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,p){Se(s,t,p),xe(t,n),xe(n,o),xe(o,r),xe(n,i),xe(n,c),xe(c,a),xe(n,l),xe(n,u),xe(u,f),xe(t,d),xe(t,h),w&&w.m(h,null),m=!0,g||(y=Ce(c,"click",e[10],!1,!1,!1),g=!0)},p:function(e,o){var i=Object(s.a)(o,1)[0];(!m||2&i)&&Ne(r,e[1]),(!m||16&i)&&Ne(a,e[4]),(!m||64&i)&&Ne(f,e[6]),(!m||8&i&&p!==(p="background: ".concat(e[3])))&&je(n,"style",p),0!==e[0].content.size?w?(w.p(e,i),1&i&&he(w,1)):((w=hc(e)).c(),he(w,1),w.m(h,null)):w&&(pe(),ve(w,1,1,(function(){w=null})),de()),128&i&&H(h,"inline-children",e[7]),(!m||512&i&&v!==(v=B("".concat(e[9].class||""," wrapper"))+" svelte-62eojm"))&&je(t,"class",v),516&i&&H(t,"root",e[2])},i:function(e){m||(he(w),m=!0)},o:function(e){ve(w),m=!1},d:function(e){e&&Oe(t),w&&w.d(),g=!1,y()}};return ke("SvelteRegisterBlock",{block:$,id:mc.name,type:"component",source:"",ctx:e}),$}function gc(e,t,n){var o,r,i,s,c,a=t,l=a.$$slots,u=void 0===l?{}:l;a.$$scope;Me("DocNode",u,[]);var f=Y("doc-view"),p=f.selected,h=f.colors,v=f.handleNodeClick,m=t.node,g=t.startPos,b=t.isRoot,w=void 0!==b&&b;return e.$$set=function(e){n(9,t=y(y({},t),T(e))),"node"in e&&n(0,m=e.node),"startPos"in e&&n(1,g=e.startPos),"isRoot"in e&&n(2,w=e.isRoot)},e.$capture_state=function(){return{getContext:Y,selected:p,colors:h,handleNodeClick:v,node:m,startPos:g,isRoot:w,color:o,name:r,startPositions:i,endPos:s,inlineChildren:c}},e.$inject_state=function(e){n(9,t=y(y({},t),e)),"node"in t&&n(0,m=e.node),"startPos"in t&&n(1,g=e.startPos),"isRoot"in t&&n(2,w=e.isRoot),"color"in t&&n(3,o=e.color),"name"in t&&n(4,r=e.name),"startPositions"in t&&n(5,i=e.startPositions),"endPos"in t&&n(6,s=e.endPos),"inlineChildren"in t&&n(7,c=e.inlineChildren)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){1&e.$$.dirty&&n(3,o=h[m.type.name]),1&e.$$.dirty&&n(4,r=m.isText&&m.marks.length>0?"".concat(m.type.name," - [").concat(m.marks.map((function(e){return e.type.name})).join(", "),"]"):m.type.name),7&e.$$.dirty&&n(5,i=Array(m.childCount).fill(void 0).reduce((function(e,t,n){if(0===n)return[w?0:g+1];var o=e[n-1],r=m.child(n-1);return[].concat(Object(d.a)(e),[o+r.nodeSize])}),[])),3&e.$$.dirty&&n(6,s=g+m.nodeSize),1&e.$$.dirty&&n(7,c=m.content.content.every((function(e){return e.isInline})))},t=T(t),[m,g,w,o,r,i,s,c,v,t,function(){return v(m)}]}var yc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,gc,mc,S,{node:0,startPos:1,isRoot:2}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"DocNode",options:e,id:mc.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"node"in s||console.warn("<DocNode> was created without expected prop 'node'"),void 0!==r[1]||"startPos"in s||console.warn("<DocNode> was created without expected prop 'startPos'"),o}return Object(p.a)(n,[{key:"node",get:function(){throw new Error("<DocNode>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocNode>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"startPos",get:function(){throw new Error("<DocNode>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocNode>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"isRoot",get:function(){throw new Error("<DocNode>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocNode>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee),bc=["#EA7C7F","#67B0C6","#94BB7F","#CA9EDB","#DCDC5D","#B9CC7C","#DD97D8","#FFB761","#4D8FD1","#F36E98","#E45F44","#A6A4AE","#FCC047","#FFC129","#D3929C","#4CBCD4","#8D7BC0"];function wc(e){return Object.keys(e.nodes).reduce((function(e,t,n){var o=n>=bc.length?function(e,t){var n=e/t;return Math.round(t*(n-Math.floor(n)))}(n,bc.length):n;return e[t]=bc[o],e}),{})}function $c(e){var t,n;t=new yc({props:{class:e[1].class,node:e[0],startPos:0,depth:0,isRoot:!0},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};2&o&&(r.class=e[1].class),1&o&&(r.node=e[0]),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:$c.name,type:"component",source:"",ctx:e}),o}function kc(e,t,n){var o=t,r=o.$$slots,i=void 0===r?{}:r;o.$$scope;Me("DocView",i,[]);var s=t.doc,c=t.schema,a=t.selected,l=void 0===a?{type:"",start:0,end:0}:a,u=t.handleNodeSelect;return X("doc-view",{selected:l,colors:wc(c),handleNodeClick:function(e){u(e)}}),e.$$set=function(e){n(1,t=y(y({},t),T(e))),"doc"in e&&n(0,s=e.doc),"schema"in e&&n(2,c=e.schema),"selected"in e&&n(3,l=e.selected),"handleNodeSelect"in e&&n(4,u=e.handleNodeSelect)},e.$capture_state=function(){return{setContext:X,DocNode:yc,buildColors:wc,doc:s,schema:c,selected:l,handleNodeSelect:u}},e.$inject_state=function(e){n(1,t=y(y({},t),e)),"doc"in t&&n(0,s=e.doc),"schema"in t&&n(2,c=e.schema),"selected"in t&&n(3,l=e.selected),"handleNodeSelect"in t&&n(4,u=e.handleNodeSelect)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),t=T(t),[s,t,c,l,u]}var xc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,kc,$c,S,{doc:0,schema:2,selected:3,handleNodeSelect:4}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"DocView",options:e,id:$c.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"doc"in s||console.warn("<DocView> was created without expected prop 'doc'"),void 0!==r[2]||"schema"in s||console.warn("<DocView> was created without expected prop 'schema'"),void 0!==r[4]||"handleNodeSelect"in s||console.warn("<DocView> was created without expected prop 'handleNodeSelect'"),o}return Object(p.a)(n,[{key:"doc",get:function(){throw new Error("<DocView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"schema",get:function(){throw new Error("<DocView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"selected",get:function(){throw new Error("<DocView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"handleNodeSelect",get:function(){throw new Error("<DocView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DocView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);kr(".top-row.svelte-fp0xbf{align-items:center;display:flex;justify-content:space-between}.right-panel.svelte-fp0xbf{border-left:1px solid rgba(255, 162, 177, 0.2);flex-grow:0;min-width:220px;width:220px}.m-top{margin-top:0.5em}.hidden{visibility:hidden}");var Sc=me.console,Oc="src/tabs/structure/StructureTab.svelte";function Cc(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Cc.name,type:"slot",source:'(50:6) <Button class=\\"hidden\\">',ctx:e}),n}function jc(e){var t,n,o,r,i,s,c,a;i=new ki({props:{class:"hidden",$$slots:{default:[Cc]},$$scope:{ctx:e}},$$inline:!0}),c=new xc({props:{class:"m-top",doc:e[0],schema:e[2],handleNodeSelect:e[3]},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Current doc",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,Oc,48,6,1280),je(n,"class","top-row svelte-fp0xbf"),b(n,Oc,47,4,1252),je(t,"slot","left"),je(t,"class","left-panel"),b(t,Oc,46,2,1211)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};128&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};1&t&&(o.doc=e[0]),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:jc.name,type:"slot",source:"(47:2) ",ctx:e}),l}function Nc(e){var t,n={c:function(){t=I("log")},m:function(e,n){Se(e,t,n)},d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:Nc.name,type:"slot",source:"(57:6) <Button on:click={handleClickLogNode}>",ctx:e}),n}function Dc(e){var t,n,o,r,i,s,c,a;(i=new ki({props:{$$slots:{default:[Nc]},$$scope:{ctx:e}},$$inline:!0})).$on("click",e[4]),c=new bi({props:{class:"m-top",data:e[1],recursionOpts:{shouldExpandNode:Ec}},$$inline:!0});var l={c:function(){t=_("div"),n=_("div"),(o=_("h2")).textContent="Node info",r=V(),ge(i.$$.fragment),s=V(),ge(c.$$.fragment),b(o,Oc,55,6,1500),je(n,"class","top-row svelte-fp0xbf"),b(n,Oc,54,4,1472),je(t,"slot","right"),je(t,"class","right-panel svelte-fp0xbf"),b(t,Oc,53,2,1429)},m:function(e,l){Se(e,t,l),xe(t,n),xe(n,o),xe(n,r),ye(i,n,null),xe(t,s),ye(c,t,null),a=!0},p:function(e,t){var n={};128&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);var o={};2&t&&(o.data=e[1]),c.$set(o)},i:function(e){a||(he(i.$$.fragment,e),he(c.$$.fragment,e),a=!0)},o:function(e){ve(i.$$.fragment,e),ve(c.$$.fragment,e),a=!1},d:function(e){e&&Oe(t),be(i),be(c)}};return ke("SvelteRegisterBlock",{block:l,id:Dc.name,type:"slot",source:"(54:2) ",ctx:e}),l}function Mc(e){var t,n;t=new Yr({props:{$$slots:{right:[Dc],left:[jc]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};131&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Mc.name,type:"component",source:"",ctx:e}),o}var Ec=function(){return!0};function Tc(e,t,n){var o,r=t.$$slots,i=void 0===r?{}:r;t.$$scope;Me("StructureTab",i,[]);var s=Y(Rr).view,c=s.state.doc,a=s.state.doc,l=s.state.schema;function u(e){n(5,a=e)}function f(){console.log(a),window._node=a,console.info("%c [prosemirror-dev-toolkit]: Property added to window._node","color: #b8e248")}Ar.subscribe((function(e){e&&n(0,c=e.state.doc)}));var p=[];return Object.keys(t).forEach((function(e){~p.indexOf(e)||"$$"===e.slice(0,2)||Sc.warn("<StructureTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,APP_CONTEXT:Rr,latestEntry:Ar,SplitView:Yr,TreeView:bi,DocView:xc,Button:ki,view:s,doc:c,selectedNode:a,schema:l,handleNodeSelect:u,handleClickLogNode:f,jsonNode:o}},e.$inject_state=function(e){"doc"in e&&n(0,c=e.doc),"selectedNode"in e&&n(5,a=e.selectedNode),"schema"in e&&n(2,l=e.schema),"jsonNode"in e&&n(1,o=e.jsonNode)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=function(){32&e.$$.dirty&&n(1,o=a.toJSON())},[c,o,l,u,f,a]}var Rc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Tc,Mc,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"StructureTab",options:e,id:Mc.name}),o}return n}(Ee);kr("ul.svelte-y26qsm.svelte-y26qsm{color:white;list-style:none;margin:0;padding:0;height:100%;width:100%}li.svelte-y26qsm+li.svelte-y26qsm{border-top:1px solid #604c68}li.svelte-y26qsm.svelte-y26qsm{align-items:center;display:flex;font-family:monospace;padding:6px 18px}li.svelte-y26qsm>div.svelte-y26qsm{align-items:center;display:flex;flex-grow:1}input.svelte-y26qsm.svelte-y26qsm{background:transparent;border:0;color:white;height:100%;margin:0;padding:2px;width:100%}button.svelte-y26qsm.svelte-y26qsm{background:transparent;border:0;border-radius:3px;color:#d3d3d9;cursor:pointer;display:flex;font-size:11px;padding:6px 18px;text-transform:uppercase}button.svelte-y26qsm.svelte-y26qsm:hover{background:rgba(255, 162, 177, 0.4);color:white}");var Bc="src/tabs/snapshots/SnapshotsList.svelte";function Pc(e,t,n){var o=e.slice();return o[13]=t[n],o}function Ac(e){var t,n,o,r,i=e[13].name+"";function s(){return e[8](e[13])}var c={c:function(){t=_("div"),n=I(i),je(t,"class","svelte-y26qsm"),b(t,Bc,81,8,1598)},m:function(e,i){Se(e,t,i),xe(t,n),o||(r=Ce(t,"dblclick",s,!1,!1,!1),o=!0)},p:function(t,o){e=t,1&o&&i!==(i=e[13].name+"")&&Ne(n,i)},d:function(e){e&&Oe(t),o=!1,r()}};return ke("SvelteRegisterBlock",{block:c,id:Ac.name,type:"else",source:"(81:6) {:else}",ctx:e}),c}function _c(e){var t,n,o,r,i={c:function(){(t=_("input")).value=n=e[3].name,je(t,"class","svelte-y26qsm"),b(t,Bc,75,8,1443)},m:function(n,i){Se(n,t,i),o||(r=[Ce(t,"input",e[5],!1,!1,!1),Ce(t,"keypress",e[6],!1,!1,!1)],o=!0)},p:function(e,o){var r,i,s;8&o&&n!==(n=e[3].name)&&t.value!==n&&(s=n,(r=t)[i="value"]=s,ke("SvelteDOMSetProperty",{node:r,property:i,value:s}))},d:function(e){e&&Oe(t),o=!1,k(r)}};return ke("SvelteRegisterBlock",{block:i,id:_c.name,type:"if",source:"(75:6) {#if editedSnap && editedSnap.timestamp === snap.timestamp}",ctx:e}),i}function zc(e){var t,n,o,r,i,s,c,a;function l(e,t){return e[3]&&e[3].timestamp===e[13].timestamp?_c:Ac}var u=l(e),f=u(e);function p(){return e[9](e[13])}function d(){return e[10](e[13])}var h={c:function(){t=_("li"),f.c(),n=V(),(o=_("button")).textContent="Delete",r=V(),(i=_("button")).textContent="Restore",s=V(),je(o,"class","svelte-y26qsm"),b(o,Bc,83,6,1687),je(i,"class","svelte-y26qsm"),b(i,Bc,84,6,1751),je(t,"class","svelte-y26qsm"),b(t,Bc,73,4,1364)},m:function(e,l){Se(e,t,l),f.m(t,null),xe(t,n),xe(t,o),xe(t,r),xe(t,i),xe(t,s),c||(a=[Ce(o,"click",p,!1,!1,!1),Ce(i,"click",d,!1,!1,!1)],c=!0)},p:function(o,r){u===(u=l(e=o))&&f?f.p(e,r):(f.d(1),(f=u(e))&&(f.c(),f.m(t,n)))},d:function(e){e&&Oe(t),f.d(),c=!1,k(a)}};return ke("SvelteRegisterBlock",{block:h,id:zc.name,type:"each",source:"(73:2) {#each snapshots as snap}",ctx:e}),h}function Ic(e){var t,n=e[0];De(n);for(var o=[],r=0;r<n.length;r+=1)o[r]=zc(Pc(e,n,r));var i={c:function(){t=_("ul");for(var e=0;e<o.length;e+=1)o[e].c();je(t,"class","svelte-y26qsm"),b(t,Bc,71,0,1327)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){Se(e,t,n);for(var r=0;r<o.length;r+=1)o[r].m(t,null)},p:function(e,r){var i=Object(s.a)(r,1)[0];if(127&i){var c;for(De(n=e[0]),c=0;c<n.length;c+=1){var a=Pc(e,n,c);o[c]?o[c].p(a,i):(o[c]=zc(a),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}},i:g,o:g,d:function(e){e&&Oe(t),A(o,e)}};return ke("SvelteRegisterBlock",{block:i,id:Ic.name,type:"component",source:"",ctx:e}),i}function Vc(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("SnapshotsList",r,[]);var i,s,c=t.snapshots,a=void 0===c?[]:c,l=t.onUpdate,u=t.onRestore,f=t.onDelete,p=function(e){clearTimeout(s),s=setTimeout((function(){l(i)}),150)};function d(e){n(3,i=e)}function h(e){n(3,i.name=e.target.value,i),p()}function v(e){"Enter"===e.key&&(l(i),clearTimeout(s),n(3,i=void 0))}var m=["snapshots","onUpdate","onRestore","onDelete"];Object.keys(t).forEach((function(e){~m.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<SnapshotsList> was created with unknown prop '".concat(e,"'"))}));return e.$$set=function(e){"snapshots"in e&&n(0,a=e.snapshots),"onUpdate"in e&&n(7,l=e.onUpdate),"onRestore"in e&&n(1,u=e.onRestore),"onDelete"in e&&n(2,f=e.onDelete)},e.$capture_state=function(){return{snapshots:a,onUpdate:l,onRestore:u,onDelete:f,editedSnap:i,timer:s,debounceUpdate:p,handleSnapDoubleclick:d,handleNameChange:h,handleNameKeyPress:v}},e.$inject_state=function(e){"snapshots"in e&&n(0,a=e.snapshots),"onUpdate"in e&&n(7,l=e.onUpdate),"onRestore"in e&&n(1,u=e.onRestore),"onDelete"in e&&n(2,f=e.onDelete),"editedSnap"in e&&n(3,i=e.editedSnap),"timer"in e&&(s=e.timer)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[a,u,f,i,d,h,v,l,function(e){return d(e)},function(e){return f(e)},function(e){return u(e)}]}var Fc=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,Vc,Ic,S,{snapshots:0,onUpdate:7,onRestore:1,onDelete:2}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"SnapshotsList",options:e,id:Ic.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[7]||"onUpdate"in s||console.warn("<SnapshotsList> was created without expected prop 'onUpdate'"),void 0!==r[1]||"onRestore"in s||console.warn("<SnapshotsList> was created without expected prop 'onRestore'"),void 0!==r[2]||"onDelete"in s||console.warn("<SnapshotsList> was created without expected prop 'onDelete'"),o}return Object(p.a)(n,[{key:"snapshots",get:function(){throw new Error("<SnapshotsList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<SnapshotsList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onUpdate",get:function(){throw new Error("<SnapshotsList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<SnapshotsList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onRestore",get:function(){throw new Error("<SnapshotsList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<SnapshotsList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}},{key:"onDelete",get:function(){throw new Error("<SnapshotsList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<SnapshotsList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee),Lc="__prosemirror-dev-toolkit__snapshots",qc=Tr([]),Jc="undefined"!==typeof window?localStorage.getItem(Lc):null;if(Jc&&Jc.length>0)try{var Kc=JSON.parse(Jc);qc.set(Kc)}catch(Ta){console.error("Corrupted snapshots values in localStorage",Ta)}function Hc(e,t){var n={name:e,timestamp:Date.now(),doc:t};qc.update((function(e){return Ir([n],e)}))}function Wc(e){qc.update((function(t){return t.map((function(t){return t.timestamp===e.timestamp?e:t}))}))}function Uc(e){qc.update((function(t){return t.filter((function(t){return t.timestamp!==e.timestamp}))}))}function Gc(e,t){var n=Object.getPrototypeOf(e.state).constructor.create({schema:e.state.schema,plugins:e.state.plugins,doc:e.state.schema.nodeFromJSON(t.doc)});e.updateState(n)}qc.subscribe((function(e){"undefined"!==typeof window&&localStorage.setItem(Lc,JSON.stringify(e))}));var Xc=new m.DiffPatcher({arrays:{detectMove:!1,includeValueOnMove:!1},textDiff:{minLength:1}});function Yc(e,t){return Xc.diff(e,t)}var Zc=["docChanged","isGeneric","scrolledIntoView","selectionSet","storedMarksSet"];function Qc(e){return Object.keys(e).concat(Zc).reduce((function(t,n){return t[n]=e[n],t}),{})}function ea(e){return{type:e.type,empty:e.empty,anchor:e.anchor,head:e.head,from:e.from,to:e.to}}function ta(e){return("00"+e).slice(-2)}var na=function(e){var t,n=new Date(e);return[ta(n.getHours()),ta(n.getMinutes()),ta(n.getSeconds()),(t=n.getMilliseconds(),("000"+t).slice(-3))].join(":")},oa=/(&lt;\/?[\w\d\s="']+&gt;)/gim;function ra(e,t){var n=j(Br),o=j(Pr)[0],r=function(e,t,n){var o=h.b.fromSchema(t.schema),r=t.selection,i=o.serializeFragment(r.content().content),s=[];if(i)for(var c=i.firstChild;c;)s.push(c.outerHTML),c=c.nextSibling;var a,l=n?Yc(n.state.doc.toJSON(),t.doc.toJSON()):void 0,u=n?Yc(ea(n.state.selection),ea(t.selection)):void 0;return{id:Math.random().toString()+Math.random().toString(),state:t,tr:Qc(e),timestamp:e.time,timeStr:na(e.time),contentDiff:l,selectionDiff:u,selectionHtml:(a=Object(v.prettyPrint)(s.join("\n"),{max_char:60,indent_size:2}),a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(oa,"<span style='color: cadetblue;'>$&</span>"))}}(e,t,n.get((null===o||void 0===o?void 0:o.topEntryId)||""));Br.update((function(e){return new Map(e.set(r.id,r))}));var i=!r.contentDiff;if((null===o||void 0===o?void 0:o.isGroup)&&i){var s={isGroup:i,entryIds:Ir([r.id],o.entryIds),topEntryId:r.id,expanded:o.expanded};Pr.update((function(e){return Ir([s],e.slice(1))}))}else{var c={isGroup:i,entryIds:[r.id],topEntryId:r.id,expanded:!1};Pr.update((function(e){return Ir([c],e)}))}}function ia(){Br.set(new Map),Pr.set([])}kr(".right-panel.svelte-13a8fti{padding:0}.no-snapshots.svelte-13a8fti{align-items:center;color:#ffa2b1;display:flex;font-size:14px;height:100%;justify-content:center;width:100%}");var sa="src/tabs/snapshots/SnapshotsTab.svelte";function ca(e){var t,n;t=new Fc({props:{snapshots:e[0],onDelete:e[1],onRestore:e[2],onUpdate:e[3]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o={};1&n&&(o.snapshots=e[0]),t.$set(o)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ca.name,type:"else",source:"(39:4) {:else}",ctx:e}),o}function aa(e){var t,n={c:function(){(t=_("div")).textContent='Save snapshots by clicking "Save snapshot" button.',je(t,"class","no-snapshots svelte-13a8fti"),b(t,sa,37,6,1009)},m:function(e,n){Se(e,t,n)},p:g,i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:aa.name,type:"if",source:"(37:4) {#if $snapshots.length === 0}",ctx:e}),n}function la(e){var t,n,o,r,i=[aa,ca],s=[];function c(e,t){return 0===e[0].length?0:1}n=c(e),o=s[n]=i[n](e);var a={c:function(){t=_("div"),o.c(),je(t,"slot","right"),je(t,"class","right-panel svelte-13a8fti"),b(t,sa,35,2,930)},m:function(e,o){Se(e,t,o),s[n].m(t,null),r=!0},p:function(e,r){var a=n;(n=c(e))===a?s[n].p(e,r):(pe(),ve(s[a],1,1,(function(){s[a]=null})),de(),(o=s[n])?o.p(e,r):(o=s[n]=i[n](e)).c(),he(o,1),o.m(t,null))},i:function(e){r||(he(o),r=!0)},o:function(e){ve(o),r=!1},d:function(e){e&&Oe(t),s[n].d()}};return ke("SvelteRegisterBlock",{block:a,id:la.name,type:"slot",source:"(36:2) ",ctx:e}),a}function ua(e){var t,n;t=new Yr({props:{$$slots:{right:[la]},$$scope:{ctx:e}},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ye(t,e,o),n=!0},p:function(e,n){var o=Object(s.a)(n,1)[0],r={};33&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ua.name,type:"component",source:"",ctx:e}),o}function fa(e,t,n){var o;O(qc,"snapshots"),N(e,qc,(function(e){return n(0,o=e)}));var r=t.$$slots,i=void 0===r?{}:r;t.$$scope;Me("SnapshotsTab",i,[]);var s=Y(Rr).view;function c(e){Uc(e)}function a(e){Gc(s,e),ia()}function l(e){Wc(e)}var u=[];return Object.keys(t).forEach((function(e){~u.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<SnapshotsTab> was created with unknown prop '".concat(e,"'"))})),e.$capture_state=function(){return{getContext:Y,writable:Tr,APP_CONTEXT:Rr,SplitView:Yr,SnapshotsList:Fc,snapshots:qc,deleteSnapshot:Uc,updateSnapshot:Wc,restoreSnapshot:Gc,resetHistory:ia,view:s,handleDeleteSnapshot:c,handleRestoreSnapshot:a,handleUpdateSnapshot:l,$snapshots:o}},[o,c,a,l]}var pa=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,fa,ua,S,{}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"SnapshotsTab",options:e,id:ua.name}),o}return n}(Ee);kr(":root{--font-sans:Helvetica Neue, Calibri Light, Roboto, sans-serif;--font-small:11px;--font-medium:13px;--font-large:16px;--height-tabs-menu:48px}.floating-dock-wrapper.svelte-11h0kl9{position:fixed;width:0px;height:0px;top:0px;left:0px;z-index:99999999}.floating-dock.svelte-11h0kl9{background-color:#363755;position:fixed;z-index:1;box-shadow:rgba(0, 0, 0, 0.3) 0px 0px 4px 0px;left:0px;top:50%;width:100%;height:50%}.resizing-div.svelte-11h0kl9{position:absolute;z-index:2;opacity:0;top:-5px;height:10px;left:0px;width:100%;cursor:row-resize}.container.svelte-11h0kl9{height:100%}.snapshot-btn.svelte-11h0kl9{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:#fff;cursor:pointer;font-size:12px;height:24px;line-height:25px;padding:0 6px;position:absolute;right:32px;top:-28px}.snapshot-btn.svelte-11h0kl9:hover{background:rgba(255, 162, 177, 0.8)}.close-btn.svelte-11h0kl9{background:rgba(255, 162, 177, 0.6);border:0;border-radius:3px;color:#fff;cursor:pointer;height:24px;position:absolute;right:4px;top:-28px;width:24px}.close-btn.svelte-11h0kl9:hover{background:rgba(255, 162, 177, 0.8)}.svelte-11h0kl9{font-family:var(--font-sans);font-size:var(--font-medium)}");var da="src/FloatingDock.svelte";function ha(e){var t,n={c:function(){(t=_("p")).textContent="nuting here",je(t,"class","svelte-11h0kl9"),b(t,da,139,8,3784)},m:function(e,n){Se(e,t,n)},i:g,o:g,d:function(e){e&&Oe(t)}};return ke("SvelteRegisterBlock",{block:n,id:ha.name,type:"else",source:"(139:6) {:else}",ctx:e}),n}function va(e){var t,n;t=new pa({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:va.name,type:"if",source:"(137:40) ",ctx:e}),o}function ma(e){var t,n;t=new Rc({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ma.name,type:"if",source:"(135:40) ",ctx:e}),o}function ga(e){var t,n;t=new fc({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ga.name,type:"if",source:"(133:37) ",ctx:e}),o}function ya(e){var t,n;t=new oc({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ya.name,type:"if",source:"(131:38) ",ctx:e}),o}function ba(e){var t,n;t=new zs({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:ba.name,type:"if",source:"(129:38) ",ctx:e}),o}function wa(e){var t,n;t=new _i({$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:wa.name,type:"if",source:"(127:6) {#if openTab === 'state'}",ctx:e}),o}function $a(e){var t,n,o,r,i,c,a,l,u,f,p,d,h,v,m,g,y,w;p=new Mr({props:{onClickTab:e[6],active:e[1]},$$inline:!0});var $=[wa,ba,ya,ga,ma,va,ha],S=[];function O(e,t){return"state"===e[1]?0:"history"===e[1]?1:"plugins"===e[1]?2:"schema"===e[1]?3:"structure"===e[1]?4:"snapshots"===e[1]?5:6}h=O(e),v=S[h]=$[h](e);var C={c:function(){t=_("div"),n=_("div"),o=_("div"),r=V(),i=_("div"),c=_("div"),(a=_("button")).textContent="Save snapshot",l=V(),(u=_("button")).textContent="X",f=V(),ge(p.$$.fragment),d=V(),v.c(),je(o,"class","resizing-div svelte-11h0kl9"),b(o,da,119,4,3056),je(a,"class","snapshot-btn svelte-11h0kl9"),b(a,da,122,8,3170),je(u,"class","close-btn svelte-11h0kl9"),b(u,da,123,8,3260),je(c,"class","svelte-11h0kl9"),b(c,da,121,6,3156),je(i,"class","container svelte-11h0kl9"),b(i,da,120,4,3126),je(n,"class","floating-dock svelte-11h0kl9"),je(n,"style",m="top: ".concat(e[2],"%; height: ").concat(e[3],"%;")),b(n,da,118,2,2972),je(t,"class","floating-dock-wrapper svelte-11h0kl9"),b(t,da,117,0,2934)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(s,v){Se(s,t,v),xe(t,n),xe(n,o),xe(n,r),xe(n,i),xe(i,c),xe(c,a),xe(c,l),xe(c,u),xe(i,f),ye(p,i,null),xe(i,d),S[h].m(i,null),g=!0,y||(w=[Ce(o,"mousedown",e[4],!1,!1,!1),Ce(a,"click",e[5],!1,!1,!1),Ce(u,"click",(function(){x(e[0])&&e[0].apply(this,arguments)}),!1,!1,!1)],y=!0)},p:function(t,o){var r=Object(s.a)(o,1)[0];e=t;var c={};2&r&&(c.active=e[1]),p.$set(c);var a=h;(h=O(e))!==a&&(pe(),ve(S[a],1,1,(function(){S[a]=null})),de(),(v=S[h])||(v=S[h]=$[h](e)).c(),he(v,1),v.m(i,null)),(!g||12&r&&m!==(m="top: ".concat(e[2],"%; height: ").concat(e[3],"%;")))&&je(n,"style",m)},i:function(e){g||(he(p.$$.fragment,e),he(v),g=!0)},o:function(e){ve(p.$$.fragment,e),ve(v),g=!1},d:function(e){e&&Oe(t),be(p),S[h].d(),y=!1,k(w)}};return ke("SvelteRegisterBlock",{block:C,id:$a.name,type:"component",source:"",ctx:e}),C}function ka(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("FloatingDock",r,[]);var i=t.onClose,s=Y(Rr).view,c="state",a=50,l=50;function u(e){document.addEventListener("mousemove",f),document.addEventListener("mouseup",p)}function f(e){e.preventDefault(),n(2,a=100*e.clientY/window.innerHeight),n(3,l=100*(1-e.clientY/window.innerHeight))}function p(e){e.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)}function d(){var e=prompt("Enter snapshot name",Date.now());e&&Hc(e,s.state.doc.toJSON())}function h(e){n(1,c=e)}G((function(){return function(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)}}));var v=["onClose"];return Object.keys(t).forEach((function(e){~v.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<FloatingDock> was created with unknown prop '".concat(e,"'"))})),e.$$set=function(e){"onClose"in e&&n(0,i=e.onClose)},e.$capture_state=function(){return{TabsMenu:Mr,StateTab:_i,HistoryTab:zs,PluginsTab:oc,SchemaTab:fc,StructureTab:Rc,SnapshotsTab:pa,getContext:Y,onMount:G,APP_CONTEXT:Rr,saveSnapshot:Hc,onClose:i,view:s,openTab:c,dockTop:a,dockHeight:l,handleResizeMouseDown:u,dragMove:f,dragEnd:p,handleSaveSnapshot:d,handleClickTab:h}},e.$inject_state=function(e){"onClose"in e&&n(0,i=e.onClose),"openTab"in e&&n(1,c=e.openTab),"dockTop"in e&&n(2,a=e.dockTop),"dockHeight"in e&&n(3,l=e.dockHeight)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,c,a,l,u,d,h]}var xa=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,ka,$a,S,{onClose:0}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"FloatingDock",options:e,id:$a.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[0]||"onClose"in s||console.warn("<FloatingDock> was created without expected prop 'onClose'"),o}return Object(p.a)(n,[{key:"onClose",get:function(){throw new Error("<FloatingDock>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<FloatingDock>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee);function Sa(e){var t,n;t=new Cr({props:{onClick:e[1]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:g,i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Sa.name,type:"else",source:"(35:0) {:else}",ctx:e}),o}function Oa(e){var t,n;t=new xa({props:{onClose:e[2]},$$inline:!0});var o={c:function(){ge(t.$$.fragment)},m:function(e,o){ye(t,e,o),n=!0},p:g,i:function(e){n||(he(t.$$.fragment,e),n=!0)},o:function(e){ve(t.$$.fragment,e),n=!1},d:function(e){be(t,e)}};return ke("SvelteRegisterBlock",{block:o,id:Oa.name,type:"if",source:"(33:0) {#if devToolsExpanded}",ctx:e}),o}function Ca(e){var t,n,o,r,i=[Oa,Sa],c=[];function a(e,t){return e[0]?0:1}t=a(e),n=c[t]=i[t](e);var l={c:function(){n.c(),o=F()},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,n){c[t].m(e,n),Se(e,o,n),r=!0},p:function(e,r){var l=Object(s.a)(r,1)[0],u=t;(t=a(e))===u?c[t].p(e,l):(pe(),ve(c[u],1,1,(function(){c[u]=null})),de(),(n=c[t])?n.p(e,l):(n=c[t]=i[t](e)).c(),he(n,1),n.m(o.parentNode,o))},i:function(e){r||(he(n),r=!0)},o:function(e){ve(n),r=!1},d:function(e){c[t].d(e),e&&Oe(o)}};return ke("SvelteRegisterBlock",{block:l,id:Ca.name,type:"component",source:"",ctx:e}),l}function ja(e,t,n){var o=t.$$slots,r=void 0===o?{}:o;t.$$scope;Me("DevTools",r,[]);var i=t.view,s=!0;function c(){n(0,s=!0);var e=document&&document.querySelector("html");e&&(e.style.marginBottom="341px")}function a(){n(0,s=!1);var e=document&&document.querySelector("html");e&&(e.style.marginBottom=null)}X(Rr,{view:i}),G((function(){var e=document&&document.querySelector("html");s&&e&&(e.style.marginBottom="341px")}));var l=["view"];return Object.keys(t).forEach((function(e){~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn("<DevTools> was created with unknown prop '".concat(e,"'"))})),e.$$set=function(e){"view"in e&&n(3,i=e.view)},e.$capture_state=function(){return{onMount:G,setContext:X,EditorView:mr,FloatingBtn:Cr,FloatingDock:xa,APP_CONTEXT:Rr,view:i,devToolsExpanded:s,handleFloatingBtnClick:c,handleFloatingDockClose:a}},e.$inject_state=function(e){"view"in e&&n(3,i=e.view),"devToolsExpanded"in e&&n(0,s=e.devToolsExpanded)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,c,a,i]}var Na=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(f.a)(this,n),o=t.call(this,e),$e(Object(i.a)(o),e,ja,Ca,S,{view:3}),ke("SvelteRegisterComponent",{component:Object(i.a)(o),tagName:"DevTools",options:e,id:Ca.name});var r=o.$$.ctx,s=e.props||{};return void 0!==r[3]||"view"in s||console.warn("<DevTools> was created without expected prop 'view'"),o}return Object(p.a)(n,[{key:"view",get:function(){throw new Error("<DevTools>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")},set:function(e){throw new Error("<DevTools>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}]),n}(Ee),Da=!1;var Ma="__prosemirror-dev-toolkit__";function Ea(e){var t=function(){var e=document.querySelector("."+Ma);return e||((e=document.createElement("div")).className=Ma,document.body.appendChild(e)),e}();new Na({target:t,props:{view:e}}),function(e){Da=!0;var t=e.someProp("dispatchTransaction");setTimeout((function(){e.setProps({dispatchTransaction:function(n){t&&t(n),Da&&ra(n,e.state)}})}),1)}(e)}}).call(this,n(37))},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var o,r,i,s=n(0),c=n(42),a=n(57),l=n(8),u=n(18),f=n(85),p=n(17),d=n(19),h=n(4);function v(e){var t=e.className;return Object(h.jsx)(b,{className:t,children:Object(h.jsxs)(w,{children:[Object(h.jsx)($,{to:"/",exact:!0,activeClassName:"current",children:"Front page"}),Object(h.jsx)($,{to:"/dev-tools",exact:!0,activeClassName:"current",children:"Dev tools"})]})})}var m,g,y,b=d.a.div(o||(o=Object(u.a)(["\n  background: var(--color-primary);\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n"]))),w=d.a.nav(r||(r=Object(u.a)(["\n  align-items: center;\n  color: #fff;\n  display: flex;\n"]))),$=Object(d.a)(a.b)(i||(i=Object(u.a)(["\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n"]))),k=["component"],x=function(e){var t,n=e.component,o=Object(f.a)(e,k);return Object(h.jsx)(l.b,Object(p.a)(Object(p.a)({},o),{},{render:(t=n,function(e){return Object(h.jsxs)(S,{children:[Object(h.jsx)(v,Object(p.a)({},e)),Object(h.jsx)(O,{children:Object(h.jsx)(t,Object(p.a)({},e))})]})})}))},S=d.a.div(m||(m=Object(u.a)(["\n  min-height: 100vh;\n"]))),O=d.a.main(g||(g=Object(u.a)(["\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n"])));function C(e){var t=e.className;return Object(h.jsx)(j,{className:t,children:Object(h.jsx)("header",{children:Object(h.jsx)("h1",{children:"Example PM editor with prosemirror-dev-toolkit"})})})}var j=d.a.div(y||(y=Object(u.a)(["\n"]))),N=n(7),D=n(106),M=n.n(D),E=n(2),T=n(107),R=n(115),B=n(30),P=n(116),A=new(n(1).i)({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){var t=e;return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(e){var t=e.attrs;return["img",{src:t.src,alt:t.alt,title:t.title}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){var t=e;return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title},0]}},italic:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},bold:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}),_=n(46),z=function e(){Object(N.a)(this,e),this.values=[{1:[1,2,3]},{a:"hello"},1]},I=new E.e("example-plugin");function V(e,t){var n=new Map(e.changedNodesMap.entries());t.changedNodesMap.forEach((function(e,t){return n.set(t,e)}));var o=new Set(e.changedNodesTypesSet.values());return t.changedNodesTypesSet.forEach((function(e){return o.add(e)})),{tr:t.tr,changedNodesMap:n,changedNodesTypesSet:o}}var F=function(){return new E.d({key:I,state:{init:function(e,t){return{decorationSet:B.b.empty,exampleMap:new Map([["a",1],["b",{x:[1,2]}]]),exampleSet:new Set([document.createElement("div"),document.createElement("span")]),exampleClasses:[new z,new z],trackedTrs:[],joined:{tr:t.tr,changedNodesMap:new Map,changedNodesTypesSet:new Set}}},apply:function(e,t,n,o){var r=function(e,t){var n=new Map,o=new Set;return(e.steps||[]).forEach((function(e){var r=e.to,i=e.from,s=e.slice,c=s.size||0,a=i===r,l=!a&&0!==c,u=a?"insert":l?"replace":"delete";(l||!a&&0===c)&&t.nodesBetween(i,r,(function(e,t){if(!n.has(e))return n.set(e,{pos:t,operation:u}),o.add(e.type),!0})),(a||l)&&s.content.descendants((function(e,t){n.set(e,{pos:t,operation:u}),o.add(e.type)}))})),{tr:e,changedNodesMap:n,changedNodesTypesSet:o}}(e,n.doc);return e.getMeta("appendedTransaction")?Object(p.a)(Object(p.a)({},t),{},{trackedTrs:[].concat(Object(_.a)(t.trackedTrs),[r]),joined:V(t.joined,r)}):Object(p.a)(Object(p.a)({},t),{},{trackedTrs:[r],joined:r})}},props:{decorations:function(e){return this.getState(e).decorationSet}}})};n(240),n(241),n(242);function L(e){var t=e.className,n=void 0===t?"":t,o=Object(s.useRef)(null),r=Object(s.useRef)(null);function i(t){if(r.current){var n=r.current.state.apply(t);r.current.updateState(n),e.onEdit&&e.onEdit(n)}}return Object(s.useLayoutEffect)((function(){var t=E.b.create({schema:A,plugins:Object(P.a)({schema:A}).concat(F())}),n=o.current;return n&&(r.current=function(e,t){var n=new B.c({mount:e},{state:t,dispatchTransaction:i});window&&(window.editorView=n);return n}(n,t),e.onEditorReady&&(null===e||void 0===e||e.onEditorReady(r.current))),function(){var e;null===(e=r.current)||void 0===e||e.destroy()}}),[]),Object(h.jsx)("div",{id:"example-editor",ref:o,className:n})}var q,J=function e(t){var n=this;if(Object(N.a)(this,e),this.view=void 0,this.currentEditorState=void 0,this.localStorageKey=void 0,this.setEditorView=function(e){if(n.view=e,n.currentEditorState){var t=E.b.fromJSON({schema:n.view.state.schema,plugins:n.view.state.plugins},n.currentEditorState);n.view.updateState(t)}},this.syncCurrentEditorState=function(){var e=n.view.state.toJSON();localStorage.setItem(n.localStorageKey,JSON.stringify(e))},this.localStorageKey=t,"undefined"!==typeof window){var o=localStorage.getItem(this.localStorageKey);if(o&&null!==o&&o.length>0){var r=JSON.parse(o);this.currentEditorState=r}}};function K(e){var t=e.useDevTools,n=Object(s.useMemo)((function(){return new J(t?"dev-tools":"dev-toolkit")}),[]),o=Object(s.useMemo)((function(){return M()(n.syncCurrentEditorState,250)}),[]);return Object(h.jsx)(L,{onEdit:function(){o()},onEditorReady:function(e){n.setEditorView(e),t?Object(R.a)(e):Object(T.a)(e)}})}function H(){return Object(h.jsxs)(U,{children:[Object(h.jsx)(C,{}),Object(h.jsx)(K,{})]})}var W,U=d.a.div(q||(q=Object(u.a)(["\n\n"])));function G(){return Object(h.jsxs)(X,{children:[Object(h.jsx)(C,{}),Object(h.jsx)(K,{useDevTools:!0})]})}var X=d.a.div(W||(W=Object(u.a)(["\n\n"]))),Y=function(){return Object(h.jsx)(a.a,{basename:"/prosemirror-dev-toolkit",children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(x,{exact:!0,path:"/",component:H}),Object(h.jsx)(x,{exact:!0,path:"/dev-tools",component:G}),Object(h.jsx)(l.a,{to:"/"})]})})};n(243);Object(c.render)(Object(h.jsx)(Y,{}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.f311c23d.chunk.js.map